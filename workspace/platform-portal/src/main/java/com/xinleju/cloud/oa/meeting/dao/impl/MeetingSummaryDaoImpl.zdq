package com.xinleju.cloud.oa.meeting.dao.impl;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.apache.ibatis.session.SqlSession;
import org.springframework.stereotype.Repository;

import com.xinleju.platform.base.dao.impl.BaseDaoImpl;
import com.xinleju.platform.base.utils.Page;
import com.xinleju.cloud.oa.content.util.SqlStatementUtil;
import com.xinleju.cloud.oa.meeting.dao.MeetingSummaryDao;
import com.xinleju.cloud.oa.meeting.entity.MeetingSummary;

/**
 * @author admin
 * 
 * 
 */

@Repository
public class MeetingSummaryDaoImpl extends BaseDaoImpl<String,MeetingSummary> implements MeetingSummaryDao{

	public MeetingSummaryDaoImpl() {
		super();
	}

	 @Override
	    public Page queryObjectsByPage(Map map) {
	        map.put("delflag", false);
	        Page page = new Page();
	        page.setLimit((Integer) map.get("limit"));
	        page.setStart((Integer) map.get("start"));

	        //设置总条数查询条件
	        Map countMap = new HashMap(map.size());
	        countMap.putAll(map);

	        //查询数据
	        SqlSession sqlSession = this.getSqlSession();
	        String pageSqlStatment = SqlStatementUtil.getPageSqlStatment(map, MeetingSummary.class);
	        List<MeetingSummary> list = sqlSession.selectList(MeetingSummary.class.getName() + ".queryObjectsByPage", pageSqlStatment);
	        page.setList(list);

	        //查询总数
	        String pageCountSqlStatment = SqlStatementUtil.getPageCountSqlStatment(countMap, MeetingSummary.class);
	        Integer count = sqlSession.selectOne(MeetingSummary.class.getName() + ".queryObjectsCountByPage", pageCountSqlStatment);
	        page.setTotal(count);
	        return page;
	    }

	@Override
	public List<Map<String, Object>> getMeetingSummaryPage(Map map) {
		// TODO Auto-generated method stub
		return  getSqlSession().selectList("com.xinleju.cloud.oa.meeting.entity.MeetingSummary.getMeetingSummaryPage", map);
	}


	@Override
	public Integer getMeetingSummaryCount(Map map) {
		// TODO Auto-generated method stub
		return  getSqlSession().selectOne("com.xinleju.cloud.oa.meeting.entity.MeetingSummary.getMeetingSummaryCount", map);
	}
	
	
	
}
