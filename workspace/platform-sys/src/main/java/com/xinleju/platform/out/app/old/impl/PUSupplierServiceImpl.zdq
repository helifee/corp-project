package com.xinleju.platform.out.app.old.impl;

import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;

import com.xinleju.erp.data.cache.api.PUSupplierService;
import com.xinleju.erp.data.cache.dto.SupplierAccountDTO;
import com.xinleju.erp.data.cache.dto.SupplierCategoryDTO;
import com.xinleju.erp.data.cache.dto.SupplierInfoDTO;
import com.xinleju.erp.flow.flowutils.bean.FlowResult;
import com.xinleju.platform.base.utils.IDGenerator;

public class PUSupplierServiceImpl implements PUSupplierService {

	@Autowired
	private JdbcTemplate jdbcTemplate;
	
	SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd H:m:s.SSS");
	
	@Override
	public FlowResult<String> saveSupplierCategoryDTO(
			SupplierCategoryDTO supplierCategoryDTO) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public FlowResult<Boolean> deleteSupplierCategoryDTO(
			String supplierCategoryId) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public FlowResult<Boolean> deleteSupplierCategoryDTOs(
			String[] supplierCategoryIds) {
		// TODO Auto-generated method stub
		return null;
	}

	/**
	 * 保存供方基本信息
	 * @param supplierInfoDTO
	 * @return
	 */
	@Override
	public FlowResult<String> saveSupplierInfoDTO(
			SupplierInfoDTO supplierInfoDTO) {
		FlowResult<String> result=new FlowResult<>();
		String  id = supplierInfoDTO.getId();
		String name = supplierInfoDTO.getName();
		String code = supplierInfoDTO.getCode();
		String status = supplierInfoDTO.getStatus()+"";
		String companyId = supplierInfoDTO.getCompanyIds();
		String provinceId = supplierInfoDTO.getProvince();
		String cityId = supplierInfoDTO.getCity();
		String representative = supplierInfoDTO.getLegalName();
		String address = supplierInfoDTO.getAddress();
		String work_phone = supplierInfoDTO.getPhoneNum(); 
		String registration_date = format.format(supplierInfoDTO.getRegisterDate());
		String license = supplierInfoDTO.getRegisterNum();
		String phone = supplierInfoDTO.getContactNum();
		String relation_person = supplierInfoDTO.getContactName();
		String remark = supplierInfoDTO.getStatement();
		
		String sql="insert into pt_sys_base_supplier " +
				"(id,name,code,STATUS,company_id,province_id,city_id,representative," +
				"address,work_phone,registration_date,license,phone,relation_person,remark) " +
				"VALUES " +
				"('"+id+"','"+name+"','"+code+"','"+status+"','"+companyId+"'," +
				"'"+provinceId+"','"+cityId+"','"+representative+"'," +
				"'"+address+"','"+work_phone+"','"+registration_date+"','"+license+"','"+phone+"','"+relation_person+"','"+remark+"')";
		int i = jdbcTemplate.update(sql);
		result.setResult(id);
		return result;
	}

	@Override
	public FlowResult<Boolean> deleteSupplierInfoDTO(String supplierInfoId) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public FlowResult<Boolean> deleteSupplierInfoDTOs(String[] supplierInfoIds) {
		// TODO Auto-generated method stub
		return null;
	}

	/**
	 * 保存供方信息账户信息
	 * @param supplierAccountDTODTOList
	 * @return
	 */
	@Override
	public FlowResult<List<String>> saveSupplierAccountDTO(
			List<SupplierAccountDTO> supplierAccountDTODTOList) {
		FlowResult<List<String>> result=new FlowResult<>();
		List<String> idList = new ArrayList<String>();
		for(SupplierAccountDTO supplierAccountDTO:supplierAccountDTODTOList){
			String  id = IDGenerator.getUUID();
			String supplierId = supplierAccountDTO.getOwnerId();
			String bankName = supplierAccountDTO.getBankName();
			String bankCode = supplierAccountDTO.getAccount();
			String provinceId = supplierAccountDTO.getProvince();
			String cityId = supplierAccountDTO.getCity();
			String address = supplierAccountDTO.getAddress();
			
			String sql="insert into pt_sys_base_supplier_accont " +
					"(id,supplier_id,bank_name,bank_code,province_id,city_id,address) " +
					"VALUES " +
					"('"+id+"','"+supplierId+"','"+bankName+"','"+bankCode+"','"+provinceId+"','"+cityId+"'," +
					"'"+address+"')";
			int i = jdbcTemplate.update(sql);
			idList.add(id);
		}
		
		result.setResult(idList);
		return result;
	}

	@Override
	public FlowResult<Boolean> deleteSupplierAccountDTO(String supplierAccountId) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public FlowResult<Boolean> deleteSupplierAccountDTOs(
			String[] supplierAccountIds) {
		// TODO Auto-generated method stub
		return null;
	}
	
	
	
}
