package com.celartem.factory;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import flex.messaging.FactoryInstance;
import flex.messaging.FlexFactory;
import flex.messaging.config.ConfigMap;

public class FlexFactoryImpl implements FlexFactory {
    private Log log = LogFactory.getLog(getClass());

    /*override interface method*/
    public void initialize(String id, ConfigMap configMap) {
        System.out.println("1---flex工厂实现类重写的方法initialize"); 
    }

    /*override interface method*/
    public FactoryInstance createFactoryInstance(String id, ConfigMap properties) {
        System.out.println("2---flex工厂实现类重写的方法createFactoryInstance");
        log.info("Create FactoryInstance.");
        SpringFactoryInstance instance = new SpringFactoryInstance(this, id, properties);
        instance.setSource(properties.getPropertyAsString(SOURCE, instance.getId()));
        return instance;
    }

    /*override interface method*/
    public Object lookup(FactoryInstance instanceInfo) {
        System.out.println("4---flex工厂实现类重写的方法lookup");
        log.info("Lookup service object.");
        return instanceInfo.lookup();
    }

}

