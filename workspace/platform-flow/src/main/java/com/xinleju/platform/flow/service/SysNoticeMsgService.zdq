package com.xinleju.platform.flow.service;

import java.util.List;
import java.util.Map;

import com.xinleju.platform.base.service.BaseService;
import com.xinleju.platform.base.utils.Page;
import com.xinleju.platform.flow.dto.SysNoticeMsgDto;
import com.xinleju.platform.flow.dto.SysNoticeMsgStatDto;
import com.xinleju.platform.flow.dto.UserDto;
import com.xinleju.platform.flow.entity.SysNoticeMsg;

/**
 * @author admin
 * 
 * 
 */

public interface SysNoticeMsgService extends  BaseService <String,SysNoticeMsg>{

	List<SysNoticeMsgDto> queryTwoSumData(Map<String, String> map);

	List<SysNoticeMsg> queryHaveDoneList(Map<String, String> map);

	/**
	 * 改变消息状态
	 * 
	 * @param msgId
	 * @return
	 */
	boolean completeMessage(String msgId, String status);

	List<SysNoticeMsg> queryDBDYList(Map<String, String> map);

	int updateStatusOfNoticeMsg(Map<String, Object> map) throws Exception;

	List<SysNoticeMsg> searchDataByKeyword(Map<String, String> map);

	/**
	 * 创建流程消息
	 * 
	 * @param user		:消息接收者
	 * @param msgType	：消息类型
	 * @param msgTitle	：消息标题
	 * @param url		：消息URL
	 * @return
	 */
	SysNoticeMsg newFlowMsg(UserDto user, String msgType, String msgTitle, String url, String mobileUrl, String mobileParam);

	/**
	 * 将指定消息状态置为打开状态
	 * 
	 * @param messageId
	 */
	boolean setMessageOpened(String messageId);

	int deleteOpTypeDataByParamMap(Map<String, Object> map);

	Page pageQueryByParamMap(Map<String, Object> map, Integer start, Integer limit) throws Exception;

	int updateStatusOfNoticeMsgByCurrentUser(Map<String, Object> map);

	void saveAndNotifyOthers(SysNoticeMsg msg) throws Exception;
	
    void batchSaveAndNotifyOthers(List<SysNoticeMsg> messages) throws Exception;

	SysNoticeMsgDto queryTotalStatData(Map<String, String> map);

	SysNoticeMsgStatDto queryFirstTypeStatData(Map<String, String> map);

	int doSendWeixinMsgAction( ) throws Exception;
}
