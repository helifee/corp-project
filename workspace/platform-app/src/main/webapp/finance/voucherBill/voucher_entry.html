<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>凭证模板与输出</title>
<meta
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
	name="viewport"/>

<script type="text/javascript" src="../../common/common.css.js"></script>
<!-- <link rel="stylesheet" href="fl_list.css"> -->
	<style>
	   .col9width {width: 74%;padding: 0;float: right;}
       .col3width {width: 25%;padding: 0;}
	    .l_title {height: 50px;line-height: 50px;border-bottom: 1px solid #E1E1E1;}
	    .l_title_font {font-weight: bold;margin-right: 10px;}
	    .l_title_font img {margin: 0 1px 1px 10px;}
	    .l_input {display: inline;width: 41%;}
	    .l_search {width: 28px;background-color: #46A7FF;text-align: center;color: #fff;border-radius: 4px;
        margin: 0 0 0px 3px;}
		.tabContainer{height:50px; background-color:#F5F5F5;border: 1px solid #F1F1F1;padding:10px}
		.btn-sm.tabbtn{border:1px solid #ddd; background-color: transparent; color:#46A7FF;height:28px;padding: 3px 10px;}
		.btn-sm.tabbtn:hover{background-color: #fff}
		.btn-sm.tabbtn.active{background-color: #46A7FF;color:#fff}
		.tabcontent{display:none}
/*		.tabs{border:1px solid #F1F1F1;border-top:0}*/
		.table-bordered>tbody>tr>td{width:auto}
		.form-control.selWidth{    width: 150px;
			margin-top: 10px;
			display: inline-block;
			float: left;}
		.span_t{
			float:left;
			display:block;
			margin-right: 10px;
		}
		.radio_group{
			float:left;
		}
		.time_1{
			float:left;
			margin-top: 10px;
			margin-left: 3px;
		}
		.glyphicon.addLeft{
			left:-14px;
		}
		.con-tit{
			height: 50px;
			line-height: 45px;
			text-indent: 10px;
			border: 1px solid #F1F1F1;
			background-color: #fff;
			padding-bottom: 5px;
		}
		.btn-dim{
			text-align: center;
		}
		.btn-dim i{
			margin-left: 0;
			color: #fff;
		}
		.con-tit button.btn-dim:hover{
			background: #46A7FF;
		}
		.con-tit button.btn-dim{
			padding: 0;
			margin-top: 10px;
			margin-left: 10px;
		}
		.radio_group input{
			vertical-align: middle;
			margin-right: 3px;
		}
		.ui-jqgrid-bdiv{border-bottom: 1px solid #eee}
		.lineH28{
			line-height:28px;
		}
	</style>
</head>

<body class="hold-transition skin-blue sidebar-mini">
	<header class="container-fluid xj-form-header">
    <div class="row clearfix">
        <div class="col-md-1 col-sm-2 xj-index-logo">
            <img src="../../common/img/logo.png" alt="巨洲云" />
        </div>
        <div id="editTitle" class="col-md-8 col-sm-6 col-xs-6  xj-form-title" id="supplierTitle">凭证输出编辑</div>
        
    </div>
	</header>
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-11 col-sm-12 jz">
			   <div class="row clearfix">
			   	  <div class="col-md-11 col-sm-12 col-mar-auto">
			   	     	<div class="tabContainer mt50">
			   	     		<button class="btn btn-sm tabbtn active">凭证信息</button>
			   	     		<button class="btn btn-sm tabbtn">相关单据</button>
			   	     	</div>
			   	     	<div class="tabs">
			   	     		<div class="tabcontent" style="display:block;">
			   	     			<div class="">
			   	     				<button  type="button" class="btn btn-sm"  onclick="javascript:append()">新增</button>
		                            <button  type="button" class="btn btn-sm"  onclick="javascript:editVoucher()">修改</button>
					                <button  type="button" class="btn btn-sm"  onclick="javascript:deleteVhoucherEntry()">删除</button>
						            <button  type="button" class="btn btn-sm"  onclick="javascript:editVoucherDate()">修改制单日期</button>
					             	
				             	</div>
	   	     					<div class="con-tit expand-search" style="height:auto">
	   	     						<form class="form-horizontal"  id="voucherBillForm">
					                    <input type="hidden"  class="form-control" name="id" id="voucherBillId"/>
					                    <!-- <input type="hidden"  class="form-control" name="enterDate" id="enterDateId"/> -->
					                    <table class="table table-bordered">
					                        <tbody>
					                        <tr class="form-tr">
					                            <td><label>凭证字:</label><span id="word"></span>
					                            </td>
					                            <td><label>凭证号:</label><span id="voucherNo"></span>
					                            </td>
					                            <td><label>制单人:</label><span id="enterName"></span>
					                            </td>
					                        </tr>
					                        <tr class="form-tr">
					                        	<td class="lineH28"><label class="pull-left" id="enterDataLable">制单日期 :</label><span id="enterDate"></span>
						                        	<div class='input-group date pull-left' id='datetimepicker5' style="display:none">
								   	     				<input name="enterDate" id="enterDateId" type='text' class="myDate form-control" />
								   	     				<span class="input-group-addon">
								   	     				<span class="glyphicon glyphicon-calendar"></span></span>
								   	     			</div>
					                            </td>
					                        	<td><label>输出日期 :</label><span id="exportDate"></span>
					                            </td>
					                        </tr>
					                        <tr class="form-tr">
					                            <td colspan="3"><label>失败原因 :</label><span id="errorCause"></span>
					                            </td>
					                        </tr>
					                        </tbody>
					                    </table>
					                </form>
			   	     			</div>
			   	     			<div class="con-table">
			   	     				<div class="xj-main-grid grid-container">
			   	     					<table id="voucherEntryList" constraint-layout="true"></table>
			   	     					<!-- <div id="voucherEntryPager"></div> -->
			   	     				</div>
			   	     			</div>
			   	     			<div class="con-tit">
			   	     				<span class="tbft">合计金额：<span id="_amount"></span></span> 
							    	<span class="tbft">借方合计：<span id="_debitAmount"></span> </span>
							    	<span class="tbft">贷方合计：<span id="_creditAmount"></span> </span>
			   	     			</div>
			   	     		</div> 
			   	     	    <!-- 第二个tabContent -->
			   	     		<div class="tabcontent" style="display:none">
					   	    	<div class="con-table">
						   	     	<div class="xj-main-grid grid-container">
						   	     		<table id="voucherBillRelationList" constraint-layout="true"></table>
						   	     		<!-- <div id="voucherBillRelationPager"></div> -->
						   	     	</div>
					   	     	</div>
			   	     	</div>

			   	   </div>
			   	 	
			   	 </div>
			   	
			   </div>

			</div>
		</div>
	</div>
	<!--放分录modal-->
	<div class="modal fade" id="templateEntryModal" tabindex="-1" aria-hidden="true" data-backdrop="static">
	    <div class="modal-dialog">
	        <div class="modal-content">
	            <div class="modal-header">
	                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	                <h5 class="modal-title templateEntryModal-title">凭证模板分录-新增</h5>
	            </div>
	            <div class="modal-body">
	                <div id="entryModalBody"></div>
	            <div class="modal-footer">
	                <button type="button" class="btn btn-sm btnColor" data-dismiss="modal">关闭</button>
	                <button type="button" class="btn btn-sm btnColor" onclick="save_form();">确认</button>
	            </div>
	        </div><!-- /.modal-content -->
	    </div><!-- /.modal-dialog -->
	</div><!-- /.modal -->
	</div>
	
	<div class="modal fade" id="add" tabindex="-1" role="dialog" aria-labelledby="add">
	    <div class="modal-dialog flow-modal" role="document">
	        <div class="modal-content">
	            <div class="modal-header">
	                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	                <h5 class="modal-title">编辑</h5>
	            </div>
	            <div class="modal-body">
		            <div class="con-table">
   	     				<div class="xj-main-grid grid-container">
   	     					<table id="assMapingList" constraint-layout="true"></table>
   	     				</div>
   	     			</div>
	            </div>
	            <div class="modal-footer">
	                <button type="button" class="btn btn-sm btnColor" data-dismiss="modal">关闭</button>
	                <button type="button" class="btn btn-sm btnColor" id="saveAssBtn">确定</button>
	            </div>
	        </div><!-- /.modal-content -->
	    </div><!-- /.modal-dialog -->
	</div><!-- /.modal -->
	<!--分录modal结束-->
	<script type="text/javascript" src="../../common/common.js"></script>
	<script type="text/javascript" src="voucher_entry.js?"></script>
	<script>
		$(function() {
			//切换标签
			switchPage();
			resizeHeight();

		});
		/* $(window).resize(function(){
			resizeHeight();
		}); */
		function resizeHeight(){
			//左侧  头部底部为60px  title类 为50px
			var w_h = $(window).height();
			//右侧table
			$('.tabs').height(w_h - $('.tabContainer').outerHeight()-20+'px' );
			$(".grid-box").height((w_h-$('.l_title').height()-20)+"px");
			
			
		}
		/**
		 * tab页切换
		 */
		function switchPage() {
			$('.tabbtn').click(function() {
				$('.tabcontent').css('display','none');
				var index = $(this).index();
				$('.tabbtn').removeClass('active');
				$(this).addClass('active');
				var tabitem = $('.tabcontent')[index];
				$(tabitem).css('display','block');
			})
		}
		$('.date').datetimepicker({
			language: 'zh-CN', //语言
			format: 'yyyy-mm-dd',//显示格式
			minView: "month",//设置只显示到月份
			initialDate: new Date(),//初始化当前日期
			autoclose: true,//选中自动关闭
			todayBtn: true//显示今日按钮
		}).on('changeDate',function(ev){
            changeDate();
        }); ;
	</script>
</body>
</html>
