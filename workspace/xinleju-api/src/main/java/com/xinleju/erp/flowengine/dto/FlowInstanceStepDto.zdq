package com.xinleju.erp.flowengine.dto;

import java.util.ArrayList;

import java.util.Date;
import java.util.List;

import org.apache.commons.collections.CollectionUtils;

public class FlowInstanceStepDto {
	// 主键
	private String guid;
	// 环节模型ID
	private Long acId;
	// 实例ID
	private String fiId;
	// 模板ID
	private Long flId;
	// 显示环节名称
	private String displayName;
	// 激活时间
	private String activitiDate;
	// 通过时间
	private Date passTime;
	private Date createTime;
	// 工作方式[串行,并行,竞争]
	private String workPattern;
	// 是否自动活动
	private Integer isAuto;
	// 流程原始参与人配置
	private String originParticipantsList;
	// 流程原始抄送人配置
	private String originCsList;
	// 抄送人列表
	private String csListUserIds;
	// 状态
	private Integer status;
	// 是否临时环节
	private String isTempStep;
	// 说明
	private String remark;
	// 显示顺序
	private String displaySort;
	// 审批类型
	private String approvalType;
	// 逾期小时数
	private String overdueHours;
	// 逾期处理方式
	private String overdueProcessMode;
	// 分支结束标识
	private String branchEndFlg;
	// 发起人重复时，是否跳过
	private String isSkip;
	// 是否为开始节点
	private Integer isStart;
	// 是否为结束节点
	private Integer isEnd;
	// 聚合策略
	private String joinStrategy;
	// 分之策略
	private String forkStrategy;
	
	private List<FlowInstanceStepWorkDto> lstFlowInstanceStepWork = new ArrayList<FlowInstanceStepWorkDto>();
	/**
	 * 排序
	 */
	private String sort;

	public String getGuid() {
		return guid;
	}

	public void setGuid(String guid) {
		this.guid = guid;
	}

	public String getFiId() {
		return fiId;
	}

	public void setFiId(String fiId) {
		this.fiId = fiId;
	}

	public Long getFlId() {
		return flId;
	}

	public void setFlId(Long flId) {
		this.flId = flId;
	}

	public void setAcId(Long acId) {
		this.acId = acId;
	}

	public String getDisplayName() {
		return displayName;
	}

	public void setDisplayName(String displayName) {
		this.displayName = displayName;
	}

	public String getWorkPattern() {
		return workPattern;
	}

	public void setWorkPattern(String workPattern) {
		this.workPattern = workPattern;
	}

	public Integer getIsAuto() {
		return isAuto;
	}

	public void setIsAuto(Integer isAuto) {
		this.isAuto = isAuto;
	}

	public Long getAcId() {
		return acId;
	}

	public String getOriginParticipantsList() {
		return originParticipantsList;
	}

	public void setOriginParticipantsList(String originParticipantsList) {
		this.originParticipantsList = originParticipantsList;
	}

	public String getOriginCsList() {
		return originCsList;
	}

	public void setOriginCsList(String originCsList) {
		this.originCsList = originCsList;
	}

	public String getCsListUserIds() {
		return csListUserIds;
	}

	public void setCsListUserIds(String csListUserIds) {
		this.csListUserIds = csListUserIds;
	}

	public Integer getStatus() {
		return status;
	}

	public void setStatus(Integer status) {
		this.status = status;
	}

	public String getIsTempStep() {
		return isTempStep;
	}

	public void setIsTempStep(String isTempStep) {
		this.isTempStep = isTempStep;
	}

	public String getRemark() {
		return remark;
	}

	public void setRemark(String remark) {
		this.remark = remark;
	}

	public String getDisplaySort() {
		return displaySort;
	}

	public void setDisplaySort(String displaySort) {
		this.displaySort = displaySort;
	}

	public String getApprovalType() {
		return approvalType;
	}

	public void setApprovalType(String approvalType) {
		this.approvalType = approvalType;
	}

	public String getOverdueHours() {
		return overdueHours;
	}

	public void setOverdueHours(String overdueHours) {
		this.overdueHours = overdueHours;
	}

	public String getOverdueProcessMode() {
		return overdueProcessMode;
	}

	public void setOverdueProcessMode(String overdueProcessMode) {
		this.overdueProcessMode = overdueProcessMode;
	}

	public String getBranchEndFlg() {
		return branchEndFlg;
	}

	public void setBranchEndFlg(String branchEndFlg) {
		this.branchEndFlg = branchEndFlg;
	}

	public String getIsSkip() {
		return isSkip;
	}

	public void setIsSkip(String isSkip) {
		this.isSkip = isSkip;
	}

	public String getJoinStrategy() {
		return joinStrategy;
	}

	public void setJoinStrategy(String joinStrategy) {
		this.joinStrategy = joinStrategy;
	}

	public String getForkStrategy() {
		return forkStrategy;
	}

	public void setForkStrategy(String forkStrategy) {
		this.forkStrategy = forkStrategy;
	}

	public String getActivitiDate() {
		return activitiDate;
	}

	public void setActivitiDate(String activitiDate) {
		this.activitiDate = activitiDate;
	}

	public String getSort() {
		return sort;
	}

	public void setSort(String sort) {
		this.sort = sort;
	}
	
	private int totalCount;
	
	public int getTotalCount() {
		
		if(CollectionUtils.isEmpty(this.lstFlowInstanceStepWork)){
			return totalCount;
		}
		for(FlowInstanceStepWorkDto flowInstanceStepWork:this.lstFlowInstanceStepWork){
			if(flowInstanceStepWork.getTotalCount() == 0){
				totalCount +=1;
				continue;
			}
			totalCount += flowInstanceStepWork.getTotalCount();
		}
		return totalCount;
	}

	public Date getPassTime() {
		return passTime;
	}

	public void setPassTime(Date passTime) {
		this.passTime = passTime;
	}

	public Date getCreateTime() {
		return createTime;
	}

	public void setCreateTime(Date createTime) {
		this.createTime = createTime;
	}

	public Integer getIsStart() {
		return isStart;
	}

	public void setIsStart(Integer isStart) {
		this.isStart = isStart;
	}

	public Integer getIsEnd() {
		return isEnd;
	}

	public void setIsEnd(Integer isEnd) {
		this.isEnd = isEnd;
	}

	public List<FlowInstanceStepWorkDto> getLstFlowInstanceStepWork() {
		return lstFlowInstanceStepWork;
	}

	public void setLstFlowInstanceStepWork(List<FlowInstanceStepWorkDto> lstFlowInstanceStepWork) {
		this.lstFlowInstanceStepWork = lstFlowInstanceStepWork;
	}

	@Override
	public int hashCode() {
		final int prime = 31;
		int result = 1;
		result = prime * result + ((guid == null) ? 0 : guid.hashCode());
		return result;
	}

	@Override
	public boolean equals(Object obj) {
		if (this == obj)
			return true;
		if (obj == null)
			return false;
		if (getClass() != obj.getClass())
			return false;
		FlowInstanceStepDto other = (FlowInstanceStepDto) obj;
		if (guid == null) {
			if (other.guid != null)
				return false;
		} else if (!guid.equals(other.guid))
			return false;
		return true;
	}
}
