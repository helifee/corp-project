package com.xinleju.erp.test;


import java.util.Map;

import org.junit.Before;
import org.junit.Test;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import com.alibaba.fastjson.JSON;
import com.xinleju.erp.flow.flowutils.bean.FlowResult;
import com.xinleju.erp.flow.service.api.extend.BaseAPI;


public class BaseAPIServiceTest {

	  private BaseAPI baseAPIService;
	
	  @Before
	  public void beforeClass() {
		  ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(new String[] {"test-dubbo.xml"});
	      context.start();
	      baseAPIService = (BaseAPI)context.getBean("baseAPIService");
	  }

	  @Test
	  public void getCurrentFlowUsers(){
		  
		  String[] flowCodes = new String[]{"4684398"};
		  String[] bizIds = new String[]{"84361","84331","84332","84358","84389"};
		  
		  FlowResult<Map<String, String>> fr = baseAPIService.getCurrentFlowUsers(flowCodes, bizIds);
		  
		  System.out.println("fr" + JSON.toJSONString(fr.getResult()));
		  
		  flowCodes = new String[]{"4572842"};
		  bizIds = new String[]{"226","229"};
		  
		  FlowResult<Map<String, String>> fr2 = baseAPIService.getCurrentFlowUsers(flowCodes, bizIds);
		  System.out.println("fr2" + JSON.toJSONString(fr2.getResult()));
		  
		  /*flowCodes = new String[]{"8214265"};
		  bizIds = new String[]{"2027"};
		  
		  FlowResult<Map<String, String>> fr3 = baseAPIService.getCurrentFlowUsers(flowCodes, bizIds);
		  System.out.println("fr3" + JSON.toJSONString(fr3.getResult()));*/
	  }
}
