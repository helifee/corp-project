package com.xinleju.erp.flowengine.models;

import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.OneToMany;
import javax.persistence.Table;
import javax.persistence.Transient;

@Entity
@Table(name="flow_instance_step")
public class FlowInstanceStep implements Comparable<FlowInstanceStep>{
	
	//主键
	@Id
	private String guid;
	//环节模型ID
	private Long acId;
	//实例ID
	private String fiId;
	//模板ID
	private Long flId;
	//显示环节名称
	private String displayName;
	//激活时间
	private Date activitiDate;
	//通过时间
	private Date passTime;
	//创建时间
	private Date createTime;
	//工作方式[串行,并行,竞争]
	private String workPattern;
	//是否自动活动
	private Integer isAuto;
    //流程原始参与人配置
	private String originParticipantsList;
    //流程原始抄送人配置
	private String originCsList;
	//抄送人列表
	private String csListUserIds;
	//状态
	private Integer status;
	//是否临时环节
	private String isTempStep;
	//说明
	private String remark;
	//显示顺序
	private String displaySort;
	//审批类型
	private String approvalType;
	//审批类型code
	private String approvalCode;
	//逾期小时数
	private String overdueHours;
	//逾期处理方式
	private String overdueProcessMode;
	//分支结束标识
	private String branchEndFlg;
	//发起人重复时，是否跳过
	private String isSkip;
	//是否为开始节点
	private Integer isStart;
	//是否为结束节点
	private Integer isEnd;
	//聚合策略
	private String joinStrategy;
	//分之策略
	private String  forkStrategy;
	
	//重复参与人，跳过 0 ，不跳过，1后置审批，3连续后置审批
	private Integer doWhenRepeatInSteps;
	//参与人岗位为空，1挂起，2跳过
	private Integer doWhenNoUsersAtwork;
	
	
	/**
	 * 1可以修改,2不可修改
	 * 发起人选择策略
	 */
	private Integer participantsSelectStrategy;
	/**
	 * 选择的参与人
	 */
	private String selectParticipants;
	
	@OneToMany
    @JoinColumn(name = "step_id",updatable = false, insertable = false )
	private List<FlowInstanceStepWork> lstFlowInstanceStepWork =new ArrayList<FlowInstanceStepWork>();

    @OneToMany
    @JoinColumn(name = "step_id",updatable = false, insertable = false)
	private List<FlowInstanceStepRelation> lstFlowInstanceStepRelation =new ArrayList<FlowInstanceStepRelation>();
	@Transient
	private Integer lth;
	
	/**
	 * 排序
	 */
	private Long sort;
	/**
	 * 时间戳
	 */
	private Long num;
	
	
	

	public String getGuid() {
		return guid;
	}

	public void setGuid(String guid) {
		this.guid = guid;
	}

	public String getFiId() {
		return fiId;
	}

	public void setFiId(String fiId) {
		this.fiId = fiId;
	}

	public Long getFlId() {
		return flId;
	}

	public void setFlId(Long flId) {
		this.flId = flId;
	}

	public void setAcId(Long acId) {
		this.acId = acId;
	}

	public String getDisplayName() {
		return displayName;
	}

	public void setDisplayName(String displayName) {
		this.displayName = displayName;
	}

	public String getWorkPattern() {
		return workPattern;
	}

	public void setWorkPattern(String workPattern) {
		this.workPattern = workPattern;
	}

	

	public Integer getIsAuto() {
		return isAuto;
	}

	public void setIsAuto(Integer isAuto) {
		this.isAuto = isAuto;
	}

	public Long getAcId() {
		return acId;
	}

	public String getOriginParticipantsList() {
		return originParticipantsList;
	}

	public void setOriginParticipantsList(String originParticipantsList) {
		this.originParticipantsList = originParticipantsList;
	}

	public String getOriginCsList() {
		return originCsList;
	}

	public void setOriginCsList(String originCsList) {
		this.originCsList = originCsList;
	}

	public String getCsListUserIds() {
		return csListUserIds;
	}

	public void setCsListUserIds(String csListUserIds) {
		this.csListUserIds = csListUserIds;
	}

	public Integer getStatus() {
		return status;
	}

	public void setStatus(Integer status) {
		this.status = status;
	}

	public String getIsTempStep() {
		return isTempStep;
	}

	public void setIsTempStep(String isTempStep) {
		this.isTempStep = isTempStep;
	}

	public String getRemark() {
		return remark;
	}

	public void setRemark(String remark) {
		this.remark = remark;
	}

	public String getDisplaySort() {
		return displaySort;
	}

	public void setDisplaySort(String displaySort) {
		this.displaySort = displaySort;
	}

	public String getApprovalType() {
		return approvalType;
	}

	public void setApprovalType(String approvalType) {
		this.approvalType = approvalType;
	}

	public String getOverdueHours() {
		return overdueHours;
	}

	public void setOverdueHours(String overdueHours) {
		this.overdueHours = overdueHours;
	}

	public String getOverdueProcessMode() {
		return overdueProcessMode;
	}

	public void setOverdueProcessMode(String overdueProcessMode) {
		this.overdueProcessMode = overdueProcessMode;
	}

	public String getBranchEndFlg() {
		return branchEndFlg;
	}

	public void setBranchEndFlg(String branchEndFlg) {
		this.branchEndFlg = branchEndFlg;
	}

	public String getIsSkip() {
		return isSkip;
	}

	public void setIsSkip(String isSkip) {
		this.isSkip = isSkip;
	}

	public String getJoinStrategy() {
		return joinStrategy;
	}

	public void setJoinStrategy(String joinStrategy) {
		this.joinStrategy = joinStrategy;
	}

	public String getForkStrategy() {
		return forkStrategy;
	}

	public void setForkStrategy(String forkStrategy) {
		this.forkStrategy = forkStrategy;
	}

	

	public Date getActivitiDate() {
		return activitiDate;
	}

	public void setActivitiDate(Date activitiDate) {
		this.activitiDate = activitiDate;
	}



	public Long getSort() {
		return sort;
	}

	public void setSort(Long sort) {
		this.sort = sort;
	}

	public List<FlowInstanceStepWork> getLstFlowInstanceStepWork() {
		return lstFlowInstanceStepWork;
	}

	public void setLstFlowInstanceStepWork(
			List<FlowInstanceStepWork> lstFlowInstanceStepWork) {
		this.lstFlowInstanceStepWork = lstFlowInstanceStepWork;
	}

	public List<FlowInstanceStepRelation> getLstFlowInstanceStepRelation() {
		return lstFlowInstanceStepRelation;
	}

	public void setLstFlowInstanceStepRelation(
			List<FlowInstanceStepRelation> lstFlowInstanceStepRelation) {
		this.lstFlowInstanceStepRelation = lstFlowInstanceStepRelation;
	}

	public Integer getLth() {
		Integer count=0;
		for( FlowInstanceStepWork flowInstanceStepWork:lstFlowInstanceStepWork){
			count=count+flowInstanceStepWork.getLth();
		}
		return count;
	}

	public Date getPassTime() {
		return passTime;
	}

	public void setPassTime(Date passTime) {
		this.passTime = passTime;
	}

	public Date getCreateTime() {
		return createTime;
	}

	public void setCreateTime(Date createTime) {
		this.createTime = createTime;
	}

	public Integer getIsStart() {
		return isStart;
	}

	public void setIsStart(Integer isStart) {
		this.isStart = isStart;
	}

	public Integer getIsEnd() {
		return isEnd;
	}
	

	public Long getNum() {
		return num;
	}

	public void setNum(Long num) {
		this.num = num;
	}

	public void setIsEnd(Integer isEnd) {
		this.isEnd = isEnd;
	}

	public String getApprovalCode() {
		return approvalCode;
	}

	public void setApprovalCode(String approvalCode) {
		this.approvalCode = approvalCode;
	}

	public Integer getDoWhenRepeatInSteps() {
		return doWhenRepeatInSteps;
	}

	public void setDoWhenRepeatInSteps(Integer doWhenRepeatInSteps) {
		this.doWhenRepeatInSteps = doWhenRepeatInSteps;
	}

	public Integer getDoWhenNoUsersAtwork() {
		return doWhenNoUsersAtwork;
	}

	public void setDoWhenNoUsersAtwork(Integer doWhenNoUsersAtwork) {
		this.doWhenNoUsersAtwork = doWhenNoUsersAtwork;
	}

	public String getSelectParticipants() {
		return selectParticipants;
	}

	public void setSelectParticipants(String selectParticipants) {
		this.selectParticipants = selectParticipants;
	}

	public Integer getParticipantsSelectStrategy() {
		return participantsSelectStrategy;
	}

	public void setParticipantsSelectStrategy(Integer participantsSelectStrategy) {
		this.participantsSelectStrategy = participantsSelectStrategy;
	}
	
	@Override
	public int compareTo(FlowInstanceStep o) {
		// TODO Auto-generated method stub
		if(this.sort-o.getSort()>0){
			return 1;
		}else if(this.sort-o.getSort()<0){
			return -1;
		} else{
		   return (this.num-o.num>0)?1:-1;
		}
	}
}
