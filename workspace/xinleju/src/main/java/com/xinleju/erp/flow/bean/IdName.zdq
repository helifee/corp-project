package com.xinleju.erp.flow.bean;

import java.io.Serializable;

import com.xinleju.erp.base.utils.ReflectionUtils;

/**
 * 
 * 
 * <p>
 * </p>
 * <p>
 * </p>
 * 
 * @author 孙朝辉
 * @version $Id: IdName.java 2005 2014-12-02 02:54:22Z sunchaohui $
 * @since
 * 
 */

public class IdName implements Serializable {

    
    private String type;
    /**
     * 序列化
     */
    private static final long serialVersionUID = 2053863868677836581L;

    /**
     * 主键ID
     */
    private Long id;

    /**
     * 名称
     */
    private String name;

    /**
     * 编码
     */
    private String code;

    /**
     * 前缀
     */
    private String prefix;

    /**
     * 主键ID对应的实体对象，如: User,Orgn
     */
    private Object target;

    /**
     * 是否叶子
     */
    private Integer isLeaf;

    public IdName() {

    }

    public IdName(Long id, String name, String prefix) {
        this.id = id;
        this.name = name;
        this.prefix = prefix;
    }

    public IdName(Long id, String name, String code, String prefix) {
        this.id = id;
        this.name = name;
        this.code = code;
        this.prefix = prefix;
    }

    public IdName(Long id, String name, String code, String prefix, Object target) {
        this.id = id;
        this.name = name;
        this.code = code;
        this.prefix = prefix;
        this.target = target;
    }
    public IdName(Long id, String name, String code, String prefix, Integer isLeaf, Object target) {
        this.id = id;
        this.name = name;
        this.code = code;
        this.prefix = prefix;
        this.isLeaf = isLeaf;
        this.target = target;
    }
    /**
     * prefix的长度
     */
    public static final int PREFIX_LENGTH = 5;

    /**
     * Orgn
     */
    public static final String ORGN_PREFIX = "Orgn_";

    /**
     * Role
     */
    public static final String ROLE_PREFIX = "Role_";
    
    /**
     * 标准Role
     */
    public static final String SROLE_PREFIX = "Srle_";

    /**
     * General role
     */
    public static final String GENERAL_PREFIX = "Gnrl_";

    /**
     * 职级
     */
    public static final String RANK_PREFIX = "Rank_";

    /**
     * User
     */
    public static final String USER_PREFIX = "User_";

    /**
     * Root
     */
    public static final String ROOT_PREFIX = "Root_";


    /**
     * Flow
     */
    public static final String FLOW_PREFIX = "Flow_";

    /**
     * 表单
     */
    public static final String FORM_PREFIX = "Form_";

    /**
     * 区划
     */
    public static final String ZONE_PREFIX = "Zone_";

    /**
     * BizParticipant
     */
    public static final String PBIZ_PREFIX = "Pbiz_";

    /**
     * 自定义实现参与人
     */
    public static final String PCLS_PREFIX = "Pcls_";

    /**
     * 环节实例参与人
     */
    public static final String PACP_PREFIX = "Pacp_";

    /**
     * 组织架构树
     */
    public static final String PART_PREFIX = "Part_";
   
    /**
     * 相对参与人
     */
    public static final String XDPA_PREFIX = "Xdpa_";
   
    /**
     * 外部参与人
     */
    public static final String WBPA_PREFIX = "Wbpa_";
    
    /**
     * 项目
     */
    public static final String PROJECT_PREFIX = "Prjt_";
    
    /**
     * 项目分枝
     */
    public static final String BRANCH_PREFIX = "Brch_";
    
   
    /**
     * app
     */
    public static final String APPS_PREFIX = "Apps_";
   
    /**
     * object
     */
    public static final String OBJS_PREFIX = "Objs_";
   
    /**
     * objectField
     */
    public static final String OBJF_PREFIX = "Objf_";
    
    
    /**
     * Root_0
     */
    public static final String ROOT_TREE_ID = ROOT_PREFIX + "0";

    /**
     * Orgn_0
     */
    public static final String ROOT_ORGN_ID = ORGN_PREFIX + "0";

    /**
     * Role_0
     */
    public static final String ROOT_ROLE_ID = ROLE_PREFIX + "0";

    /**
     * General_Role_0
     */
    public static final String ROOT_GNRL_ID = GENERAL_PREFIX + "0";

    /**
     * Flow_0
     */
    public static final String ROOT_FLOW_ID = FLOW_PREFIX + "0";

    /**
     * Form_0
     */
    public static final String ROOT_FORM_ID = FORM_PREFIX + "0";

    /**
     * Zone_0
     */
    public static final String ROOT_ZONE_ID = ZONE_PREFIX + "0";

    /**
     * MapKey-id
     */
    public static final String MAP_KEY_ID = "id";

    /**
     * MapKey-name
     */
    public static final String MAP_KEY_NAME = "name";

    /**
     * MapKey-code
     */
    public static final String MAP_KEY_CODE = "code";

    /**
     * MapKey-prefix
     */
    public static final String MAP_KEY_PREFIX = "prefix";

    /**
     * MapKey-isLeaf
     */
    public static final String MAP_KEY_IS_LEAF = "isLeaf";
    
    /**
     * MapKey-object
     */
    public static final String MAP_KEY_OBJECT = "object";

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name == null ? "" : name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getCode() {
        return code;
    }

    public void setCode(String code) {
        this.code = code;
    }

    public String getPrefix() {
        return prefix;
    }

    public void setPrefix(String prefix) {
        this.prefix = prefix;
    }

    public Object getTarget() {
        return target;
    }

    public void setTarget(Object target) {
        this.target = target;
    }

    /**
     * 
     * 是否叶子节点
     * 
     * @author 孙朝辉
     * @param absLeaf
     *            是否将disabled节点计算在内
     * @return 是否叶子节点
     */
    public boolean isLeaf(boolean absLeaf) {
        if (prefix != null && prefix.equals(USER_PREFIX)) {
            return true;
        }
        if (prefix != null && prefix.equals(ORGN_PREFIX)) {
            if (absLeaf) {
                return (isLeaf != null && isLeaf == 1);
            } else {
                return (isLeaf != null && (-1 == isLeaf || 1 == isLeaf));
            }
        }

        return false;
    }
    public String toPlanString() {
        return this.getPrefix() + this.getId() +  ":" + this.getName();
    }
    @Override
    public boolean equals(Object object) {
        if (null == object) {
            return false;
        }
        Long objectId = (Long) ReflectionUtils.getFieldValue(object, "id");
        if (null == this.getId() || null == objectId) {
            return false;
        } else {
            return (this.getId().intValue() == objectId.intValue());
        }

    }
    
    @Override
    public int hashCode() {
        return this.getId().hashCode();
    }

    public Integer getIsLeaf() {
        return isLeaf;
    }

    public void setIsLeaf(Integer isLeaf) {
        this.isLeaf = isLeaf;
    }

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }
}
