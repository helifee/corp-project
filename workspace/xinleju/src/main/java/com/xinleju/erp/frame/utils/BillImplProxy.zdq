package com.xinleju.erp.frame.utils;

import org.springframework.beans.BeansException;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.stereotype.Service;

import com.xinleju.erp.frame.itf.IFetchBillData;
import com.xinleju.erp.frame.test.BankBillImpl;
import com.xinleju.erp.frame.test.FunsetBillImpl;
import com.xinleju.erp.frame.test.HouseBillImpl;
import com.xinleju.erp.frame.test.ReceivablerBillImpl;
import com.xinleju.erp.frame.test.TestBillImpl;
import com.xinleju.erp.frame.test.UserBillImpl;

/**
 * <p>
 * 业务对象取数接口
 * </p>
 * <p>
 * 因为加载顺序先加载平台，所以平台依赖主数据使用单例懒加载模式实例化
 * </p>
 * 
 * @author kangss
 * 
 */
@Service
public class BillImplProxy implements ApplicationContextAware{
	private ApplicationContext applicationContext;
		
	public IFetchBillData getFetchVoucherDataImpl(String fetchDataBeanName){
		Object fetchImpl = applicationContext.getBean(fetchDataBeanName);
		if ("com.xinleju.erp.frame.test.UserBillImpl".equals(fetchDataBeanName)) {
			return new UserBillImpl();
		} else if ("com.xinleju.erp.frame.test.HouseBillImpl".equals(fetchDataBeanName)) {
			return new HouseBillImpl();
		} else if ("com.xinleju.erp.frame.test.BankBillImpl".equals(fetchDataBeanName)) {
			return new BankBillImpl();
		} else if ("com.xinleju.erp.frame.test.ReceivablerBillImpl".equals(fetchDataBeanName)) {
			return new ReceivablerBillImpl();
		} else if ("com.xinleju.erp.frame.test.FunsetBillImpl".equals(fetchDataBeanName)) {
			return new FunsetBillImpl();
		
		//部门对象
		}/* else if ("com.xinleju.erp.frame.test.FiDeptImpl".equals(fetchDataBeanName)){
			return new FiDeptImpl();
		}*/
		
		
		else if (fetchImpl == null || !(fetchImpl instanceof IFetchBillData))
			return new TestBillImpl();
		return (IFetchBillData) fetchImpl;
	}

	@Override
	public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
		this.applicationContext= applicationContext;
	}
	
//	public static IFetchBillData getFetchVoucherDataImpl(String fetchdataclass) {
//		Object fetchImpl = com.xinleju.erp.base.app.config.App.getBean(fetchdataclass);
//		Object a = com.xinleju.erp.base.app.config.App.getBean("iZbBaseBizDataService");
//		if ("com.xinleju.erp.frame.test.UserBillImpl".equals(fetchdataclass)) {
//			return new UserBillImpl();
//		} else if ("com.xinleju.erp.frame.test.HouseBillImpl".equals(fetchdataclass)) {
//			return new HouseBillImpl();
//		} else if ("com.xinleju.erp.frame.test.BankBillImpl".equals(fetchdataclass)) {
//			return new BankBillImpl();
//		} else if ("com.xinleju.erp.frame.test.ReceivablerBillImpl".equals(fetchdataclass)) {
//			return new ReceivablerBillImpl();
//		} else if ("com.xinleju.erp.frame.test.FunsetBillImpl".equals(fetchdataclass)) {
//			return new FunsetBillImpl();
//		} else if (fetchImpl == null || !(fetchImpl instanceof IFetchBillData))
//			return new TestBillImpl();
//		return (IFetchBillData) fetchImpl;
//	}
}
