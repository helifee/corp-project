package com.xinleju.erp.frame.dao;

import java.util.List;
import java.util.Map;
import org.springframework.stereotype.Repository;
import com.xinleju.erp.base.utils.CollectionUtils;
import com.xinleju.erp.flow.dao.impl.BaseDAO;
import com.xinleju.erp.frame.models.DeskTop;
import com.xinleju.erp.frame.models.Desk_Component;
import com.xinleju.erp.frame.models.DesktopComponent;

@Repository
public class DeskTopDao extends BaseDAO{
	
	/**
	 * 保存中间表
	 * @param desk_Component
	 * @return
	 */
	public String save(Desk_Component desk_Component){
		getDao().save(desk_Component);
		return "success";
		
	}
	
	/**
	 * 保存桌面
	 * @param DeskTop
	 * @return
	 */
	public String save(DeskTop DeskTop){
		getDao().save(DeskTop);
		return "success";
		
	}
	/**
	 * 查找属于启动状态的部件
	 * @return
	 */
	@SuppressWarnings("unchecked")
	public Map<Long,DesktopComponent> getDesktopComponentMap(){
		List<DesktopComponent> desktopComponent = getDao().findByHQL(DesktopComponent.class, "from DesktopComponent d where (d.status is null or d.status = ?)", DesktopComponent.STATUS_ENABLE);
		return CollectionUtils.collectAsMap(desktopComponent, "id");
	}
	
	/**
	 * 根据主键查找DeskTop
	 * @param id
	 * @return
	 */
	public DeskTop getDeskTop(Long id){
		List<DeskTop> DeskTop = getDao().findByHQL(DeskTop.class, "from DeskTop d where d.id= ?", id);
		return DeskTop.get(0);
	}

}
