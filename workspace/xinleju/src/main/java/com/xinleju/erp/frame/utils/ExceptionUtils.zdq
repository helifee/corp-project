/*
 * 文件名：LogUtil.java
 * 版权：Copyright by www.tele-hot.com
 * 描述：
 * 修改人：hongbin
 * 修改时间：2014年5月30日
 * 跟踪单号：
 * 修改单号：
 * 修改内容：
 */

package com.xinleju.erp.frame.utils;

import java.io.PrintWriter;
import java.io.StringWriter;

import com.xinleju.erp.base.utils.CollectionUtils;
import com.xinleju.erp.flow.flowutils.bean.DebugInfo;

/**
 * 
 * 〈异常工具类〉
 * @author hongbin
 * @version 2014年5月30日
 * @see ExceptionUtils
 * @since
 */
public class ExceptionUtils {
    
    /**
     * 
     * Description: 获得详细异常信息<br>
     * @param ex
     * @return 
     * @see
     */
    public static String getExceptionMsg(Throwable ex){
        StringWriter sw = new StringWriter();
        ex.printStackTrace(new PrintWriter(sw));
        return sw.toString();
    }
    
    
    /**
     *〈从debugInfo中解析异常信息〉
     * @author hongbin
     * @param debugInfo
     * @return
     */
    public static String getExceptionMsg(DebugInfo debugInfo) {
        StringBuffer sb = new StringBuffer();
        if(debugInfo != null){
            if(debugInfo.getFuncDesc() != null && debugInfo.getFuncDesc().size() > 0){
                sb.append("功能描述信息:" + CollectionUtils.collectAsString(debugInfo.getFuncDesc(), ","));
            }
            if(debugInfo.getErrDesc() != null && debugInfo.getErrDesc().size() > 0){
                sb.append("异常信息：" + CollectionUtils.collectAsString(debugInfo.getErrDesc(), ","));
            }
        }
        return sb.toString();
    }
}
