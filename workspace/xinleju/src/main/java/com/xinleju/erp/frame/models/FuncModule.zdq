package com.xinleju.erp.frame.models;

import java.util.ArrayList;
import java.util.List;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.JoinColumn;
import javax.persistence.Lob;
import javax.persistence.ManyToOne;
import javax.persistence.Table;
import javax.persistence.Transient;

import org.hibernate.annotations.Cache;
import org.hibernate.annotations.CacheConcurrencyStrategy;
import org.hibernate.annotations.Formula;

/**
 * 版权：(C) 版权所有 2000-2014 上海天好电子商务有限公司苏州分公司
 * 功能权限 -- 菜单
 * @author   jdq
 * @version  $Id$
 * @since
 * @see
 */
@SuppressWarnings("serial")
@Entity
@Table(name="SM_FUNC")
@Cache(usage=CacheConcurrencyStrategy.READ_WRITE)
public class FuncModule extends BaseEntity{
    
    public static List<LabelValueBean> systemList = new ArrayList<LabelValueBean>(){{
        add(new LabelValueBean("招采","zc"));
        add(new LabelValueBean("权限","fr"));
    }};
    
    /*// 菜单
    public static final String TYPE_MENU="menu";
    // 功能模块
    public static final String TYPE_MODUME="module";*/
    
    private String name;
    //  菜单  模块 对应url
    private String funcUrl;
    
    @Lob
    private String note;
 

    
    @Formula("(select COUNT(d.id) from  sm_func d where d.parent_id = id )")
    private int subRoleCount;
    
    @Formula("(select COUNT(o.id) from  sm_op o where o.func_id = id )")
    private int subButtonCount;
    
    @Column(name = "parent_id")
    private Long parentId;
    
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name="parent_id",updatable=false,insertable=false)
    private FuncModule parent;
    
    
    /*private String type;*/
    @Transient
    private List<FuncButton> buttonList;
    @Transient
    private List<FuncModule> childModuleList;
    
    /**
     * @Fields systemCode : 属于哪个系统的
     */
    @Column(name="MODULE_CODE")
    private String systemCode;
    
    /**
     * 编码
     */
    private String code;
    
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getFuncUrl() {
        return funcUrl;
    }

    public void setFuncUrl(String funcUrl) {
        this.funcUrl = funcUrl;
    }

  /*  public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }*/

    public List<FuncButton> getButtonList() {
        return buttonList;
    }

    public String getNote() {
        return note;
    }

    public void setNote(String note) {
        this.note = note;
    }

    public void setButtonList(List<FuncButton> buttonList) {
        this.buttonList = buttonList;
    }

    public FuncModule getParent() {
        return parent;
    }

    public void setParent(FuncModule parent) {
        this.parent = parent;
    }

    public Long getParentId() {
        return parentId;
    }

    public void setParentId(Long parentId) {
        this.parentId = parentId;
    }

   
    public int getSubRoleCount() {
        return subRoleCount;
    }

    public void setSubRoleCount(int subRoleCount) {
        this.subRoleCount = subRoleCount;
    }

    public List<FuncModule> getChildModuleList() {
        return childModuleList;
    }

    public String getSystemCode() {
        return systemCode;
    }

    public void setSystemCode(String systemCode) {
        this.systemCode = systemCode;
    }

    public void setChildModuleList(List<FuncModule> childModuleList) {
        this.childModuleList = childModuleList;
    }

    public String getCode() {
        return code;
    }

    public void setCode(String code) {
        this.code = code;
    }

	public int getSubButtonCount() {
		return subButtonCount;
	}

	public void setSubButtonCount(int subButtonCount) {
		this.subButtonCount = subButtonCount;
	}
    
    

}
