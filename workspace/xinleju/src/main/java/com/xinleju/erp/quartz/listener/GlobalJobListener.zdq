package com.xinleju.erp.quartz.listener;

import java.util.Date;

import org.apache.log4j.Logger;
import org.quartz.JobExecutionContext;
import org.quartz.JobExecutionException;

public class GlobalJobListener implements org.quartz.JobListener {

	private static Logger log = Logger.getLogger(GlobalJobListener.class);
	@Override
	public String getName() {
		// TODO Auto-generated method stub
		return "gobal job listener";
	}

	//Scheduler 在 JobDetail 将要被执行时调用这个方法
	@Override
	public void jobToBeExecuted(JobExecutionContext context) {
		// TODO Auto-generated method stub
		log.info("job启动前执行:"+new Date());
	}

	
	/** 
       * Scheduler 在 JobDetail 即将被执行，但又被 TriggerListener 否决了时调用这个方法。 
	*/  
	@Override
	public void jobExecutionVetoed(JobExecutionContext context) {
		// TODO Auto-generated method stub
		log.info("job执行拒绝执行了");
		
	}
	 /** 
	     * Scheduler 在 JobDetail 被执行之后调用这个方法。 
	 */  
	@Override
	public void jobWasExecuted(JobExecutionContext context,
			JobExecutionException jobException) {
		// TODO Auto-generated method stub
		if(jobException!=null){
			log.error(jobException);
			jobException.printStackTrace();
		}
		log.info("job执行时间"+context.getJobRunTime());
	}

}
