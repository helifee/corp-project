package com.xinleju.erp.flow.service.api.extend;

import java.lang.reflect.Method;

import javax.servlet.http.HttpServletRequest;

import org.apache.struts2.StrutsStatics;

import com.opensymphony.xwork2.ActionInvocation;
import com.opensymphony.xwork2.interceptor.MethodFilterInterceptor;

public class VisitInterceptor extends MethodFilterInterceptor {
    /**
     * 序列化ID
     */
    private static final long serialVersionUID = 8180292365076400633L;

    @Override
    protected String doIntercept(ActionInvocation arg0) throws Exception {
        HttpServletRequest request = (HttpServletRequest) arg0.getInvocationContext().get(StrutsStatics.HTTP_REQUEST);
        String methodName= arg0.getProxy().getMethod();
        
        try {
            Method m =  arg0.getAction().getClass().getDeclaredMethod(methodName);
            boolean isAnnotationPresent = m.isAnnotationPresent(LogVist.class);
            if(isAnnotationPresent){
                LogVist logVist= m.getAnnotation(LogVist.class);
               // logVist.actionName()
            }
        } catch (NoSuchMethodException ex) {
            
        }
        
        return arg0.invoke();
    }
}
