package com.xinleju.erp.frame.models.ref;

import java.util.List;

import com.xinleju.erp.base.app.bean.Page;
import com.xinleju.erp.base.app.config.App;
import com.xinleju.erp.frame.dao.FiBusinessDao;
import com.xinleju.erp.frame.dto.JsonTreeTableTemplete;
import com.xinleju.erp.frame.itf.ITreeRefModel;
import com.xinleju.erp.frame.models.BusinessMold;
import com.xinleju.erp.frame.models.extender.BMTreeExtender;
public class BMRefModel implements ITreeRefModel {
	
	private Long fisysinfoid;
	private String targsyscorpid;
	public BMRefModel(Long fisysinfoid , String targsyscorpid){
		this.fisysinfoid = fisysinfoid;
		this.targsyscorpid = targsyscorpid;
	}
	@Override
	public Page getData(int start, int limit, String keywords) {
		Page page = new Page();
		List<BusinessMold> list = App.getBean(FiBusinessDao.class).findByHQL(BusinessMold.class, "FROM BusinessMold t WHERE t.fisysinfoid = ? AND t.targsyscorpid = ?", fisysinfoid,targsyscorpid);
		if(list == null)
			return page;
		page.setTotal(list.size());
		page.setItems(list);
		return page;
	}

	@Override
	public String getKeyField() {
		return "id";
	}

	@Override
	public String getNameField() {
		return "name";
	}

	@Override
	public String getCodeField() {
		return "id";
	}

	@Override
	public String[] getShowFields() {
		return new String[] {"name"};
	}

	@Override
	public String[] getShowNames() {
		return new String[]{"分类名称"};
	}

	@Override
	public String getTitle() {
		return "业务类型";
	}

	@Override
	public Boolean isMutil() {
		return false;
	}

	@Override
	public JsonTreeTableTemplete getJsonTreeTableTemplete() {
		return new JsonTreeTableTemplete(getKeyField(), "pid", new String[]{"id","pid","name"},BMTreeExtender.class);
	}
	
}
