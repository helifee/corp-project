package com.xinleju.erp.flow.models;

import java.util.Date;
import java.util.Set;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.Index;
import javax.persistence.JoinColumn;
import javax.persistence.Lob;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.xml.bind.annotation.XmlRootElement;
import org.hibernate.annotations.Where;

import com.alibaba.fastjson.annotation.JSONField;
import com.xinleju.erp.base.app.models.IdEntity;
import com.xinleju.erp.base.app.utils.HibernateUtils;

/**
 * 
 * 任务
 * 
 * <p>
 * 工作
 * </p>
 * <p>
 * </p>
 * 
 * @author 孙朝辉
 * @version $Id: Wi.java 2293 2015-01-04 02:29:20Z sunchaohui $
 * @since
 * 
 */

@Entity
@Table(name = "tf_wi",indexes={
        @Index( columnList="fi_id",unique=false)
        })
@XmlRootElement
public class Wi extends IdEntity {
    /**
     * 序列化
     */
    private static final long serialVersionUID = -1760324715404560572L;

    /**
     * 默认操作编码
     */
    public static final String OP_CODE_NEXT = "OP_NEXT";

    /**
     * 退回时操作编码(中间环节需审批)
     */
    public static final String OP_CODE_BACK = "OP_BACK";

    
    /**
     * 退回时操作编码（中间环节跳过）
     */
    public static final String OP_CODE_BACK_SKIP = "OP_BACK_SKIP";

    /**
     * 创建
     */
    public static final int STATUS_CREATED = Fi.STATUS_CREATED;

    /**
     * 运行
     */
    public static final int STATUS_RUNNING = Fi.STATUS_RUNNING;

    /**
     * 结束
     */
    public static final int STATUS_COMPLETE = Fi.STATUS_COMPLETE;

    /**
     * 过期
     */
    public static final int STATUS_OVERDUE = Ai.STATUS_OVERDUE;
    
    /**
     * 子wp集合
     */
    @OneToMany(fetch = FetchType.LAZY, mappedBy = "pwi")
    @Where(clause = "is_deleted is null or is_deleted = 0")
    @org.hibernate.annotations.OrderBy(clause = " id asc ")
    private Set<Wp> subWps;
    
    /**
     * 工作名，不指定的话取WpName(Wp.displayName)
     */
    private String wiName;
    
    /**
     * 工作编码
     */
    private String wiCode;
    
    /**
     * 工作操作编码
     */
    private String opCode;

    /**
     * 操作时用户，格式化参与人字符串 譬如，执行转发时,转发目的用户列表
     */
    @Column(length = HibernateUtils.COLOUMN_LENGTH_500)
    private String opUsers;

    /**
     * 操作时的工作ID
     */
    private Long opWiId;

    /**
     * 所在工作组
     */
    private Long wpId;
    
    /**
     * 对应的wp的父wpId
     */
    /*private Long parentWpId;
    public Long getParentWpId() {
		return parentWpId;
	}

	public void setParentWpId(Long parentWpId) {
		this.parentWpId = parentWpId;
	}*/

	/**
     * 排序号，当assignType == '串行'时有效，参考AssignWi.java和Wp.assignType
     */
    private Integer px;
    
    
    /**
     * 工作类型
     */
    private String wiType;

    /**
     * 工作是否影响流转
     */
    private Integer isEffectFlow;

    /**
     * 是否已读
     */
    private int isRead;

    
    /**
     * 已读事件
     */
    private Date readDate;
    
    /**
     * 过期编码
     */
    private String overduCode;

    /**
     * 时间戳
     */
    private String tstamp;

    /**
     * 状态
     */
    private int status;

    /**
     * 状态
     */
    private Integer isBacked;
    
    /**
     * 外键:Ac,活动
     */
    private Long acId;

    
    /**
     * 级联对象:Ac
     */
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(updatable = false, insertable = false)
    private Wp wp;
    
    /**
     * 级联对象:Ac
     */
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(updatable = false, insertable = false)
    private Ac ac;

    /**
     * 外键:Fl,流程定义
     */
    private Long flId;

    /**
     * 级联对象:流程定义
     */
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(updatable = false, insertable = false)
    private Fl fl;

    /**
     * 流程实例
     */
    private Long fiId;

    /**
     * 级联对象:流程实例
     */
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(updatable = false, insertable = false)
    private Fi fi;

    /**
     * 外键:Ai,环节实例
     */
    private Long aiId;

    /**
     * 级联对象:活动实例
     */
    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(updatable = false, insertable = false)
    private Ai ai;

    /**
     * 参与人ID
     */
    private Long participant;

    /**
     * 参与人登录名
     */
    private String participantLoginName;

    /**
     * 参与人姓名
     */
    private String participantUserName;
    
    
    
    /**
     * 指派人ID
     */
    private Long assigner;

    /**
     * 指派人登录名
     */
    private String assignerLoginName;

    /**
     * 指派人姓名
     */
    private String assignerUserName;


    /**
     * 创建时间(N/A)
     */
    @Temporal(TemporalType.TIMESTAMP)
    private Date createTime;

    /**
     * 开始时间
     */
    @Temporal(TemporalType.TIMESTAMP)
    private Date startTime;

    /**
     * 接受时间
     */
    @Temporal(TemporalType.TIMESTAMP)
    private Date acceptTime;
    
    /**
     * 提交人
     */
    private Long completeUserId;

    /**
     * 提交人登录名
     */
    private String completeUserLoginName;

    /**
     * 提交人姓名
     */
    private String completeUserName;

    /**
     * 结束时间
     */
    @Temporal(TemporalType.TIMESTAMP)
    private Date completeTime;

    /**
     * 用户意见
     */
    @Lob
    private String userNote;
    
    /**
     * 指派此任务的任务id（暂时用于催办,点击催办的待办时将wi完成并直接进入assignWiId对应的任务）
     */
    private Long assignWiId;
    
    /**
     * 生成wi的路径
     */
    private String prefix;
    
    @JSONField(serialize = false, deserialize = false)
    public Ac getAc() {
        return ac;
    }

    public void setAc(Ac ac) {
        this.ac = ac;
    }

    public Ai getAi() {
        return ai;
    }

    public void setAi(Ai ai) {
        this.ai = ai;
    }

    public Date getCompleteTime() {
        return completeTime;
    }

    public void setCompleteTime(Date completeTime) {
        this.completeTime = completeTime;
    }

    public Long getCompleteUserId() {
        return completeUserId;
    }

    public void setCompleteUserId(Long completeUserId) {
        this.completeUserId = completeUserId;
    }

    public String getCompleteUserLoginName() {
        return completeUserLoginName;
    }

    public void setCompleteUserLoginName(String completeUserLoginName) {
        this.completeUserLoginName = completeUserLoginName;
    }

    public String getCompleteUserName() {
        return completeUserName;
    }

    public void setCompleteUserName(String completeUserName) {
        this.completeUserName = completeUserName;
    }

    public Date getCreateTime() {
        return createTime;
    }

    public void setCreateTime(Date createTime) {
        this.createTime = createTime;
    }

    @JSONField(serialize = false, deserialize = false)
    public Fi getFi() {
        return fi;
    }

    public void setFi(Fi fi) {
        this.fi = fi;
    }

    public Long getAcId() {
        return acId;
    }

    public void setAcId(Long acId) {
        this.acId = acId;
    }

    public Long getAiId() {
        return aiId;
    }

    public void setAiId(Long aiId) {
        this.aiId = aiId;
    }

    public Long getFiId() {
        return fiId;
    }

    public void setFiId(Long fiId) {
        this.fiId = fiId;
    }

    public Long getFlId() {
        return flId;
    }

    public void setFlId(Long flId) {
        this.flId = flId;
    }

    @JSONField(serialize = false, deserialize = false)
    public Fl getFl() {
        return fl;
    }

    public void setFl(Fl fl) {
        this.fl = fl;
    }

    public int getIsRead() {
        return isRead;
    }

    public void setIsRead(int isRead) {
        this.isRead = isRead;
    }

    public Long getParticipant() {
        return participant;
    }

    public void setParticipant(Long participant) {
        this.participant = participant;
    }

    public String getParticipantLoginName() {
        return participantLoginName;
    }

    public void setParticipantLoginName(String participantLoginName) {
        this.participantLoginName = participantLoginName;
    }

    public String getParticipantUserName() {
        return participantUserName;
    }

    public void setParticipantUserName(String participantUserName) {
        this.participantUserName = participantUserName;
    }

    public int getStatus() {
        return status;
    }

    public void setStatus(int status) {
        this.status = status;
    }

    public String getUserNote() {
        return userNote;
    }

    public void setUserNote(String userNote) {
        this.userNote = userNote;
    }

    public String getWiType() {
        return wiType;
    }

    public void setWiType(String wiType) {
        this.wiType = wiType;
    }

    public String getTstamp() {
        return tstamp;
    }

    public void setTstamp(String tstamp) {
        this.tstamp = tstamp;
    }

    public String getOpCode() {
        return opCode;
    }

    public void setOpCode(String opCode) {
        this.opCode = opCode;
    }

    public Integer getIsEffectFlow() {
        return isEffectFlow;
    }

    public void setIsEffectFlow(Integer isEffectFlow) {
        this.isEffectFlow = isEffectFlow;
    }

    public Long getWpId() {
        return wpId;
    }

    public void setWpId(Long wpId) {
        this.wpId = wpId;
    }

    public Date getStartTime() {
        return startTime;
    }

    public void setStartTime(Date startTime) {
        this.startTime = startTime;
    }

    public String getOpUsers() {
        return opUsers;
    }

    public void setOpUsers(String opUsers) {
        this.opUsers = opUsers;
    }

    public Long getOpWiId() {
        return opWiId;
    }

    public void setOpWiId(Long opWiId) {
        this.opWiId = opWiId;
    }

    public String getOverduCode() {
        return overduCode;
    }

    public void setOverduCode(String overduCode) {
        this.overduCode = overduCode;
    }

    public Integer getIsBacked() {
        return isBacked;
    }

    public void setIsBacked(Integer isBacked) {
        this.isBacked = isBacked;
    }

    public Wp getWp() {
        return wp;
    }

    public void setWp(Wp wp) {
        this.wp = wp;
    }

    public Date getAcceptTime() {
        return acceptTime;
    }

    public void setAcceptTime(Date acceptTime) {
        this.acceptTime = acceptTime;
    }

    public Long getAssigner() {
        return assigner;
    }

    public void setAssigner(Long assigner) {
        this.assigner = assigner;
    }

    public String getAssignerLoginName() {
        return assignerLoginName;
    }

    public void setAssignerLoginName(String assignerLoginName) {
        this.assignerLoginName = assignerLoginName;
    }

    public String getAssignerUserName() {
        return assignerUserName;
    }

    public void setAssignerUserName(String assignerUserName) {
        this.assignerUserName = assignerUserName;
    }

    public String getWiName() {
        return wiName;
    }

    public void setWiName(String wiName) {
        this.wiName = wiName;
    }

    public Date getReadDate() {
        return readDate;
    }

    public void setReadDate(Date readDate) {
        this.readDate = readDate;
    }

    public String getWiCode() {
        return wiCode;
    }

    public void setWiCode(String wiCode) {
        this.wiCode = wiCode;
    }

    public Integer getPx() {
        return px;
    }

    public void setPx(Integer px) {
        this.px = px;
    }

    public Set<Wp> getSubWps() {
        return subWps;
    }

    public void setSubWps(Set<Wp> subWps) {
        this.subWps = subWps;
    }

    public Long getAssignWiId() {
        return assignWiId;
    }

    public void setAssignWiId(Long assignWiId) {
        this.assignWiId = assignWiId;
    }

	public String getPrefix() {
		return prefix;
	}

	public void setPrefix(String prefix) {
		this.prefix = prefix;
	}


  

}
