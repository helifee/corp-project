package com.xinleju.erp.thirdparty.action;

import java.util.Date;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;

import com.xinleju.erp.base.app.action.BaseAction;
import com.xinleju.erp.thirdparty.dto.DepartmentDTO;
import com.xinleju.erp.thirdparty.dto.DepartmentsDTO;
import com.xinleju.erp.thirdparty.service.DepartmentService;

/**
 * 部门主数据接口
 */
public class DepartmentAction extends BaseAction {

	@Autowired
	private DepartmentService departmentService;

	/**
	 * 获取部门数据
	 */
	public void getDepartment() {
		DepartmentsDTO departments = new DepartmentsDTO();

		try {
			List<DepartmentDTO> deptList = departmentService
					.getDepartmentList();
			departments.setOppDate(new Date());

			if (deptList != null && deptList.size() > 0) {
				departments.setCode("1");
				departments.setDescription("成功!");

				for (DepartmentDTO dept : deptList) {
					departments.getRecords().add(dept);
				}

			} else {
				departments.setCode("0");
				departments.setDescription("失败!");
			}

		} catch (Exception e) {
			// TODO Auto-generated catch block
			departments.setCode("2");
			departments.setDescription(e.getMessage());
			e.printStackTrace();
		} finally {
			renderJson(departments);
		}
	}
}
