package com.xinleju.erp.frame.utils;

import java.util.Map;

import org.apache.commons.lang3.StringUtils;

import com.xinleju.erp.frame.models.App;


public class FrameUrlFixUtil {
    public static String urlFix(String appCode, String url, Map<String, App> appMap, String ptAppDepUrl){
        String fixUrl = null;
        if (StringUtils.isNotBlank(url) && !url.toLowerCase().startsWith("http") && StringUtils.isNotBlank(appCode) && null != appMap && null != appMap.get(appCode) && StringUtils.isNotBlank(appMap.get(appCode).getDepUrl())){
            fixUrl = appMap.get(appCode).getDepUrl().trim() + "//" + url.trim();
        } else {
            fixUrl = (null != url ? url.trim() : "");
        }
        
        // del by liuhm 由于传递的参数中appMap.get(appCode).getDepUrl() 和 ptAppDepUrl来源是同一条记录，所以此处进行二次拼接地址导致地址错误。
//        fixUrl = (StringUtils.isNotBlank(ptAppDepUrl) ? ptAppDepUrl.trim() : "") + fixUrl;
        return fixUrl;
    }
    public static String urlFix(String url, String appDepUrl, String ptAppDepUrl){
        String fixUrl = null;
        if (StringUtils.isNotBlank(url) && !url.toLowerCase().startsWith("http") && StringUtils.isNotBlank(appDepUrl)){
            fixUrl = appDepUrl.trim() + "//" + url.trim();
        } else {
            fixUrl = (null != url ? url.trim() : "");
        }
        fixUrl = (StringUtils.isNotBlank(ptAppDepUrl) ? ptAppDepUrl.trim() : "") + fixUrl;
        return fixUrl;
    }
}
