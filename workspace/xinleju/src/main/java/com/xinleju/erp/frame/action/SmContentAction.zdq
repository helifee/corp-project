package com.xinleju.erp.frame.action;

import java.util.HashMap;
import java.util.Map;

import org.hibernate.criterion.DetachedCriteria;
import org.hibernate.criterion.Restrictions;

import com.xinleju.erp.base.app.action.BaseAction;
import com.xinleju.erp.frame.models.SmContent;

public class SmContentAction extends BaseAction {

	/**
	 * 查询列表
	 * 
	 * @return
	 */
	public String list() {
		Integer status = getParameterInt("status");

		DetachedCriteria dc = DetachedCriteria.forClass(SmContent.class);

		if (status != null) {
			dc.add(Restrictions.eq("sendState", status));

		} else {
			status = 3;
		}
		page = getCommonService().findPage(dc, start, limit);

		request.setAttribute("statusMap", getStatus());
		request.setAttribute("status", status);

		return "list";
	}

	public static Map<Integer, Object> getStatus() {
		Map<Integer, Object> statusMap = new HashMap<Integer, Object>();
		statusMap.put(0, "待发送");
		statusMap.put(1, "已发送");
		statusMap.put(2, "发送失败");
		return statusMap;
	}

}
