package com.xinleju.erp.flow.utils;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import javax.servlet.http.HttpServletRequest;

import com.xinleju.erp.flow.bean.LoginInfo;
import com.xinleju.erp.flow.service.api.extend.dto.FuncDTO;
import com.xinleju.erp.flow.service.api.extend.dto.RoleDTO;
import com.xinleju.erp.flow.service.api.extend.dto.UserDTO;
import com.xinleju.erp.frame.models.App;


/**
 * 
 * 版权：(C) 版权所有 2000-2014 上海天好电子商务有限公司苏州分公司
 * 登录信息处理
 * @author   jun
 * @version  $Id$
 * @since
 * @see
 */
public class LoginInfoUtils {
	
	/**
	 * 获取登录信息
	 * @param reqeust
	 * @return
	 */
    public static LoginInfo getLoginInfo(HttpServletRequest request){
        LoginInfo li = null;
        if (null != request && null != request.getSession()){
            li = (LoginInfo)request.getSession().getAttribute(FlowConstant.LOGININFO);
        }
        if (null == li){
            li = new LoginInfo();
            li.setFuncDTOListMap(new HashMap<App, List<FuncDTO>>());
            li.setRoleDtoList(new ArrayList<RoleDTO>());
            li.setUserDTO(new UserDTO());
        }
        return li;
    }
    
    /**
     * 获取登录人id
     * @param reqeust
     * @return
     */
    public static Long getLoginInfoUserDtoId(HttpServletRequest request){
    	return getLoginInfo(request).getUserDTO().getId();
    }
    /**
     * 获取登录人登录名
     * @author zhongjun
     * @param request HttpServletRequest
     * @return
     */
    public static String getLoginInfoUserLogName(HttpServletRequest request){
        return getLoginInfo(request).getUserDTO().getLoginName();
    }
}
