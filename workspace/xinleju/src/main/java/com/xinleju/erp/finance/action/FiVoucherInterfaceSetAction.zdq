package com.xinleju.erp.finance.action;

import java.util.List;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.beans.factory.annotation.Autowired;

import com.xinleju.erp.base.app.action.BaseAction;
import com.xinleju.erp.base.utils.JsonUtils;
import com.xinleju.erp.finance.models.FiAccountSet;
import com.xinleju.erp.finance.models.FiSysinfo;
import com.xinleju.erp.finance.service.FiAccountSetService;
import com.xinleju.erp.finance.service.FiSysInfoService;
import com.xinleju.erp.finance.service.SyncFinaDataService;
import com.xinleju.erp.sm.extend.dto.FinaData;
import com.xinleju.erp.sm.extend.dto.FinaQueryParams;

/**
 * 凭证接口设置
 * @author songjunjie
 */
/**
 * 
 * @author songjunjie
 */
public class FiVoucherInterfaceSetAction extends BaseAction {
	private static final Log log = LogFactory.getLog(FiVoucherInterfaceSetAction.class);

	@Autowired
	private FiAccountSetService fiAccountSetService;
	@Autowired
	private FiSysInfoService fiSysInfoService;
	@Autowired
	private SyncFinaDataService syncFinaDataService;
	private FiAccountSet fiAccountSet;

	/**
	 * 凭证接口设置主页面
	 */
	public String index() {
		List<FiSysinfo> fisysList = this.fiSysInfoService.getAllFiSysinfo();
		try {
			FinaQueryParams params = new FinaQueryParams();
			List<FinaData> list = syncFinaDataService.getCompany(params).getResult().getItems();
			String companyListJson = JsonUtils.toJSONString(list);
			String fisysListJson = JsonUtils.toJSONString(fisysList);
			request.setAttribute("companyList", companyListJson);
			request.setAttribute("fisysList", fisysListJson);
		} catch (Exception e) {
			log.error("", e);
		}
		return "index";
	}
	// /**
	// * 根据公司id查询出账套
	// */
	// public void findFiAccountSet(){
	// Long companyId = this.getParameterLong("companyId");
	// List<FiAccountSet> list =
	// this.fiAccountSetService.getFiAccountSetByCompanyId(companyId);
	// String json = JsonUtils.toJSONString(list);
	// renderHtml(json);
	// }
	// /**
	// * 保存帐套
	// */
	// public void saveFiAccountSet(){
	// Map<String, Object> result = new HashMap<String, Object>();
	// if (fiAccountSet.getId() != null) {
	// fiAccountSet.setEditDate(new Date());
	// } else {
	// fiAccountSet.setCreateDate(new Date());
	// fiAccountSet.setStatus(0);
	// }
	// try{
	// this.fiAccountSetService.save(fiAccountSet);
	// result.put("success", true);
	// result.put("msg", "保存成功");
	// String json = JsonUtils.toJSONString(result);
	// renderHtml(json);
	// }
	// catch(Exception e){
	// result.put("success", false);
	// result.put("msg", "保存失败");
	// String json = JsonUtils.toJSONString(result);
	// renderHtml(json);
	// }
	// }
	// /**
	// * 删除帐套
	// * @return
	// */
	// public void deleteFiAccountSet(){
	// Map<String,Object> result=new HashMap<String,Object>();
	// Long id = this.getParameterLong("id");
	// try{
	// this.fiAccountSetService.delete(id);
	// result.put("success", true);
	// result.put("msg", "保存成功");
	// renderJson(result);
	// }catch(Exception e){
	// result.put("success", false);
	// result.put("msg", "保存失败");
	// renderJson(result);
	// }
	// }
	//
	// /**
	// * 根据账套id返回账套信息
	// */
	// public void getFiAccountSetById(){
	// Long id=this.getParameterLong("id");
	// //TODO 根据账套id查询出账套信息
	// FiAccountSet s = this.fiAccountSetService.findFiAccountSetById(id);
	// String json = JsonUtils.toJSONString(s);
	// renderHtml(json);
	// }
	//
	// public FiAccountSet getFiAccountSet() {
	// return fiAccountSet;
	// }
	//
	// public void setFiAccountSet(FiAccountSet fiAccountSet) {
	// this.fiAccountSet = fiAccountSet;
	// }

}
