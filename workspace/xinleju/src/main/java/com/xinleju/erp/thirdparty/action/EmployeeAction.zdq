package com.xinleju.erp.thirdparty.action;

import java.util.Date;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;

import com.xinleju.erp.base.app.action.BaseAction;
import com.xinleju.erp.thirdparty.dto.EmployeeDTO;
import com.xinleju.erp.thirdparty.dto.EmployeesDTO;
import com.xinleju.erp.thirdparty.service.EmployeeService;

/**
 * 员工主数据接口
 */
public class EmployeeAction extends BaseAction {

	@Autowired
	private EmployeeService employeeService;

	/**
	 * 获取员工数据
	 */
	public void getEmployee() {

		EmployeesDTO employees = new EmployeesDTO();

		try {
			List<EmployeeDTO> emplList = employeeService.getEmployeeList();
			employees.setOppDate(new Date());
			if (emplList != null && emplList.size() > 0) {
				employees.setCode("1");
				employees.setDescription("成功!");

				for (EmployeeDTO empl : emplList) {
					employees.getRecords().add(empl);
				}

			} else {
				employees.setCode("0");
				employees.setDescription("失败!");
			}
		} catch (Exception e) {
			// TODO Auto-generated catch block
			employees.setCode("2");
			employees.setDescription(e.getMessage());
			e.printStackTrace();
		} finally {
			renderJson(employees);
		}
	}
}
