package com.xinleju.erp.dataservice.service.impl;

import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.xinleju.erp.base.app.service.impl.BaseService;
import com.xinleju.erp.dataservice.dto.AccountSetDTO;
import com.xinleju.erp.dataservice.service.ToDataService;
import com.xinleju.erp.finance.models.FiAccountSet;
import com.xinleju.erp.finance.service.FiAccountSetService;
import com.xinleju.erp.flow.flowutils.bean.FlowResult;
@Service
public class ToDataServiceImpl extends BaseService implements ToDataService {
	@Autowired
	private FiAccountSetService fiAccountSetService;
	@Override
	public FlowResult<List<AccountSetDTO>> getAccountSetList() {
		FlowResult<List<AccountSetDTO>> flowresult = new FlowResult<List<AccountSetDTO>>();
		List<AccountSetDTO> result = new ArrayList<AccountSetDTO>();
		List list = getDao().findListBySQL("SELECT DISTINCT fs.company_code,sc.company_id,fi.fi_sys_code,fi.sender,fi.web_url from fi_account_set fs"
				+" INNER JOIN fi_account_set_data sc on fs.id=sc.account_set_id INNER JOIN fi_sysinfo fi on fi.id=fs.fi_sys_id;", null);
		
		for(int i=0;i<list.size();i++){
			Object[] obj = (Object[])list.get(i);
			AccountSetDTO dto = new AccountSetDTO();
			dto.setAccountset(obj[0].toString());
			dto.setCompanyid(obj[1].toString());
			dto.setFisyscode(obj[2].toString());
			dto.setSender(obj[3].toString());
			dto.setWeburl(obj[4].toString());
			result.add(dto);
		}
		flowresult.setResult(result);
		flowresult.setSuccess(true);
		return flowresult;
	}
	public static void main(String[] args){
		ToDataServiceImpl imp = new ToDataServiceImpl();
		imp.getAccountSetList();
	}
}
