package com.xinleju.erp.sm.cache.redis;

import java.util.List;

import java.util.Map;

import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.testng.Assert;
import org.testng.annotations.Test;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.DataProvider;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.AfterClass;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.AfterTest;
import org.testng.annotations.BeforeSuite;
import org.testng.annotations.AfterSuite;

import com.xinleju.erp.data.cache.api.BaseExtendAPI;
import com.xinleju.erp.flow.flowutils.bean.FlowResult;
import com.xinleju.erp.flow.flowutils.bean.PageBean;
import com.xinleju.erp.flow.service.api.extend.BaseAPI;
import com.xinleju.erp.flow.service.api.extend.dto.CtrlDTO;
import com.xinleju.erp.flow.service.api.extend.dto.DataAuthDTO;
import com.xinleju.erp.flow.service.api.extend.dto.DeptDTO;
import com.xinleju.erp.flow.service.api.extend.dto.FieldDTO;
import com.xinleju.erp.flow.service.api.extend.dto.OrgnDTO;
import com.xinleju.erp.flow.service.api.extend.dto.RoleDTO;
import com.xinleju.erp.flow.service.api.extend.dto.ScopeDTO;
import com.xinleju.erp.flow.service.api.extend.dto.UserDTO;

public class BaseAPIServiceRedisImplTest {
	
	private BaseExtendAPI baseExtendAPI;
	private BaseAPI baseAPI;
	
 

  @BeforeClass
  public void beforeClass() {
	  ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(new String[] {"test-dubbo.xml"});
      context.start();
      baseExtendAPI = (BaseExtendAPI)context.getBean("exBaseAPIService");
      baseAPI = (BaseAPI)context.getBean("baseAPIService");
  }

  /* 
//  @Test
//  public void findRootOrgns() {
//	  FlowResult<List<OrgnDTO>> fr = baseExtendAPI.findRootOrgns(new String[]{"zb"});
//	  System.out.println("findRootOrgns-----------------"+fr.getResult().get(0).getName());
//	  Assert.assertEquals(true, fr.getResult().size()>0);
//  }
//
//  @Test
//  public void findSubOrgns() {
//	  FlowResult<List<OrgnDTO>> fr = baseExtendAPI.findSubOrgns(1L, new String[]{"company"});
//	  for(OrgnDTO org: fr.getResult()){
//		  System.out.println("findSubOrgns-----------------"+org.getName());
//	  }
//	  Assert.assertEquals(false, fr.getResult().size()<=0);
//  }
//
//  @Test
//  public void findUserByLoginName() {
//	  FlowResult<UserDTO> fr = baseExtendAPI.findUserByLoginName("zhangxiang");
//	  Assert.assertEquals(true,"zhangxiang".equals(fr.getResult().getLoginName()));
//  }
  
  @Test
  public void getUserList(){
	  System.out.println("---------GetUserList----START------");
	  FlowResult<PageBean<UserDTO>> fr = baseExtendAPI.getUserList(2L, "", 1, 100, true, null);
	  List<UserDTO> users = fr.getResult().getItems();
	  if(fr.getResult()!=null){
		  for(UserDTO user:users){
			  System.out.println("---------"+user.getLoginName()+"----------"+user.getRealName());
		  }
	  }
	  System.out.println("---------GetUserList----END------");
  }
  
 // @Test
//  public void getUserByRoleRefId(){
//	  FlowResult<List<UserDTO>> fr = baseExtendAPI.getUserByRoleRefId(36L);
//	  System.out.println("----------getUserByRoleRefId-----start--------------------");
//	  for(UserDTO user : fr.getResult()){
//		  System.out.println("---------"+user.getLoginName()+"----------"+user.getRealName());
//	  }
//	  
//	  System.out.println("----------getUserByRoleRefId-----end--------------------");
//  }
//  
//  @Test
//  public void getUserByRoleRefIds(){
//	  FlowResult<List<UserDTO>> fr = baseExtendAPI.getUserByRoleRefIds(new String[]{"29","36"});
//	  System.out.println("----------getUserByRoleRefId-----start--------------------");
//	  for(UserDTO user : fr.getResult()){
//		  System.out.println("---------"+user.getLoginName()+"----------"+user.getRealName());
//	  }
//	  
//	  System.out.println("----------getUserByRoleRefId-----end--------------------");
//  }

//  @Test
//  public void getAllCompany() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getCompanyById() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getCompanyByIds() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getDataAuth() {
//	  
//	  FlowResult<DataAuthDTO> fr = baseExtendAPI.getDataAuth("zhangxiang");
//	  for(Map.Entry<CtrlDTO, Map<FieldDTO, List<ScopeDTO>>> m : fr.getResult().getDetail().entrySet()){
//		  System.out.println("数据权限控制点----"+m.getKey().getName());
//		  for(Map.Entry<FieldDTO, List<ScopeDTO>> m0 : m.getValue().entrySet()){
//			  System.out.println("数据权限控维度--------"+m0.getKey().getName());
//			  for(ScopeDTO s : m0.getValue()){
//				  System.out.println("数据权限控范围------------"+s.getName());
//			  }
//		  }
//	  }
//	  
//  }
//
//  @Test
//  public void getDeptById() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getDeptByIds() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getFlows() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getFuncAuth() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getMainRoleString() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getMainRoleLong() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getMaxBizCode() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getNextBizCode() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getOpAuth() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getRoleByCompanyId() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getRoleById() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getRoleByIds() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getRoleByRoleId() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getRoleByTeamId() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getRoleNameByIds() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getRootCategories() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getRootStandardRoles() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getSubCategories() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getSubStandardRoles() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getUserById() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getUserByIds() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getUserListLongStringIntegerIntegerBooleanMapStringObject() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getUserListLongBoolean() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void getUserNameByIds() {
//	  
//	  FlowResult<String> fr = baseExtendAPI.getUserNameByIds(new String[]{"1","2","3","4","5"});
//	  System.out.println("----------------------------------"+fr.getResult());
//  }
//  
//  @Test
//  public void getUserListByIds(){
//	  FlowResult<List<UserDTO>> fr = baseExtendAPI.getUserListByIds(new String[]{"1","2","3","4","5"});
//	  System.out.println("---------------------------------getUserListByIds");
//	  for(UserDTO uDTO : fr.getResult()){
//		  System.out.println("----------------------------------"+uDTO.getRealName());
//	  }
//  }
//  
//  @Test
//  public void getDeptListByIds(){
//	  FlowResult<List<DeptDTO>> fr = baseExtendAPI.getDeptLIstByIds(new String[]{"1","2","3","4","5"});
//	  System.out.println("---------------------------------getDeptListByIds");
//	  for(DeptDTO uDTO : fr.getResult()){
//		  System.out.println("----------------------------------"+uDTO.getName());
//	  }
//  }
//  
//  @Test
//  public void getRoleListByIds(){
//	  FlowResult<List<RoleDTO>> fr = baseExtendAPI.getRoleListByIds(new String[]{"1","2","3","4","5"});
//	  System.out.println("---------------------------------getRoleListByIds");
//	  for(RoleDTO uDTO : fr.getResult()){
//		  System.out.println("----------------------------------"+uDTO.getName());
//	  }
//  }
//
//  @Test
//  public void isStored() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void sendMsg() {
//	  System.out.println("----------------sendMsg------------------------------------------");
//	  FlowResult<Boolean> fr =  baseExtendAPI.sendMsg("PL","100100001212", "汇报信息摧办张向---", "http://192.168.6.23:8081/plan/toCb.htm?rid=1","2015-04-02 14:30:20", "WD","0", "zhangxiang", null);
//	  System.out.println(fr.getResult());
//	  System.out.println(fr.getDebugInfo().getErrDesc().toString());
//  }
  */
//  @Test
//  public void finishFiBranch(){	  
//	  System.out.println("----------------finishFiBranch------------------------------------------");
//	  FlowResult<Boolean> fr =  baseAPI.finishFiBranch("2010", "3646475", "1", 3L);
//	  System.out.println("result----"+fr.getResult());
//	  System.out.println("isSuccess"+fr.isSuccess());
//	  System.out.println(fr.getDebugInfo().getErrDesc().toString());
//	  
//  }
 
  
//  @Test
//  public void finishFi(){	  
//	  System.out.println("----------------finishFi------------------------------------------");
//	  FlowResult<Boolean> fr =  baseAPI.finishFi("209", "3646475",  3L);
//	  System.out.println("result----"+fr.getResult());
//	  System.out.println("isSuccess"+fr.isSuccess());
//	  System.out.println(fr.getDebugInfo().getErrDesc().toString());
//	  
//  }
  
 
  @Test
  public void giveBackFi(){	  
	  System.out.println("----------------giveBackFi------------------------------------------");
	  FlowResult<Boolean> fr =  baseAPI.giveBackFi("2011", "3646475", 3L);
	  //System.out.println("result----"+fr.getResult());
	  System.out.println("isSuccess"+fr.isSuccess());
	  System.out.println(fr.getDebugInfo().getErrDesc().toString());
	  
  }
  /* 
//
//  @Test
//  public void store() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void undo() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void unstore() {
//    throw new RuntimeException("Test not implemented");
//  }
//
//  @Test
//  public void updateFlowData() {
//    throw new RuntimeException("Test not implemented");
//  }
*/}
