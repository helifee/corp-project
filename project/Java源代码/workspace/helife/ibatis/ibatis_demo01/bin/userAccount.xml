<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap>
	<typeAlias alias="account" type="helife.ibatis.bean.Account"/>
	
	<!-- 
	<select id="getAllUsers" resultClass="hashmap" parameterClass="String">
		select * from user_account where groupname=#groupnmae#
	</select>
	-->
	
	<resultMap class="hashmap" id="rm">
		<result property="userid" column="id"/>
		<result property="username" column="username"/>
		<result property="password" column="password"/>
		<result property="groupname" column="groupname"/>
	</resultMap>
	<select id="getAllUsers" resultMap="rm" parameterClass="String">
		select * from user_account where groupname=#groupnmae#
	</select>
	
	
	<select id="getAllUsers2" resultClass="account" parameterClass="String">
		select id as userid, username, password, groupname 
		from user_account where groupname=#groupnmae#
	</select>
	
	<select id="getAllUsers3" resultClass="account" parameterClass="String">
		select id as userid, username, password, groupname 
		from user_account where groupname like '%$con$%'
	</select>
	
	<select id="getOneUser" resultClass="account" parameterClass="String">
		select * from user_account where username=#username#
	</select>
	
	<select id="getTotal" resultClass="int">
		select count(*) from user_account
	</select>
	
	<select id="selectXml" resultClass="xml" xmlResultName="log" parameterClass="String">
		select * from user_account where groupname=#groupname#
	</select>
	
	<insert id="insertUser" parameterClass="account">
		insert into user_account(username, password, groupname) 
		values (#userName#, #password#, #groupName#)
	</insert>
	<parameterMap class="account" id="pm">
		<parameter property="userName" jdbcType="varchar"/>
		<parameter property="password" jdbcType="varchar"/>
		<parameter property="groupName" jdbcType="varchar"/>
	</parameterMap>
	<insert id="insertUser2" parameterMap="pm">
		insert into user_account(username, password, groupname) 
		values (?,?,?)
		<selectKey resultClass="int">
			select last_insert_id()
		</selectKey>
	</insert>
	
	<statement id="createTable">
		create table tb(id int, name varchar(10))
	</statement>
		
</sqlMap>