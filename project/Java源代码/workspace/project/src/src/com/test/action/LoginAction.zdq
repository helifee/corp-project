package com.test.action;

import com.opensymphony.xwork2.ActionSupport;
import com.test.service.LoginService;

public class LoginAction extends ActionSupport
{
	private String username;
	private String password;

	private LoginService loginService;

	// private HttpServletResponse response;

	// private HttpServletRequest request;

	public String getUsername()
	{
		return username;
	}

	public void setUsername(String username)
	{
		this.username = username;
	}

	public String getPassword()
	{
		return password;
	}

	public void setPassword(String password)
	{
		this.password = password;
	}

	public void setLoginService(LoginService loginService)
	{
		this.loginService = loginService;
	}

	@SuppressWarnings("unchecked")
	public String execute() throws Exception
	{

		if (loginService.isLogin(username, password))
		{
			return SUCCESS;
		}
		else
		{
			return INPUT;
		}

		// //username invalid
		// if(!"hello".equals(this.getUsername()))
		// {
		// throw new UsernameException("username invalid");
		// }
		// //password invalid
		// else if(!"world".equals(this.getPassword()))
		// {
		// throw new PasswordException("password invalid");
		// }
		// else
		// {
		// return SUCCESS;
		// }
		//		

		// if ("hello".equals(this.getUsername().trim())
		// && "world".equals(this.getPassword().trim()))
		// {
		// Map map = ActionContext.getContext().getSession();
		//			
		// map.put("user","valid");
		//			
		//			
		// // ActionContext.getContext().put("zhangsan","helloworld");
		//			
		// // request.setAttribute("zhangsan","helloworld");
		//			
		// HttpServletResponse response = ServletActionContext.getResponse();
		//			
		// Cookie cookie = new Cookie("username",this.getUsername());
		//			
		// cookie.setMaxAge(1000);
		//			
		// response.addCookie(cookie);
		//			
		// return "success";
		// }
		// else
		// {
		// this.addFieldError("username", "username or password error");
		// return "failer";
		// }

	}

	// @SuppressWarnings("unchecked")
	// public String hello() throws Exception
	// {
	//		
	// System.out.println("login invoked");
	//		
	// if ("hello".equals(this.getUsername().trim())
	// && "world".equals(this.getPassword().trim()))
	// {
	// Map map = ActionContext.getContext().getSession();
	//			
	// map.put("user","valid");
	//			
	//			
	// // ActionContext.getContext().put("zhangsan","helloworld");
	//			
	// // request.setAttribute("zhangsan","helloworld");
	//			
	// HttpServletResponse response = ServletActionContext.getResponse();
	//			
	// Cookie cookie = new Cookie("username",this.getUsername());
	//			
	// cookie.setMaxAge(1000);
	//			
	// response.addCookie(cookie);
	//			
	// return "success";
	// }
	// else
	// {
	// this.addFieldError("username", "username or password error");
	// return "failer";
	// }
	//
	// }

	// @Override
	// public void validate()
	// {
	// if (null == this.getUsername() || "".equals(this.getUsername().trim()))
	// {
	// this.addFieldError("username", "username required");
	// }
	// if (null == this.getPassword() || "".equals(this.getPassword().trim()))
	// {
	// this.addFieldError("password", "password required");
	// }
	// }

	// public void setServletRequest(HttpServletRequest request)
	// {
	// System.out.println("request");
	// this.request = request;
	// }

}
