package com.creditease.b2bsettle.basedata.controller;

import java.util.ArrayList;
import java.util.List;

import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.client.RestTemplate;

import com.creditease.b2bsettle.basedata.base.ControllerBaseTest;
import com.creditease.b2bsettle.basedata.controller.param.ReturnVo;
import com.creditease.b2bsettle.basedata.external.model.Corp;
import com.creditease.b2bsettle.basedata.external.model.CorpBean;
import com.creditease.b2bsettle.basedata.external.model.EnterpriseRetVo;
import com.creditease.b2bsettle.basedata.external.model.ParamBean;
import com.creditease.b2bsettle.basedata.external.model.QuerySettleMemberBean;
import com.creditease.b2bsettle.basedata.external.model.SettleCenterBean;

public class SettleCenterControllerTest extends ControllerBaseTest {
	
    @Autowired
    private RestTemplate restUtil;

	@Test
	public void findSettleBy() {
		String url = "http://10.100.142.99:7788/basedata/external/settlecenter/findsettle";
		CorpBean bean = new CorpBean();
		bean.setUserId("zhangsan");
		List<Corp> eIdList = new ArrayList<Corp>();
//		for(int i=1; i<10; i++) {
//			Corp corp = new Corp();
//			corp.seteId("00" + i);
//			eIdList.add(corp);
//			
//		}
		Corp c = new Corp();
		c.seteId("EID-001");
		eIdList.add(c);
		bean.seteIdList(eIdList);
		super.postAndPrint(url, bean, SettleCenterBean.class);
	}
	
	@Test
	public void findCorpOfSettle() {
		String url = "http://10.100.142.99:7788/basedata/external/settlecenter/findcorp";
		QuerySettleMemberBean bean = new QuerySettleMemberBean();
		bean.setSettleCenterId("1");
		bean.setUserId("zhangsan");
		super.postAndPrint(url, bean, EnterpriseRetVo.class);
	}
	
	@Test
	public void findAllSettle() {
		String url = "http://10.100.142.99:7788/basedata/external/settlecenter/allSettleCenter";
		ParamBean param = new ParamBean();
		super.postAndPrint(url, param, SettleCenterBean.class);
	}
	
	@Test
	public void findSettleTree() {
		String url = "http://localhost:8080/basedata/settle/tree";
		super.postAndPrint(url, null, ReturnVo.class);
	}
	
	@Test
	public void findMember() {
		String url = "http://localhost:8080/basedata/settle/getmembercorp";
		long settleId = 1;
		this.restUtil.getForObject(url, ReturnVo.class, settleId);
	}
}
