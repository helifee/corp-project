package com.creditease.b2bsettle.basedata.service;

import java.util.Date;
import java.util.List;

import org.junit.Assert;
import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;

import com.creditease.b2bsettle.basedata.base.BaseTest;
import com.creditease.b2bsettle.basedata.model.Menu;

public class MenuSeviceTest extends BaseTest {

	@Autowired
	private MenuService menuService;
	
	@Test
	public void addMenu() {
		Menu menu = new Menu();
		menu.setCode("00");
		menu.setName("结算平台");
		menu.setUrl("http://www.xxx.xx/abc/d?a=xxx");
		menu.setFunctionCode("00");
		menu.setSysId("portal");
		menu.setCreatedTime(new Date());
		menuService.addMenu(menu);
	}
	
	@Test
	public void delMenu() {
		menuService.delMenu("portal", "00");
		Menu menu = menuService.findMenuByCode("portal", "00");
		Assert.assertNull(menu);
	}
	
	@Test
	public void updateMenu() {
		Menu menu = menuService.findMenuByCode("portal", "00");
		menu.setName("结算平台new");
		menu.setModifyTime(new Date());
		menuService.updateMenu(menu);
		Menu newMenu = menuService.findMenuByCode("portal", "00");
		Assert.assertEquals("结算平台new", newMenu.getName());
	}
	
	@Test
	public void findMenuByCode() {
		Menu menu = menuService.findMenuByCode("portal", "00");
		Assert.assertEquals("结算平台", menu.getName());
	}
	
	@Test
	public void updateFunctionOf() {
		menuService.updateFunctionOf("portal", "00", "01");
		Menu menu = menuService.findMenuByCode("portal", "00");
		Assert.assertEquals("01", menu.getFunctionCode());
	}
	
	@Test
	public void findMenusOf() {
		List<Menu> menus = menuService.findMenusOf(4);
		Assert.assertEquals(2, menus.size());
	}
}
