
package com.creditease.b2bsettle.basedata.service;

import java.util.ArrayList;
import java.util.List;

import org.junit.Assert;
import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;

import com.creditease.b2bsettle.basedata.base.BaseTest;
import com.creditease.b2bsettle.basedata.model.Authorization;
import com.creditease.b2bsettle.basedata.model.EsEnterpriseInfo;
import com.creditease.b2bsettle.basedata.model.Menu;
import com.creditease.b2bsettle.basedata.model.MenuCorpBean;

public class AuthorizationServiceTest extends BaseTest {

	@Autowired
	private AuthorizationService authorizationService;
	
	@Test
	public void saveAuthorizationAudit() {
		
	}
	
	@Test
	public void saveAuthorization() {
		
		List<Authorization> authList = new ArrayList<Authorization>();
		long auditNo = 1;
		Authorization auth = new Authorization();
		auth.setUser("1");
		auth.setCorp("1");
		auth.setRole(1);
		auth.setAuditNumber(auditNo);
		authList.add(auth);
		
		Authorization auth2 = new Authorization();
		auth2.setUser("1");
		auth2.setCorp("1");
		auth2.setRole(2);
		auth2.setAuditNumber(auditNo);
		authList.add(auth2);
		
		Authorization auth3 = new Authorization();
		auth3.setUser("1");
		auth3.setCorp("2");
		auth3.setRole(1);
		auth3.setAuditNumber(auditNo);
		authList.add(auth3);
		
		Authorization auth4 = new Authorization();
		auth4.setUser("1");
		auth4.setCorp("2");
		auth4.setRole(2);
		auth4.setAuditNumber(auditNo);
		authList.add(auth4);
		authorizationService.save(authList);
		
	}
	
	@Test
	public void delAllNotInAuditNo() {
		boolean delAllNotInAuditNo = authorizationService.delAllNotInAuditNo(1, 1);
		Assert.assertTrue(delAllNotInAuditNo);
	}
	
	@Test
	public void delByAuditNo() {
		boolean delByAuditNo = authorizationService.delByAuditNo(2);
		Assert.assertTrue(delByAuditNo);
	}
	
	@Test
	public void findAllCorpBy() {
		String userId = "1";
		List<EsEnterpriseInfo> findAllCorpBy = authorizationService.findAllCorpBy(userId);
		Assert.assertEquals(2, findAllCorpBy.size());
	}
	
	@Test
	public void findAllMenu() {
		String userId = "lisi";
		List<MenuCorpBean> findAllMenu = authorizationService.findAllMenu(userId, "business");
		Assert.assertEquals(6, findAllMenu.size());
	}
}
