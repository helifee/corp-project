package com.creditease.b2bsettle.basedata.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Modifying;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

import com.creditease.b2bsettle.basedata.model.SettleCorp;

@Repository
public interface SettleCorpRepository extends JpaRepository<SettleCorp, Long> {

	@Modifying
	@Transactional
	@Query("update SettleCorp sc set sc.deleted = 1 where sc.settleId = :settleId")
	void delBySettleId(@Param("settleId")long settleId);

	@Modifying
	@Transactional
	@Query("update SettleCorp sc set sc.deleted = 0 where sc.auditNumber = :auditNo")
	int enableByAuditNo(@Param("auditNo")long auditNo);

	@Modifying
	@Transactional
	@Query("update SettleCorp sc set sc.deleted = 1 where sc.auditNumber = :auditNo")
	int delByAuditNo(@Param("auditNo")long auditNo);

	@Modifying
	@Transactional
	@Query("update SettleCorp sc set sc.deleted = 1 where sc.settleId = :settleId and sc.auditNumber != :auditNo")
	int delNotInAuditNo(@Param("settleId")long settleId, @Param("auditNo")long auditNo);


}
