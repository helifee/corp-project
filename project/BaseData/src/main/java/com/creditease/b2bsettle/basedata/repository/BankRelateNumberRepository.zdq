package com.creditease.b2bsettle.basedata.repository;

import java.util.Date;
import java.util.List;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Modifying;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

import com.creditease.b2bsettle.basedata.model.BankRelateNumber;
import com.creditease.b2bsettle.basedata.model.User;

/**
 * 省级地区管理持久层
 * 
 * @author shihl
 *
 */
@Repository
public interface BankRelateNumberRepository extends JpaRepository<BankRelateNumber, Long> {

	@Transactional
	@Modifying
	@Query(" update BankRelateNumber brn set " 
			+ "brn.relateCode = :relateCode, "
			+ "brn.branchName = :branchName, "
			+ "brn.branchAddress = :branchAddress, "
			+ "brn.bankName = :bankName, "
			+ "brn.bankCode = :bankCode, "
			+ "brn.zoneCode = :zoneCode, "
			+ "brn.province = :province, "
			+ "brn.city = :city, "
			+ "brn.comments = :comments, "
			+ "brn.modifier = :modifier, " 
			+ "brn.modifyTime  = :modifyTime  "
			+ "where brn.id = :id")
	public void modifyBankRelateNumber(
			@Param("id") long id,
			@Param("relateCode") String relateCode,
			@Param("branchName") String branchName,
			@Param("branchAddress") String branchAddress,
			@Param("bankName") String bankName,
			@Param("bankCode") String bankCode,
			@Param("zoneCode") String zoneCode,
			@Param("province") String province,
			@Param("city") String city,
			@Param("comments") String comments,
			@Param("modifier") String modifier,
			@Param("modifyTime") Date modifyTime
			);

	
	
	@Transactional
	@Modifying
	@Query(" update BankRelateNumber brn set  brn.deleted = :deleted, brn.modifier = :modifier, brn.modifyTime  = :modifyTime  "
			+ "where brn.id = :id")
	public void deleteBankRelateNumber(
			@Param("id") long id,
			@Param("deleted") boolean deleted,
			@Param("modifier") String modifier,
			@Param("modifyTime") Date modifyTime);
	
	
	
	public List<BankRelateNumber> findByBankCodeAndProvinceAndCity(String bankCode, String province, String city);
	public BankRelateNumber findByRelateCodeAndCanOperateAndDeleted(String relateCode,boolean canOperate ,  boolean deleted);//联行号
	
	
	

}
