/**
 * 
 */
package test;

import java.io.OutputStreamWriter;
import java.io.StringReader;
import org.exolab.castor.mapping.Mapping;
 
import org.exolab.castor.xml.Marshaller;
import org.exolab.castor.xml.Unmarshaller;

/**
 * @包名   test
 * @文件名 Test.java
 * @作者   zcx
 * @创建日期 Sep 19, 2011
 * @版本 V 1.0
 */
public class Test {
	 public   void testCastor() {   
		       Mapping map = new Mapping();   
		        String strXml = "<?xml version='1.0' encoding='UTF-8'?>" +   
	            "<item_info><material><name>身份证</name><type>原件</type><copys>1</copys></material>" +   
	            "<material><name>护照</name><type>复印件</type><copys>2</copys></material>" +   
	            "</item_info>";   
		      try {   
	            map.loadMapping(this.getClass().getClassLoader().getResource(   
	                   "test/mapping.xml"));   
	         Unmarshaller unmar = new Unmarshaller(map);   
	           SurvForm survForm = (SurvForm) Unmarshaller.unmarshal(SurvForm.class,   
	                    new StringReader(strXml));   
	           System.out.println(survForm.getItems()+"----");
	         Marshaller marshaller = new Marshaller(new OutputStreamWriter(   
	                    System.out));  
	           marshaller.setMapping(map);   
	           marshaller.marshal(survForm);   
	   		
	        } catch (Exception e) {   
	            e.printStackTrace();   
	        }   
	    }  

	public static void main(String[] args) {
		new Test().testCastor();

	}

}
