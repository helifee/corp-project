easy=(function(){var A=function(_,B){var A;for(A in B){if(B.hasOwnProperty(A)){_[A]=B[A];}}return _;},D=function(B,A){var _=Array.prototype.slice.call(arguments,2);return function(){return B.apply(A,_);};},C=function(B,A){var _=Array.prototype.slice.call(arguments,2);return function(C){var D=C||window.event,E=Array.prototype.concat(D,_);return B.apply(A,E);};},_=function(_){return typeof _=="string"?document.getElementById(_):_;},B={isGecko:/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent),isStrict:document.compatMode=="CSS1Compat",isOpera:window.opera!=undefined,isWebkit:/webkit/i.test(navigator.userAgent)};if(/msie (\d+\.\d)/i.test(navigator.userAgent)){B.ie=document.documentMode||parseFloat(RegExp.$1);}if(/firefox\/(\d+\.\d)/i.test(navigator.userAgent)){B.firefox=parseFloat(RegExp.$1);}if(/chrome\/(\d+\.\d)/i.test(navigator.userAgent)){B.chrome=parseFloat(RegExp.$1);}if(/opera\/(\d+\.\d)/i.test(navigator.userAgent)){B.opera=parseFloat(RegExp.$1);}if((/(\d+\.\d)(\.\d)?\s+safari/i.test(navigator.userAgent)&&!/chrome/i.test(navigator.userAgent))){B.safari=parseFloat(RegExp.$1);}return{extend:A,bind:D,bindWithEvent:C,browser:B,g:_};}());easy.fx=function(A){var _=function(){};this.options=easy.extend({duration:500,animate:true,selector:"",from:[],to:[],onStart:function(){return true;},onAnimate:_,onStop:_,toggle:false,transition:function(A,B,C,_){return C*A/_+B;}},A);this.timer=null;};easy.fx.prototype={animate:function(_){var B=new Date().getTime()+_,A=this;A.timer=window.setInterval(function(){var _=new Date().getTime();if(_<B){var C=B-_,D=A.computeStyle(C);baidu.setStyles(A.options.selector,D);A.options.onAnimate.call(null,_,B,D);}else{A.stop();}},30);},start:function(){window.clearTimeout(this.timer);this.timer=null;var _=this.options.onStart.call();if(!this.options.animate){this.stop();}else{if(_){this.animate(this.options.duration);}}},stop:function(){window.clearTimeout(this.timer);this.timer=null;var D=this.options,B=D.to.length,_={},C;for(C=0;C<B;++C){_[D.to[C][0]]=D.to[C][1]+(D.to[C][2]==1?"px":0);}baidu.setStyles(D.selector,_);D.onStop.call();if(D.toggle){var A=D.to;D.to=D.from;D.from=A;}},computeStyle:function(A){var C={},G=this.options,E=G.to.length,F;for(F=0;F<E;++F){var D=G.from[F],_=G.to[F],B=D[0];C[B]=G.transition(A,_[1],D[1]-_[1],G.duration)+(G.from[F][2]==1?"px":0);}return C;}};(function(){var O,P,T,B,D,Y,G,X,N,W,Q,S=false,I="http://baike.baidu.com/history/id=",H='<div><span>\u767e\u79d1\u9ad8\u624b</span>\u90fd\u662f\u4ece\u96f6\u5b66\u8d77\u7684\u3002</div><div class="indent">\u6211\u5c31\u662f\u6b63\u5728\u5b66\u4e60\u7684<span>\u6f5c\u529b\u6d3e\uff01</span></div>';function U(B,_){switch(B){case"ucInfo":V(_);break;case"ucRole":E(function(){return _&&_.length>0;},R,_,D);break;case"ucBadge":E(function(){return _&&_.length>0;},K,_,Y);break;case"ucHonor":E(function(){return!!_;},A,_,X);break;case"ucGoingTask":M(_);break;case"ucGdVer":E(function(){return!!_;},J,_,N);break;case"ucDefault":Z(_);break;case"ucEdit":L(_);break;}}function V(A){var _=bkuc.user.getUserAvatar(A.avatar,A.level);P.innerHTML='<img width="84px" height="84px" src="'+_+'" />';T.innerHTML=A.userName;T.href="http://passport.baidu.com/?business&aid=7&default_tab=2&un="+A.userName+"#3";T.target="_blank";B.innerHTML='<a class="usercardtitle level'+A.level+'" target="_blank" href="http://www.baidu.com/search/baike_help.html#&#30334;&#31185;&#31215;&#20998;&#20307;&#31995;">\u7b49\u7ea7'+A.level+"</a>";}function C(A){var _=bkuc.user.getUserAvatar(A.avatar,A.level);P.innerHTML='<img width="84px" height="84px" src="'+_+'" />';T.innerHTML=A.userName;T.href="http://passport.baidu.com/?business&aid=7&default_tab=2&un="+A.userName+"#3";T.target="_blank";B.innerHTML='<a class="usercardtitle level'+A.level+'" target="_blank" href="http://www.baidu.com/search/baike_help.html#&#30334;&#31185;&#31215;&#20998;&#20307;&#31995;">\u7b49\u7ea7'+A.level+"</a>";}function R(E){var B=E.length;if(B==0){return;}var _=[];_.push("<ul>");var C;for(C=0;C<B;++C){var A=E[C];_.push('<li><img width="16px" height="16px" src="'+A.src+'" /><a target="_blank" href="'+A.href+'">'+A.name+"</a></li>");}_.push("</ul>");D.innerHTML=_.join("");}function K(C){var B=C.length;if(B==0){return;}var _=[];_.push("<ul>");var D;for(D=0;D<B;++D){var A=C[D];if(A.id!=null){_.push('<li><img width="38px" height="38px" src="'+A.SmallIcon+'" title="'+A.Name+'" /></li>');}}_.push("</ul>");Y.innerHTML=_.join("");}function A(_){if(_==1){X.innerHTML='\u6211\u7684\u8363\u8a89\uff1a<a target="_blank" href="/starlist/">\u767e\u79d1\u4e4b\u661f</a>';}}function M(_){var C=_.length;if(C==0){return;}var A=[];A.push('<ul class="fix">');var D;for(D=0;D<C;++D){var B=_[D];A.push('<li class="going-task-li"><a target="_blank" href="'+B.href+'"><img width="16px" height="16px" src="'+B.img+'" title="'+B.tip+'" /></a></li>');}A.push("</ul>");G.innerHTML='<div class="fl">\u6b63\u5728\u53c2\u52a0\u7684\u4efb\u52a1\uff1a</div>'+A.join("");}function J(_){var A=baidu.string.subByte(_.lemmaTitle,22);N.innerHTML='\u6211\u7684\u4f18\u8d28\u7248\u672c\uff1a<a target="_blank" title="'+_.lemmaTitle+'" href="'+(I+_.id)+'">'+A+"</a>";}function Z(_){W.innerHTML='<div class="book"></div><div class="msg">'+_+"</div>";}function L(_){Q.innerHTML="\u901a\u8fc7\u7248\u672c\u6570\uff1a"+_.passCount+"&nbsp;&nbsp;&nbsp;&nbsp;\u7248\u672c\u901a\u8fc7\u7387\uff1a"+_.passRatio+"%";}function F(){O=baidu.q("user-card")[0];P=baidu.q("uc-pic")[0];T=baidu.q("uc-id")[0];B=baidu.q("uc-level")[0];D=baidu.q("uc-role")[0];Y=baidu.q("uc-badge")[0];G=baidu.q("uc-going-task")[0];X=baidu.q("uc-honor")[0];N=baidu.q("uc-gq")[0];W=baidu.q("uc-default")[0];Q=baidu.q("uc-edit")[0];}function _(_){F();if(_.userInfo){V(_.userInfo);}else{C(_);}E(function(){return _.roleInfo&&_.roleInfo.length>0;},R,_.roleInfo,D);E(function(){return _.badgeInfo&&_.badgeInfo.length>0;},K,_.badgeInfo,Y);E(function(){return!!_.honorInfo;},A,_.honorInfo,X);E(function(){return _.ongoingTaskInfo&&_.ongoingTaskInfo.length>0;},M,_.ongoingTaskInfo,G);E(function(){return!!_.gdVerInfo;},J,_.gdVerInfo,N);E(function(){return!_.roleInfo&&!_.badgeInfo&&!_.honorInfo&&!_.ongoingTaskInfo&&!_.gdVerInfo;},Z,H,W);E(function(){return _.editInfo;},L,_.editInfo,Q);}function E(C,B,A,_){condition=C();if(condition){B(A);_.style.display="block";if(B!=Z&&B!=L&&W.style.display!="none"){W.style.display="none";}}else{_.style.display="none";}}usercard={setContent:U,buildCard:_};}());bk=bk||{};bk.moduleLoader=function(){var _=[],A=0,C=function(F,C){var E=document.createElement("link"),B=0,D=document.styleSheets.length;if(baidu.browser.ie){E.onload=_;}function _(){if(B){return;}if("function"==typeof C){C();B=1;}}document.getElementsByTagName("head")[0].appendChild(E);E.type="text/css";E.rel="stylesheet";E.href=F;if(!baidu.browser.ie){var A=window.setInterval(function(){var _=document.styleSheets.length;if(_>D&&E.sheet&&!B){window.clearInterval(A);if("function"==typeof C){window.setTimeout(C,100);B=1;}}},40);}};function E(F,A){var E=D(F),B=E=="css"?C:baidu.sio.callByBrowser;_.push({url:F,func:B,callback:A});}function B(){var E=_.length;if(A==E){return;}var C=_[A],D=null;if(A<E){if(C.callback){D=function(){C.callback();B();};}else{D=function(){B();};}}A++;C.func(C.url,D);}function D(A){var _=A.lastIndexOf(".");if(_<0){return null;}return A.slice(_+1);}baidu.extend(this,{add:E,load:B});};(function(){var U={};usercard.addCardInfo=G;var J=['<div class="user-card fix">','<div class="top-bg"></div>','<div class="card-body fix">','<div class="uc-l">','<div class="uc-pic"></div>','<div class="uc-name"><a class="uc-id" href=""></a></div>','<div class="uc-level"></div>',"</div>",'<div class="uc-r">','<div class="uc-items">','<div class="uc-role fix"></div>','<div class="uc-badge fix"></div>','<div class="uc-honor"></div>','<div class="uc-going-task fix"></div>','<div class="uc-gq"></div>','<div class="uc-default"></div>','<div class="uc-edit"></div>',"</div>",'<span class="pillar"></span>',"</div>","</div>","</div>"].join(""),R='<div class="expert-card-wrap clearfix"><div class="expert-card clearfix">\t\t\t\t<div class="expert-img">\t\t\t\t\t<img src="#{littleImg}"/>\t\t\t\t</div>\t\t\t\t<div class="expert-info">\t\t\t\t\t<div class="expert-name"><a href="/zhuanjia/#{homeUrl}" target="_blank">#{expertName}<span class="i"></span></a></div>\t\t\t\t\t<div class="expert-title">#{longTitle}</div>\t\t\t\t\t<div class="expert-fields">\u9886\u57df\uff1a#{fields}</div>\t\t\t\t\t<div class="expert-judges">\u505a\u51fa<span class="num">#{judgeCount}</span>\u6b21\u5224\u65ad\uff0c\u6307\u5bfc\u4e86<span class="num">#{userCount}</span>\u540d\u7f51\u53cb</div>\t\t\t\t</div>\t\t\t</div></div>',S="/api/usercard/info?",H="/ajax/doubt/expertinfo?",Q="http://baike.bdimg.com/static/usercenter/css/release/bk.usercard.css?t=20120315125647",B="http://baike.bdimg.com/static/usercenter/js/public/bkuc.js?t=20120315125647",V,P,Y=false,D,E,T,_;function X(_){baidu.removeClass(T,"usercardwrap");baidu.addClass(T,"expertcard");T.style.backgroundImage="none";T.innerHTML=baidu.string.format(R,_);}function W(B,D){if(U[B]){var A=U[B];if(A.expertName){X(U[B]);}else{F();usercard.buildCard(U[B]);}_.start();}else{if(D&&baidu.dom.getAttr(D,"expertId")){var C=H+baidu.url.jsonToQuery({expertId:baidu.dom.getAttr(D,"expertId"),r:Math.random(),callback:"usercard.addCardInfo"});baidu.ajax.request(C,{method:"get",onsuccess:function(C,D){var A=baidu.json.decode(D);usercard.addCardInfo(A.data);X(U[B]);_.start();},onfailure:function(){}});}else{C=S+baidu.url.jsonToQuery({userName:encodeURIComponent(B),r:Math.random(),callback:"usercard.addCardInfo"});baidu.sio.callByBrowser(C,function(){if(U[B]){F();usercard.buildCard(U[B]);_.start();if(nslog){nslog(window.location.href,453);}}});}}}function N(J){var _=J,A=_.offsetHeight,G=baidu.dom.getPosition(_),D=G.left,H=G.top,F=baidu.page.getViewWidth(),I=baidu.page.getViewHeight(),C={l:baidu.page.getScrollLeft(),t:baidu.page.getScrollTop()},E=0,B=0;E=D-6;B=H+A;if(E>F+C.l-V){E=F+C.l-V-6;}if(B>I+C.t-P){B=H-P;}T.style.left=E+"px";T.style.top=B+"px";}function C(_){if(Y){return;}T.style.left="-500px";Y=false;}function A(A,_){Y=true;baidu.dom.setStyle(E,"opacity",0);if(U[_]){T.style.backgroundImage="none";}else{T.style.backgroundImage="url(http://baike.bdimg.com/static/usercenter/images/usercard/loading.gif)";}N(A);W(_,A);}function K(){clearTimeout(D);Y=false;D=setTimeout(C,200);}function L(_,C){var B=baidu.event.get(_);baidu.event.stop(_);var E=B.target;clearTimeout(D);D=setTimeout(function(){A(E,C);},700);}function G(A){if(A&&A.userInfo&&A.userInfo.userName){var _=A.userInfo.userName;A.editInfo={passCount:A.userInfo.passCount,passRatio:A.userInfo.passRatio};U[_]=A;}else{_=A.expertInfo.expertName;U[_]=A.expertInfo;}}function F(){baidu.removeClass(T,"expertcard");baidu.addClass(T,"usercardwrap");T.innerHTML=J;}function O(){if(baidu.browser.ie==6){try{document.execCommand("BackgroundImageCache",false,true);}catch(A){}}T=document.createElement("div");T.id="usercard-wrap";baidu.addClass(T,"usercard-wrap");baidu.addClass(T,"usercardwrap");T.innerHTML=J;document.body.appendChild(T);V=352;P=T.offsetHeight;E=baidu.dom.first(T);baidu.dom.setStyle(E,"opacity",0);baidu.each(baidu.q("usercard",document.body,"a"),function(_){I(_);});baidu.on(T,"mouseover",function(){Y=true;});baidu.on(T,"mouseout",K);_=new easy.fx({duration:350,selector:E,from:[["opacity",0,0]],to:[["opacity",1,0]],transition:function(A,B,C,_){return-C*(A/=_)*(A-2)+B;}});}function I(A){var _=A.innerHTML.replace(/<span([^>]*)><\/span>/i,"");if(_){baidu.on(A,"mouseover",function(A){L(A||window.event,_);});baidu.on(A,"mouseout",K);}}usercard.bindTrigger=I;(function M(){var _=new bk.moduleLoader();if(typeof bkuc=="undefined"){_.add(B);_.load();}baidu.page.loadCssFile(Q);O();}());}());