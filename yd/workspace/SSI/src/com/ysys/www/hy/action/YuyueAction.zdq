/*
 * Copyright (c) 2009-2010 by DaLian YuDong Computer System CO.,LTD
 * All rights reserved.
 *      Project: SSH
 *    SubSystem: 会议室管理子系统
 */

package com.ysys.www.hy.action;

import java.util.List;

import com.opensymphony.xwork2.ActionSupport;
import com.ysys.www.hy.dao.condition.Hys;
import com.ysys.www.hy.service.YuyueService;
import com.ysys.www.hy.service.common.CommonConstants;
import com.ysys.www.hy.service.common.SessionManager;
import com.ysys.www.hy.service.common.UserInfo;
import com.ysys.www.hy.service.condition.YuyueInfo;

public class YuyueAction extends ActionSupport {

	private static final long serialVersionUID = 7129976431179228717L;

	private YuyueService yuyueService;	// 预约Action对应Service
	private List<Hys> hysList;			// 会议室一览信息
	private YuyueInfo yuyueinfo;

	@Override
	public String execute() {

		// 设置会议室下拉列表
		this.setHysList(yuyueService.getHysAll());
		
		// 从session中取得申请人
		SessionManager session = new SessionManager();
		String sqr = ((UserInfo) session.get(CommonConstants.USERINFO)).getUserName();
		YuyueInfo info = new YuyueInfo();
		info.setSqr(sqr);
		this.setYuyueinfo(info);
		
		return SUCCESS;
	}
	
	public String save() {
		
		int sign = yuyueService.saveYuyueData(yuyueinfo);
		
		return SUCCESS;
	}

	public void setYuyueService(YuyueService yuyueService) {
		this.yuyueService = yuyueService;
	}

	public List<Hys> getHysList() {
		return hysList;
	}

	public void setHysList(List<Hys> hysList) {
		this.hysList = hysList;
	}

	public YuyueInfo getYuyueinfo() {
		return yuyueinfo;
	}

	public void setYuyueinfo(YuyueInfo yuyueinfo) {
		this.yuyueinfo = yuyueinfo;
	}
}