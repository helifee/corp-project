package com.ysys.www.hy.serviceImpl;

import java.util.List;

import com.ysys.www.hy.dao.LoginDAO;
import com.ysys.www.hy.dao.condition.Tempinfo;
import com.ysys.www.hy.service.LoginService;
import com.ysys.www.hy.service.common.CommonConstants;
import com.ysys.www.hy.service.common.SessionManager;
import com.ysys.www.hy.service.common.UserInfo;

public class LoginServiceImpl implements LoginService {
	private LoginDAO loginDAO;

	public void setLoginDAO(LoginDAO loginDAO) {
		this.loginDAO = loginDAO;
	}

	@Override
	public UserInfo login(String userid, String password) {

		SessionManager session = new SessionManager();

		if (null == password) {
			return null;
		}
		if (null == userid) {
			return null;
		} else {
			userid = CommonConstants.YD + userid;
		}
		List<Tempinfo>  users = loginDAO.login(userid);
		if (users.size() < 1) {
			return null;
		}
		if (password.equals(((Tempinfo) users.get(0)).getEmpPasswd())) {
			UserInfo loginuser = new UserInfo();
			loginuser.setUserID(users.get(0).getId());
			loginuser.setUserName(users.get(0).getEmpName());
			loginuser.setJobId(users.get(0).getEmpJobid());
			session.set(CommonConstants.USERINFO, loginuser);
			return loginuser;
		}
		return null;
	}

}
