<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.1.7//EN"
	"http://struts.apache.org/dtds/struts-2.1.7.dtd">
	
<struts>
	<!-- 工会图书管理系统配置 -->
	<package name="library" extends="struts-base" namespace="/library">	
		
		<interceptors>
			
			<!-- 图书系统默认拦截器 -->
			<interceptor name="libDefault" class="libInterceptor"/>
			
			<!-- 自定义用户权限验证用拦截器栈 -->
			<interceptor-stack name="YDBinterceptors">
				
				<interceptor-ref name="libDefault"/>
				
				<interceptor-ref name="defaultStack" />
			</interceptor-stack>

		</interceptors>
		
		<default-interceptor-ref name="YDBinterceptors"/>
		<global-results>
			<!-- 异常 -->
			<result name="delaultexception">/library/errormessagepage.jsp</result> 

		</global-results>

		<!-- 全局异常 -->
		<global-exception-mappings>
			<exception-mapping result="delaultexception" exception="java.lang.Exception"></exception-mapping>
		</global-exception-mappings>
		
		<!-- 主画面Action -->
		<action name="testAction" class="indexAction">
			<result name="success">/library/index.jsp</result>
		</action>
		<!-- 主画面返回Action -->
		<action name="returncommon"  method="returnindex" class="indexAction">
			<result name="success">/library/index.jsp</result>
		</action>		
<!--		李艺20101129借书画面-->
        <action name="booklending" method="loginjie" class="booklendingAction">
        	<result name="success" >/library/booklending.jsp</result>
        </action>
<!--		李艺20101206借书画面追加按钮操作-->
        <action name="booklendingadd" method="bookadd" class="booklendingAction">
			<result name="success" type="str">jsonHysInfo</result>
        </action>
<!--		李艺20101222借书画面追加按钮操作是否库存-->
        <action name="booklendingaddkc" method="bookaddkc" class="booklendingAction">
			<result name="success" type="str">jsonkcHysInfo</result>
        </action>        
<!--		李艺20101208借书画面追加出现重复情况操作-->
        <action name="booklendsercthmanybook" method="bookmanyadd" class="booklendingAction">
			<result name="success" type="str">jsonmanyHysInfo</result>
        </action>    
<!--		李艺20101209借书画面用户借书信息登录操作-->
        <action name="booklendinginsert" method="booklendinginsert" class="booklendingAction">
        	<result name="success" >/library/finish.jsp</result>
        </action>  
        <!--		李艺20101201借书画面密码验证操作-->
        <action name="userpwvalidate" method="mmvalidate" class="booklendingAction">
			<result name="success" type="str">mimaTF</result>
        </action>                       
<!--		李艺20101201图书登录画面-->
        <action name="bookinsert" method="getinfo" class="bookinsertAction">
        	<result name="success" >/library/bookinsert.jsp</result>
        </action> 
<!--		李艺20101201图书登录画面（豆瓣网查询图书详情）-->
        <action name="bookinfosercth" method="bookinfosercth" class="bookinsertAction">
        	<result name="success" >/library/bookinsertright.jsp</result>
        </action> 
 <!--		李艺20101214图书登录画面（登陆处理）-->
        <action name="bookuserinsert" method="bookuserinsert" class="bookinsertAction">
        	<result name="success" >/library/bookinsertright.jsp</result>
        </action>  
<!--		李艺20101214图书登录画面（成功处理）-->
        <action name="bookinsertfinish" method="bookinsertfinish" class="bookinsertAction">
        	<result name="success" >/library/finish.jsp</result>
        </action>  
<!--		李艺20101217借阅信息画面-->
        <action name="booklendinginfo" method="getlendinginfo" class="booklendinginfoAction">
        	<result name="success" >/library/booklendinginfo.jsp</result>
        	<result name="nopermit" >/library/login.jsp</result>
        </action>          
 <!--		李艺20101220借阅信息条件检索-->
        <action name="booklendinfomxsercth" method="getlendingmxinfo" class="booklendinginfoAction">
        	<result name="success" >/library/booklendinginfomx.jsp</result>
        	<result name="nopermit" >/library/login.jsp</result>
        </action>   
 <!--		李艺20101201借书画面密码验证操作-->
        <action name="userpwblinfovalidate" method="mmvalidate" class="booklendinginfoAction">
			<result name="success" type="str">mimaTF</result>
        </action>        
 <!--		李艺20101220借阅信息更新操作-->
        <action name="booklendingupdateinfo" method="updateLoaninfo" class="booklendinginfoAction">
        	<result name="success" >/library/booklendinginfomx.jsp</result>
        	<result name="nopermit" >/library/login.jsp</result>
        </action>                 
        
        
        
<!--		张弛20101202图书归还画面-->
        <action name="bookreturn" method="bookreturnInfo" class="bookreturnAction">
        	<result name="success" >/library/bookreturn.jsp</result>
        </action>  
<!--		张弛20101202图书归还操作-->
        <action name="loanchange" method="loanchange" class="bookreturnAction">
        	<result name="success" >/library/finish.jsp</result>
        </action>   
<!--		张弛20101205图书管理画面-->
        <action name="bookmanage" method="mamageInfoIndex" class="bookmanageAction">
        	<result name="success" >/library/bookmanage.jsp</result>
        </action> 
<!--		张弛20101207Login画面-->       
		<action name="userlogin" method="login" class="logonAction">
			<result name="input">/library/login.jsp</result>
			<result name="success">/library/index.jsp</result>   
			<result name="error">/library/login.jsp</result>   
		</action>   
		
<!--		张弛20101209Logout画面-->       
		<action name="userlogout" method="logout" class="logonAction">
			<result name="success">/library/login.jsp</result>   
		</action> 
<!--		张弛20101209还书画面密码验证操作-->
        <action name="passwordValidate" method="passwordValidate" class="bookreturnAction">
			<result name="success" type="str">passwordTF</result>
        </action>
<!--		张弛20101209还书画面密码验证操作-->
        <action name="passwordValidate2" method="passwordValidate" class="bookmanageAction">
			<result name="success" type="str">passwordTF</result>
        </action>
<!--		张弛20101215图书管理一览检索-->
        <action name="searchtable" method="getMamageInfo" class="bookmanageAction">
			<result name="success">/library/managetable.jsp</result>
        </action>
<!--		张弛20101217用户名和用户ID联动-->
        <action name="changeName" method="changeName" class="bookmanageAction">
			<result name="success" type="str">pursenameChg</result>
        </action>
<!--		张弛20101217用户名和用户ID联动-->
        <action name="isbnSearch" method="isbnSelect" class="bookmanageAction">
			<result name="success" type="str">jsonBookInfo</result>
        </action>
<!--		张弛20101222图书信息更新-->
        <action name="updbookList" method="bookinfoUpdate" class="bookmanageAction">
			<result name="success">/library/managetable.jsp</result>
        </action>
        
<!-- 李艺图片文件下载 -->
		<action name="getFile" class="libraryImageDownloadAction">
			<result name="success" type="stream">
				<param name="contentType">*/*</param>
			    <param name="inputName">downloadFile</param>
			    <param name="bufferSize">4096</param>
			</result>
		</action>
        
        
	</package>
</struts>