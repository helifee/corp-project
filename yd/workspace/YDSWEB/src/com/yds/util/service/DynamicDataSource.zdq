/*
 * @(#)DBToExcelUtil.java
 * Copyright (c) 2009-2010 大连远东计算机系统有限公司
 * All rights reserved.
 *      Project: 远东公司内部网
 *    SubSystem: 共通系统
 */
package com.yds.util.service;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.jdbc.datasource.lookup.AbstractRoutingDataSource;

/**
 * 动态数据源选择
 * 
 * @author zhaodong
 * @version 1.0 2010/07/27
 */

public class DynamicDataSource extends AbstractRoutingDataSource {
	
	private static final Log LOG = LogFactory.getLog(DynamicDataSource.class);

	@Override
	protected Object determineCurrentLookupKey() {
		Object ret = DbContextHolder.getDbType();
		if (null == ret ){
			LOG.debug("determineCurrentLookupKey is null!");
		}
		if (LOG.isDebugEnabled() && null != ret){
			LOG.debug("determineCurrentLookupKey is " + ret.toString());
		} 
		return ret;

	}
}