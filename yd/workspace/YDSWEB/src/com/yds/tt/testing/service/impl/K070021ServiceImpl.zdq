/*
 * @(#) K070021ServiceImpl.java
 * Copyright (c) 2009-2010 大连远东计算机系统有限公司
 * All rights reserved.
 *      Project: 教育考试培训系统
 *    SubSystem: 考试系统
 */
package com.yds.tt.testing.service.impl;

import java.util.List;
import org.springframework.stereotype.Service;
import com.yds.base.service.AbstractBaseService;
import com.yds.tt.manager.service.TtCommonService;
import com.yds.tt.testing.bean.K070021ScoreListInfo;
import com.yds.tt.testing.dao.K070021Dao;
import com.yds.tt.testing.service.K070021Service;

/**
 * @see com.yds.tt.testing.service.K070021Service
 */
@Service("k070021Service")
public class K070021ServiceImpl extends AbstractBaseService implements
	K070021Service{
	private TtCommonService ttCommonService;
	private List<K070021ScoreListInfo> scoreListInfo;
	private K070021Dao k070021Dao;

	/**
	 * {@inheritDoc}
	 */
	@Override
	public List<K070021ScoreListInfo> getScoreListAll(String id) {
		this.scoreListInfo = k070021Dao.getScoreInfoListAll(id);
		setList(scoreListInfo);
		return scoreListInfo;
	}
	
	/**
	 * {@inheritDoc}
	 */
	@Override
	public List<K070021ScoreListInfo> getScoreListPart(String id) {
		this.scoreListInfo = k070021Dao.getScoreInfoListPart(id);
		setList(scoreListInfo);
		return scoreListInfo;
	}
	
	/**
	 * {@inheritDoc}
	 */
	private void setList(List<K070021ScoreListInfo> scoreListInfo){
		for(int i = 0;i<scoreListInfo.size();i++){
			K070021ScoreListInfo tmp =this.scoreListInfo.get(i);
			//通过率设置
			double tmpRate =Double.parseDouble(tmp.getPassNum())/
						Double.parseDouble(tmp.getTotleNum());
			this.scoreListInfo.get(i).setPassRate(
					String.valueOf(tmpRate*100).substring(0,2));
			//员工名字设置
			this.scoreListInfo.get(i).setStaffName(
					ttCommonService.getUserName(scoreListInfo.get(i).getStaffId()));	
		}
	}

	/**
	 * @return the scoreListInfo
	 */
	public List<K070021ScoreListInfo> getScoreListInfo() {
		return scoreListInfo;
	}

	/**
	 * @param scoreListInfo the scoreListInfo to set
	 */
	public void setScoreListInfo(List<K070021ScoreListInfo> scoreListInfo) {
		this.scoreListInfo = scoreListInfo;
	}

	/**
	 * @return the k070021Dao
	 */
	public K070021Dao getK070021Dao() {
		return k070021Dao;
	}

	/**
	 * @param dao the k070021Dao to set
	 */
	public void setK070021Dao(K070021Dao dao) {
		k070021Dao = dao;
	}

	/**
	 * @return the ttCommonService
	 */
	public TtCommonService getTtCommonService() {
		return ttCommonService;
	}

	/**
	 * @param ttCommonService the ttCommonService to set
	 */
	public void setTtCommonService(TtCommonService ttCommonService) {
		this.ttCommonService = ttCommonService;
	}
}
