<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTDSQLMap2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ioDataSyncDao">
	
	<typeAlias alias="ioData" type="com.yds.common.bean.ComIoData"/>

	<!-- 保存刷卡信息-->
	<insert id="saveIoData" parameterClass="ioData">
		
		INSERT INTO COM_IODATA 
		(
			HOLDER_NO, 
			IOTIME, 
			GATE_NO, 
			ATTENDANCE_ID, 
			EMP_ID, 
			UPDATE_TIME
		)
		VALUES
		(
			#holderNo#,
			#ioTime#,
			#gateNo#,
			#attendanceId#,
			#empId#,
			NOW()
		);
	</insert>
	
	<!-- 取得指定信息的个数 -->
	<select id="getCount" parameterClass="ioData" resultClass="Long"> 
        SELECT
			COUNT(*)
		FROM
			COM_IODATA		
        WHERE 
			HOLDER_NO = #holderNo# AND 
			IOTIME = #ioTime# AND 
			GATE_NO = #gateNo# 
    </select>
	
	<!-- 取得指定门号的Service -->
	<select id="getService" parameterClass="String" resultClass="String"> 
        SELECT SERVICE_NAME 
			FROM COM_SERVICE 
			WHERE GATE_NO = #gateNo#
    </select>	

</sqlMap> 