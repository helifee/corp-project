<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.1.7//EN"
	"http://struts.apache.org/dtds/struts-2.1.7.dtd">

<struts>
	<!-- 共通系统配置 -->
	<package name="common" extends="struts-base" namespace="/common">	
		<!-- 取得用戶名Action -->
		<action name="getUserNmAction" method="findUserId" class="userAction">
			<result name="success" type="str">count</result>
			<result name="error" type="str">count</result>
		</action>

		<!-- 重登录Action，不使用登录拦截器 -->
		<action name="relogin" method="relogin" class="loginAction">
			<interceptor-ref name="defaultStack">
			</interceptor-ref>
			<result name="success">/login.jsp</result>
		</action>
		<!-- 注销Action，不使用登录拦截器 -->
		<action name="logout" method="logout" class="loginAction">
			<interceptor-ref name="defaultStack">
			</interceptor-ref>
			<result name="success" type="redirect">/login.jsp</result>
		</action>
		<!-- 登录Action，不使用登录拦截器，使用URL机能的拦截器 -->
		<action name="loginserver" method="login" class="loginAction">
			<interceptor-ref name="defaultStack">
			</interceptor-ref>
			<result name="success" type="redirect">${destUrl}</result>
			<result name="error" >/login.jsp</result>
			<result name="input" >/login.jsp</result>
		</action>
		<!-- 域登录Action，不使用登录拦截器，使用URL机能的拦截器 -->
		<action name="domainlogin" method="domainLogin" class="loginAction">
			<interceptor-ref name="defaultStack">
			</interceptor-ref>
			<result name="success" type="redirect">/main.jsp</result>
			<result name="error" >/domainlogin.jsp</result>
			<result name="input" >/domainlogin.jsp</result>
		</action>
		<!-- 人员选择Action -->
		<action name="userSelect" method="selectUser" class="userSelectAction">
			<result name="success">/common/userSelect.jsp</result>
		</action>
		<!-- 得到所有员工ID、姓名、姓名拼音首字母数组 -->
		<action name="staffPinyin" method="getPinyin" class="staffPinyinAction">
			<result type="json">
				<param name="excludeNullProperties">true</param>
			</result>
		</action>
		<!-- 职位树Action -->
		<action name="positionTree" method="queryAllPositions" class="positionTreeAction">
			<result type="json">
				<param name="excludeNullProperties">true</param>
			</result>
		</action>
		
		<!-- 部门项目树Action -->
		<action name="orgTreeList" method="initOrgTreeList" class="orgTreeAction">
			<result type="json">
				<param name="excludeNullProperties">true</param>
			</result>
		</action>
		
		<!-- 部门树Action -->
		<action name="deptTreeList" method="initDeptTreeList" class="orgTreeAction">
			<result type="json">
				<param name="excludeNullProperties">true</param>
			</result>
		</action>
		
		<!--取得主题信息列表-->
		<action name="getThemeList" method="selectThemeList" class="themeAction">
			<result name="success">/common/setTheme.jsp</result>
		</action>
		<!--设置用户主题-->
		<action name="setUserTheme" method="putUserTheme" class="themeAction">
			<result name="success" type="redirect">/index.jsp</result>
		</action>
		
		<!-- 修改密码初始化 -->
		<action name="initModifyPwd" method="initModify" class="modifyPassWordAction">
			<result name="success">/common/changePassWord.jsp</result>
		</action>
		<!-- 重置密码初始化 -->
		<action name="initResetPwd" method="initReset" class="modifyPassWordAction">
			<result name="success">/common/resetPassWord.jsp</result>
		</action>
		<!-- 修改密码Action -->
		<action name="modifyPwd" method="modifyPwd" class="modifyPassWordAction">
			<result name="success">/common/changePassWord.jsp</result>
			<result name="error" >/common/changePassWord.jsp</result>
			<result name="input" >/common/changePassWord.jsp</result>
		</action>
		<!-- 重置密码Action -->				
		<action name="resetPwd" method="resetPwd" class="modifyPassWordAction">
			<result name="success">/common/resetPassWord.jsp</result>
			<result name="error" >/common/resetPassWord.jsp</result>	
			<result name="input" >/common/resetPassWord.jsp</result>		
		</action>
		<!-- 系统日志信息检索一览Action -->
		<action name="logSearchAction" method = "init" class="sysLogSearchAction">
			<result name="success">/common/sys_log_search.jsp</result>
		</action>	
		<action name="logSearchInfoAction" method="searchAction" class="sysLogSearchAction">
			<result name="success">/common/log_search_table.jsp</result>
			<result name="input">/common/sys_log_search.jsp</result>
		</action>
		<!-- 页面排他（定时检测） -->
		<action name="checkLockAction" method="execute"  class="pageArrangesAction">		
			<result name="success" type="str">pageLockUserName</result>
			<result name="userName" type="str">pageLockUserName</result>			
			 <interceptor-ref name="YDSinterceptors">	
			</interceptor-ref>
			<interceptor-ref name="pageArrange">	
			</interceptor-ref>
		</action>
		<!-- 区分画面初期化Action -->
		<action name="initComCodeMaintAction" class="comCodeMaintAction">
			<result name="success">/common/com_code_maint.jsp</result>
		</action>	
		<!-- 取得区分列表信息Action -->
		<action name="getDiffListAction" method="queryForDiffList" class="comCodeMaintAction">
			<result name="success">/common/com_code_list.jsp</result>
		</action>	
		<!-- 取得区分信息Action -->
		<action name="getDiffInfoAction" method="queryForDiffInfo" class="comCodeMaintAction">
			<result name="success">/common/diff_info_view.jsp</result>
		</action>
		<!-- 添加区分信息Action -->
		<action name="addDiffInfoAction" method="insertDiffInfo" class="comCodeMaintAction">
			<result name="success" type="str">typeName</result>
			<result name="error" type="str"></result>
		</action>
		<!-- 修改区分信息Action -->
		<action name="updDiffInfoAction" method="updateDiffInfo" class="comCodeMaintAction">
			<result name="success" type="str">typeName</result>
			<result name="error" type="str"></result>
		</action>
		<!-- 取得区分排序列表信息Action -->
		<action name="getDiffInfoSortAction" method="queryForDiffSortList" class="comCodeMaintAction">
			<result name="success">/common/diff_info_sort.jsp</result>
		</action>
		<!-- 修改区分排序Action -->
		<action name="updDiffSortAction" method="updateDiffSort" class="comCodeMaintAction">
			<result name="success" type="str">typeId</result>
			<result name="error" type="str"></result>
		</action>
		<!-- 图片上传 -->
		<action name="uploadImage" class="comFileUpload">
			<interceptor-ref name="YDSImgUpload"/>
			<result name="success" type="str">fileId</result>
			<result name="input" >/common/fieldError.jsp</result>
		</action>
		<!-- 获取临时图片 -->
		<action name="getTempImage" class="imageDownloadAction">
			<param name="flag">TEMP_PATH</param>
			<result name="success" type="stream">
				<param name="contentType">image/*</param>
				<param name="inputName">downloadFile</param>
				<param name="contentDisposition">filename=${fileName}</param>
				<param name="bufferSize">4096</param>
			</result>
		</action>
		<!-- 初始化意见反馈画面 -->
		<action name="initAdvice" method="execute" class="comAdviceAction">
			<result name="success">/common/advice.jsp</result>
		</action>
		<!-- 意见反馈提交Action -->
		<action name="submitAdvice" method="insertAdviceInfo" class="comAdviceAction">
			<result name="success">/common/comfirm.jsp</result>
			<result name="error" >/common/advice.jsp</result>
			<result name="input" >/common/advice.jsp</result>
		</action>		
	</package>
</struts>