<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTDSQLMap2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="UserThemeDao">

	<typeAlias alias="themeInfo" type="com.yds.common.bean.ThemeInfo"/>
	
	<!-- 主题式样名取得 --> 
	<select id="getThemeNm" parameterClass="String" resultClass="themeInfo">
		SELECT 
		  A.THEME_ID as themeId,
		  A.THEME_STYLE_NM as themeURL
		FROM COM_THEME_INFO A
		  RIGHT JOIN COM_THEME B
		  ON A.THEME_ID = B.THEME_ID
		WHERE B.USER_ID = #userId#;
	</select>
	
	<!-- 主题式样名list取得 --> 
	<select id="getThemeNmList" resultClass="themeInfo">
		SELECT 
		  THEME_ID as themeId,
		  THEME_NM as themeName,
		  THEME_STYLE_NM as themeURL,
		  THEME_DESP as themeDesc
		FROM COM_THEME_INFO;
	</select>
	
	<!-- 用户设置主题 -->
	<update id="updateUserTheme" parameterClass="themeInfo">
		UPDATE COM_THEME
		   SET THEME_ID = #themeId#
		 WHERE USER_ID = #userId#;
	</update>
	
	<!-- 添加用户主题 --> 
	<insert id="insertUserTheme" parameterClass="themeInfo">
		INSERT INTO
        COM_THEME (
        	USER_ID ,
        	THEME_ID
        ) VALUES (
        	#userId# ,
        	#themeId# 
        );
	</insert>
</sqlMap>  
