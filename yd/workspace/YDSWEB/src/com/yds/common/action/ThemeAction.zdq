package com.yds.common.action;

import java.util.List;


import org.springframework.beans.factory.config.BeanDefinition;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Controller;

import com.yds.base.action.AbstractBaseAction;
import com.yds.common.bean.ThemeInfo;
import com.yds.common.service.SessionService;
import com.yds.common.service.ThemeService;


@Scope(BeanDefinition.SCOPE_PROTOTYPE)
@Controller("themeAction")
public class ThemeAction extends AbstractBaseAction {

	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	
	private List<ThemeInfo> themeList;
	private ThemeService themeService;
	private ThemeInfo themeInfo;
	
	
	/**
	 * 获得主题列表
	 * @return
	 */
	public String selectThemeList(){
		
			// 取得用户ID
			String userId = SessionService.getLoginUserId();
			
			// 取得用户主题信息
			this.themeInfo = themeService.getThemeInfo(userId);
			
			// 取得主题列表
			this.themeList = themeService.getThemeNmList();
			
			return SUCCESS;
		
	}
	
	/**
	 * 用户设置主题
	 * @return
	 */
	public String putUserTheme(){
		
		// 设置用户主题
		this.themeService.updateUserTheme(themeInfo);
		
		// 取得用户主题
		this.themeService.getThemeNm(themeInfo.getUserId());
		
		// 取得主题列表
		selectThemeList();
		
		return SUCCESS;
	}

	public List<ThemeInfo> getThemeList() {
		return themeList;
	}

	public void setThemeList(List<ThemeInfo> themeList) {
		this.themeList = themeList;
	}
	
	public ThemeService getThemeService() {
		return themeService;
	}

	public void setThemeService(ThemeService themeService) {
		this.themeService = themeService;
	}

	public ThemeInfo getThemeInfo() {
		return themeInfo;
	}

	public void setThemeInfo(ThemeInfo themeInfo) {
		this.themeInfo = themeInfo;
	}

}
