/*
 * @(#) ComCodeMaintAction.java
 * Copyright (c) 2009-2010 大连远东计算机系统有限公司
 * All rights reserved.
 *      Project: 远东公司内部网
 *    SubSystem: 共通系统
 */

package com.yds.common.action;

import java.util.List;

import org.springframework.beans.factory.config.BeanDefinition;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Controller;

import com.yds.base.action.AbstractBaseAction;
import com.yds.common.bean.ComCodeConf;
import com.yds.common.bean.ComCodeMaint;
import com.yds.common.bean.TypeInfo;
import com.yds.common.service.ComCodeMaintService;

/**
 * 系统参数维护处理
 * 
 * @author renlong
 * @version 1.00 2010/06/09
 */
@Scope(BeanDefinition.SCOPE_PROTOTYPE)
@Controller("comCodeMaintAction")
public class ComCodeMaintAction extends AbstractBaseAction {

	private static final long serialVersionUID = -1397051695703253282L;
	private ComCodeMaintService comCodeMaintService;
	private String SUB_SYS_ID = "EMP"; // 子系统ID
	private String SUB_SYS_NAME = "共通子系统参数维护"; // 子系统名
	private List<TypeInfo> typeInfoList; // 区分类型列表
	private List<ComCodeMaint> comCodeMaintList; // 区分信息列表
	private List<ComCodeConf> dispNameList; // 画面表示项目名列表
	private ComCodeMaint comCodeMaint; // 区分信息
	private List<ComCodeConf> comCodeConfList; // 区分详细画面表示列表
	private String typeId; // 类型ID
	private String typeName; // 类型名
	private String diffNo; // 区分NO
	private List<ComCodeMaint> diffSortList; // 区分排序画面表示列表
	private String diffSort; // 区分表示顺

	/**
	 * 画面的初期显示 区分类型取得
	 * 
	 * @return SUCCESS
	 */
	@Override
	public String execute() throws Exception {

		// 取得区分类型一览
		this.typeInfoList = comCodeMaintService.getTypeList(SUB_SYS_ID);

		return SUCCESS;
	}

	/**
	 * 取得区分列表信息
	 * 
	 * @return SUCCESS
	 */
	public String queryForDiffList() throws Exception {

		// 取得区分列表信息
		if (!"".equals(typeId)) {
			comCodeMaintList = comCodeMaintService.getDiffList(SUB_SYS_ID,
					typeId);

			dispNameList = comCodeMaintService.getDispNameList(SUB_SYS_ID,
					typeId);
		}

		return SUCCESS;
	}

	/**
	 * 取得区分信息
	 * 
	 * @return SUCCESS
	 */
	public String queryForDiffInfo()throws Exception  {

		// 取得区分信息
		comCodeMaint = comCodeMaintService.getDiffInfo(SUB_SYS_ID, typeId,
				diffNo);

		// 取得类型名
		this.typeName = comCodeMaint.getTypeName();

		if (diffNo == null) {
			comCodeMaint = null;
		}

		// 取得附加属性信息
		comCodeConfList = comCodeMaintService.getComCodeConfList(SUB_SYS_ID,
				typeId, comCodeMaint);

		return SUCCESS;
	}

	/**
	 * 添加区分信息
	 * 
	 * @return SUCCESS
	 */
	public String insertDiffInfo() {
		comCodeMaint.setSubSys(SUB_SYS_ID);
		comCodeMaint.setTypeId(typeId);
		comCodeMaint.setTypeName(typeName);

		if (comCodeMaintService.insertDiffInfo(comCodeMaint)) {
			return SUCCESS;
		}

		return ERROR;
	}

	/**
	 * 修改区分信息
	 * 
	 * @return SUCCESS
	 */
	public String updateDiffInfo() {
		comCodeMaint.setSubSys(SUB_SYS_ID);
		comCodeMaint.setTypeId(typeId);

		if (comCodeMaintService.updateDiffInfo(comCodeMaint) == 0) {
			return ERROR;
		}

		return SUCCESS;
	}

	/**
	 * 区分排序信息取得
	 * 
	 * @return SUCCESS
	 */
	public String queryForDiffSortList() {
		diffSortList = comCodeMaintService.getDiffSortList(SUB_SYS_ID, typeId);
		return SUCCESS;
	}

	/**
	 * 区分排序更新
	 * 
	 * @return SUCCESS
	 */
	public String updateDiffSort() {
		comCodeMaint = new ComCodeMaint();
		comCodeMaint.setSubSys(SUB_SYS_ID);
		comCodeMaint.setTypeId(typeId);

		if (comCodeMaintService.updateDiffSort(SUB_SYS_ID, typeId, diffSort) == 0) {
			return ERROR;
		}

		return SUCCESS;
	}

	/**
	 * @return the comCodeMaintService
	 */
	public ComCodeMaintService getComCodeMaintService() {
		return comCodeMaintService;
	}

	/**
	 * @param comCodeMaintService
	 *            the comCodeMaintService to set
	 */
	public void setComCodeMaintService(ComCodeMaintService comCodeMaintService) {
		this.comCodeMaintService = comCodeMaintService;
	}

	/**
	 * @return the sUB_SYS_ID
	 */
	public String getSUB_SYS_ID() {
		return SUB_SYS_ID;
	}

	/**
	 * @param sub_sys_id
	 *            the sUB_SYS_ID to set
	 */
	public void setSUB_SYS_ID(String sub_sys_id) {
		SUB_SYS_ID = sub_sys_id;
	}

	/**
	 * @return the sUB_SYS_NAME
	 */
	public String getSUB_SYS_NAME() {
		return SUB_SYS_NAME;
	}

	/**
	 * @param sub_sys_name
	 *            the sUB_SYS_NAME to set
	 */
	public void setSUB_SYS_NAME(String sub_sys_name) {
		SUB_SYS_NAME = sub_sys_name;
	}

	/**
	 * @return the typeInfoList
	 */
	public List<TypeInfo> getTypeInfoList() {
		return typeInfoList;
	}

	/**
	 * @param typeInfoList
	 *            the typeInfoList to set
	 */
	public void setTypeInfoList(List<TypeInfo> typeInfoList) {
		this.typeInfoList = typeInfoList;
	}

	/**
	 * @return the comCodeMaintList
	 */
	public List<ComCodeMaint> getComCodeMaintList() {
		return comCodeMaintList;
	}

	/**
	 * @param comCodeMaintList
	 *            the comCodeMaintList to set
	 */
	public void setComCodeMaintList(List<ComCodeMaint> comCodeMaintList) {
		this.comCodeMaintList = comCodeMaintList;
	}

	/**
	 * @return the dispNameList
	 */
	public List<ComCodeConf> getDispNameList() {
		return dispNameList;
	}

	/**
	 * @param dispNameList
	 *            the dispNameList to set
	 */
	public void setDispNameList(List<ComCodeConf> dispNameList) {
		this.dispNameList = dispNameList;
	}

	/**
	 * @return the comCodeMaint
	 */
	public ComCodeMaint getComCodeMaint() {
		return comCodeMaint;
	}

	/**
	 * @param comCodeMaint
	 *            the comCodeMaint to set
	 */
	public void setComCodeMaint(ComCodeMaint comCodeMaint) {
		this.comCodeMaint = comCodeMaint;
	}

	/**
	 * @return the comCodeConfList
	 */
	public List<ComCodeConf> getComCodeConfList() {
		return comCodeConfList;
	}

	/**
	 * @param comCodeConfList
	 *            the comCodeConfList to set
	 */
	public void setComCodeConfList(List<ComCodeConf> comCodeConfList) {
		this.comCodeConfList = comCodeConfList;
	}

	/**
	 * @return the typeId
	 */
	public String getTypeId() {
		return typeId;
	}

	/**
	 * @param typeId
	 *            the typeId to set
	 */
	public void setTypeId(String typeId) {
		this.typeId = typeId;
	}

	/**
	 * @return the typeName
	 */
	public String getTypeName() {
		return typeName;
	}

	/**
	 * @param typeName
	 *            the typeName to set
	 */
	public void setTypeName(String typeName) {
		this.typeName = typeName;
	}

	/**
	 * @return the diffNo
	 */
	public String getDiffNo() {
		return diffNo;
	}

	/**
	 * @param diffNo
	 *            the diffNo to set
	 */
	public void setDiffNo(String diffNo) {
		this.diffNo = diffNo;
	}

	/**
	 * @return the diffSortList
	 */
	public List<ComCodeMaint> getDiffSortList() {
		return diffSortList;
	}

	/**
	 * @param diffSortList
	 *            the diffSortList to set
	 */
	public void setDiffSortList(List<ComCodeMaint> diffSortList) {
		this.diffSortList = diffSortList;
	}

	/**
	 * @return the diffSort
	 */
	public String getDiffSort() {
		return diffSort;
	}

	/**
	 * @param diffSort
	 *            the diffSort to set
	 */
	public void setDiffSort(String diffSort) {
		this.diffSort = diffSort;
	}

}
