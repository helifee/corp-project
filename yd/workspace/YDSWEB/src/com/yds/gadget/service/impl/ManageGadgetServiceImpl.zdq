/*
 * @(#)ManageGadgetServiceImpl.java
 * Copyright (c) 2009-2010 大连远东计算机系统有限公司
 * All rights reserved.
 *      Project: 远东公司内部网
 *    SubSystem: 活动桌面
 */
package com.yds.gadget.service.impl;

import java.util.List;

import org.springframework.stereotype.Service;

import com.yds.base.service.AbstractBaseService;
import com.yds.common.service.SessionService;
import com.yds.gadget.bean.ActiveDeskInfo;
import com.yds.gadget.bean.GadgetInfo;
import com.yds.gadget.dao.ManageGadgetDao;
import com.yds.gadget.service.ManageGadgetService;

/**
 * @see com.yds.gadget.service.ManageGadgetService
 * 
 */
@Service("manageGadgetService")
public class ManageGadgetServiceImpl extends AbstractBaseService implements
		ManageGadgetService {

	private ManageGadgetDao manageGadgetDao;

	/**
	 * {@inheritDoc}
	 */
	@Override
	public List<GadgetInfo> getManageGadgetInfoList() {
		List<GadgetInfo> gdsInfo = manageGadgetDao
				.getManageGadgetInfoList(SessionService.getLoginUserId());
		for (int i = 0; i < gdsInfo.size(); i++) {
			gdsInfo.get(i).setGdsCount(
					manageGadgetDao.getGdsCount(gdsInfo.get(i).getGadgetId()));
		}
		return gdsInfo;
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public boolean addGadget(ActiveDeskInfo gadget) {
		gadget.setUserId(SessionService.getLoginUserId());
		gadget.setModeFlg("1");
		try {
			manageGadgetDao.addGadget(gadget);
		} catch (Exception e) {
			return false;
		}
		return true;
	}

	public void setManageGadgetDao(ManageGadgetDao manageGadgetDao) {
		this.manageGadgetDao = manageGadgetDao;
	}

	/**
	 * 单个控件的使用人数
	 * 
	 * @param 控件ID
	 * @return 使用人数
	 */
	@Override
	public int getGdsCount(int gid) {

		return manageGadgetDao.getGdsCount(gid);
	}
}
