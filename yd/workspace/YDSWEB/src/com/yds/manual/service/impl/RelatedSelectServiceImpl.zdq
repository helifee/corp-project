/*
 * @(#) RelatedSelectServiceImpl.java
 * Copyright (c) 2009-2010 大连远东计算机系统有限公司
 * All rights reserved.
 *      Project: 远东公司内部网
 *    SubSystem: 开发手册子系统
 */

package com.yds.manual.service.impl;

import java.util.List;

import org.springframework.stereotype.Service;

import com.yds.base.service.AbstractBaseService;
import com.yds.manual.bean.Item;
import com.yds.manual.dao.RelatedSelectDao;
import com.yds.manual.service.RelatedSelectService;
import com.yds.util.service.ListConverter;

/**
 * @see com.yds.manual.service.impl.RelatedSelectService
 *
 */
@Service("relatedSelectService")
public class RelatedSelectServiceImpl extends AbstractBaseService implements RelatedSelectService {
	
	private RelatedSelectDao relatedSelectDao;

	/**
	 * {@inheritDoc}
	 * @throws Exception 
	 */
	@Override
	public String getItemList(String preId) throws Exception {
		
		//List<String[]> list = new ArrayList<String[]>();
		
		//取得下拉列表内容
		List<Item> items = relatedSelectDao.getItemList(preId);

		// ListConverter： items（Bean）本身可以有很多属性，
		//该方法只把指定的两个属性(id,name)取出来，转化为下拉列表的key：value的形式。
		String str =ListConverter.convert(items,"id", "name");
		
		//自行转化的过程，不建议使用。（有些复杂。。）
//		for(Item item : items){
//			list.add(new String[] {item.getId(), item.getName()});
//		}
//		JSONArray jsobj = JSONArray.fromObject(list);
		return str;
	}

	public void setRelatedSelectDao(RelatedSelectDao relatedSelectDao) {
		this.relatedSelectDao = relatedSelectDao;
	}

}
