/*
 * @(#) Ye0050Action.java
 * Copyright (c) 2009-2010 大连远东计算机系统有限公司
 * All rights reserved.
 *      Project: 远东公司内部网
 *    SubSystem: 考勤系统
 */
package com.yds.att.action;

import java.util.List;

import org.springframework.beans.factory.config.BeanDefinition;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Controller;

import com.yds.att.bean.AttCorrect;
import com.yds.att.bean.Ye0050AttCorrectInfo;
import com.yds.att.bean.Ye0050CondA;
import com.yds.att.service.Ye0050Service;
import com.yds.att.service.AttConstants.AppStatus;
import com.yds.base.action.BasePagerAction;
import com.yds.common.bean.ComCodeInfo;
import com.yds.common.service.ComCodeInfoService;

/**
 * 考勤更正一览画面
 * @author pengchuan
 * @version 1.00 2010/12/02
 */
@Scope(BeanDefinition.SCOPE_PROTOTYPE)
@Controller("ye0050Action")
public class Ye0050Action extends BasePagerAction {

	private static final long serialVersionUID = -3145571271505045948L;
	private ComCodeInfoService comCodeInfoService;
	private Ye0050Service ye0050Service;
	/** 日期类型List. */
	private List<ComCodeInfo> timeTypeList;
	/** 检索结果List. */
	private List<Ye0050AttCorrectInfo> attCorInfoList;
	/** 检索条件List. */
	private Ye0050CondA ye0050CondA;
	/** 更新DB所需bean. */
	private AttCorrect attCorrect;
	/** 检索结果条数. */
	private int cnt;
	/** 同意类型标识位. */
	private String flag;
	private String fromId;
	/**
	 * 画面的初期显示
	 * 
	 * @return SUCCESS
	 */
	public String execute() throws Exception {
		
		this.timeTypeList=comCodeInfoService.getComCodeInfo("ATT", "PERIOD_TYPE");
		return SUCCESS;

	}
	/**
	 * 检索结果一览
	 * @return
	 * @throws Exception
	 */
	public String findAttCorInfo() throws Exception {
		
		this.setAttCorInfoList(ye0050Service.getAttCorInfo(ye0050CondA));
		cnt=attCorInfoList.size();
		return SUCCESS;
	}
	/**
	 * 审批结果
	 * @return
	 * @throws Exception
	 */
	public String updateAttCorInfo() throws Exception {
		
		if(ye0050Service.updateAttCorInfo(attCorrect,flag)){
			putOpTip( propMgr.getMessage("yds.att.info.0003"));
			return SUCCESS;
		}
		return ERROR;
	}
	
	/**
	 * @return the attCorInfoList
	 */
	public List<Ye0050AttCorrectInfo> getAttCorInfoList() {
		return attCorInfoList;
	}

	/**
	 * @param attCorInfoList the attCorInfoList to set
	 */
	public void setAttCorInfoList(List<Ye0050AttCorrectInfo> attCorInfoList) {
		this.attCorInfoList = attCorInfoList;
	}

	/**
	 * @return the ye0050Service
	 */
	public Ye0050Service getYe0050Service() {
		return ye0050Service;
	}

	/**
	 * @param ye0050Service the ye0050Service to set
	 */
	public void setYe0050Service(Ye0050Service ye0050Service) {
		this.ye0050Service = ye0050Service;
	}

	/**
	 * @return the ye0050CondA
	 */
	public Ye0050CondA getYe0050CondA() {
		return ye0050CondA;
	}

	/**
	 * @param ye0050CondA the ye0050CondA to set
	 */
	public void setYe0050CondA(Ye0050CondA ye0050CondA) {
		this.ye0050CondA = ye0050CondA;
	}
	/**
	 * @return the cnt
	 */
	public int getCnt() {
		return cnt;
	}
	/**
	 * @param cnt the cnt to set
	 */
	public void setCnt(int cnt) {
		this.cnt = cnt;
	}
	/**
	 * @return the attCorrect
	 */
	public AttCorrect getAttCorrect() {
		return attCorrect;
	}
	/**
	 * @param attCorrect the attCorrect to set
	 */
	public void setAttCorrect(AttCorrect attCorrect) {
		this.attCorrect = attCorrect;
	}
	
	/**
	 * @return the flag
	 */
	public String getFlag() {
		return flag;
	}
	/**
	 * @param flag the flag to set
	 */
	public void setFlag(String flag) {
		this.flag = flag;
	}
	/**
	 * @return the comCodeInfoService
	 */
	public ComCodeInfoService getComCodeInfoService() {
		return comCodeInfoService;
	}
	/**
	 * @param comCodeInfoService the comCodeInfoService to set
	 */
	public void setComCodeInfoService(ComCodeInfoService comCodeInfoService) {
		this.comCodeInfoService = comCodeInfoService;
	}
	/**
	 * @return the timeTypeList
	 */
	public List<ComCodeInfo> getTimeTypeList() {
		return timeTypeList;
	}
	/**
	 * @param timeTypeList the timeTypeList to set
	 */
	public void setTimeTypeList(List<ComCodeInfo> timeTypeList) {
		this.timeTypeList = timeTypeList;
	}
	/**
	 * @return the fromId
	 */
	public String getFromId() {
		return fromId;
	}
	/**
	 * @param fromId the fromId to set
	 */
	public void setFromId(String fromId) {
		this.fromId = fromId;
	}
	
}
	
