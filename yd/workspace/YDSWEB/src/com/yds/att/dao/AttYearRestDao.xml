<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="attYearRestDao">

    <typeAlias alias="attYearRest" type="com.yds.att.bean.AttYearRest"/>

	<!-- 用于select查询公用抽取的列 -->
	<sql id="commonColumns">
	    <![CDATA[
        	EMP_ID as empId ,
        	PTO_YEAR as ptoYear ,
        	PTO_DAYS as ptoDays ,
        	PTO_START_DATE as ptoStartDate ,
        	PTO_END_DATE as ptoEndDate ,
        	PTO_ADD_DAYS as ptoAddDays ,
        	PTO_ADD_DAYS_FLG as ptoAddDaysFlg ,
        	PTO_ADD_ID as ptoAddId 
	    ]]>
	</sql>
	
    <insert id="insertAttYearRest" parameterClass="attYearRest">
    <![CDATA[
        INSERT INTO
        att_year_rest (
        	EMP_ID ,
        	PTO_YEAR ,
        	PTO_DAYS ,
        	PTO_START_DATE ,
        	PTO_END_DATE ,
        	PTO_ADD_DAYS ,
        	PTO_ADD_DAYS_FLG ,
        	PTO_ADD_ID 
        ) VALUES (
        	#empId# ,
        	#ptoYear# ,
        	#ptoDays# ,
        	#ptoStartDate# ,
        	#ptoEndDate# ,
        	#ptoAddDays# ,
        	#ptoAddDaysFlg# ,
        	#ptoAddId# 
        )
    ]]>
    </insert>

    <update id="updateAttYearRest" parameterClass="attYearRest">
    <![CDATA[
        UPDATE att_year_rest SET
	        PTO_DAYS = #ptoDays# ,
	        PTO_START_DATE = #ptoStartDate# ,
	        PTO_END_DATE = #ptoEndDate# ,
	        PTO_ADD_DAYS = #ptoAddDays# ,
	        PTO_ADD_DAYS_FLG = #ptoAddDaysFlg# ,
	        PTO_ADD_ID = #ptoAddId# 
        WHERE 
	        EMP_ID = #empId# and
	        PTO_YEAR = #ptoYear# 
    ]]>
    </update>

    <delete id="deleteAttYearRest" parameterClass="attYearRest">
    <![CDATA[
        delete from att_year_rest where
        EMP_ID = #empId# and
        PTO_YEAR = #ptoYear# 
    ]]>
    </delete>
    
    <select id="getAttYearRestByPk" parameterClass="attYearRest" resultClass="attYearRest">
	    select <include refid="commonColumns"/>
	    <![CDATA[
	        from att_year_rest 
	        where 
		        EMP_ID = #empId# and
		        PTO_YEAR = #ptoYear# 
	    ]]>
    </select>

	<sql id="dynamicWhere">
	    <dynamic prepend="WHERE">
	       <isNotEmpty prepend="AND" property="empId">
	             EMP_ID = #empId#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="ptoYear">
	             PTO_YEAR = #ptoYear#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="ptoDays">
	             PTO_DAYS = #ptoDays#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="ptoStartDate">
	             PTO_START_DATE = #ptoStartDate#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="ptoEndDate">
	             PTO_END_DATE = #ptoEndDate#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="ptoAddDays">
	             PTO_ADD_DAYS = #ptoAddDays#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="ptoAddDaysFlg">
	             PTO_ADD_DAYS_FLG = #ptoAddDaysFlg#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="ptoAddId">
	             PTO_ADD_ID = #ptoAddId#
	       </isNotEmpty>
	    </dynamic>	
	</sql>
	 
    <select id="getAttYearRestCount" resultClass="long">
    <![CDATA[
        select count(*) from att_year_rest
    ]]>
		<include refid="dynamicWhere"/>    
    </select>
    
    <select id="getAttYearRestList" resultClass="attYearRest">
    	select <include refid="commonColumns"/>
	    <![CDATA[
	        from att_year_rest 
	    ]]>
		<include refid="dynamicWhere"/>
    </select>

</sqlMap>
