<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="attMonReportDao">

    <typeAlias alias="attMonReport" type="com.yds.att.bean.AttMonReport"/>

	<!-- 用于select查询公用抽取的列 -->
	<sql id="commonColumns">
	    <![CDATA[
        	EMP_ID as empId ,
        	YEAR as year ,
        	MONTH as month ,
        	S_ATTEND_DAYS as sattendDays ,
        	ATTEND_DAYS as attendDays ,
        	ANN_REST_DAYS as annRestDays ,
        	SPECIAL_DAYS as specialDays ,
        	SICK_DAYS as sickDays ,
        	PER_DAYS as perDays ,
        	OUT_DAYS as outDays ,
        	DUTY_MIN as dutyMin ,
        	DUTY_CNT as dutyCnt ,
        	SICK_MIN as sickMin ,
        	SICK_CNT as sickCnt ,
        	PER_MIN as perMin ,
        	PER_CNT as perCnt ,
        	BELATE_MIN as belateMin ,
        	BELATE_CNT as belateCnt ,
        	LVE_EARLY_MIN as lveEarlyMin ,
        	LVE_EARLY_CNT as lveEarlyCnt ,
        	WORKDAY_OT_MIN as workdayOtMin ,
        	WORKDAY_OT_CNT as workdayOtCnt ,
        	DEEP_OT_MIN as deepOtMin ,
        	DEEP_OT_CNT as deepOtCnt ,
        	E_REST_MIN as erestMin ,
        	USED_E_REST_MIN as usedErestMin 
	    ]]>
	</sql>
	
    <insert id="insertAttMonReport" parameterClass="attMonReport">
    <![CDATA[
        INSERT INTO
        att_mon_report (
        	EMP_ID ,
        	YEAR ,
        	MONTH ,
        	S_ATTEND_DAYS ,
        	ATTEND_DAYS ,
        	ANN_REST_DAYS ,
        	SPECIAL_DAYS ,
        	SICK_DAYS ,
        	PER_DAYS ,
        	OUT_DAYS ,
        	DUTY_MIN ,
        	DUTY_CNT ,
        	SICK_MIN ,
        	SICK_CNT ,
        	PER_MIN ,
        	PER_CNT ,
        	BELATE_MIN ,
        	BELATE_CNT ,
        	LVE_EARLY_MIN ,
        	LVE_EARLY_CNT ,
        	WORKDAY_OT_MIN ,
        	WORKDAY_OT_CNT ,
        	DEEP_OT_MIN ,
        	DEEP_OT_CNT ,
        	E_REST_MIN ,
        	USED_E_REST_MIN 
        ) VALUES (
        	#empId# ,
        	#year# ,
        	#month# ,
        	#sattendDays# ,
        	#attendDays# ,
        	#annRestDays# ,
        	#specialDays# ,
        	#sickDays# ,
        	#perDays# ,
        	#outDays# ,
        	#dutyMin# ,
        	#dutyCnt# ,
        	#sickMin# ,
        	#sickCnt# ,
        	#perMin# ,
        	#perCnt# ,
        	#belateMin# ,
        	#belateCnt# ,
        	#lveEarlyMin# ,
        	#lveEarlyCnt# ,
        	#workdayOtMin# ,
        	#workdayOtCnt# ,
        	#deepOtMin# ,
        	#deepOtCnt# ,
        	#erestMin# ,
         	#usedErestMin# 
        )
    ]]>
    </insert>

    <update id="updateAttMonReport" parameterClass="attMonReport">
    <![CDATA[
        UPDATE att_mon_report SET
	        S_ATTEND_DAYS = #sattendDays# ,
	        ATTEND_DAYS = #attendDays# ,
	        ANN_REST_DAYS = #annRestDays# ,
	        SPECIAL_DAYS = #specialDays# ,
	        SICK_DAYS = #sickDays# ,
	        PER_DAYS = #perDays# ,
	        OUT_DAYS = #outDays# ,
	        DUTY_MIN = #dutyMin# ,
	        DUTY_CNT = #dutyCnt# ,
	        SICK_MIN = #sickMin# ,
	        SICK_CNT = #sickCnt# ,
	        PER_MIN = #perMin# ,
	        PER_CNT = #perCnt# ,
	        BELATE_MIN = #belateMin# ,
	        BELATE_CNT = #belateCnt# ,
	        LVE_EARLY_MIN = #lveEarlyMin# ,
	        LVE_EARLY_CNT = #lveEarlyCnt# ,
	        WORKDAY_OT_MIN = #workdayOtMin# ,
	        WORKDAY_OT_CNT = #workdayOtCnt# ,
	        DEEP_OT_MIN = #deepOtMin# ,
	        DEEP_OT_CNT = #deepOtCnt# ,
	        E_REST_MIN = #erestMin# ,
	        USED_E_REST_MIN = #usedErestMin# 
        WHERE 
	        EMP_ID = #empId# and
	        YEAR = #year# and
	        MONTH = #month# 
    ]]>
    </update>

    <delete id="deleteAttMonReport" parameterClass="attMonReport">
    <![CDATA[
        delete from att_mon_report where
        EMP_ID = #empId# and
        YEAR = #year# and
        MONTH = #month# 
    ]]>
    </delete>
    
    <select id="getAttMonReportByPk" parameterClass="attMonReport" resultClass="attMonReport">
	    select <include refid="commonColumns"/>
	    <![CDATA[
	        from att_mon_report 
	        where 
		        EMP_ID = #empId# and
		        YEAR = #year# and
		        MONTH = #month# 
	    ]]>
    </select>

	<sql id="dynamicWhere">
	    <dynamic prepend="WHERE">
	       <isNotEmpty prepend="AND" property="empId">
	             EMP_ID = #empId#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="year">
	             YEAR = #year#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="month">
	             MONTH = #month#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="sattendDays">
	             S_ATTEND_DAYS = #sattendDays#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="attendDays">
	             ATTEND_DAYS = #attendDays#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="annRestDays">
	             ANN_REST_DAYS = #annRestDays#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="specialDays">
	             SPECIAL_DAYS = #specialDays#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="sickDays">
	             SICK_DAYS = #sickDays#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="perDays">
	             PER_DAYS = #perDays#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="outDays">
	             OUT_DAYS = #outDays#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="dutyMin">
	             DUTY_MIN = #dutyMin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="dutyCnt">
	             DUTY_CNT = #dutyCnt#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="sickMin">
	             SICK_MIN = #sickMin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="sickCnt">
	             SICK_CNT = #sickCnt#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="perMin">
	             PER_MIN = #perMin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="perCnt">
	             PER_CNT = #perCnt#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="belateMin">
	             BELATE_MIN = #belateMin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="belateCnt">
	             BELATE_CNT = #belateCnt#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="lveEarlyMin">
	             LVE_EARLY_MIN = #lveEarlyMin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="lveEarlyCnt">
	             LVE_EARLY_CNT = #lveEarlyCnt#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="workdayOtMin">
	             WORKDAY_OT_MIN = #workdayOtMin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="workdayOtCnt">
	             WORKDAY_OT_CNT = #workdayOtCnt#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="deepOtMin">
	             DEEP_OT_MIN = #deepOtMin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="deepOtCnt">
	             DEEP_OT_CNT = #deepOtCnt#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="erestMin">
	             E_REST_MIN = #erestMin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="usedErestMin">
	             USED_E_REST_MIN = #usedErestMin#
	       </isNotEmpty>
	    </dynamic>	
	</sql>
	 
    <select id="getAttMonReportCount" resultClass="long">
    <![CDATA[
        select count(*) from att_mon_report
    ]]>
		<include refid="dynamicWhere"/>    
    </select>
    
    <select id="getAttMonReportList" resultClass="attMonReport">
    	select <include refid="commonColumns"/>
	    <![CDATA[
	        from att_mon_report 
	    ]]>
		<include refid="dynamicWhere"/>
    </select>

</sqlMap>
