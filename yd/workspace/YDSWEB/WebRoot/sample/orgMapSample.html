<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>组织图示例</title>
		<link href="../css/style.css" rel="stylesheet" type="text/css" />
		<script type="text/javascript" src="../js/common/prototype.js"></script>
		<script type="text/javascript" src="../js/common/util.js"></script>
		<script type="text/javascript" src="../js/common/orgMap.js"></script>
		<script>
			var baseData = {
				"id": "X001",
				"name": "地球防御总部",
				"type": "1",
				"bar1": '<span class="img_opt opt_EditTable" onclick="func1()"></span>',
				"bar2": '<span class="img_opt opt_Help" onclick="func2()"></span>',
				"childs": [{
					"id": "X002",
					"name": "防御一部",
					"type": "1",
					"bar1": '<span class="img_opt opt_EditTable" onclick="func1()"></span>',
					"bar2": '<span class="img_opt opt_Help" onclick="func2()"></span>',
					"childs": [{
						"id": "X005",
						"name": "火星移民",
						"type": "1",
						"bar1": '<span class="img_opt opt_EditTable" onclick="func1()"></span>',
						"bar2": '<span class="img_opt opt_Help" onclick="func2()"></span>',
						"childs": []
					}]
				}, {
					"id": "X003",
					"name": "防御二部",
					"type": "1",
					"bar1": '<span class="img_opt opt_EditTable" onclick="func1()"></span>',
					"bar2": '<span class="img_opt opt_Help" onclick="func2()"></span>',
					"childs": [{
						"id": "X007",
						"name": "哈利波特",
						"type": "1",
						"bar1": '<span class="img_opt opt_EditTable" onclick="func1()"></span>',
						"bar2": '<span class="img_opt opt_Help" onclick="func2()"></span>',
						"childs": []
					}]
				}, {
					"id": "X009",
					"name": "咸蛋超人",
					"type": "1",
					"bar1": '<span class="img_opt opt_EditTable" onclick="func1()"></span>',
					"bar2": '<span class="img_opt opt_Help" onclick="func2()"></span>',
					"childs": []
				}, {
					"id": "X010",
					"name": "郭德纲",
					"desc": "相声",
					"type": "1",
					"bar1": '<span class="img_opt opt_EditTable" onclick="func1()"></span>',
					"bar2": '<span class="img_opt opt_Help" onclick="func2()"></span>',
					"childs": []
				}, {
					"id": "X004",
					"name": "防御三部",
					"type": "1",
					"bar1": '<span class="img_opt opt_EditTable" onclick="func1()"></span>',
					"bar2": '<span class="img_opt opt_Help" onclick="func2()"></span>',
					"childs": [{
						"id": "X011",
						"name": "二人转",
						"type": "1",
						"bar1": '<span class="img_opt opt_EditTable" onclick="func1()" title="asdfasd"></span>',
						"bar2": '<span class="img_opt opt_Help" onclick="func2()"></span>',
						"childs": [{
							"id": "X021",
							"name": "转不动了",
							"type": "1",
							"bar1": '<span class="img_opt opt_EditTable" onclick="func1()"></span>',
							"bar2": '<span class="img_opt opt_Help" onclick="func2()"></span>',
							"childs": []
						}, {
							"id": "X022",
							"name": "德莱尼",
							"type": "1",
							"bar1": '<span class="img_opt opt_EditTable" onclick="func1()"></span>',
							"bar2": '<span class="img_opt opt_Help" onclick="func2()"></span>',
							"desc": "WOW某职业",
							"childs": [{
								"id": "X013",
								"name": "楼下黑",
								"type": "1",
								"bar1": '<span class="img_opt opt_EditTable" onclick="func1()"></span>',
								"bar2": '<span class="img_opt opt_Help" onclick="func2()"></span>',
								"childs": []
							}, {
								"id": "X023",
								"name": "反黑专业户",
								"type": "1",
								"bar1": '<span class="img_opt opt_EditTable" onclick="func1()"></span>',
								"bar2": '<span class="img_opt opt_Help" onclick="func2()"></span>',
								"childs": []
							}]
						}]
					}, {
						"id": "X0B2",
						"name": "德鲁伊",
						"type": "1",
						"bar1": '<span class="img_opt opt_EditTable" onclick="func1()"></span>',
						"bar2": '<span class="img_opt opt_Help" onclick="func2()"></span>',
						"childs": [{
							"id": "X0B3",
							"name": "西瓦的守护",
							"type": "1",
							"bar1": '<span class="img_opt opt_EditTable" onclick="func1()"></span>',
							"bar2": '<span class="img_opt opt_Help" onclick="func2()"></span>',
							"childs": []
						}, {
							"id": "X0B4",
							"name": "猫头鹰",
							"type": "1",
							"bar1": '<span class="img_opt opt_EditTable" onclick="func1()"></span>',
							"bar2": '<span class="img_opt opt_Help" onclick="func2()"></span>',
							"childs": []
						}]
					}]
				}]
			};
			var nowData;
			var lastData = [];
			function load() {
				nowData = baseData;
				createOrgMap(nowData, 'a1', 800, 600, 2);
			}
			
			function func1() {
				nowData = getNodeData();
				alert(nowData.name);
			}
			
			function func2() {
				lastData.push(nowData);
				nowData = getNodeData();
				createOrgMap(nowData, 'a1', 800, 600);
			}
			
			function func3() {
				nowData = lastData.pop();
				if (nowData && nowData != baseData) {
					createOrgMap(nowData, 'a1', 800, 600);
				} else {
					nowData = baseData;
					createOrgMap(nowData, 'a1', 800, 600, 2);
				}
			}
		</script>
		<style type="text/css"></style>
	</head>
	<body onload="load();">
		<input type="button" value="返回" onclick="func3();" class="imgBtn1"/>
		<div id="a1"></div>
	</body>
</html>
