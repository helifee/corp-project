<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>示例</title>
        <link href="../css/gray.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="../js/common/prototype.js">
        </script>
        <script type="text/javascript" src="../js/common/util.js">
        </script>
        <script>
            var xLeft = 0;
            var xMax = 31;
            var xCell = 35;
            var xWindow = 20;
            var exec;
            
            function init(){
                for (var i = 0; i < 40; i++) {
                    $('nameList').insert({
                        bottom: '<div>人' + i + '</div>'
                    });
                }
                
                for (var i = 0; i < xMax; i++) {
                    $('gTitle').insert({
                        bottom: '<div class="node">' + (i + 1) + '</div>'
                    });
                }
                
                var count = $('nameList').childElements().length;
                for (var i = 0; i < count; i++) {
                    $('gContent').insert({
                        bottom: '<div class="nodeline"></div>'
                    });
                    $('opList').insert({
                        bottom: '<div>操作</div>'
                    });
                }
                var lns = $('gContent').select('.nodeline');
                for (var i = 0; i < count; i++) {
                    for (var j = 0; j < xMax; j++) {
                        lns[i].insert({
                            bottom: '<div class="node">' + (Math.round(Math.random() * 14) + 10) + ':' + (Math.round(Math.random() * 50) + 10) + '</div>'
                        });
                    }
                }
                
                var wkend = $$('.nodeline div:nth-child(7n+6),.nodeline div:nth-child(7n+0)');
                for (var i = 0; i < wkend.length; i++) {
                    Element.addClassName(wkend[i], 'color_red');
                }
                
                PeriodicalExecuter.prototype.resume = function(){
                    if (!this.timer) 
                        this.registerCallback();
                };
                exec = new PeriodicalExecuter(animate, 0.04);
            }
            
            function setPos(pos){
                var xOld = xLeft;
                xLeft += pos;
                if (xLeft < 0) {
                    xLeft = 0;
                }
                if (xLeft > xMax - xWindow) {
                
                    xLeft = xMax - xWindow;
                }
                if (xLeft == xOld) {
                    return;
                }
                exec.resume();
            }
            
            function animate(){
                var now = $('gTitle').up().scrollLeft;
                var dest = xLeft * xCell;
                var dist = dest - now;
                if (dist == 0) {
                    exec.stop();
                    return;
                }
                
                var step = xCell;
                if (dist < step && dist > 0 - step) {
                    $('gContent').up().scrollLeft = dest;
                    $('gTitle').up().scrollLeft = dest;
                    return;
                }
                step = dist < 0 ? 0 - step : step;
                $('gContent').up().scrollLeft += step;
                $('gTitle').up().scrollLeft += step;
            }
        </script>
        <style>
            .node {
                width: 34px;
                height: 20px;
                text-align: center;
                float: left;
				font-family: "simsun";
                line-height: 20px;
                font-size: 10px;
                border-top: 1px solid #aaa;
                border-right: 1px solid #aaa;
            }
            
            .nameList {
                width: 80px;
                border-right: 1px solid #aaa;
                float: left;
            }
            
            .nameList div, .opList div {
                height: 20px;
                line-height: 20px;
                text-align: center;
                border-top: 1px solid #aaa;
            }
            
            .nodegrid {
            }
            
            .nodeline {
                width: 2000px;
                position: 1relative;
                float: left;
            }
            
            .cLeft {
                float: left;
            }
            
            .cRight {
                width: 80px;
                border-left: 1px solid #aaa;
                float: left;
                overflow: visible;
            }
            
            .cCenter {
                width: 699px;
                float: left;
                overflow: hidden;
            }
            
            .opList {
                width: 100px;
            }
            
            .data {
                width: auto;
                height: 199px;
                overflow-y: auto;
                overflow-x: hidden;
                margin-top: -1px;
            }
            
            .ttl {
                width: 699px;
                overflow: hidden;
            }
            
            table.datagrid2 {
                width: 883px;
                table-layout: fixed;
            }
            
            table.datagrid2 th, table.datagrid2 td {
                border: 1px solid #aaa !important;
            }
            
            th, td {
                padding: 0px !important;
            }
            
            table.datagrid2 tr:hover {
                background: #fff !important;
                color: #000 !important;
            }
        </style>
    </head>
    <body onload="init();">
        <div class="container">
            <br/>
            <table class="datagrid2">
                <tr>
                    <th rowspan="2" style="width:80px">
                        NAME
                    </th>
                    <th style="width:699px;text-align:center;">
                        <div class="float_l">
                            <input type="button" value="←" class="btn span-2" onclick="setPos(-7);"/>
                        </div>
                        <div class="float_r">
                            <input type="button" value="→" class="btn span-2" onclick="setPos(7);"/>
                        </div><span>Month</span>
                    </th>
                    <th rowspan="2" style="width:100px">
                        OPERATE
                    </th>
                </tr>
                <tr>
                    <th style="width:699px;">
                        <div class="ttl">
                            <div id="gTitle" class="nodeline margin_top_p1">
                            </div>
                        </div>
                    </th>
                </tr>
                <tr>
                    <td colspan="3">
                        <div class="data">
                            <div class="cLeft">
                                <div id="nameList" class="nameList">
                                </div>
                            </div>
                            <div class="cCenter">
                                <div id="gContent" class="nodegrid">
                                </div>
                            </div>
                            <div class="cRight">
                                <div id="opList" class="opList">
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
            <br/>
        </div>
    </body>
</html>
