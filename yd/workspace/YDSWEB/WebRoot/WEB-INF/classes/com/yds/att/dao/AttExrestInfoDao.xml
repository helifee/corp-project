<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="attExrestInfoDao">

    <typeAlias alias="attExrestInfo" type="com.yds.att.bean.AttExrestInfo"/>

	<!-- 用于select查询公用抽取的列 -->
	<sql id="commonColumns">
	    <![CDATA[
        	EMP_ID as empId ,
        	CAL_YEAR as calYear ,
        	CAL_MONTH as calMonth ,
        	HAPPEN_DATE as happenDate ,
        	HAPPEN_REASON as happenReason ,
        	HAPPEN_TIME as happenTime ,
        	APP_ID as appId 
	    ]]>
	</sql>
	
    <insert id="insertAttExrestInfo" parameterClass="attExrestInfo">
    <![CDATA[
        INSERT INTO
        att_exrest_info (
        	EMP_ID ,
        	CAL_YEAR ,
        	CAL_MONTH ,
        	HAPPEN_DATE ,
        	HAPPEN_REASON ,
        	HAPPEN_TIME ,
        	APP_ID 
        ) VALUES (
        	#empId# ,
        	#calYear# ,
        	#calMonth# ,
        	#happenDate# ,
        	#happenReason# ,
        	#happenTime# ,
        	#appId# 
        )
    ]]>
    </insert>

    <update id="updateAttExrestInfo" parameterClass="attExrestInfo">
    <![CDATA[
        UPDATE att_exrest_info SET
	        APP_ID = #appId# 
        WHERE 
	        EMP_ID = #empId# and
	        CAL_YEAR = #calYear# and
	        CAL_MONTH = #calMonth# and
	        HAPPEN_DATE = #happenDate# and
	        HAPPEN_REASON = #happenReason# and
	        HAPPEN_TIME = #happenTime# 
    ]]>
    </update>

    <delete id="deleteAttExrestInfo" parameterClass="attExrestInfo">
    <![CDATA[
        delete from att_exrest_info where
        EMP_ID = #empId# and
        CAL_YEAR = #calYear# and
        CAL_MONTH = #calMonth# and
        HAPPEN_DATE = #happenDate# and
        HAPPEN_REASON = #happenReason# and
        HAPPEN_TIME = #happenTime# 
    ]]>
    </delete>
    
    <select id="getAttExrestInfoByPk" parameterClass="attExrestInfo" resultClass="attExrestInfo">
	    select <include refid="commonColumns"/>
	    <![CDATA[
	        from att_exrest_info 
	        where 
		        EMP_ID = #empId# and
		        CAL_YEAR = #calYear# and
		        CAL_MONTH = #calMonth# and
		        HAPPEN_DATE = #happenDate# and
		        HAPPEN_REASON = #happenReason# and
		        HAPPEN_TIME = #happenTime# 
	    ]]>
    </select>

	<sql id="dynamicWhere">
	    <dynamic prepend="WHERE">
	       <isNotEmpty prepend="AND" property="empId">
	             EMP_ID = #empId#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="calYear">
	             CAL_YEAR = #calYear#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="calMonth">
	             CAL_MONTH = #calMonth#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="happenDate">
	             HAPPEN_DATE = #happenDate#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="happenReason">
	             HAPPEN_REASON = #happenReason#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="happenTime">
	             HAPPEN_TIME = #happenTime#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="appId">
	             APP_ID = #appId#
	       </isNotEmpty>
	    </dynamic>	
	</sql>
	 
    <select id="getAttExrestInfoCount" resultClass="long">
    <![CDATA[
        select count(*) from att_exrest_info
    ]]>
		<include refid="dynamicWhere"/>    
    </select>
    
    <select id="getAttExrestInfoList" resultClass="attExrestInfo">
    	select <include refid="commonColumns"/>
	    <![CDATA[
	        from att_exrest_info 
	    ]]>
		<include refid="dynamicWhere"/>
    </select>

</sqlMap>
