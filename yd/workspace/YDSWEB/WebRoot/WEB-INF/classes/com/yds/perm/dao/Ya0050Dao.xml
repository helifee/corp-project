<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTDSQLMap2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="Ya0050Dao">
	<typeAlias alias="userPerm" type="com.yds.common.bean.UserPerm"/>
	<typeAlias alias="roleInfo" type="com.yds.perm.bean.RoleInfo"/>
	
	<!-- 权限信息一览取得 --> 
	<select id="getPermissionInfos" parameterClass="String" resultClass="userPerm"> 
		SELECT
			T1.PERMIT_ID AS permitId,
			T1.MENU_NAME AS menuName,
			T1.DISP_SEQ AS dispSeq
		FROM PER_PERMIT T1
		WHERE T1.IS_CONTROL='1'
		ORDER BY T1.DISP_SEQ;
	</select>
	<!-- 根据权限Id取得用户信息 --> 
	<select id="getUserInfosByPermitId" parameterClass="String" resultClass="userPerm"> 
		SELECT
			T1.USER_ID AS userId,
			T2.EMP_CNM AS userName
		FROM V_PER_USER_PERM T1
		INNER JOIN V_EMP_LIST_QUIT T2
			ON T1.USER_ID=T2.EMP_ID
		INNER JOIN PER_PERMIT T3
			ON T1.PERM_ID=T3.PERMIT_ID
		WHERE
			T1.PERM_ID=#permitId#;	
	</select>

	<!-- 根据权限Id取得角色信息 --> 
	<select id="getRoleInfosByPermitId" parameterClass="String" resultClass="roleInfo"> 
		SELECT
			T1.ROLE_ID AS roleId,
			T1.ROLE_NM	AS roleName
		FROM PER_ROLE T1
		INNER JOIN PER_ROLE_PERMIT T2
			ON T1.ROLE_ID=T2.ROLE_ID
		WHERE
			T2.PERMIT_ID=#permitId#;
	</select>

	<!-- 更新权限信息 --> 


	<!-- 删除权限信息 --> 

</sqlMap>  
