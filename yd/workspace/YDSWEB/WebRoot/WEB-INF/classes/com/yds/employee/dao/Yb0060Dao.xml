<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTDSQLMap2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="yb0060Dao">
	<typeAlias alias="empPos" type="com.yds.common.bean.EmpPos"/>

	<!--职位列表信息取得  --> 
	<select id="getPosList" parameterClass="String" resultClass="EmpPos"> 
		SELECT 
			T1.POS_ID AS posId,
			T1.POS_NAME AS posName,
			T1.POS_SNAME AS posSName,
			T1.DISP_SEQ AS dispSeq,
			T1.POS_STATE AS posState
		FROM 
			EMP_POS	T1
		WHERE 
			POS_TYPE_ID = #posTypeId#
	
		ORDER BY dispSeq
	</select>
	
	<!--职位信息取得  --> 
	<select id="getPosInfo" parameterClass="String" resultClass="EmpPos"> 
		SELECT 
			T1.POS_ID AS posId,
			T1.POS_NAME AS posName,
			T1.POS_SNAME AS posSName,
			T1.DISP_SEQ AS dispSeq,
			T1.POS_STATE AS posState
		FROM 
			EMP_POS	T1
		WHERE 
			POS_ID = #posId#
	</select>
		
	<!-- 职位排序列表信息取得 -->
    <select id="getPosSortList" parameterClass="empPos" resultClass="empPos">
	    SELECT
			T1.DISP_SEQ AS dispSeq,
			T1.POS_ID AS posId,
			T1.POS_NAME AS posName
	    FROM 
			EMP_POS T1
		WHERE
				POS_TYPE_ID= #posTypeId#
		ORDER BY dispSeq
    </select>
 
    <!-- 添加职位信息 -->
	<insert id="insertPosInfo" parameterClass="empPos">
		INSERT INTO EMP_POS
		   (
		   		POS_ID ,
				POS_NAME ,
				POS_SNAME,
				POS_TYPE_ID,
				DISP_SEQ,
				POS_STATE,
				UPDATE_USER,
				UPDATE_TIME
		   )
		VALUES
		   (
		    #posId#,
			#posName#,
			#posSName#,
			#posTypeId#,
			#dispSeq#,
			#posState#,
			#updateUser#,
			NOW()
	
		   );
	</insert>

	<!-- 修改职位信息 -->
	<update id="updatePosInfo" parameterClass="empPos">
		UPDATE EMP_POS
		SET	
				POS_NAME=#posName#, 
				POS_SNAME=#posSName#,
				POS_STATE=#posState#,
				UPDATE_USER=#updateUser#,
				UPDATE_TIME=NOW()
		WHERE
			POS_ID=#posId#
	</update>
	
	<!-- 最大PosID取得-->
	<select id="getMaxPosId" resultClass="String">
		SELECT MAX(POS_ID) 
		  FROM EMP_POS
	</select>
	
	<!-- 修改职位排序 -->
	<update id="updatePosSort" parameterClass="empPos">
		UPDATE EMP_POS
	    SET 	
				DISP_SEQ = #dispSeq#
		WHERE
				POS_ID = #posId#
	</update>

	
</sqlMap> 
