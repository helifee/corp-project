<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTDSQLMap2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ComCodeInfoDao">
	<typeAlias alias="comCodeInfo" type="com.yds.common.bean.ComCodeInfo"/> 
	<typeAlias alias="comCodeMaint" type="com.yds.common.bean.ComCodeMaint"/>
    <select id="getCodeInfo" parameterClass="comCodeInfo" resultClass="comCodeInfo">
	    SELECT
			SUB_SYS AS subSys,
			TYPE_ID AS typeId,
			DIFF_NO AS diffNo,
			DIFF_NAME AS diffName,
			PRO2 AS pro2
	        FROM SYS_CODE_MST
		WHERE
			1 = 1
			<isEmpty prepend="AND" property="diffNo">
				DEL_FLG = '0'
			</isEmpty>
			<isNotEmpty prepend="AND" property="subSys">
				SUB_SYS = #subSys#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="typeId">
				TYPE_ID = #typeId#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="diffNo">
				DIFF_NO = #diffNo#
			</isNotEmpty>
			<isPropertyAvailable property="proList">
				 <isNotNull property="proList">
					<iterate property="proList">
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="0">
							$proList[].proId$ = #proList[].proValue#
						</isEqual>
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="1">
							$proList[].proId$ != #proList[].proValue#
						</isEqual>
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="2">
							$proList[].proId$ > #proList[].proValue#
						</isEqual>
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="3">
							$proList[].proId$ >= #proList[].proValue#
						</isEqual>
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="4">
							<![CDATA[
							$proList[].proId$ < #proList[].proValue#
							]]>
						</isEqual>
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="5">
							<![CDATA[
							$proList[].proId$ <= #proList[].proValue#
							]]>
						</isEqual>
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="6">
							$proList[].proId$ like CONCAT(#proList[].proValue#,'%')
						</isEqual>
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="7">
							$proList[].proId$ BETWEEN #proList[].proValueList[0]# AND #proList[].proValueList[1]#
						</isEqual>
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="8">
							<isPropertyAvailable property="proList[].proValueList">
				 				<isNotNull property="proList[].proValueList">
									<iterate property="proList[].proValueList" open="(" close=")" conjunction="OR">
										$proList[].proId$ = #proList[].proValueList[]#
									</iterate>
								 </isNotNull>
							</isPropertyAvailable>
						</isEqual>
					</iterate>
                 </isNotNull>
            </isPropertyAvailable>
		ORDER BY DISP_SEQ;
    </select>
	
	
	<select id="getDetailCodeInfo" parameterClass="comCodeInfo" resultClass="comCodeMaint">
	    SELECT
			SUB_SYS AS subSys,
			TYPE_ID AS typeId,
			DIFF_NO AS diffNo,
			TYPE_NAME AS typeName,
			DIFF_NAME AS diffName,
			DIFF_SHORT_NAME AS diffShortName,
			DISP_SEQ AS dispSeq,
			DEL_FLG AS delFlg,
			PRO1 AS pro1,
			PRO2 AS pro2,
			PRO3 AS pro3,
			PRO4 AS pro4,
			PRO5 AS pro5,
			PRO6 AS pro6,
			PRO7 AS pro7,
			PRO8 AS pro8,
			REFER AS refer
	        FROM SYS_CODE_MST
		WHERE
			1 = 1
			<isEmpty prepend="AND" property="diffNo">
				DEL_FLG = '0'
			</isEmpty>
			<isNotEmpty prepend="AND" property="subSys">
				SUB_SYS = #subSys#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="typeId">
				TYPE_ID = #typeId#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="diffNo">
				DIFF_NO = #diffNo#
			</isNotEmpty>
			<isPropertyAvailable property="proList">
				 <isNotNull property="proList">
					<iterate property="proList">
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="0">
							$proList[].proId$ = #proList[].proValue#
						</isEqual>
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="1">
							$proList[].proId$ != #proList[].proValue#
						</isEqual>
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="2">
							$proList[].proId$ > #proList[].proValue#
						</isEqual>
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="3">
							$proList[].proId$ >= #proList[].proValue#
						</isEqual>
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="4">
							<![CDATA[
							$proList[].proId$ < #proList[].proValue#
							]]>
						</isEqual>
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="5">
							<![CDATA[
							$proList[].proId$ <= #proList[].proValue#
							]]>
						</isEqual>
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="6">
							$proList[].proId$ like CONCAT(#proList[].proValue#,'%')
						</isEqual>
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="7">
							$proList[].proId$ BETWEEN #proList[].proValueList[0]# AND #proList[].proValueList[1]#
						</isEqual>
						<isEqual prepend="AND" property="proList[].searchMode" compareValue="8">
							<isPropertyAvailable property="proList[].proValueList">
				 				<isNotNull property="proList[].proValueList">
									<iterate property="proList[].proValueList" open="(" close=")" conjunction="OR">
										$proList[].proId$ = #proList[].proValueList[]#
									</iterate>
								 </isNotNull>
							</isPropertyAvailable>
						</isEqual>
					</iterate>
                 </isNotNull>
            </isPropertyAvailable>
		ORDER BY DISP_SEQ;
    </select>
	
</sqlMap>  