<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="attCorrectDao">

    <typeAlias alias="attCorrect" type="com.yds.att.bean.AttCorrect"/>

	<!-- 用于select查询公用抽取的列 -->
	<sql id="commonColumns">
	    <![CDATA[
        	APP_ID as appId ,
        	APP_EMP_ID as appEmpId ,
        	ORG_ID as orgId ,
        	YEAR as year ,
        	MONTH as month ,
        	DAY as day ,
        	BEF_START_TIME as befStartTime ,
        	BEF_END_TIME as befEndTime ,
        	AFT_START_TIME as aftStartTime ,
        	AFT_END_TIME as aftEndTime ,
        	CORRECT_REASON as correctReason ,
        	APP_STATUS as appStatus ,
        	UPDATE_USER as updateUser ,
        	UPDATE_TIME as updateTime 
	    ]]>
	</sql>
	
    <insert id="insertAttCorrect" parameterClass="attCorrect">
    <![CDATA[
        INSERT INTO
        att_correct (
        	APP_ID ,
        	APP_EMP_ID ,
        	ORG_ID ,
        	YEAR ,
        	MONTH ,
        	DAY ,
        	BEF_START_TIME ,
        	BEF_END_TIME ,
        	AFT_START_TIME ,
        	AFT_END_TIME ,
        	CORRECT_REASON ,
        	APP_STATUS ,
        	UPDATE_USER ,
        	UPDATE_TIME 
        ) VALUES (
        	#appId# ,
        	#appEmpId# ,
        	#orgId# ,
        	#year# ,
        	#month# ,
        	#day# ,
        	#befStartTime# ,
        	#befEndTime# ,
        	#aftStartTime# ,
        	#aftEndTime# ,
        	#correctReason# ,
        	#appStatus# ,
        	#updateUser# ,
        	#updateTime# 
        )
    ]]>
    </insert>

    <update id="updateAttCorrect" parameterClass="attCorrect">
    <![CDATA[
        UPDATE att_correct SET
	        APP_EMP_ID = #appEmpId# ,
	        ORG_ID = #orgId# ,
	        YEAR = #year# ,
	        MONTH = #month# ,
	        DAY = #day# ,
	        BEF_START_TIME = #befStartTime# ,
	        BEF_END_TIME = #befEndTime# ,
	        AFT_START_TIME = #aftStartTime# ,
	        AFT_END_TIME = #aftEndTime# ,
	        CORRECT_REASON = #correctReason# ,
	        APP_STATUS = #appStatus# ,
	        UPDATE_USER = #updateUser# ,
	        UPDATE_TIME = #updateTime# 
        WHERE 
	        APP_ID = #appId# 
    ]]>
    </update>

    <delete id="deleteAttCorrect" parameterClass="attCorrect">
    <![CDATA[
        delete from att_correct where
        APP_ID = #appId# 
    ]]>
    </delete>
    
    <select id="getAttCorrectByPk" parameterClass="attCorrect" resultClass="attCorrect">
	    select <include refid="commonColumns"/>
	    <![CDATA[
	        from att_correct 
	        where 
		        APP_ID = #appId# 
	    ]]>
    </select>

	<sql id="dynamicWhere">
	    <dynamic prepend="WHERE">
	       <isNotEmpty prepend="AND" property="appId">
	             APP_ID = #appId#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="appEmpId">
	             APP_EMP_ID = #appEmpId#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="orgId">
	             ORG_ID = #orgId#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="year">
	             YEAR = #year#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="month">
	             MONTH = #month#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="day">
	             DAY = #day#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="befStartTime">
	             BEF_START_TIME = #befStartTime#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="befEndTime">
	             BEF_END_TIME = #befEndTime#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="aftStartTime">
	             AFT_START_TIME = #aftStartTime#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="aftEndTime">
	             AFT_END_TIME = #aftEndTime#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="correctReason">
	             CORRECT_REASON = #correctReason#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="appStatus">
	             APP_STATUS = #appStatus#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="updateUser">
	             UPDATE_USER = #updateUser#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="updateTime">
	             UPDATE_TIME = #updateTime#
	       </isNotEmpty>
	    </dynamic>	
	</sql>
	 
    <select id="getAttCorrectCount" resultClass="long">
    <![CDATA[
        select count(*) from att_correct
    ]]>
		<include refid="dynamicWhere"/>    
    </select>
    
    <select id="getAttCorrectList" resultClass="attCorrect">
    	select <include refid="commonColumns"/>
	    <![CDATA[
	        from att_correct 
	    ]]>
		<include refid="dynamicWhere"/>
    </select>

</sqlMap>
