<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTDSQLMap2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="PosInfoDao">
	<typeAlias alias="posInfo" type="com.yds.perm.bean.PosInfo"/>
        <resultMap id="perPositionResult" class="posInfo">
        <result property="posId" column="POS_ID"/>
        <result property="posName" column="POS_NAME"/>
        <result property="posDesc" column="POS_DESC"/>
        <result property="parentPos" column="PARENT_POS"/>
        <result property="displaySeq" column="DISPLAY_SEQ"/>
        <result property="posState" column="POS_STATE"/>
    </resultMap>
	
	<!-- 职位信息一览取得 --> 
	<select id="getPosInfoList" parameterClass="String" resultClass="posInfo">
		SELECT 
		T.POS_ID AS posId,
		T.POS_NAME AS posName,
		T.POS_DESC AS posDesc,
		T.PARENT_POS AS parentPos,
		T.DISPLAY_SEQ AS displaySeq,
		T.POS_STATE AS posState,
		S.POS_NAME As parentName
		FROM PER_POSITION T	LEFT JOIN PER_POSITION S ON T.PARENT_POS = S.POS_ID
		ORDER BY T.DISPLAY_SEQ	
    </select>
	
	<!-- 更新职位信息 --> 
    <update id="updatePosInfo" parameterClass="posInfo">
        UPDATE PER_POSITION SET
	        POS_NAME = #posName# ,
	        POS_DESC = #posDesc# ,
	        PARENT_POS = #parentPos# ,
	        DISPLAY_SEQ = #displaySeq# ,
	        POS_STATE = #posState#,
			UPDATETIME = NOW()
        WHERE 
	        POS_ID = #posId# 
    </update>
	
	<!-- 添加职位信息 --> 
	<insert id="insertPosInfo" parameterClass="posInfo">
        INSERT INTO
        PER_POSITION (
        	POS_ID ,
        	POS_NAME ,
        	POS_DESC ,
        	PARENT_POS ,
        	DISPLAY_SEQ ,
        	POS_STATE ,
			UPDATETIME
        	
        ) VALUES (
        	#posId# ,
        	#posName# ,
        	#posDesc# ,
        	#parentPos# ,
        	#displaySeq# ,
        	#posState# ,
			NOW()
        )
    </insert>	
</sqlMap>  