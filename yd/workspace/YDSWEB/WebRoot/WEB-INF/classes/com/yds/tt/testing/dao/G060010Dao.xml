<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTDSQLMap2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="G060010Dao">

	<typeAlias alias="employeeInfo" type="com.yds.tt.testing.bean.ExamEmployeeInfo"/>

	<!-- 得到放弃考试的员工考试信息 -->
	<select id="getEmployeeDrop" parameterClass="java.util.Date" resultClass="employeeInfo">
		<![CDATA[
			SELECT 
				A.EXAMINE_ID AS examineId,
				A.EMPLOYEES_ID AS employeesId,
				A.EXAMINE_JOIN_TIMES AS examineJoinTimes 
			FROM 
				TT_KS_YUANGONG A,
				TT_KS_XINXI B
			WHERE   
				A.EMP_EXAM_STATUS = '6'
				AND A.EXAMINE_ID = B.EXAMINE_ID
				AND B.EXAMINE_END_TIME <= #examMaxDeleteTime#
		]]>
	</select>

	<!-- 删除放弃考试的答题信息 -->
	<delete id="deleteDropInfo" parameterClass="employeeInfo">
		DELETE FROM TT_KS_DAJUAN 
		WHERE EXAMINE_ID = #examineId#
		AND EMPLOYEES_ID = #employeesId#
		AND EXAMINE_JOIN_TIMES = #examineJoinTimes#;
	</delete>
	
</sqlMap>