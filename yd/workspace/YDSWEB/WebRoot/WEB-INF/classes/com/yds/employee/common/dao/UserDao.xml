<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTDSQLMap2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="UserDao">
	
	<typeAlias alias="userInfo" type="com.yds.common.bean.UserResult"/>
	<typeAlias alias="trueUserInfo" type="com.yds.common.bean.UserInfo"/>
	<typeAlias alias="empinfo" type="com.yds.common.bean.EmpInfo"/>

	<!-- 用户名称取得 --> 
	<select id="getuserNm" parameterClass="java.util.HashMap" resultClass="String">
		SELECT 
		  EMP_CNM AS userName
	<isEqual  property="allFlg"  compareValue = "true" >
		FROM V_EMP_LIST_QUIT
	</isEqual>
	<isEmpty property="allFlg">
		FROM V_EMP_LIST_NOQUIT
	</isEmpty>
		WHERE EMP_ID = #userId#;
	</select>
	
	<!-- 全部用户ID、用户名取得 --> 
	<select id="getExistUsers" resultClass="userInfo">
		SELECT 
		  EMP_ID AS userId,
		  EMP_CNM AS userName
		FROM V_EMP_LIST_NOQUIT;
	</select>
	
	<!-- 取得用户ID -->
	<select id="findUserId" parameterClass="String" resultClass="Long">
		SELECT 
			COUNT(*)
		FROM COM_USER
		WHERE USER_ID = #userId#;
	</select>
	
		<!-- 按组选择人员List取得 -->
	<select id="getTeamUserList" parameterClass="String" resultClass="trueUserInfo">
		SELECT EMP_ID AS userId,
			   EMP_CNM AS userName
		FROM V_EMP_LIST_NOQUIT, EMP_TEAM_USER
	   WHERE V_EMP_LIST_NOQUIT.EMP_ID = EMP_TEAM_USER.TEAM_USER_ID
		 AND EMP_TEAM_USER.USER_STATE_FLG = '01'
		 AND EMP_TEAM_USER.TEAM_ID = #teamId#
	</select>
	
	 <!-- 取得雇员信息(人员ID、性别、生日) --> 
	 <select id="getEmpInfoById" parameterClass="String" resultClass="empinfo"> 
		SELECT
			EMP_ID AS empId, 
			EMP_SEX AS empSex, 
			BIRTHDAY AS birthday
		FROM
			V_EMP_LIST_NOQUIT
		WHERE
			EMP_ID = #id#
     </select>
     
     <!-- 取得有所在职人员信息(人员ID、性别、生日) -->
     <select id="getEmpList" resultClass="empinfo"> 
		SELECT
			EMP_ID AS empId, 
			EMP_SEX AS empSex, 
			BIRTHDAY AS birthday
		FROM
			V_EMP_LIST_NOQUIT
     </select>

</sqlMap>  
