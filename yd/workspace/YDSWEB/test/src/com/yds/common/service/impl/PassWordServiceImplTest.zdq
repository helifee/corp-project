/**
 * 
 */
package com.yds.common.service.impl;

import static com.yds.base.test.BeanAssert.assertBeanLenientEquals;

import javax.annotation.Resource;

import org.junit.Before;
import org.junit.Test;

import com.yds.base.test.AbstractSpringTransTest;
import com.yds.common.bean.PassWord;

import com.yds.common.service.PassWordService;

/**
 * @author yuanjinling
 */
public class PassWordServiceImplTest extends AbstractSpringTransTest
{

	/** @Resource，自动注入Service */
	@Resource
	private PassWordService passWordService;

	/**
	 * @throws java.lang.Exception
	 */
	@Before
	public void setUp() throws Exception
	{
		// 删除表中数据(避免和测试数据冲突)
		deleteFromTables("com_user");
		deleteFromTables("tempinfo");
		initCommonData(PassWordServiceImpl.class, "init.xls");
	}

	/**
	 * Test method for
	 * {@link com.yds.common.service.impl.PassWordServiceImpl#updatePwd(com.yds.common.bean.PassWord)}
	 * .
	 */
	@Test
	public void testUpdatePwd() throws Exception
	{
		// 初始化数据库
		initData("", "result01.xls");
		// 初始化测试方法参数
		PassWord password = getParamObject(PassWord.class, "param");
		// 调用被测试方法
		passWordService.updatePwd(password);
		// 检索更新对象
		PassWord actualInfo = findBeanByCondition(PassWord.class, "param_COM_USER");
		// 得到预期值
		PassWord expectInfo = getExpectObject(PassWord.class);
		// 断言检索结果和预期是不是一致
		assertBeanLenientEquals(expectInfo, actualInfo);
	}

	/**
	 * Test method for
	 * {@link com.yds.common.service.impl.PassWordServiceImpl#updatePwdOld(com.yds.common.bean.PassWord)}
	 * .
	 */
	@Test
	public void testUpdatePwdOld() throws Exception
	{
		// 初始化数据库
		initData("", "result02.xls");
		// 初始化测试方法参数
		PassWord password = getParamObject(PassWord.class, "param");
		// 调用被测试方法
		passWordService.updatePwdOld(password);
		// 检索更新对象
		PassWord actualInfo = findBeanByCondition(PassWord.class, "param_TEMPINFO");
		// 得到预期值
		PassWord expectInfo = getExpectObject(PassWord.class);
		// 断言检索结果和预期是不是一致
		assertBeanLenientEquals(expectInfo, actualInfo);
	}

}
