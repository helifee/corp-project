/**
 * 
 */
package com.yds.common.dao.impl;

import static com.yds.base.test.BeanAssert.assertBeanLenientEquals;

import java.util.List;

import javax.annotation.Resource;

import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;

import com.yds.base.test.AbstractSpringTransTest;
import com.yds.common.bean.UserPerm;
import com.yds.common.dao.UserPermitDao;

/**
 * @author lincheng
 *
 */
public class UserPermitDaoImplTest extends AbstractSpringTransTest {
	
	@Resource
	private UserPermitDao userPermitDao;
	
	/**
	 * @throws java.lang.Exception
	 */
	@BeforeClass
	public static void setUpBeforeClass() throws Exception {
	}

	/**
	 * @throws java.lang.Exception
	 */
	@AfterClass
	public static void tearDownAfterClass() throws Exception {
	}

	/**
	 * @throws java.lang.Exception
	 */
	@Before
	public void setUp() throws Exception {
		// 删除主题信息表
		deleteFromTables("per_permit","per_user_permit","per_role_postion","per_role_permit","emp_staff_pos","emp_pos", "com_user", "emp_info");
		
		// 初始化
		initCommonData(UserPermitDaoImpl.class,"init.xls");
		
	}

	/**
	 * @throws java.lang.Exception
	 */
	@After
	public void tearDown() throws Exception {
	}

	/**
	 * Test method for {@link com.yds.common.dao.impl.UserPermitDaoImpl#getUserMenu(java.lang.String)}.
	 * @throws Exception 
	 */
	@Test
	public void testGetUserMenu() throws Exception {
		// 初始化数据库
		initData("","result01.xls");
		// 初始化测试方法参数
		String userId = getParamObject(String.class);
		// 调用测试方法
		List<UserPerm> actualInfo = userPermitDao.getUserMenu(userId);
		// 取得预期值
		List<UserPerm> expectInfo = getExpectList(UserPerm.class);
		// 断言检索结果和预期是否一致
		assertBeanLenientEquals(expectInfo, actualInfo);
	}

	/**
	 * Test method for {@link com.yds.common.dao.impl.UserPermitDaoImpl#getUserPerm(java.lang.String)}.
	 * @throws Exception 
	 */
	@Test
	public void testGetUserPerm() throws Exception {
		// 初始化数据库
		initData("","result02.xls");
		// 初始化测试方法参数
		String userId = getParamObject(String.class);
		// 调用测试方法
		List<UserPerm> actualInfo = userPermitDao.getUserPerm(userId);
		// 取得预期值
		List<UserPerm> expectInfo = getExpectList(UserPerm.class);
		// 断言检索结果和预期是否一致
		assertBeanLenientEquals(expectInfo, actualInfo);
		
	}

}
