package com.yds.util.service;

import static org.junit.Assert.assertEquals;

import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;

import org.junit.Test;

/**
 * @author chenyuer
 * @version 1.00 2010/06/02
 */
public class DateConverterTest {

	/**
	 * Test method for
	 * {@link com.yds.util.service.DateConverter#convertFromString(java.util.Map, java.lang.String[], java.lang.Class)}
	 * .
	 */
	@Test
	public void testConvertFromString() {
		// 初始化测试方法参数列表1(返回值为2010年6月21日的日期型数据)
		ArrayList<String> paramList1 = new ArrayList<String>();
		paramList1.add("2010-06-21");
		paramList1.add("2010/06/21");
		paramList1.add("2010.06.21");
		paramList1.add("2010年06月21日");
		paramList1.add("20100621");

		// 初始化测试方法参数列表2（返回值为null）
		ArrayList<String> paramList2 = new ArrayList<String>();
		paramList2.add("    ");
		paramList2.add("12312 ");
		paramList2.add(null);
		// 得到预期值
		DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
		Date expect = null;
		Date actual = null;

		// 调用被测试方法(返回结果不为null)
		for (int i = 0; i < paramList1.size(); i++) {
			String[] stringParam1 = new String[2];
			stringParam1[0] = paramList1.get(i);
			DateConverter test = new DateConverter();
			actual = (Date) test.convertFromString(null, stringParam1, Date.class);
			try {
				expect = df.parse(paramList1.get(0));
			} catch (ParseException e) {
				e.printStackTrace();
			}
			// 断言结果和预期是否一致
			assertEquals(expect, actual);
		}
		// 调用被测试方法（返回结果为null）
		for (int i = 0; i < paramList2.size(); i++) {
			String[] stringParam2 = new String[2];
			stringParam2[0] = paramList2.get(i);
			DateConverter test = new DateConverter();
			actual = (Date) test.convertFromString(null, stringParam2, Date.class);
			expect = null;
			// 断言结果和预期是否一致
			assertEquals(expect, actual);
		}

	}

	/**
	 * Test method for
	 * {@link com.yds.util.service.DateConverter#convertToString(java.util.Map, java.lang.Object)}.
	 */
	@Test
	@SuppressWarnings("unchecked")
	public void testConvertToString() {
		// 设定预期值
		String expect = "2010-06-21";
		DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
		// 定义测试方法的参数参数
		Date param = new Date();
		DateConverter test = new DateConverter();
		try {
			param = df.parse(expect);
		} catch (ParseException e) {
			e.printStackTrace();
		}
		Map context = new HashMap();
		// 调用被测试方法
		String actual = test.convertToString(context, param);
		// 断言结果和预期是否一致
		assertEquals(expect, actual);
	}

}
