/*
 * @(#) Yb9010ServiceImplTest.java
 * Copyright (c) 2009-2010 大连远东计算机系统有限公司
 * All rights reserved.
 *      Project: 远东计算机社内网
 *    SubSystem: 人员管理
 */

package com.yds.employee.common.service.impl;

import static com.yds.base.test.BeanAssert.*;

import java.util.ArrayList;
import java.util.List;

import javax.annotation.Resource;

import org.junit.Before;
import org.junit.Test;

import com.yds.base.test.AbstractSpringTransTest;
import com.yds.common.bean.EmpInfo;
import com.yds.employee.bean.Yb9010CondA;
import com.yds.employee.bean.Yb9010CondB;
import com.yds.employee.common.service.Yb9010Service;

/**
 * 员工选择（业务逻辑处理测试）
 * 
 * @author 远东)bixiuqing
 * @version 1.00 2010/07/21
 */
public class Yb9010ServiceImplTest extends AbstractSpringTransTest {

	/** @Resource，自动注入 */
	@Resource
	private Yb9010Service yb9010Service;

	/**
	 * @throws java.lang.Exception
	 */
	@Before
	public void setUp() throws Exception {
		// 删除表中数据(避免和测试数据冲突)
		deleteFromTables("EMP_INFO", "EMP_STAFF_POS", "EMP_POS", 
				"EMP_STAFF_ORG_RELATION", "SYS_CODE_MST", "EMP_ORG_INFO");

		initCommonData(Yb9010ServiceImpl.class,"init.xls");
	}

	/**
	 * Test method for {@link com.yds.employee.common.service.impl.Yb9010ServiceImpl#getEmpInfoList(com.yds.employee.bean.Yb9010CondA)}.
	 */
	@Test
	public void testGetEmpInfoList() throws Exception {
		
		// 初始化数据库
		initData("input01.xls", "result01.xls");
		
		// 初始化测试方法参数
		Yb9010CondA yb9010CondA = getParamObject(Yb9010CondA.class, "param1");
		// 调用被测试方法
		List<EmpInfo> actualInfo = yb9010Service.getEmpInfoList(yb9010CondA);
		// 得到预期值
		List<EmpInfo> expectInfo = getExpectList(EmpInfo.class, "expect1");
		// 断言检索结果和预期是否一致
		assertListEquals(expectInfo, actualInfo);
		
		// 初始化测试方法参数
		yb9010CondA = getParamObject(Yb9010CondA.class, "param2");
		// 调用被测试方法
		actualInfo = yb9010Service.getEmpInfoList(yb9010CondA);
		// 得到预期值
		expectInfo = getExpectList(EmpInfo.class, "expect2");
		// 断言检索结果和预期是否一致
		assertListEquals(expectInfo, actualInfo);
		
		// 初始化测试方法参数
		yb9010CondA = getParamObject(Yb9010CondA.class, "param3");
		// 调用被测试方法
		actualInfo = yb9010Service.getEmpInfoList(yb9010CondA);
		// 得到预期值
		expectInfo = getExpectList(EmpInfo.class, "expect3");
		// 断言检索结果和预期是否一致
		assertListEquals(expectInfo, actualInfo);
		
		// 初始化测试方法参数
		yb9010CondA = getParamObject(Yb9010CondA.class, "param4");
		// 调用被测试方法
		actualInfo = yb9010Service.getEmpInfoList(yb9010CondA);
		// 得到预期值
		expectInfo = new ArrayList<EmpInfo>();
		// 断言检索结果和预期是否一致
		assertListEquals(expectInfo, actualInfo);
	}
	/**
	 * Test method for {@link com.yds.employee.common.service.impl.Yb9010ServiceImpl#getEmpInfoListAdv(com.yds.employee.bean.Yb9010CondB)}.
	 */
	@Test
	public void testGetEmpInfoListAdv() throws Exception {
		
		// 初始化数据库
		initData("input02.xls", "result02.xls");
		
		// 初始化测试方法参数
		Yb9010CondB yb9010CondB = getParamObject(Yb9010CondB.class, "param1");
		// 调用被测试方法
		List<EmpInfo> actualInfo = yb9010Service.getEmpInfoListAdv(yb9010CondB);
		// 得到预期值
		List<EmpInfo> expectInfo = getExpectList(EmpInfo.class, "expect1");
		// 断言检索结果和预期是否一致
		assertListEquals(expectInfo, actualInfo);
		
		// 初始化测试方法参数
		yb9010CondB = getParamObject(Yb9010CondB.class, "param2");
		List<String> orgIdInfos = getParamList(String.class, "param2_orgIdInfos");
		List<String> posIdInfos = getParamList(String.class, "param2_posIdInfos");
		List<String> empStatusIdInfos = getParamList(String.class, "param2_empStatusIdInfos");
		List<String> empStateIdInfos = getParamList(String.class, "param2_empStateIdInfos");
		yb9010CondB.setOrgIdInfos(orgIdInfos);
		yb9010CondB.setPosIdInfos(posIdInfos);
		yb9010CondB.setEmpStateIdInfos(empStateIdInfos);
		yb9010CondB.setEmpStatusIdInfos(empStatusIdInfos);
		// 调用被测试方法
		actualInfo = yb9010Service.getEmpInfoListAdv(yb9010CondB);
		// 得到预期值
		expectInfo = getExpectList(EmpInfo.class, "expect2");
		// 断言检索结果和预期是否一致
		assertListEquals(expectInfo, actualInfo);
		
		// 初始化测试方法参数
		yb9010CondB = getParamObject(Yb9010CondB.class, "param3");
		// 调用被测试方法
		actualInfo = yb9010Service.getEmpInfoListAdv(yb9010CondB);
		// 得到预期值
		expectInfo =  new ArrayList<EmpInfo>();
		// 断言检索结果和预期是否一致
		assertListEquals(expectInfo, actualInfo);
	}
}
