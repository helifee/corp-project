/**
 * 
 */
package com.yds.employee.common.service.impl;

import static com.yds.base.test.BeanAssert.*;

import javax.annotation.Resource;

import org.junit.Before;
import org.junit.Test;

import com.yds.base.test.AbstractSpringTransTest;
import com.yds.common.service.UserService;

/**
 * @author xupai
 *
 */
public class UserServiceImplTest extends AbstractSpringTransTest{
	
	/** @Resource，自动注入Dao */
	@Resource
	private UserService userService;

	/**
	 * @throws java.lang.Exception
	 */
	@Before
	public void setUp() throws Exception {
		// 删除表中数据(避免和测试数据冲突)
		deleteFromTables("COM_USER","EMP_INFO");
		initCommonData(UserServiceImpl.class);
	}

	/**
	 * {@link com.yds.employee.common.service.impl.UserServiceImpl#getUserNm(java.lang.String, boolean[])} 的测试方法。
	 */
	@Test
	public final void testGetUserNm() throws Exception {
		// 初始化数据库
		initData("input01.xls", "result01.xls");
		// 初始化测试方法参数	
		String userId = getParamObject(String.class,"param01");
//		String userId = getParamObject(String.class,"param02");
		 boolean allFlg = true;

		// 调用被测试方法
//		String actualInfo = UserService.getUserNm(userId);
		String actualInfo = userService.getUserNm(userId,allFlg);
		// 得到预期值
		String expectInfo = getExpectObject(String.class,"expect01");
//		String expectInfo = getExpectObject(String.class,"expect02");
		// 断言检索结果和预期是否一致
 		assertBeanEquals(expectInfo, actualInfo);
//		Assert.assertNull(actualInfo);
		
	}

}
