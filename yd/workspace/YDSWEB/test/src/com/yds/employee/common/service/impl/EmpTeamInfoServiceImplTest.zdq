/*
 * @(#)EmpTeamInfoServiceImplTest.java
 * Copyright (c) 2009-2010 大连远东计算机系统有限公司
 * All rights reserved.
 *      Project: 远东公司内部网
 *    SubSystem: 共通系统
 */

package com.yds.employee.common.service.impl;

import static com.yds.base.test.BeanAssert.*;
import java.util.List;
import javax.annotation.Resource;
import org.junit.Before;
import org.junit.Test;
import com.yds.base.test.AbstractSpringTransTest;
import com.yds.common.bean.EmpTeamInfo;
import com.yds.common.service.EmpTeamInfoService;

/**
 * 组别查询(业务逻辑测试)
 * 
 * @author fangjiayuan
 * @version 1.00 2010/09/03
 */
public class EmpTeamInfoServiceImplTest extends AbstractSpringTransTest {

	/** @Resource，自动注入Service */	
	@Resource
	private EmpTeamInfoService empTeamInfoService;	
	/**
	 * @throws java.lang.Exception
	 */
	@Before
	public void setUp() throws Exception {

		// 删除表中数据(避免和测试数据冲突)
		deleteFromTables("EMP_TEAM", "EMP_TEAM_USER");
		initCommonData(EmpTeamInfoServiceImpl.class);
	}

	/**
	 * Test method for {@link com.yds.employee.common.service.impl.EmpTeamInfoServiceImpl#getTeamList(java.lang.String)}.
	 * @throws Exception 
	 */
	@Test
	public void testGetTeamList() throws Exception {

		// 初始化数据库
		initData("input01.xls", "result01.xls");
		// 初始化测试方法参数
		String userId = getParamObject(String.class, "param");
		// 结果里不需要追加项目的情况
		List<EmpTeamInfo> actualList1 = empTeamInfoService.getTeamList(
				userId);
		List<EmpTeamInfo> expectList1 = getExpectList(EmpTeamInfo.class,
				"expect_1");
		assertListEquals(expectList1, actualList1);
		
		// 结果里追加空行的的情况
		List<EmpTeamInfo> actualList2 = empTeamInfoService.getTeamList(
				userId," ");
		List<EmpTeamInfo> expectList2 = getExpectList(EmpTeamInfo.class,
				"expect_2");
		assertListEquals(expectList2, actualList2);
		
		// 结果里追加一行的的情况
		List<EmpTeamInfo> actualList3 = empTeamInfoService.getTeamList(
				userId,"00", "全部");
		List<EmpTeamInfo> expectList3 = getExpectList(EmpTeamInfo.class,
				"expect_3");
		assertListEquals(expectList3, actualList3);

	}

}
