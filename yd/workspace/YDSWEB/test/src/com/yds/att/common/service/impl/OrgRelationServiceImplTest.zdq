package com.yds.att.common.service.impl;

import static org.junit.Assert.fail;

import java.util.List;

import javax.annotation.Resource;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;

import com.yds.att.bean.OrgInfo;
import com.yds.att.common.service.OrgRelationService;
import com.yds.base.test.AbstractSpringTransTest;
import com.yds.base.test.BeanAssert;

public class OrgRelationServiceImplTest extends AbstractSpringTransTest {
	
	@Resource
	OrgRelationService orgRelationService;

	@Before
	public void setUp() throws Exception {
		
		initCommonData(OrgRelationServiceImpl.class);
		
		// 删除表中数据(避免和测试数据冲突)
		deleteFromTables("emp_org_info", "sys_code_mst", "com_user", "emp_info");
	}

	@After
	public void tearDown() throws Exception {
	}

	@Test
	public final void testGetManagedOrgBy() throws Exception {
		
		// 初始化数据库
		super.initData("input.xls", "result.xls");
		
		// 初始化测试方法参数
		String empId = getParamObject(String.class, "param1");
		
		//调用被测试方法
		List<OrgInfo> actual = this.orgRelationService.getManagedOrgBy(empId);
		
		//得到预期值
		List<OrgInfo> expect = super.getExpectList(OrgInfo.class, "expect1_OrgInfo");
		
		//断言检索结果和预期是否一致
		BeanAssert.assertListLenientEquals(expect, actual);
		
	}

	@Test
	public final void testGetManagedProjectBy() {
		fail("Not yet implemented"); // TODO
	}

	@Test
	public final void testGetParentOrgBy() {
		fail("Not yet implemented"); // TODO
	}

}
