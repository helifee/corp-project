/**
 * 
 */
package com.yds.batch.service.impl;

import static org.junit.Assert.fail;

import org.junit.Test;

import com.yds.batch.service.BatchServiceCtrl;

/**
 * @author wangduo
 *
 */
public class BatchSocketClientTest {

	private static final int SERVER_PORT = 12346;
	
	/**
	 * Test method for {@link com.yds.batch.service.impl.BatchSocketClient#notifyShutdown(int)}.
	 * @throws InterruptedException 
	 */
	@Test
	public void testNotifyShutdown() throws InterruptedException {
		
		// 启动服务
		BatchServiceCtrl batchServiceCtrl = new BatchServiceCtrlImpl();
		
		batchServiceCtrl.startup(SERVER_PORT);
		
		new BatchSocketClient().notifyShutdown(SERVER_PORT);
		
		Thread.sleep(500);
		
		if (batchServiceCtrl.shutdown()) {
			fail("批处理服务关闭失败。");
		}
	}

}
