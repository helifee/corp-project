/**
 * プログラム名：サービス４
 * 機能概要：データベースでテープルの情報を検索する
 * 作成者：張瑜
 * 作成日：2008/9/26
 * バージョン：1.0
 * 修正履歴：
 */ 
package services;
import java.util.ArrayList;
import java.util.List;
import pojo.dao.PjinfoDAO;
import pojo.Pjinfo; 
import pojo.dao.UsermstDAO;
import pojo.Usermst; 
import pojo.dao.BusyomstDAO;
import pojo.Busyomst; 
public class ManageUser04Service {
	private PjinfoDAO pjinfoDAO; 
	public PjinfoDAO getPjinfoDAO() {
		return pjinfoDAO;
	} 
	public void setPjinfoDAO(PjinfoDAO pjinfoDAO) {
		this.pjinfoDAO = pjinfoDAO;
	} 
	
	private UsermstDAO usermstDAO; 
	public UsermstDAO getUsermstDAO() {
		return usermstDAO;
	} 
	public void setUsermstDAO(UsermstDAO usermstDAO) {
		this.usermstDAO = usermstDAO;
	} 	
	private BusyomstDAO busyomstDAO; 
	public BusyomstDAO getBusyomstDAO() {
		return busyomstDAO;
	} 
	public void setBusyomstDAO(BusyomstDAO busyomstDAO) {
		this.busyomstDAO = busyomstDAO;
	} 	
	public void saveinfo(Usermst usermst) {
		try{	
			usermstDAO.getHibernateTemplate().saveOrUpdate(usermst);	
		}catch(Exception ex){
			
		}
	}
	public void saveinfo( Busyomst busyomst) {
		try{
			busyomstDAO.getHibernateTemplate().saveOrUpdate(busyomst);
		}catch(Exception ex){
				
		}
	}
   public void saveinfo(Pjinfo pjinfo) {
	   try{	
		   pjinfoDAO.getHibernateTemplate().saveOrUpdate(pjinfo);
	   }catch(Exception ex){
	   }
   }
	/**
	 * ManageUser04のsessionのプロジェクト番号でPjinfoの情報を検索する
	 * @param projectid
	 * @return
	 */
	public Pjinfo findBykeyid(String projectid){
		String queryString="from Pjinfo u where trim(u.projectid)=?";
		List<Pjinfo> result =new ArrayList<Pjinfo>();
		result= (List<Pjinfo>)pjinfoDAO.getHibernateTemplate().find(queryString,projectid.trim());
		if(result.size()>0){
			return (Pjinfo)result.get(0);
		}else{
			return null;
		}
	}
	/**
	 * Usermstテープルで管理者情報を検索する
	 * @return
	 */
	public List<Usermst> getUserByUserid(){
		String queryString="from Usermst u where u.userkindid='2'";
		return (List<Usermst>)usermstDAO.getHibernateTemplate().find(queryString);
	}
	/**
	 * Busyomstテープルで情報を検索する
	 * @return
	 */
	public List<Busyomst> getBYBusyomstid(){
		String queryString="from Busyomst u ";
		return (List<Busyomst>)busyomstDAO.getHibernateTemplate().find(queryString);
	}
	/**
	 * 管理者番号でUsermstの情報を検索する
	 * @param userid
	 * @return
	 */
	public Usermst getbyMid(String userid){
		String queryString="from Usermst u where trim(u.userid)=? ";
		List<Usermst> result =new ArrayList<Usermst>();
		result=(List<Usermst>)usermstDAO.getHibernateTemplate().find(queryString,userid.trim());
		if(result.size()>0){
			return (Usermst)result.get(0);
		}else{
			return null;
		}
	}
}
