package pageAction;


import java.util.ArrayList;
import java.util.List;

import org.apache.log4j.Logger;

import parameter.popupPara;
import pojo.Usermst;
import services.PjService;

import com.opensymphony.xwork2.ActionSupport;
import com.parameter.ParaManager;

public class SelectAction extends ActionSupport{
	Logger log = Logger.getLogger(this.getClass().getName());
	private PjService pjService;
	private String userid;
	public String username;
	
	private List<List_user> users;
	/**
	 * users選択テープルの初期化
	 
	 */
	public class List_user{
		private String userid_a;
		public String username_a;
		/**
		 * get,setのメソッド
		 
		 */
		public String getUserid_a() {
			return userid_a;
		}
		public void setUserid_a(String userid_a) {
			this.userid_a = userid_a;
		}
		public String getUsername_a() {
			return username_a;
		}
		public void setUsername_a(String username_a) {
			this.username_a = username_a;
		}
	}
	/* 
	 *一般ユーザーの名前と番号をすべて選択て、alter.jsp のusersのに預け入れる
	 */
	public String adminselect(){

		List<Usermst> result=null;
		log.info("adminselect -- �J�n�����I�I�I�I");
		result = pjService.findums();
		int cnt = result.size();
		List<List_user> temp=new ArrayList<List_user>();
		for (int i = 0; i < cnt; i++) {
		List_user one_list=new List_user();
		one_list.setUserid_a(result.get(i).getUserid());
		one_list.setUsername_a(result.get(i).getUsername());
		temp.add(one_list);
		}
		this.setUsers(temp);

		return SUCCESS;
		
	}
	/* 
	 *管理者の名前と番号をすべて選択て、alter1.jsp のusersのに預け入れる
	 */
public String userselect(){

		List<Usermst> result=null;
		log.info("userselect -- �J�n�����I�I�I�I");
		result = pjService.findums1();
		int cnt = result.size();
		List<List_user> temp=new ArrayList<List_user>();
		for (int i = 0; i < cnt; i++) {
		List_user one_list=new List_user();
		one_list.setUserid_a(result.get(i).getUserid());
		one_list.setUsername_a(result.get(i).getUsername());
		temp.add(one_list);
		}
		this.setUsers(temp);

		return SUCCESS;
		
	}
/**
 * sessionの値を得って、テープルに書いて、データベースに預け入れる
 */
	public String setResult(){
		System.out.println("SelectAction");
		popupPara sendPara=new popupPara();
		ParaManager ParaGm =new ParaManager("alter");
		sendPara.setUsername(this.getUsername());
		ParaGm.saveParameter(sendPara);

		return SUCCESS;
	}
	public PjService getPjService() {
		return pjService;
	}
	public void setPjService(PjService pjService) {
		this.pjService = pjService;
	}
	public String getUserid() {
		return userid;
	}
	public void setUserid(String userid) {
		this.userid = userid;
	}
	public String getUsername() {
		return username;
	}
	public void setUsername(String username) {
		this.username = username;
	}
	public List<List_user> getUsers() {
		return users;
	}
	public void setUsers(List<List_user> users) {
		this.users = users;
	}
		
	}
	
