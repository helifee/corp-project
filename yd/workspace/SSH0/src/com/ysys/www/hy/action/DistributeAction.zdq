/*
 * Copyright (c) 2009-2010 by DaLian YuDong Computer System CO.,LTD
 * All rights reserved.
 *      Project: SSH
 *    SubSystem: 会议室管理子系统
 */
package com.ysys.www.hy.action;

import java.util.List;

import com.opensymphony.xwork2.ActionSupport;
import com.ysys.www.hy.dao.condition.TabHysyl;
import com.ysys.www.hy.service.DistributeService;
import com.ysys.www.hy.service.common.CommonConstants;
import com.ysys.www.hy.service.common.SessionManager;
import com.ysys.www.hy.service.common.UserInfo;
import com.ysys.www.hy.service.condition.DisInfo;
import com.ysys.www.hy.service.condition.DisUpdateInfo;

/**
 * 会议分布Action. 
 * 功能：显示会议室分布信息.    
 * @version 1.00 2009/08/28
 * @author fengliang
 */
public class DistributeAction extends ActionSupport {

	private static final long serialVersionUID = 2138669988168102310L;
	private DistributeService distributeService;      // DistributeService类对象，用于业务处。
	private List<TabHysyl> distributes;               // 画面信息记录集合
	private DisUpdateInfo nextMessage;                // 在新建会议室时提供给画面新建会议的Id和sortId。
	private List<DisInfo> divMessagelist;             // 提供给画面与相应的会议室对应的标签显示位置、宽度、高度和显示内容
	private String pageId;                            // 由其它页面跳转到本页面时的页面id
	private String cdri;                              // 记录当前日期，在返回到预约情况画面时使用
	private String jobId;                             //登陆用户的职位ID(类型：String)
	private Integer quanxian;                         //登陆用户的职位ID(类型：Integer)
	private String radiobutton;                       //保存从会议室预约情况传过来的radio查询条件
	private String startDate;                         //保存从会议室预约情况传过来的查询开始日期
	private String endDate;                           //保存从会议室预约情况传过来的查询结束日期
	private String yyDate;                            //从预约一览传过来的日期
	private String conferensituationId;               //从预约情况传过来的会议室ID
	@Override
	public String execute() {
		
		// 获得会议室信息记录集。
		this.distributes = distributeService.getdiName();
		
		// 获得会议室最大id。
		nextMessage = distributeService.maxHysid(this.distributes);
		
		// 获得会议室分布画面会议室标签位置、大小、现实内容等信息。
		divMessagelist = distributeService.getDivMessages(this.distributes);
		
		// 获得登陆用户等级
		SessionManager session = new SessionManager();
		setJobId(((UserInfo) session.get(CommonConstants.USERINFO)).getJobId());
		quanxian = Integer.parseInt(jobId);
		
		return SUCCESS;
	}

	public List<TabHysyl> getDistributes() {
		return distributes;
	}

	public void setDistributes(List<TabHysyl> distributes) {
		this.distributes = distributes;
	}

	public void setDistributeService(DistributeService distributeService) {
		this.distributeService = distributeService;
	}

	public DisUpdateInfo getNextMessage() {
		return nextMessage;
	}

	public List<DisInfo> getDivMessagelist() {
		return divMessagelist;
	}

	public String getPageId() {
		return pageId;
	}

	public void setPageId(String pageId) {
		this.pageId = pageId;
	}

	public String getCdri() {
		return cdri;
	}

	public void setCdri(String cdri) {
		this.cdri = cdri;
	}

	public String getJobId() {
		return jobId;
	}

	public void setJobId(String jobId) {
		this.jobId = jobId;
	}

	public Integer getQuanxian() {
		return quanxian;
	}

	public void setQuanxian(Integer quanxian) {
		this.quanxian = quanxian;
	}

	public String getRadiobutton() {
		return radiobutton;
	}

	public void setRadiobutton(String radiobutton) {
		this.radiobutton = radiobutton;
	}

	public String getStartDate() {
		return startDate;
	}

	public void setStartDate(String startDate) {
		this.startDate = startDate;
	}

	public String getEndDate() {
		return endDate;
	}

	public void setEndDate(String endDate) {
		this.endDate = endDate;
	}

	public String getYyDate() {
		return yyDate;
	}

	public void setYyDate(String yyDate) {
		this.yyDate = yyDate;
	}

	public String getConferensituationId() {
		return conferensituationId;
	}

	public void setConferensituationId(String conferensituationId) {
		this.conferensituationId = conferensituationId;
	}

}
