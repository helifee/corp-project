<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <constant name="struts.objectFactory" value="spring"/>
    <constant name="struts.il8n.encoding" value="UTF-8"/>
    
    <package name="book" extends="struts-default">
        <action name="list" method="execute" class="bookAction">
            <result>/list.jsp</result>
            <result name="input">/list.jsp</result>
        </action>
        <action name="remove" method="remove" class="bookAction">
            <result>list.jsp</result>
            <result name="input">list.jsp</result>
        </action>
        <action name="save" method="save" class="bookAction">
            <result>list.jsp</result>
            <result name="input">list.jsp</result>
        </action>
    </package>
	<package name="testgrid" extends="struts-default" namespace="/test">
		<action name="testgrid" class="testgrid">
			<result>/test.jsp</result>
		</action>
		
	</package>
	<!--会议室预约系统，命名空间为"/hy" -->
    <package name="hysyy" extends="jfreechart-default" namespace="/hy">
		<!-- 定义拦截器 -->
		<interceptors>
			<!-- 用户登录的拦截器 -->
			<interceptor name="auth" class="AuthInterceptor">
			</interceptor>
			<!-- 检查当前URL机能的拦截器 -->
			<interceptor name="urlcatch" class="UrlCatch">
			</interceptor>
			<!-- 默认的拦截器栈 -->
			<interceptor-stack name="defaultHyStack">
				<interceptor-ref name = "auth"></interceptor-ref>
				<interceptor-ref name = "urlcatch"></interceptor-ref>
				<interceptor-ref name="defaultStack"></interceptor-ref>
			</interceptor-stack>
		</interceptors>
		<!-- 使用默认的拦截器栈 -->
		<default-interceptor-ref name="defaultHyStack"></default-interceptor-ref>
		
		<!-- 全局结果的定义 -->
		<global-results>
			<result name="login" type="redirect">/hy/relogin.action</result>
			<result name="delaultexception">/common/exception.jsp</result> 
		</global-results>

		<!-- 全局异常 -->
		<global-exception-mappings>
			<exception-mapping result="delaultexception" exception="java.lang.Exception"></exception-mapping>
		</global-exception-mappings>

		<!-- 重登录Action，不使用登录拦截器 -->
        <action name="relogin" class="reloginAction">
        	<result name="success">${destUrl}</result>
			<interceptor-ref name="defaultStack"></interceptor-ref>
        </action>

		<!-- 注销Action，不使用登录拦截器 -->
        <action name="logout" method="logout" class="logoutAction">
        	<result name="success" type="redirect">${destUrl}</result>
			<interceptor-ref name="defaultStack"></interceptor-ref>
        </action>
		
		<!-- 登录Action，不使用登录拦截器，使用URL机能的拦截器 -->
        <action name="loginserver" method="login" class="loginAction">
        	<result name="success" type="redirect">${destUrl}</result>
        	<result name="error" >/hy/login.jsp</result>
        	<result name="input" >/hy/login.jsp</result>
			<interceptor-ref name="defaultStack"></interceptor-ref>
			<interceptor-ref name = "urlcatch"></interceptor-ref>
        </action>
		
		<!-- 会议室一览显示Action-->
        <action name="conferenceinit" method="execute" class="hyinitAction">
        	<result name="success"  >/hy/hy_reserve_list.jsp</result>
        	<result name="error" >/hy/login.jsp</result>
        </action>
        
        <!-- 预约页面显示Action -->
        <action name="yuyue" method="execute" class="yuyueAction">
        	<result name="success" >/hy/hy_reserve.jsp</result>
        	<result name="error" >/hy/login.jsp</result>
        </action>
        
        <!-- 预约保存数据Action -->
        <action name="saveYuyueData" method="save" class="yuyueAction">
        	<result name="success" type="redirect">/hy/conferenceinit.action?yyDate=${yilanDate}</result>
        	<result name="input">/hy/hy_reserve.jsp</result>
        	<result name="error" >/hy/hy_reserve.jsp</result>
        </action> 
        
        <!-- 预约修改初始化Action -->
        <action name="yuyueModifyInit" method="init" class="yuyueAction">
        	<result name="success" >/hy/hy_reserve_modify.jsp</result>
        	<result name="error" >/hy/login.jsp</result>
        </action>
        
        <!-- 预约修改Action -->
        <action name="yuyueModify" method="modify" class="yuyueAction">
        	<result name="yilan" type="redirectAction">
	        	<param name="actionName">conferenceinit</param>
	        	<param name="yyDate">${yilanDate}</param>
        	</result>
        	<result name="detail" type="redirectAction">
		       	<param name="actionName">conferensituation</param>
		       	<param name="conferensituationId">${yuyueinfo.hys}</param>
		       	<param name="radiobutton">${searchType}</param>
		       	<param name="startDate">${startDate}</param>
		       	<param name="endDate">${endDate}</param>
		       	<param name="pageNumber">${pageNumber}</param>
        	</result>
        	<result name="input">/hy/hy_reserve_modify.jsp</result>
        	<result name="error" >/hy/hy_reserve_modify.jsp</result>
        </action>
        
        <!-- 预约删除Action -->
        <action name="yuyueDelete" method="delete" class="yuyueAction">
        	<result name="yilan" type="redirectAction">
	        	<param name="actionName">conferenceinit</param>
	        	<param name="yyDate">${yilanDate}</param>
        	</result>
        	<result name="detail" type="redirectAction">
		       	<param name="actionName">conferensituation</param>
		       	<param name="conferensituationId">${yuyueinfo.hys}</param>
		       	<param name="radiobutton">${searchType}</param>
		       	<param name="startDate">${startDate}</param>
		       	<param name="endDate">${endDate}</param>
		       	<param name="pageNumber">${pageNumber}</param>
        	</result>
        	<result name="error" >/hy/hy_reserve_modify.jsp</result>
        </action>
        
        <!-- 预约时选择参加人员Action -->
        <action name="reserve_selectCjr" method="reserve_select" class="yuyueAction">
        	<result name="success" type="redirect">/hy/hyattendinfo.action</result>
        	<result name="error" >/hy/hy_reserve_modify.jsp</result>
        </action>
        
        <!-- 预约修改时选择参加人员Action -->
        <action name="modify_selectCjr" method="modify_select" class="yuyueAction">
        	<result name="success" type="redirect">/hy/hyattendinfo.action</result>
        	<result name="error" >/hy/hy_reserve_modify.jsp</result>
        </action>
        
        <!-- 填写报告Action -->
        <action name="writeBg" method="writeBg" class="yuyueAction">
        	<result name="yilan" type="redirectAction">
	        	<param name="actionName">conferenceinit</param>
	        	<param name="yyDate">${yilanDate}</param>
        	</result>
        	<result name="detail" type="redirectAction">
		       	<param name="actionName">conferensituation</param>
		       	<param name="conferensituationId">${yuyueinfo.hys}</param>
		       	<param name="radiobutton">${searchType}</param>
		       	<param name="startDate">${startDate}</param>
		       	<param name="endDate">${endDate}</param>
		       	<param name="pageNumber">${pageNumber}</param>
        	</result>
        	<result name="input">/hy/login.jsp</result>
        	<result name="error" >/hy/hy_reserve_modify.jsp</result>
        </action>
                                         
        <action name="conferensituation" method="execute" class="conferensituationAction">
        	<result name="success" >/hy/hy_situationMain.jsp</result>
        	<result name="error" >/hy/login.jsp</result>
        </action> 
        <action name="conferensituationXiangxi" method="execute" class="conferensituationAction">
        	<result name="success" >/hy/hy_situation.jsp</result>
        	<result name="error" >/hy/login.jsp</result>
        </action> 
       <action name="staticsMain" method="execute" class="statisticsYuyueAction">
        	<result name="success" >/hy/hy_statisticsMain.jsp</result>
        	<result name="error" >/hy/login.jsp</result>
        </action>
         <action name="staticsXiangxi" method="execute" class="statisticsYuyueAction">
        	<result name="success" >/hy/hy_statistics.jsp</result>
        	<result name="error" >/hy/login.jsp</result>
        </action>  
         <action name="jFreeChart" method="execute" class="statisticsYuyueAction">
        	<result name="success" type="chart">
	        	<param name="width">800</param>
	        	<param name="height">450</param>
        	</result>
        </action> 
       
        
        <action name="distributeaction" method="execute" class="distributeAction">
        	<result name="success" >/hy/hy_distribute.jsp</result>
        	<result name="error" >/hy/login.jsp</result>
        </action>
         <action name="distributeUpdateAction" method="execute" class="distributeUpdateAction">
        	<result name="success" >/hy/hy_distributeUpdate_main.jsp</result>
        	<result name="error" >/hy/login.jsp</result>
        </action>
        <action name="distributeDeleteAction" method="remove" class="distributeUpdateAction">
        	<result name="success" type="redirect">showDistribute.action</result>
        	<result name="error" >/hy/login.jsp</result>
        </action>
        <action name="showDistribute" method="execute" class="distributeUpdateAction">
        	<result name="success" >/hy/hy_distributeUpdate.jsp</result>
        	<result name="error" >/hy/login.jsp</result>
        </action>
        <action name="distributeNewOrUpdateAction" method="newOrUpdateHys" class="distributeUpdateAction">
        	<result name="success"  type="redirect">showDistribute.action</result>
        	<result name="error" >/hy/login.jsp</result>
        </action>
        
        <!-- 组管理显示Action-->
        <action name="hygroupmanage" method="execute" class="hygroupmanageAction">
        	<result name="success" >/hy/hy_group_manage_main.jsp</result>
        	<result name="error" >/hy/hy_reserve_list.jsp</result>
        </action>
        
        <!-- 组名List变化时Action-->
       <action name="getrenyuanmz" method="getzuming" class="hygroupmanageAction">
        	<result name="success" >/hy/hy_group_manage_zuname.jsp</result>
        </action>
        
        <!-- 新建组Action-->
        <action name="addzu" method="addzulist" class="hygroupmanageAction">
        	<result name="success" >/hy/hy_group_manage_zuname.jsp</result>
        </action> 
        
        <!-- 修改组Action-->
        <action name="updatezu" method="updateZbyl" class="hygroupmanageAction">
        	<result name="success" >/hy/hy_group_manage_zuname.jsp</result>
        </action>
        
        <!-- 删除组Action-->
        <action name="deletezu" method="deleteZbyl" class="hygroupmanageAction">
        	<result name="success" type="redirectAction">show</result>
        </action>
        
        <!-- 登录者建的组显示Action-->
        <action name="show" method="showlist" class="hygroupmanageAction">
        	<result name="success">/hy/hy_group_manage.jsp</result>
        </action>
        
        <!-- 组管理画面确认按钮Action-->
        <action name="affirm" method="affirm" class="hygroupmanageAction">
        	<result name="success">/hy/hy_group_manage.jsp</result>
        	<result name="error">/hy/hy_group_manage_main.jsp</result>
        </action>
        
        <!-- 会议室一览Action-->
        <action name="hysylinit" method="reexecute" class="hyinitAction">
        	<result name="success"  >/hy/hy_reserve_list_zi.jsp</result>
        	<result name="error" >/hy/login.jsp</result>
        </action>
        
        <!-- 返回Action-->
        <action name="goback" method="goback" class="hygroupmanageAction">
         	<result name="returnone" type="redirectAction">
	        	<param name="actionName">conferenceinit</param>
	        	<param name="yyDate">${yyDate}</param>
        	</result>
        	<result name="returntwo" type="redirectAction">
        		<param name="actionName">hyattendinfo</param>
	        	<param name="returnUrl">${returnUrl}</param>
	        </result>
        	<result name="error" >/hy/login.jsp</result>
        </action>
        
        <!-- 会议参加人员Action-->
        <action name="hyattendinfo" method="execute" class="hyattendAction">
        	<result name="success" >hy_attend_list.jsp</result>
        </action>
        
        <!-- 取得组名Action-->
        <action name="getattendzuname" method="getattendzuname" class="hyattendAction">
        	<result name="success" >hy_attend_zi_list.jsp</result>
        </action>
        
        <!-- 参加会议人员中组管理Action-->
        <action name="groupmanage" method="groupmanage" class="hyattendAction">
        	<result name="success" type="redirectAction">
        	    <param name="actionName">hygroupmanage</param>
	        	<param name="returnUrl">${returnUrl}</param>
        	</result>
        </action>
        
        <!-- 参加会议人员中确认Action-->
        <action name="attendaffirm" method="attendaffirm" class="hyattendAction">
        	<result name="reserve" type="redirectAction">
        		<param name="actionName">yuyue</param>
				<param name="yuyueInfoSource">${yuyueInfoSource}</param>
        	</result>
        	<result name="modify" type="redirectAction">
        	    <param name="actionName">yuyueModifyInit</param>
				<param name="yuyueInfoSource">${yuyueInfoSource}</param>
			</result>
        </action>
        
        <!-- 参加会议人员中返回Action-->
        <action name="attendgoback" method="attendgoback" class="hyattendAction">
         	<result name="reserve" type="redirectAction">
        		<param name="actionName">yuyue</param>
				<param name="yuyueInfoSource">${yuyueInfoSource}</param>
        	</result>
        	<result name="modify" type="redirectAction">
        	    <param name="actionName">yuyueModifyInit</param>
				<param name="yuyueInfoSource">${yuyueInfoSource}</param>
			</result>
        </action>
        
        <!-- 确认回执Action-->        
        <action name="hyaffirmattend" method="execute" class="hyaffirmattendAction">
        	<result name="success">/hy/hy_affirm_attend.jsp</result>
        </action>
        
        <action name="affirmhuizhi" method="affirmhuizhi" class="hyaffirmattendAction">
        	<result name="success" type="redirectAction">conferenceinit</result>
        </action>
        
		<!-- 组名CheckAction-->  
		<action name="validateName" method="validateName" class="hygroupmanageAction">
		</action>
        
    </package>
</struts>
