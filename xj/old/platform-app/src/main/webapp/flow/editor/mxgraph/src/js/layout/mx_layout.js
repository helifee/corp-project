function mxGraphLayout(A){this.graph=A}mxGraphLayout.prototype.graph=null;mxGraphLayout.prototype.useBoundingBox=true;mxGraphLayout.prototype.parent=null;mxGraphLayout.prototype.moveCell=function(C,A,B){};mxGraphLayout.prototype.execute=function(A){};mxGraphLayout.prototype.getGraph=function(){return this.graph};mxGraphLayout.prototype.getConstraint=function(A,E,C,B){var F=this.graph.view.getState(E);var D=(F!=null)?F.style:this.graph.getCellStyle(E);return(D!=null)?D[A]:null};mxGraphLayout.traverse=function(F,J,K,E,G){if(K!=null&&F!=null){J=(J!=null)?J:true;G=G||new mxDictionary();if(!G.get(F)){G.put(F,true);var B=K(F,E);if(B==null||B){var I=this.graph.model.getEdgeCount(F);if(I>0){for(var D=0;D<I;D++){var A=this.graph.model.getEdgeAt(F,D);var H=this.graph.model.getTerminal(A,true)==F;if(!J||H){var C=this.graph.view.getVisibleTerminal(A,!H);this.traverse(C,J,K,A,G)}}}}}}};mxGraphLayout.prototype.isVertexMovable=function(A){return this.graph.isCellMovable(A)};mxGraphLayout.prototype.isVertexIgnored=function(A){return !this.graph.getModel().isVertex(A)||!this.graph.isCellVisible(A)};mxGraphLayout.prototype.isEdgeIgnored=function(A){var B=this.graph.getModel();return !B.isEdge(A)||!this.graph.isCellVisible(A)||B.getTerminal(A,true)==null||B.getTerminal(A,false)==null};mxGraphLayout.prototype.setEdgeStyleEnabled=function(A,B){this.graph.setCellStyles(mxConstants.STYLE_NOEDGESTYLE,(B)?"0":"1",[A])};mxGraphLayout.prototype.setOrthogonalEdge=function(A,B){this.graph.setCellStyles(mxConstants.STYLE_ORTHOGONAL,(B)?"1":"0",[A])};mxGraphLayout.prototype.getParentOffset=function(C){var B=new mxPoint();if(C!=null&&C!=this.parent){var D=this.graph.getModel();if(D.isAncestor(this.parent,C)){var A=D.getGeometry(C);while(C!=this.parent){B.x=B.x+A.x;B.y=B.y+A.y;C=D.getParent(C);A=D.getGeometry(C)}}}return B};mxGraphLayout.prototype.setEdgePoints=function(C,D){if(C!=null){var G=this.graph.model;var E=G.getGeometry(C);if(E==null){E=new mxGeometry();E.setRelative(true)}else{E=E.clone()}if(this.parent!=null&&D!=null){var F=G.getParent(C);var B=this.getParentOffset(F);for(var A=0;A<D.length;A++){D[A].x=D[A].x-B.x;D[A].y=D[A].y-B.y}}E.points=D;G.setGeometry(C,E)}};mxGraphLayout.prototype.setVertexLocation=function(K,G,H){var J=this.graph.getModel();var C=J.getGeometry(K);var A=null;if(C!=null){A=new mxRectangle(G,H,C.width,C.height);if(this.useBoundingBox){var D=this.graph.getView().getState(K);if(D!=null&&D.text!=null&&D.text.boundingBox!=null){var B=this.graph.getView().scale;var E=D.text.boundingBox;if(D.text.boundingBox.x<D.x){G+=(D.x-E.x)/B;A.width=E.width}if(D.text.boundingBox.y<D.y){H+=(D.y-E.y)/B;A.height=E.height}}}if(this.parent!=null){var I=J.getParent(K);if(I!=null&&I!=this.parent){var F=this.getParentOffset(I);G=G-F.x;H=H-F.y}}if(C.x!=G||C.y!=H){C=C.clone();C.x=G;C.y=H;J.setGeometry(K,C)}}return A};mxGraphLayout.prototype.getVertexBounds=function(K){var J=this.graph.getModel().getGeometry(K);if(this.useBoundingBox){var F=this.graph.getView().getState(K);if(F!=null&&F.text!=null&&F.text.boundingBox!=null){var A=this.graph.getView().scale;var E=F.text.boundingBox;var D=Math.max(F.x-E.x,0)/A;var B=Math.max(F.y-E.y,0)/A;var G=Math.max((E.x+E.width)-(F.x+F.width),0)/A;var C=Math.max((E.y+E.height)-(F.y+F.height),0)/A;J=new mxRectangle(J.x-D,J.y-B,J.width+D+G,J.height+B+C)}}if(this.parent!=null){var H=this.graph.getModel().getParent(K);J=J.clone();if(H!=null&&H!=this.parent){var I=this.getParentOffset(H);J.x=J.x+I.x;J.y=J.y+I.y}}return new mxRectangle(J.x,J.y,J.width,J.height)};mxGraphLayout.prototype.arrangeGroups=function(D,A,F,E,C,B){return this.graph.updateGroupBounds(D,A,true,F,E,C,B)};function mxStackLayout(C,E,B,D,F,A){mxGraphLayout.call(this,C);this.horizontal=(E!=null)?E:true;this.spacing=(B!=null)?B:0;this.x0=(D!=null)?D:0;this.y0=(F!=null)?F:0;this.border=(A!=null)?A:0}mxStackLayout.prototype=new mxGraphLayout();mxStackLayout.prototype.constructor=mxStackLayout;mxStackLayout.prototype.horizontal=null;mxStackLayout.prototype.spacing=null;mxStackLayout.prototype.x0=null;mxStackLayout.prototype.y0=null;mxStackLayout.prototype.border=0;mxStackLayout.prototype.marginTop=0;mxStackLayout.prototype.marginLeft=0;mxStackLayout.prototype.marginRight=0;mxStackLayout.prototype.marginBottom=0;mxStackLayout.prototype.keepFirstLocation=false;mxStackLayout.prototype.fill=false;mxStackLayout.prototype.resizeParent=false;mxStackLayout.prototype.resizeParentMax=false;mxStackLayout.prototype.resizeLast=false;mxStackLayout.prototype.wrap=null;mxStackLayout.prototype.borderCollapse=true;mxStackLayout.prototype.isHorizontal=function(){return this.horizontal};mxStackLayout.prototype.moveCell=function(O,K,L){var N=this.graph.getModel();var M=N.getParent(O);var I=this.isHorizontal();if(O!=null&&M!=null){var G=0;var H=0;var A=N.getChildCount(M);var F=(I)?K:L;var E=this.graph.getView().getState(M);if(E!=null){F-=(I)?E.x:E.y}F/=this.graph.view.scale;for(G=0;G<A;G++){var J=N.getChildAt(M,G);if(J!=O){var B=N.getGeometry(J);if(B!=null){var D=(I)?B.x+B.width/2:B.y+B.height/2;if(H<=F&&D>F){break}H=D}}}var C=M.getIndex(O);C=Math.max(0,G-((G>C)?1:0));N.add(M,O,C)}};mxStackLayout.prototype.getParentSize=function(D){var E=this.graph.getModel();var C=E.getGeometry(D);if(this.graph.container!=null&&((C==null&&E.isLayer(D))||D==this.graph.getView().currentRoot)){var B=this.graph.container.offsetWidth-1;var A=this.graph.container.offsetHeight-1;C=new mxRectangle(0,0,B,A)}return C};mxStackLayout.prototype.execute=function(M){if(M!=null){var O=this.getParentSize(M);var S=this.isHorizontal();var C=this.graph.getModel();var G=null;if(O!=null){G=(S)?O.height-this.marginTop-this.marginBottom:O.width-this.marginLeft-this.marginRight}G-=2*this.spacing+2*this.border;var H=this.x0+this.border+this.marginLeft;var I=this.y0+this.border+this.marginTop;if(this.graph.isSwimlane(M)){var T=this.graph.getCellStyle(M);var K=mxUtils.getNumber(T,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE);var F=mxUtils.getValue(T,mxConstants.STYLE_HORIZONTAL,true)==1;if(O!=null){if(F){K=Math.min(K,O.height)}else{K=Math.min(K,O.width)}}if(S==F){G-=K}if(F){I+=K}else{H+=K}}C.beginUpdate();try{var A=0;var P=null;var R=0;var N=null;var Q=C.getChildCount(M);for(var E=0;E<Q;E++){var D=C.getChildAt(M,E);if(!this.isVertexIgnored(D)&&this.isVertexMovable(D)){var L=C.getGeometry(D);if(L!=null){L=L.clone();if(this.wrap!=null&&P!=null){if((S&&P.x+P.width+L.width+2*this.spacing>this.wrap)||(!S&&P.y+P.height+L.height+2*this.spacing>this.wrap)){P=null;if(S){I+=A+this.spacing}else{H+=A+this.spacing}A=0}}A=Math.max(A,(S)?L.height:L.width);var J=0;if(!this.borderCollapse){var B=this.graph.getCellStyle(D);J=mxUtils.getNumber(B,mxConstants.STYLE_STROKEWIDTH,1)}if(P!=null){if(S){L.x=R+this.spacing+Math.floor(J/2)}else{L.y=R+this.spacing+Math.floor(J/2)}}else{if(!this.keepFirstLocation){if(S){L.x=H}else{L.y=I}}}if(S){L.y=I}else{L.x=H}if(this.fill&&G!=null){if(S){L.height=G}else{L.width=G}}this.setChildGeometry(D,L);N=D;P=L;if(S){R=P.x+P.width+Math.floor(J/2)}else{R=P.y+P.height+Math.floor(J/2)}}}}if(this.resizeParent&&O!=null&&P!=null&&!this.graph.isCellCollapsed(M)){this.updateParentGeometry(M,O,P)}else{if(this.resizeLast&&O!=null&&P!=null&&N!=null){if(S){P.width=O.width-P.x-this.spacing-this.marginRight-this.marginLeft}else{P.height=O.height-P.y-this.spacing-this.marginBottom}this.setChildGeometry(N,P)}}}finally{C.endUpdate()}}};mxStackLayout.prototype.setChildGeometry=function(A,C){var B=this.graph.getCellGeometry(A);if(B==null||C.x!=B.x||C.y!=B.y||C.width!=B.width||C.height!=B.height){this.graph.getModel().setGeometry(A,C)}};mxStackLayout.prototype.updateParentGeometry=function(F,D,E){var B=this.isHorizontal();var G=this.graph.getModel();var A=D.clone();if(B){var C=E.x+E.width+this.spacing+this.marginRight;if(this.resizeParentMax){A.width=Math.max(A.width,C)}else{A.width=C}}else{var C=E.y+E.height+this.spacing+this.marginBottom;if(this.resizeParentMax){A.height=Math.max(A.height,C)}else{A.height=C}}if(D.x!=A.x||D.y!=A.y||D.width!=A.width||D.height!=A.height){G.setGeometry(F,A)}};function mxPartitionLayout(C,D,B,A){mxGraphLayout.call(this,C);this.horizontal=(D!=null)?D:true;this.spacing=B||0;this.border=A||0}mxPartitionLayout.prototype=new mxGraphLayout();mxPartitionLayout.prototype.constructor=mxPartitionLayout;mxPartitionLayout.prototype.horizontal=null;mxPartitionLayout.prototype.spacing=null;mxPartitionLayout.prototype.border=null;mxPartitionLayout.prototype.resizeVertices=true;mxPartitionLayout.prototype.isHorizontal=function(){return this.horizontal};mxPartitionLayout.prototype.moveCell=function(L,H,I){var K=this.graph.getModel();var J=K.getParent(L);if(L!=null&&J!=null){var E=0;var F=0;var A=K.getChildCount(J);for(E=0;E<A;E++){var G=K.getChildAt(J,E);var B=this.getVertexBounds(G);if(B!=null){var D=B.x+B.width/2;if(F<H&&D>H){break}F=D}}var C=J.getIndex(L);C=Math.max(0,E-((E>C)?1:0));K.add(J,L,C)}};mxPartitionLayout.prototype.execute=function(M){var R=this.isHorizontal();var C=this.graph.getModel();var N=C.getGeometry(M);if(this.graph.container!=null&&((N==null&&C.isLayer(M))||M==this.graph.getView().currentRoot)){var L=this.graph.container.offsetWidth-1;var O=this.graph.container.offsetHeight-1;N=new mxRectangle(0,0,L,O)}if(N!=null){var K=[];var P=C.getChildCount(M);for(var F=0;F<P;F++){var E=C.getChildAt(M,F);if(!this.isVertexIgnored(E)&&this.isVertexMovable(E)){K.push(E)}}var G=K.length;if(G>0){var H=this.border;var I=this.border;var A=(R)?N.height:N.width;A-=2*this.border;var D=(this.graph.isSwimlane(M))?this.graph.getStartSize(M):new mxRectangle();A-=(R)?D.height:D.width;H=H+D.width;I=I+D.height;var B=this.border+(G-1)*this.spacing;var Q=(R)?((N.width-H-B)/G):((N.height-I-B)/G);if(Q>0){C.beginUpdate();try{for(var F=0;F<G;F++){var E=K[F];var J=C.getGeometry(E);if(J!=null){J=J.clone();J.x=H;J.y=I;if(R){if(this.resizeVertices){J.width=Q;J.height=A}H+=Q+this.spacing}else{if(this.resizeVertices){J.height=Q;J.width=A}I+=Q+this.spacing}C.setGeometry(E,J)}}}finally{C.endUpdate()}}}}};function mxCompactTreeLayout(A,B,C){mxGraphLayout.call(this,A);this.horizontal=(B!=null)?B:true;this.invert=(C!=null)?C:false}mxCompactTreeLayout.prototype=new mxGraphLayout();mxCompactTreeLayout.prototype.constructor=mxCompactTreeLayout;mxCompactTreeLayout.prototype.horizontal=null;mxCompactTreeLayout.prototype.invert=null;mxCompactTreeLayout.prototype.resizeParent=true;mxCompactTreeLayout.prototype.maintainParentLocation=false;mxCompactTreeLayout.prototype.groupPadding=10;mxCompactTreeLayout.prototype.groupPaddingTop=0;mxCompactTreeLayout.prototype.groupPaddingRight=0;mxCompactTreeLayout.prototype.groupPaddingBottom=0;mxCompactTreeLayout.prototype.groupPaddingLeft=0;mxCompactTreeLayout.prototype.parentsChanged=null;mxCompactTreeLayout.prototype.moveTree=false;mxCompactTreeLayout.prototype.visited=null;mxCompactTreeLayout.prototype.levelDistance=10;mxCompactTreeLayout.prototype.nodeDistance=20;mxCompactTreeLayout.prototype.resetEdges=true;mxCompactTreeLayout.prototype.prefHozEdgeSep=5;mxCompactTreeLayout.prototype.prefVertEdgeOff=4;mxCompactTreeLayout.prototype.minEdgeJetty=8;mxCompactTreeLayout.prototype.channelBuffer=4;mxCompactTreeLayout.prototype.edgeRouting=true;mxCompactTreeLayout.prototype.sortEdges=false;mxCompactTreeLayout.prototype.alignRanks=false;mxCompactTreeLayout.prototype.maxRankHeight=null;mxCompactTreeLayout.prototype.root=null;mxCompactTreeLayout.prototype.node=null;mxCompactTreeLayout.prototype.isVertexIgnored=function(A){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||this.graph.getConnections(A).length==0};mxCompactTreeLayout.prototype.isHorizontal=function(){return this.horizontal};mxCompactTreeLayout.prototype.execute=function(G,E){this.parent=G;var L=this.graph.getModel();if(E==null){if(this.graph.getEdges(G,L.getParent(G),this.invert,!this.invert,false).length>0){this.root=G}else{var H=this.graph.findTreeRoots(G,true,this.invert);if(H.length>0){for(var F=0;F<H.length;F++){if(!this.isVertexIgnored(H[F])&&this.graph.getEdges(H[F],null,this.invert,!this.invert,false).length>0){this.root=H[F];break}}}}}else{this.root=E}if(this.root!=null){if(this.resizeParent){this.parentsChanged=new Object()}else{this.parentsChanged=null}this.parentX=null;this.parentY=null;if(G!=this.root&&L.isVertex(G)!=null&&this.maintainParentLocation){var K=this.graph.getCellGeometry(G);if(K!=null){this.parentX=K.x;this.parentY=K.y}}L.beginUpdate();try{this.visited=new Object();this.node=this.dfs(this.root,G);if(this.alignRanks){this.maxRankHeight=[];this.findRankHeights(this.node,0);this.setCellHeights(this.node,0)}if(this.node!=null){this.layout(this.node);var C=this.graph.gridSize;var D=C;if(!this.moveTree){var A=this.getVertexBounds(this.root);if(A!=null){C=A.x;D=A.y}}var B=null;if(this.isHorizontal()){B=this.horizontalLayout(this.node,C,D)}else{B=this.verticalLayout(this.node,null,C,D)}if(B!=null){var J=0;var I=0;if(B.x<0){J=Math.abs(C-B.x)}if(B.y<0){I=Math.abs(D-B.y)}if(J!=0||I!=0){this.moveNode(this.node,J,I)}if(this.resizeParent){this.adjustParents()}if(this.edgeRouting){this.localEdgeProcessing(this.node)}}if(this.parentX!=null&&this.parentY!=null){var K=this.graph.getCellGeometry(G);if(K!=null){K=K.clone();K.x=this.parentX;K.y=this.parentY;L.setGeometry(G,K)}}}}finally{L.endUpdate()}}};mxCompactTreeLayout.prototype.moveNode=function(C,B,D){C.x+=B;C.y+=D;this.apply(C);var A=C.child;while(A!=null){this.moveNode(A,B,D);A=A.next}};mxCompactTreeLayout.prototype.sortOutgoingEdges=function(B,A){var C=new mxDictionary();A.sort(function(E,G){var I=E.getTerminal(E.getTerminal(false)==B);var F=C.get(I);if(F==null){F=mxCellPath.create(I).split(mxCellPath.PATH_SEPARATOR);C.put(I,F)}var D=G.getTerminal(G.getTerminal(false)==B);var H=C.get(D);if(H==null){H=mxCellPath.create(D).split(mxCellPath.PATH_SEPARATOR);C.put(D,H)}return mxCellPath.compare(F,H)})};mxCompactTreeLayout.prototype.findRankHeights=function(B,C){if(this.maxRankHeight[C]==null||this.maxRankHeight[C]<B.height){this.maxRankHeight[C]=B.height}var A=B.child;while(A!=null){this.findRankHeights(A,C+1);A=A.next}};mxCompactTreeLayout.prototype.setCellHeights=function(B,C){if(this.maxRankHeight[C]!=null&&this.maxRankHeight[C]>B.height){B.height=this.maxRankHeight[C]}var A=B.child;while(A!=null){this.setCellHeights(A,C+1);A=A.next}};mxCompactTreeLayout.prototype.dfs=function(M,K){var I=mxCellPath.create(M);var G=null;if(M!=null&&this.visited[I]==null&&!this.isVertexIgnored(M)){this.visited[I]=M;G=this.createNode(M);var L=this.graph.getModel();var F=null;var B=this.graph.getEdges(M,K,this.invert,!this.invert,false,true);var A=this.graph.getView();if(this.sortEdges){this.sortOutgoingEdges(M,B)}for(var E=0;E<B.length;E++){var H=B[E];if(!this.isEdgeIgnored(H)){if(this.resetEdges){this.setEdgePoints(H,null)}if(this.edgeRouting){this.setEdgeStyleEnabled(H,false);this.setEdgePoints(H,null)}var C=A.getState(H);var J=(C!=null)?C.getVisibleTerminal(this.invert):A.getVisibleTerminal(H,this.invert);var D=this.dfs(J,K);if(D!=null&&L.getGeometry(J)!=null){if(F==null){G.child=D}else{F.next=D}F=D}}}}return G};mxCompactTreeLayout.prototype.layout=function(B){if(B!=null){var A=B.child;while(A!=null){this.layout(A);A=A.next}if(B.child!=null){this.attachParent(B,this.join(B))}else{this.layoutLeaf(B)}}};mxCompactTreeLayout.prototype.horizontalLayout=function(D,E,F,C){D.x+=E+D.offsetX;D.y+=F+D.offsetY;C=this.apply(D,C);var A=D.child;if(A!=null){C=this.horizontalLayout(A,D.x,D.y,C);var G=D.y+A.offsetY;var B=A.next;while(B!=null){C=this.horizontalLayout(B,D.x+A.offsetX,G,C);G+=B.offsetY;B=B.next}}return C};mxCompactTreeLayout.prototype.verticalLayout=function(E,H,C,D,B){E.x+=C+E.offsetY;E.y+=D+E.offsetX;B=this.apply(E,B);var F=E.child;if(F!=null){B=this.verticalLayout(F,E,E.x,E.y,B);var G=E.x+F.offsetY;var A=F.next;while(A!=null){B=this.verticalLayout(A,E,G,E.y+F.offsetX,B);G+=A.offsetY;A=A.next}}return B};mxCompactTreeLayout.prototype.attachParent=function(B,A){var C=this.nodeDistance+this.levelDistance;var D=(A-B.width)/2-this.nodeDistance;var E=D+B.width+2*this.nodeDistance-A;B.child.offsetX=C+B.height;B.child.offsetY=E;B.contour.upperHead=this.createLine(B.height,0,this.createLine(C,E,B.contour.upperHead));B.contour.lowerHead=this.createLine(B.height,0,this.createLine(C,D,B.contour.lowerHead))};mxCompactTreeLayout.prototype.layoutLeaf=function(A){var B=2*this.nodeDistance;A.contour.upperTail=this.createLine(A.height+B,0);A.contour.upperHead=A.contour.upperTail;A.contour.lowerTail=this.createLine(0,-A.width-B);A.contour.lowerHead=this.createLine(A.height+B,0,A.contour.lowerTail)};mxCompactTreeLayout.prototype.join=function(D){var E=2*this.nodeDistance;var A=D.child;D.contour=A.contour;var B=A.width+E;var F=B;A=A.next;while(A!=null){var C=this.merge(D.contour,A.contour);A.offsetY=C+B;A.offsetX=0;B=A.width+E;F+=C+B;A=A.next}return F};mxCompactTreeLayout.prototype.merge=function(C,E){var G=0;var H=0;var D=0;var B=C.lowerHead;var A=E.upperHead;while(A!=null&&B!=null){var I=this.offset(G,H,A.dx,A.dy,B.dx,B.dy);H+=I;D+=I;if(G+A.dx<=B.dx){G+=A.dx;H+=A.dy;A=A.next}else{G-=B.dx;H-=B.dy;B=B.next}}if(A!=null){var F=this.bridge(C.upperTail,0,0,A,G,H);C.upperTail=(F.next!=null)?E.upperTail:F;C.lowerTail=E.lowerTail}else{var F=this.bridge(E.lowerTail,G,H,B,0,0);if(F.next==null){C.lowerTail=F}}C.lowerHead=E.lowerHead;return D};mxCompactTreeLayout.prototype.offset=function(E,F,G,D,B,C){var I=0;if(B<=E||E+G<=0){return 0}var H=B*D-G*C;if(H>0){if(E<0){var A=E*D;I=A/G-F}else{if(E>0){var A=E*C;I=A/B-F}else{I=-F}}}else{if(B<E+G){var A=(B-E)*D;I=C-(F+A/G)}else{if(B>E+G){var A=(G+E)*C;I=A/B-(F+D)}else{I=C-(F+D)}}}if(I>0){return I}else{return 0}};mxCompactTreeLayout.prototype.bridge=function(G,C,D,H,E,F){var J=E+H.dx-C;var I=0;var B=0;if(H.dx==0){I=H.dy}else{B=J*H.dy;I=B/H.dx}var A=this.createLine(J,I,H.next);G.next=this.createLine(0,F+H.dy-I-D,A);return A};mxCompactTreeLayout.prototype.createNode=function(B){var A=new Object();A.cell=B;A.x=0;A.y=0;A.width=0;A.height=0;var C=this.getVertexBounds(B);if(C!=null){if(this.isHorizontal()){A.width=C.height;A.height=C.width}else{A.width=C.width;A.height=C.height}}A.offsetX=0;A.offsetY=0;A.contour=new Object();return A};mxCompactTreeLayout.prototype.apply=function(C,B){var F=this.graph.getModel();var E=C.cell;var A=F.getGeometry(E);if(E!=null&&A!=null){if(this.isVertexMovable(E)){A=this.setVertexLocation(E,C.x,C.y);if(this.resizeParent){var G=F.getParent(E);var D=mxCellPath.create(G);if(this.parentsChanged[D]==null){this.parentsChanged[D]=G}}}if(B==null){B=new mxRectangle(A.x,A.y,A.width,A.height)}else{B=new mxRectangle(Math.min(B.x,A.x),Math.min(B.y,A.y),Math.max(B.x+B.width,A.x+A.width),Math.max(B.y+B.height,A.y+A.height))}}return B};mxCompactTreeLayout.prototype.createLine=function(A,B,D){var C=new Object();C.dx=A;C.dy=B;C.next=D;return C};mxCompactTreeLayout.prototype.adjustParents=function(){var A=[];for(var B in this.parentsChanged){A.push(this.parentsChanged[B])}this.arrangeGroups(mxUtils.sortCells(A,true),this.groupPadding,this.groupPaddingTop,this.groupPaddingRight,this.groupPaddingBottom,this.groupPaddingLeft)};mxCompactTreeLayout.prototype.localEdgeProcessing=function(B){this.processNodeOutgoing(B);var A=B.child;while(A!=null){this.localEdgeProcessing(A);A=A.next}};mxCompactTreeLayout.prototype.processNodeOutgoing=function(N){var D=N.child;var C=N.cell;var P=0;var M=[];while(D!=null){P++;var T=D.x;if(this.horizontal){T=D.y}M.push(new WeightedCellSorter(D,T));D=D.next}M.sort(WeightedCellSorter.prototype.compare);var J=N.width;var O=(P+1)*this.prefHozEdgeSep;if(J>O+(2*this.prefHozEdgeSep)){J-=2*this.prefHozEdgeSep}var G=J/P;var I=G/2;if(J>O+(2*this.prefHozEdgeSep)){I+=this.prefHozEdgeSep}var K=this.minEdgeJetty-this.prefVertEdgeOff;var Q=0;var F=this.getVertexBounds(C);D=N.child;for(var A=0;A<M.length;A++){var U=M[A].cell.cell;var L=this.getVertexBounds(U);var R=this.graph.getEdgesBetween(C,U,false);var B=[];var S=0;var H=0;for(var E=0;E<R.length;E++){if(this.horizontal){S=F.x+F.width;H=F.y+I;B.push(new mxPoint(S,H));S=F.x+F.width+K;B.push(new mxPoint(S,H));H=L.y+L.height/2;B.push(new mxPoint(S,H));this.setEdgePoints(R[E],B)}else{S=F.x+I;H=F.y+F.height;B.push(new mxPoint(S,H));H=F.y+F.height+K;B.push(new mxPoint(S,H));S=L.x+L.width/2;B.push(new mxPoint(S,H));this.setEdgePoints(R[E],B)}}if(A<P/2){K+=this.prefVertEdgeOff}else{if(A>P/2){K-=this.prefVertEdgeOff}}I+=G;Q=Math.max(Q,K)}};function WeightedCellSorter(B,A){this.cell=B;this.weightedValue=A}WeightedCellSorter.prototype.weightedValue=0;WeightedCellSorter.prototype.nudge=false;WeightedCellSorter.prototype.visited=false;WeightedCellSorter.prototype.rankIndex=null;WeightedCellSorter.prototype.cell=null;WeightedCellSorter.prototype.compare=function(B,A){if(B!=null&&A!=null){if(A.weightedValue>B.weightedValue){return 1}else{if(A.weightedValue<B.weightedValue){return -1}else{if(A.nudge){return 1}else{return -1}}}}else{return 0}};function mxRadialTreeLayout(A){mxCompactTreeLayout.call(this,A,false)}mxUtils.extend(mxRadialTreeLayout,mxCompactTreeLayout);mxRadialTreeLayout.prototype.angleOffset=0.5;mxRadialTreeLayout.prototype.rootx=0;mxRadialTreeLayout.prototype.rooty=0;mxRadialTreeLayout.prototype.levelDistance=120;mxRadialTreeLayout.prototype.nodeDistance=10;mxRadialTreeLayout.prototype.autoRadius=false;mxRadialTreeLayout.prototype.sortEdges=false;mxRadialTreeLayout.prototype.rowMinX=[];mxRadialTreeLayout.prototype.rowMaxX=[];mxRadialTreeLayout.prototype.rowMinCenX=[];mxRadialTreeLayout.prototype.rowMaxCenX=[];mxRadialTreeLayout.prototype.rowRadi=[];mxRadialTreeLayout.prototype.row=[];mxRadialTreeLayout.prototype.isVertexIgnored=function(A){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||this.graph.getConnections(A).length==0};mxRadialTreeLayout.prototype.execute=function(O,K){this.parent=O;this.useBoundingBox=false;this.edgeRouting=false;mxCompactTreeLayout.prototype.execute.apply(this,arguments);var Q=null;var F=this.getVertexBounds(this.root);this.centerX=F.x+F.width/2;this.centerY=F.y+F.height/2;for(var H in this.visited){var E=this.getVertexBounds(this.visited[H]);Q=(Q!=null)?Q:E.clone();Q.add(E)}this.calcRowDims([this.node],0);var B=0;var I=0;for(var V=0;V<this.row.length;V++){var G=(this.centerX-this.rowMinX[V]-this.nodeDistance)/this.rowRadi[V];var J=(this.rowMaxX[V]-this.centerX-this.nodeDistance)/this.rowRadi[V];B=Math.max(B,G);I=Math.max(I,J)}for(var V=0;V<this.row.length;V++){var S=this.centerX-this.nodeDistance-B*this.rowRadi[V];var P=this.centerX+this.nodeDistance+I*this.rowRadi[V];var Y=P-S;for(var C=0;C<this.row[V].length;C++){var X=this.row[V];var R=X[C];var E=this.getVertexBounds(R.cell);var W=(E.x+E.width/2-S)/(Y);var M=2*Math.PI*W;R.theta=M}}for(var V=this.row.length-2;V>=0;V--){var X=this.row[V];for(var C=0;C<X.length;C++){var R=X[C];var D=R.child;var N=0;var U=0;while(D!=null){U+=D.theta;N++;D=D.next}if(N>0){var A=U/N;if(A>R.theta&&C<X.length-1){var L=X[C+1].theta;R.theta=Math.min(A,L-Math.PI/10)}else{if(A<R.theta&&C>0){var T=X[C-1].theta;R.theta=Math.max(A,T+Math.PI/10)}}}}}for(var V=0;V<this.row.length;V++){for(var C=0;C<this.row[V].length;C++){var X=this.row[V];var R=X[C];var E=this.getVertexBounds(R.cell);this.setVertexLocation(R.cell,this.centerX-E.width/2+this.rowRadi[V]*Math.cos(R.theta),this.centerY-E.height/2+this.rowRadi[V]*Math.sin(R.theta))}}};mxRadialTreeLayout.prototype.calcRowDims=function(C,F){if(C==null||C.length==0){return}this.rowMinX[F]=this.centerX;this.rowMaxX[F]=this.centerX;this.rowMinCenX[F]=this.centerX;this.rowMaxCenX[F]=this.centerX;this.row[F]=[];var D=false;for(var A=0;A<C.length;A++){var B=C[A]!=null?C[A].child:null;while(B!=null){var E=B.cell;vertexBounds=this.getVertexBounds(E);this.rowMinX[F]=Math.min(vertexBounds.x,this.rowMinX[F]);this.rowMaxX[F]=Math.max(vertexBounds.x+vertexBounds.width,this.rowMaxX[F]);this.rowMinCenX[F]=Math.min(vertexBounds.x+vertexBounds.width/2,this.rowMinCenX[F]);this.rowMaxCenX[F]=Math.max(vertexBounds.x+vertexBounds.width/2,this.rowMaxCenX[F]);this.rowRadi[F]=vertexBounds.y-this.getVertexBounds(this.root).y;if(B.child!=null){D=true}this.row[F].push(B);B=B.next}}if(D){this.calcRowDims(this.row[F],F+1)}};function mxFastOrganicLayout(A){mxGraphLayout.call(this,A)}mxFastOrganicLayout.prototype=new mxGraphLayout();mxFastOrganicLayout.prototype.constructor=mxFastOrganicLayout;mxFastOrganicLayout.prototype.useInputOrigin=true;mxFastOrganicLayout.prototype.resetEdges=true;mxFastOrganicLayout.prototype.disableEdgeStyle=true;mxFastOrganicLayout.prototype.forceConstant=50;mxFastOrganicLayout.prototype.forceConstantSquared=0;mxFastOrganicLayout.prototype.minDistanceLimit=2;mxFastOrganicLayout.prototype.maxDistanceLimit=500;mxFastOrganicLayout.prototype.minDistanceLimitSquared=4;mxFastOrganicLayout.prototype.initialTemp=200;mxFastOrganicLayout.prototype.temperature=0;mxFastOrganicLayout.prototype.maxIterations=0;mxFastOrganicLayout.prototype.iteration=0;mxFastOrganicLayout.prototype.vertexArray;mxFastOrganicLayout.prototype.dispX;mxFastOrganicLayout.prototype.dispY;mxFastOrganicLayout.prototype.cellLocation;mxFastOrganicLayout.prototype.radius;mxFastOrganicLayout.prototype.radiusSquared;mxFastOrganicLayout.prototype.isMoveable;mxFastOrganicLayout.prototype.neighbours;mxFastOrganicLayout.prototype.indices;mxFastOrganicLayout.prototype.allowedToRun=true;mxFastOrganicLayout.prototype.isVertexIgnored=function(A){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||this.graph.getConnections(A).length==0};mxFastOrganicLayout.prototype.execute=function(K){var C=this.graph.getModel();this.vertexArray=[];var L=this.graph.getChildVertices(K);for(var D=0;D<L.length;D++){if(!this.isVertexIgnored(L[D])){this.vertexArray.push(L[D])}}var G=(this.useInputOrigin)?this.graph.getBoundingBoxFromGeometry(this.vertexArray):null;var E=this.vertexArray.length;this.indices=[];this.dispX=[];this.dispY=[];this.cellLocation=[];this.isMoveable=[];this.neighbours=[];this.radius=[];this.radiusSquared=[];if(this.forceConstant<0.001){this.forceConstant=0.001}this.forceConstantSquared=this.forceConstant*this.forceConstant;for(var D=0;D<this.vertexArray.length;D++){var H=this.vertexArray[D];this.cellLocation[D]=[];var N=mxObjectIdentity.get(H);this.indices[N]=D;var M=this.getVertexBounds(H);var J=M.width;var T=M.height;var R=M.x;var S=M.y;this.cellLocation[D][0]=R+J/2;this.cellLocation[D][1]=S+T/2;this.radius[D]=Math.min(J,T);this.radiusSquared[D]=this.radius[D]*this.radius[D]}C.beginUpdate();try{for(var D=0;D<E;D++){this.dispX[D]=0;this.dispY[D]=0;this.isMoveable[D]=this.isVertexMovable(this.vertexArray[D]);var Q=this.graph.getConnections(this.vertexArray[D],K);var L=this.graph.getOpposites(Q,this.vertexArray[D]);this.neighbours[D]=[];for(var P=0;P<L.length;P++){if(this.resetEdges){this.graph.resetEdge(Q[P])}if(this.disableEdgeStyle){this.setEdgeStyleEnabled(Q[P],false)}var N=mxObjectIdentity.get(L[P]);var B=this.indices[N];if(B!=null){this.neighbours[D][P]=B}else{this.neighbours[D][P]=D}}}this.temperature=this.initialTemp;if(this.maxIterations==0){this.maxIterations=20*Math.sqrt(E)}for(this.iteration=0;this.iteration<this.maxIterations;this.iteration++){if(!this.allowedToRun){return}this.calcRepulsion();this.calcAttraction();this.calcPositions();this.reduceTemperature()}var A=null;var I=null;for(var D=0;D<this.vertexArray.length;D++){var H=this.vertexArray[D];if(this.isVertexMovable(H)){var M=this.getVertexBounds(H);if(M!=null){this.cellLocation[D][0]-=M.width/2;this.cellLocation[D][1]-=M.height/2;var R=this.graph.snap(this.cellLocation[D][0]);var S=this.graph.snap(this.cellLocation[D][1]);this.setVertexLocation(H,R,S);if(A==null){A=R}else{A=Math.min(A,R)}if(I==null){I=S}else{I=Math.min(I,S)}}}}var F=-(A||0)+1;var O=-(I||0)+1;if(G!=null){F+=G.x;O+=G.y}this.graph.moveCells(this.vertexArray,F,O)}finally{C.endUpdate()}};mxFastOrganicLayout.prototype.calcPositions=function(){for(var C=0;C<this.vertexArray.length;C++){if(this.isMoveable[C]){var B=Math.sqrt(this.dispX[C]*this.dispX[C]+this.dispY[C]*this.dispY[C]);if(B<0.001){B=0.001}var D=this.dispX[C]/B*Math.min(B,this.temperature);var A=this.dispY[C]/B*Math.min(B,this.temperature);this.dispX[C]=0;this.dispY[C]=0;this.cellLocation[C][0]+=D;this.cellLocation[C][1]+=A}}};mxFastOrganicLayout.prototype.calcAttraction=function(){for(var E=0;E<this.vertexArray.length;E++){for(var D=0;D<this.neighbours[E].length;D++){var C=this.neighbours[E][D];if(E!=C&&this.isMoveable[E]&&this.isMoveable[C]){var J=this.cellLocation[E][0]-this.cellLocation[C][0];var A=this.cellLocation[E][1]-this.cellLocation[C][1];var I=J*J+A*A-this.radiusSquared[E]-this.radiusSquared[C];if(I<this.minDistanceLimitSquared){I=this.minDistanceLimitSquared}var F=Math.sqrt(I);var B=(I)/this.forceConstant;var H=(J/F)*B;var G=(A/F)*B;this.dispX[E]-=H;this.dispY[E]-=G;this.dispX[C]+=H;this.dispY[C]+=G}}}};mxFastOrganicLayout.prototype.calcRepulsion=function(){var E=this.vertexArray.length;for(var D=0;D<E;D++){for(var C=D;C<E;C++){if(!this.allowedToRun){return}if(C!=D&&this.isMoveable[D]&&this.isMoveable[C]){var I=this.cellLocation[D][0]-this.cellLocation[C][0];var A=this.cellLocation[D][1]-this.cellLocation[C][1];if(I==0){I=0.01+Math.random()}if(A==0){A=0.01+Math.random()}var F=Math.sqrt((I*I)+(A*A));var J=F-this.radius[D]-this.radius[C];if(J>this.maxDistanceLimit){continue}if(J<this.minDistanceLimit){J=this.minDistanceLimit}var B=this.forceConstantSquared/J;var H=(I/F)*B;var G=(A/F)*B;this.dispX[D]+=H;this.dispY[D]+=G;this.dispX[C]-=H;this.dispY[C]-=G}}}};mxFastOrganicLayout.prototype.reduceTemperature=function(){this.temperature=this.initialTemp*(1-this.iteration/this.maxIterations)};function mxCircleLayout(A,B){mxGraphLayout.call(this,A);this.radius=(B!=null)?B:100}mxCircleLayout.prototype=new mxGraphLayout();mxCircleLayout.prototype.constructor=mxCircleLayout;mxCircleLayout.prototype.radius=null;mxCircleLayout.prototype.moveCircle=false;mxCircleLayout.prototype.x0=0;mxCircleLayout.prototype.y0=0;mxCircleLayout.prototype.resetEdges=true;mxCircleLayout.prototype.disableEdgeStyle=true;mxCircleLayout.prototype.execute=function(I){var J=this.graph.getModel();J.beginUpdate();try{var D=0;var E=null;var F=null;var H=[];var A=J.getChildCount(I);for(var G=0;G<A;G++){var K=J.getChildAt(I,G);if(!this.isVertexIgnored(K)){H.push(K);var C=this.getVertexBounds(K);if(E==null){E=C.y}else{E=Math.min(E,C.y)}if(F==null){F=C.x}else{F=Math.min(F,C.x)}D=Math.max(D,Math.max(C.width,C.height))}else{if(!this.isEdgeIgnored(K)){if(this.resetEdges){this.graph.resetEdge(K)}if(this.disableEdgeStyle){this.setEdgeStyleEnabled(K,false)}}}}var B=this.getRadius(H.length,D);if(this.moveCircle){F=this.x0;E=this.y0}this.circle(H,B,F,E)}finally{J.endUpdate()}};mxCircleLayout.prototype.getRadius=function(A,B){return Math.max(A*B/Math.PI,this.radius)};mxCircleLayout.prototype.circle=function(D,A,B,E){var G=D.length;var F=2*Math.PI/G;for(var C=0;C<G;C++){if(this.isVertexMovable(D[C])){this.setVertexLocation(D[C],B+A+A*Math.sin(C*F),E+A+A*Math.cos(C*F))}}};function mxParallelEdgeLayout(A){mxGraphLayout.call(this,A)}mxParallelEdgeLayout.prototype=new mxGraphLayout();mxParallelEdgeLayout.prototype.constructor=mxParallelEdgeLayout;mxParallelEdgeLayout.prototype.spacing=20;mxParallelEdgeLayout.prototype.execute=function(D){var B=this.findParallels(D);this.graph.model.beginUpdate();try{for(var A in B){var C=B[A];if(C.length>1){this.layout(C)}}}finally{this.graph.model.endUpdate()}};mxParallelEdgeLayout.prototype.findParallels=function(E){var F=this.graph.getModel();var D=[];var B=F.getChildCount(E);for(var C=0;C<B;C++){var A=F.getChildAt(E,C);if(!this.isEdgeIgnored(A)){var G=this.getEdgeId(A);if(G!=null){if(D[G]==null){D[G]=[]}D[G].push(A)}}}return D};mxParallelEdgeLayout.prototype.getEdgeId=function(A){var B=this.graph.getView();var D=B.getVisibleTerminal(A,true);var C=B.getVisibleTerminal(A,false);if(D!=null&&C!=null){D=mxObjectIdentity.get(D);C=mxObjectIdentity.get(C);return(D>C)?C+"-"+D:D+"-"+C}return null};mxParallelEdgeLayout.prototype.layout=function(A){var G=A[0];var N=this.graph.getView();var C=this.graph.getModel();var J=C.getGeometry(N.getVisibleTerminal(G,true));var P=C.getGeometry(N.getVisibleTerminal(G,false));if(J==P){var H=J.x+J.width+this.spacing;var I=J.y+J.height/2;for(var D=0;D<A.length;D++){this.route(A[D],H,I);H+=this.spacing}}else{if(J!=null&&P!=null){var M=J.x+J.width/2;var E=J.y+J.height/2;var Q=P.x+P.width/2;var R=P.y+P.height/2;var F=Q-M;var O=R-E;var B=Math.sqrt(F*F+O*O);if(B>0){var H=M+F/2;var I=E+O/2;var K=O*this.spacing/B;var L=F*this.spacing/B;H+=K*(A.length-1)/2;I-=L*(A.length-1)/2;for(var D=0;D<A.length;D++){this.route(A[D],H,I);H-=K;I+=L}}}}};mxParallelEdgeLayout.prototype.route=function(A,B,C){if(this.graph.isCellMovable(A)){this.setEdgePoints(A,[new mxPoint(B,C)])}};function mxCompositeLayout(A,B,C){mxGraphLayout.call(this,A);this.layouts=B;this.master=C}mxCompositeLayout.prototype=new mxGraphLayout();mxCompositeLayout.prototype.constructor=mxCompositeLayout;mxCompositeLayout.prototype.layouts=null;mxCompositeLayout.prototype.master=null;mxCompositeLayout.prototype.moveCell=function(C,A,B){if(this.master!=null){this.master.move.apply(this.master,arguments)}else{this.layouts[0].move.apply(this.layouts[0],arguments)}};mxCompositeLayout.prototype.execute=function(B){var C=this.graph.getModel();C.beginUpdate();try{for(var A=0;A<this.layouts.length;A++){this.layouts[A].execute.apply(this.layouts[A],arguments)}}finally{C.endUpdate()}};function mxEdgeLabelLayout(A,B){mxGraphLayout.call(this,A)}mxEdgeLabelLayout.prototype=new mxGraphLayout();mxEdgeLabelLayout.prototype.constructor=mxEdgeLabelLayout;mxEdgeLabelLayout.prototype.execute=function(G){var A=this.graph.view;var H=this.graph.getModel();var B=[];var E=[];var F=H.getChildCount(G);for(var D=0;D<F;D++){var I=H.getChildAt(G,D);var C=A.getState(I);if(C!=null){if(!this.isVertexIgnored(I)){E.push(C)}else{if(!this.isEdgeIgnored(I)){B.push(C)}}}}this.placeLabels(E,B)};mxEdgeLabelLayout.prototype.placeLabels=function(D,B){var F=this.graph.getModel();F.beginUpdate();try{for(var A=0;A<B.length;A++){var C=B[A];if(C!=null&&C.text!=null&&C.text.boundingBox!=null){for(var G=0;G<D.length;G++){var E=D[G];if(E!=null){this.avoid(C,E)}}}}}finally{F.endUpdate()}};mxEdgeLabelLayout.prototype.avoid=function(I,H){var K=this.graph.getModel();var D=I.text.boundingBox;if(mxUtils.intersects(D,H)){var C=-D.y-D.height+H.y;var B=-D.y+H.y+H.height;var G=(Math.abs(C)<Math.abs(B))?C:B;var E=-D.x-D.width+H.x;var F=-D.x+H.x+H.width;var J=(Math.abs(E)<Math.abs(F))?E:F;if(Math.abs(J)<Math.abs(G)){G=0}else{J=0}var A=K.getGeometry(I.cell);if(A!=null){A=A.clone();if(A.offset!=null){A.offset.x+=J;A.offset.y+=G}else{A.offset=new mxPoint(J,G)}K.setGeometry(I.cell,A)}}};