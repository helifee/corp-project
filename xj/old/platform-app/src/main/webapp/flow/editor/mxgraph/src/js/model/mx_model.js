function mxGraphModel(A){this.currentEdit=this.createUndoableEdit();if(A!=null){this.setRoot(A)}else{this.clear()}}mxGraphModel.prototype=new mxEventSource();mxGraphModel.prototype.constructor=mxGraphModel;mxGraphModel.prototype.root=null;mxGraphModel.prototype.cells=null;mxGraphModel.prototype.maintainEdgeParent=true;mxGraphModel.prototype.ignoreRelativeEdgeParent=true;mxGraphModel.prototype.createIds=true;mxGraphModel.prototype.prefix="";mxGraphModel.prototype.postfix="";mxGraphModel.prototype.nextId=0;mxGraphModel.prototype.currentEdit=null;mxGraphModel.prototype.updateLevel=0;mxGraphModel.prototype.endingUpdate=false;mxGraphModel.prototype.clear=function(){this.setRoot(this.createRoot())};mxGraphModel.prototype.isCreateIds=function(){return this.createIds};mxGraphModel.prototype.setCreateIds=function(A){this.createIds=A};mxGraphModel.prototype.createRoot=function(){var A=new mxCell();A.insert(new mxCell());return A};mxGraphModel.prototype.getCell=function(A){return(this.cells!=null)?this.cells[A]:null};mxGraphModel.prototype.filterCells=function(C,D){var B=null;if(C!=null){B=[];for(var A=0;A<C.length;A++){if(D(C[A])){B.push(C[A])}}}return B};mxGraphModel.prototype.getDescendants=function(A){return this.filterDescendants(null,A)};mxGraphModel.prototype.filterDescendants=function(E,F){var C=[];F=F||this.getRoot();if(E==null||E(F)){C.push(F)}var A=this.getChildCount(F);for(var B=0;B<A;B++){var D=this.getChildAt(F,B);C=C.concat(this.filterDescendants(E,D))}return C};mxGraphModel.prototype.getRoot=function(B){var A=B||this.root;if(B!=null){while(B!=null){A=B;B=this.getParent(B)}}return A};mxGraphModel.prototype.setRoot=function(A){this.execute(new mxRootChange(this,A));return A};mxGraphModel.prototype.rootChanged=function(B){var A=this.root;this.root=B;this.nextId=0;this.cells=null;this.cellAdded(B);return A};mxGraphModel.prototype.isRoot=function(A){return A!=null&&this.root==A};mxGraphModel.prototype.isLayer=function(A){return this.isRoot(this.getParent(A))};mxGraphModel.prototype.isAncestor=function(B,A){while(A!=null&&A!=B){A=this.getParent(A)}return A==B};mxGraphModel.prototype.contains=function(A){return this.isAncestor(this.root,A)};mxGraphModel.prototype.getParent=function(A){return(A!=null)?A.getParent():null};mxGraphModel.prototype.add=function(D,B,C){if(B!=D&&D!=null&&B!=null){if(C==null){C=this.getChildCount(D)}var A=D!=this.getParent(B);this.execute(new mxChildChange(this,D,B,C));if(this.maintainEdgeParent&&A){this.updateEdgeParents(B)}}return B};mxGraphModel.prototype.cellAdded=function(D){if(D!=null){if(D.getId()==null&&this.createIds){D.setId(this.createId(D))}if(D.getId()!=null){var C=this.getCell(D.getId());if(C!=D){while(C!=null){D.setId(this.createId(D));C=this.getCell(D.getId())}if(this.cells==null){this.cells=new Object()}this.cells[D.getId()]=D}}if(mxUtils.isNumeric(D.getId())){this.nextId=Math.max(this.nextId,D.getId())}var A=this.getChildCount(D);for(var B=0;B<A;B++){this.cellAdded(this.getChildAt(D,B))}}};mxGraphModel.prototype.createId=function(A){var B=this.nextId;this.nextId++;return this.prefix+B+this.postfix};mxGraphModel.prototype.updateEdgeParents=function(H,C){C=C||this.getRoot(H);var A=this.getChildCount(H);for(var D=0;D<A;D++){var F=this.getChildAt(H,D);this.updateEdgeParents(F,C)}var G=this.getEdgeCount(H);var B=[];for(var D=0;D<G;D++){B.push(this.getEdgeAt(H,D))}for(var D=0;D<B.length;D++){var E=B[D];if(this.isAncestor(C,E)){this.updateEdgeParent(E,C)}}};mxGraphModel.prototype.updateEdgeParent=function(G,C){var B=this.getTerminal(G,true);var H=this.getTerminal(G,false);var D=null;while(B!=null&&!this.isEdge(B)&&B.geometry!=null&&B.geometry.relative){B=this.getParent(B)}while(H!=null&&this.ignoreRelativeEdgeParent&&!this.isEdge(H)&&H.geometry!=null&&H.geometry.relative){H=this.getParent(H)}if(this.isAncestor(C,B)&&this.isAncestor(C,H)){if(B==H){D=this.getParent(B)}else{D=this.getNearestCommonAncestor(B,H)}if(D!=null&&(this.getParent(D)!=this.root||this.isAncestor(D,G))&&this.getParent(G)!=D){var I=this.getGeometry(G);if(I!=null){var J=this.getOrigin(this.getParent(G));var A=this.getOrigin(D);var E=A.x-J.x;var F=A.y-J.y;I=I.clone();I.translate(-E,-F);this.setGeometry(G,I)}this.add(D,G,this.getChildCount(D))}}};mxGraphModel.prototype.getOrigin=function(B){var A=null;if(B!=null){A=this.getOrigin(this.getParent(B));if(!this.isEdge(B)){var C=this.getGeometry(B);if(C!=null){A.x+=C.x;A.y+=C.y}}}else{A=new mxPoint()}return A};mxGraphModel.prototype.getNearestCommonAncestor=function(C,D){if(C!=null&&D!=null){var G=mxCellPath.create(D);if(G!=null&&G.length>0){var F=C;var E=mxCellPath.create(F);if(G.length<E.length){F=D;var A=E;E=G;G=A}while(F!=null){var B=this.getParent(F);if(G.indexOf(E+mxCellPath.PATH_SEPARATOR)==0&&B!=null){return F}E=mxCellPath.getParentPath(E);F=B}}}return null};mxGraphModel.prototype.remove=function(A){if(A==this.root){this.setRoot(null)}else{if(this.getParent(A)!=null){this.execute(new mxChildChange(this,null,A))}}return A};mxGraphModel.prototype.cellRemoved=function(C){if(C!=null&&this.cells!=null){var A=this.getChildCount(C);for(var B=A-1;B>=0;B--){this.cellRemoved(this.getChildAt(C,B))}if(this.cells!=null&&C.getId()!=null){delete this.cells[C.getId()]}}};mxGraphModel.prototype.parentForCellChanged=function(D,E,C){var B=this.getParent(D);if(E!=null){if(E!=B||B.getIndex(D)!=C){E.insert(D,C)}}else{if(B!=null){var A=B.getIndex(D);B.remove(A)}}if(!this.contains(B)&&E!=null){this.cellAdded(D)}else{if(E==null){this.cellRemoved(D)}}return B};mxGraphModel.prototype.getChildCount=function(A){return(A!=null)?A.getChildCount():0};mxGraphModel.prototype.getChildAt=function(B,A){return(B!=null)?B.getChildAt(A):null};mxGraphModel.prototype.getChildren=function(A){return(A!=null)?A.children:null};mxGraphModel.prototype.getChildVertices=function(A){return this.getChildCells(A,true,false)};mxGraphModel.prototype.getChildEdges=function(A){return this.getChildCells(A,false,true)};mxGraphModel.prototype.getChildCells=function(G,E,C){E=(E!=null)?E:false;C=(C!=null)?C:false;var B=this.getChildCount(G);var D=[];for(var F=0;F<B;F++){var A=this.getChildAt(G,F);if((!C&&!E)||(C&&this.isEdge(A))||(E&&this.isVertex(A))){D.push(A)}}return D};mxGraphModel.prototype.getTerminal=function(B,A){return(B!=null)?B.getTerminal(A):null};mxGraphModel.prototype.setTerminal=function(B,D,A){var C=D!=this.getTerminal(B,A);this.execute(new mxTerminalChange(this,B,D,A));if(this.maintainEdgeParent&&C){this.updateEdgeParent(B,this.getRoot())}return D};mxGraphModel.prototype.setTerminals=function(B,A,C){this.beginUpdate();try{this.setTerminal(B,A,true);this.setTerminal(B,C,false)}finally{this.endUpdate()}};mxGraphModel.prototype.terminalForCellChanged=function(B,D,A){var C=this.getTerminal(B,A);if(D!=null){D.insertEdge(B,A)}else{if(C!=null){C.removeEdge(B,A)}}return C};mxGraphModel.prototype.getEdgeCount=function(A){return(A!=null)?A.getEdgeCount():0};mxGraphModel.prototype.getEdgeAt=function(B,A){return(B!=null)?B.getEdgeAt(A):null};mxGraphModel.prototype.getDirectedEdgeCount=function(G,F,C){var A=0;var E=this.getEdgeCount(G);for(var B=0;B<E;B++){var D=this.getEdgeAt(G,B);if(D!=C&&this.getTerminal(D,F)==G){A++}}return A};mxGraphModel.prototype.getConnections=function(A){return this.getEdges(A,true,true,false)};mxGraphModel.prototype.getIncomingEdges=function(A){return this.getEdges(A,true,false,false)};mxGraphModel.prototype.getOutgoingEdges=function(A){return this.getEdges(A,false,true,false)};mxGraphModel.prototype.getEdges=function(J,H,A,F){H=(H!=null)?H:true;A=(A!=null)?A:true;F=(F!=null)?F:true;var I=this.getEdgeCount(J);var B=[];for(var D=0;D<I;D++){var E=this.getEdgeAt(J,D);var C=this.getTerminal(E,true);var G=this.getTerminal(E,false);if((F&&C==G)||((C!=G)&&((H&&G==J)||(A&&C==J)))){B.push(E)}}return B};mxGraphModel.prototype.getEdgesBetween=function(J,K,N){N=(N!=null)?N:false;var D=this.getEdgeCount(J);var G=this.getEdgeCount(K);var F=J;var M=D;if(G<D){M=G;F=K}var B=[];for(var I=0;I<M;I++){var H=this.getEdgeAt(F,I);var C=this.getTerminal(H,true);var E=this.getTerminal(H,false);var A=(C==J)&&(E==K);var L=(E==J)&&(C==K);if(A||(!N&&L)){B.push(H)}}return B};mxGraphModel.prototype.getOpposites=function(A,B,D,E){D=(D!=null)?D:true;E=(E!=null)?E:true;var H=[];if(A!=null){for(var C=0;C<A.length;C++){var F=this.getTerminal(A[C],true);var G=this.getTerminal(A[C],false);if(F==B&&G!=null&&G!=B&&E){H.push(G)}else{if(G==B&&F!=null&&F!=B&&D){H.push(F)}}}}return H};mxGraphModel.prototype.getTopmostCells=function(E){var A=new mxDictionary();var C=[];for(var B=0;B<E.length;B++){A.put(E[B],true)}for(var B=0;B<E.length;B++){var F=E[B];var G=true;var D=this.getParent(F);while(D!=null){if(A.get(D)){G=false;break}D=this.getParent(D)}if(G){C.push(F)}}return C};mxGraphModel.prototype.isVertex=function(A){return(A!=null)?A.isVertex():false};mxGraphModel.prototype.isEdge=function(A){return(A!=null)?A.isEdge():false};mxGraphModel.prototype.isConnectable=function(A){return(A!=null)?A.isConnectable():false};mxGraphModel.prototype.getValue=function(A){return(A!=null)?A.getValue():null};mxGraphModel.prototype.setValue=function(B,A){this.execute(new mxValueChange(this,B,A));return A};mxGraphModel.prototype.valueForCellChanged=function(B,A){return B.valueChanged(A)};mxGraphModel.prototype.getGeometry=function(A){return(A!=null)?A.getGeometry():null};mxGraphModel.prototype.setGeometry=function(B,A){if(A!=this.getGeometry(B)){this.execute(new mxGeometryChange(this,B,A))}return A};mxGraphModel.prototype.geometryForCellChanged=function(C,A){var B=this.getGeometry(C);C.setGeometry(A);return B};mxGraphModel.prototype.getStyle=function(A){return(A!=null)?A.getStyle():null};mxGraphModel.prototype.setStyle=function(B,A){if(A!=this.getStyle(B)){this.execute(new mxStyleChange(this,B,A))}return A};mxGraphModel.prototype.styleForCellChanged=function(C,A){var B=this.getStyle(C);C.setStyle(A);return B};mxGraphModel.prototype.isCollapsed=function(A){return(A!=null)?A.isCollapsed():false};mxGraphModel.prototype.setCollapsed=function(B,A){if(A!=this.isCollapsed(B)){this.execute(new mxCollapseChange(this,B,A))}return A};mxGraphModel.prototype.collapsedStateForCellChanged=function(C,A){var B=this.isCollapsed(C);C.setCollapsed(A);return B};mxGraphModel.prototype.isVisible=function(A){return(A!=null)?A.isVisible():false};mxGraphModel.prototype.setVisible=function(B,A){if(A!=this.isVisible(B)){this.execute(new mxVisibleChange(this,B,A))}return A};mxGraphModel.prototype.visibleStateForCellChanged=function(C,A){var B=this.isVisible(C);C.setVisible(A);return B};mxGraphModel.prototype.execute=function(A){A.execute();this.beginUpdate();this.currentEdit.add(A);this.fireEvent(new mxEventObject(mxEvent.EXECUTE,"change",A));this.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",A));this.endUpdate()};mxGraphModel.prototype.beginUpdate=function(){this.updateLevel++;this.fireEvent(new mxEventObject(mxEvent.BEGIN_UPDATE));if(this.updateLevel==1){this.fireEvent(new mxEventObject(mxEvent.START_EDIT))}};mxGraphModel.prototype.endUpdate=function(){this.updateLevel--;if(this.updateLevel==0){this.fireEvent(new mxEventObject(mxEvent.END_EDIT))}if(!this.endingUpdate){this.endingUpdate=this.updateLevel==0;this.fireEvent(new mxEventObject(mxEvent.END_UPDATE,"edit",this.currentEdit));try{if(this.endingUpdate&&!this.currentEdit.isEmpty()){this.fireEvent(new mxEventObject(mxEvent.BEFORE_UNDO,"edit",this.currentEdit));var A=this.currentEdit;this.currentEdit=this.createUndoableEdit();A.notify();this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",A))}}finally{this.endingUpdate=false}}};mxGraphModel.prototype.createUndoableEdit=function(){var A=new mxUndoableEdit(this,true);A.notify=function(){A.source.fireEvent(new mxEventObject(mxEvent.CHANGE,"edit",A,"changes",A.changes));A.source.fireEvent(new mxEventObject(mxEvent.NOTIFY,"edit",A,"changes",A.changes))};return A};mxGraphModel.prototype.mergeChildren=function(B,C,F){F=(F!=null)?F:true;this.beginUpdate();try{var D=new Object();this.mergeChildrenImpl(B,C,F,D);for(var A in D){var E=D[A];var G=this.getTerminal(E,true);if(G!=null){G=D[mxCellPath.create(G)];this.setTerminal(E,G,true)}G=this.getTerminal(E,false);if(G!=null){G=D[mxCellPath.create(G)];this.setTerminal(E,G,false)}}}finally{this.endUpdate()}};mxGraphModel.prototype.mergeChildrenImpl=function(E,H,I,D){this.beginUpdate();try{var A=E.getChildCount();for(var C=0;C<A;C++){var J=E.getChildAt(C);if(typeof(J.getId)=="function"){var F=J.getId();var G=(F!=null&&(!this.isEdge(J)||!I))?this.getCell(F):null;if(G==null){var B=J.clone();B.setId(F);B.setTerminal(J.getTerminal(true),true);B.setTerminal(J.getTerminal(false),false);G=H.insert(B);this.cellAdded(G)}D[mxCellPath.create(J)]=G;this.mergeChildrenImpl(J,G,I,D)}}}finally{this.endUpdate()}};mxGraphModel.prototype.getParents=function(D){var B=[];if(D!=null){var A=new mxDictionary();for(var C=0;C<D.length;C++){var E=this.getParent(D[C]);if(E!=null&&!A.get(E)){A.put(E,true);B.push(E)}}}return B};mxGraphModel.prototype.cloneCell=function(A){if(A!=null){return this.cloneCells([A],true)[0]}return null};mxGraphModel.prototype.cloneCells=function(D,A,C){C=(C!=null)?C:new Object();var E=[];for(var B=0;B<D.length;B++){if(D[B]!=null){E.push(this.cloneCellImpl(D[B],C,A))}else{E.push(null)}}for(var B=0;B<E.length;B++){if(E[B]!=null){this.restoreClone(E[B],D[B],C)}}return E};mxGraphModel.prototype.cloneCellImpl=function(G,E,A){var D=this.cellCloned(G);E[mxObjectIdentity.get(G)]=D;if(A){var B=this.getChildCount(G);for(var C=0;C<B;C++){var F=this.cloneCellImpl(this.getChildAt(G,C),E,true);D.insert(F)}}return D};mxGraphModel.prototype.cellCloned=function(A){return A.clone()};mxGraphModel.prototype.restoreClone=function(B,H,E){var F=this.getTerminal(H,true);if(F!=null){var C=E[mxObjectIdentity.get(F)];if(C!=null){C.insertEdge(B,true)}}var G=this.getTerminal(H,false);if(G!=null){var C=E[mxObjectIdentity.get(G)];if(C!=null){C.insertEdge(B,false)}}var A=this.getChildCount(B);for(var D=0;D<A;D++){this.restoreClone(this.getChildAt(B,D),this.getChildAt(H,D),E)}};function mxRootChange(B,A){this.model=B;this.root=A;this.previous=A}mxRootChange.prototype.execute=function(){this.root=this.previous;this.previous=this.model.rootChanged(this.previous)};function mxChildChange(D,C,A,B){this.model=D;this.parent=C;this.previous=C;this.child=A;this.index=B;this.previousIndex=B}mxChildChange.prototype.execute=function(){var A=this.model.getParent(this.child);var B=(A!=null)?A.getIndex(this.child):0;if(this.previous==null){this.connect(this.child,false)}A=this.model.parentForCellChanged(this.child,this.previous,this.previousIndex);if(this.previous!=null){this.connect(this.child,true)}this.parent=this.previous;this.previous=A;this.index=this.previousIndex;this.previousIndex=B};mxChildChange.prototype.connect=function(F,B){B=(B!=null)?B:true;var D=F.getTerminal(true);var E=F.getTerminal(false);if(D!=null){if(B){this.model.terminalForCellChanged(F,D,true)}else{this.model.terminalForCellChanged(F,null,true)}}if(E!=null){if(B){this.model.terminalForCellChanged(F,E,false)}else{this.model.terminalForCellChanged(F,null,false)}}F.setTerminal(D,true);F.setTerminal(E,false);var A=this.model.getChildCount(F);for(var C=0;C<A;C++){this.connect(this.model.getChildAt(F,C),B)}};function mxTerminalChange(C,B,D,A){this.model=C;this.cell=B;this.terminal=D;this.previous=D;this.source=A}mxTerminalChange.prototype.execute=function(){this.terminal=this.previous;this.previous=this.model.terminalForCellChanged(this.cell,this.previous,this.source)};function mxValueChange(C,B,A){this.model=C;this.cell=B;this.value=A;this.previous=A}mxValueChange.prototype.execute=function(){this.value=this.previous;this.previous=this.model.valueForCellChanged(this.cell,this.previous)};function mxStyleChange(C,B,A){this.model=C;this.cell=B;this.style=A;this.previous=A}mxStyleChange.prototype.execute=function(){this.style=this.previous;this.previous=this.model.styleForCellChanged(this.cell,this.previous)};function mxGeometryChange(C,B,A){this.model=C;this.cell=B;this.geometry=A;this.previous=A}mxGeometryChange.prototype.execute=function(){this.geometry=this.previous;this.previous=this.model.geometryForCellChanged(this.cell,this.previous)};function mxCollapseChange(C,B,A){this.model=C;this.cell=B;this.collapsed=A;this.previous=A}mxCollapseChange.prototype.execute=function(){this.collapsed=this.previous;this.previous=this.model.collapsedStateForCellChanged(this.cell,this.previous)};function mxVisibleChange(C,B,A){this.model=C;this.cell=B;this.visible=A;this.previous=A}mxVisibleChange.prototype.execute=function(){this.visible=this.previous;this.previous=this.model.visibleStateForCellChanged(this.cell,this.previous)};function mxCellAttributeChange(C,A,B){this.cell=C;this.attribute=A;this.value=B;this.previous=B}mxCellAttributeChange.prototype.execute=function(){var A=this.cell.getAttribute(this.attribute);if(this.previous==null){this.cell.value.removeAttribute(this.attribute)}else{this.cell.setAttribute(this.attribute,this.previous)}this.previous=A};function mxCell(C,B,A){this.value=C;this.setGeometry(B);this.setStyle(A);if(this.onInit!=null){this.onInit()}}mxCell.prototype.id=null;mxCell.prototype.value=null;mxCell.prototype.geometry=null;mxCell.prototype.style=null;mxCell.prototype.vertex=false;mxCell.prototype.edge=false;mxCell.prototype.connectable=true;mxCell.prototype.visible=true;mxCell.prototype.collapsed=false;mxCell.prototype.parent=null;mxCell.prototype.source=null;mxCell.prototype.target=null;mxCell.prototype.children=null;mxCell.prototype.edges=null;mxCell.prototype.mxTransient=["id","value","parent","source","target","children","edges"];mxCell.prototype.getId=function(){return this.id};mxCell.prototype.setId=function(A){this.id=A};mxCell.prototype.getValue=function(){return this.value};mxCell.prototype.setValue=function(A){this.value=A};mxCell.prototype.valueChanged=function(B){var A=this.getValue();this.setValue(B);return A};mxCell.prototype.getGeometry=function(){return this.geometry};mxCell.prototype.setGeometry=function(A){this.geometry=A};mxCell.prototype.getStyle=function(){return this.style};mxCell.prototype.setStyle=function(A){this.style=A};mxCell.prototype.isVertex=function(){return this.vertex!=0};mxCell.prototype.setVertex=function(A){this.vertex=A};mxCell.prototype.isEdge=function(){return this.edge!=0};mxCell.prototype.setEdge=function(A){this.edge=A};mxCell.prototype.isConnectable=function(){return this.connectable!=0};mxCell.prototype.setConnectable=function(A){this.connectable=A};mxCell.prototype.isVisible=function(){return this.visible!=0};mxCell.prototype.setVisible=function(A){this.visible=A};mxCell.prototype.isCollapsed=function(){return this.collapsed!=0};mxCell.prototype.setCollapsed=function(A){this.collapsed=A};mxCell.prototype.getParent=function(){return this.parent};mxCell.prototype.setParent=function(A){this.parent=A};mxCell.prototype.getTerminal=function(A){return(A)?this.source:this.target};mxCell.prototype.setTerminal=function(B,A){if(A){this.source=B}else{this.target=B}return B};mxCell.prototype.getChildCount=function(){return(this.children==null)?0:this.children.length};mxCell.prototype.getIndex=function(A){return mxUtils.indexOf(this.children,A)};mxCell.prototype.getChildAt=function(A){return(this.children==null)?null:this.children[A]};mxCell.prototype.insert=function(A,B){if(A!=null){if(B==null){B=this.getChildCount();if(A.getParent()==this){B--}}A.removeFromParent();A.setParent(this);if(this.children==null){this.children=[];this.children.push(A)}else{this.children.splice(B,0,A)}}return A};mxCell.prototype.remove=function(B){var A=null;if(this.children!=null&&B>=0){A=this.getChildAt(B);if(A!=null){this.children.splice(B,1);A.setParent(null)}}return A};mxCell.prototype.removeFromParent=function(){if(this.parent!=null){var A=this.parent.getIndex(this);this.parent.remove(A)}};mxCell.prototype.getEdgeCount=function(){return(this.edges==null)?0:this.edges.length};mxCell.prototype.getEdgeIndex=function(A){return mxUtils.indexOf(this.edges,A)};mxCell.prototype.getEdgeAt=function(A){return(this.edges==null)?null:this.edges[A]};mxCell.prototype.insertEdge=function(B,A){if(B!=null){B.removeFromTerminal(A);B.setTerminal(this,A);if(this.edges==null||B.getTerminal(!A)!=this||mxUtils.indexOf(this.edges,B)<0){if(this.edges==null){this.edges=[]}this.edges.push(B)}}return B};mxCell.prototype.removeEdge=function(B,A){if(B!=null){if(B.getTerminal(!A)!=this&&this.edges!=null){var C=this.getEdgeIndex(B);if(C>=0){this.edges.splice(C,1)}}B.setTerminal(null,A)}return B};mxCell.prototype.removeFromTerminal=function(A){var B=this.getTerminal(A);if(B!=null){B.removeEdge(this,A)}};mxCell.prototype.hasAttribute=function(B){var A=this.getValue();return(A!=null&&A.nodeType==mxConstants.NODETYPE_ELEMENT&&A.hasAttribute)?A.hasAttribute(B):A.getAttribute(B)!=null};mxCell.prototype.getAttribute=function(B,C){var A=this.getValue();var D=(A!=null&&A.nodeType==mxConstants.NODETYPE_ELEMENT)?A.getAttribute(B):null;return D||C};mxCell.prototype.setAttribute=function(B,C){var A=this.getValue();if(A!=null&&A.nodeType==mxConstants.NODETYPE_ELEMENT){A.setAttribute(B,C)}};mxCell.prototype.clone=function(){var A=mxUtils.clone(this,this.mxTransient);A.setValue(this.cloneValue());return A};mxCell.prototype.cloneValue=function(){var A=this.getValue();if(A!=null){if(typeof(A.clone)=="function"){A=A.clone()}else{if(!isNaN(A.nodeType)){A=A.cloneNode(true)}}}return A};function mxGeometry(B,C,D,A){mxRectangle.call(this,B,C,D,A)}mxGeometry.prototype=new mxRectangle();mxGeometry.prototype.constructor=mxGeometry;mxGeometry.prototype.TRANSLATE_CONTROL_POINTS=true;mxGeometry.prototype.alternateBounds=null;mxGeometry.prototype.sourcePoint=null;mxGeometry.prototype.targetPoint=null;mxGeometry.prototype.points=null;mxGeometry.prototype.offset=null;mxGeometry.prototype.relative=false;mxGeometry.prototype.swap=function(){if(this.alternateBounds!=null){var A=new mxRectangle(this.x,this.y,this.width,this.height);this.x=this.alternateBounds.x;this.y=this.alternateBounds.y;this.width=this.alternateBounds.width;this.height=this.alternateBounds.height;this.alternateBounds=A}};mxGeometry.prototype.getTerminalPoint=function(A){return(A)?this.sourcePoint:this.targetPoint};mxGeometry.prototype.setTerminalPoint=function(B,A){if(A){this.sourcePoint=B}else{this.targetPoint=B}return B};mxGeometry.prototype.rotate=function(H,F){var D=mxUtils.toRadians(H);var E=Math.cos(D);var B=Math.sin(D);if(!this.relative){var A=new mxPoint(this.getCenterX(),this.getCenterY());var C=mxUtils.getRotatedPoint(A,E,B,F);this.x=Math.round(C.x-this.width/2);this.y=Math.round(C.y-this.height/2)}if(this.sourcePoint!=null){var C=mxUtils.getRotatedPoint(this.sourcePoint,E,B,F);this.sourcePoint.x=Math.round(C.x);this.sourcePoint.y=Math.round(C.y)}if(this.targetPoint!=null){var C=mxUtils.getRotatedPoint(this.targetPoint,E,B,F);this.targetPoint.x=Math.round(C.x);this.targetPoint.y=Math.round(C.y)}if(this.points!=null){for(var G=0;G<this.points.length;G++){if(this.points[G]!=null){var C=mxUtils.getRotatedPoint(this.points[G],E,B,F);this.points[G].x=Math.round(C.x);this.points[G].y=Math.round(C.y)}}}};mxGeometry.prototype.translate=function(B,C){B=parseFloat(B);C=parseFloat(C);if(!this.relative){this.x=parseFloat(this.x)+B;this.y=parseFloat(this.y)+C}if(this.sourcePoint!=null){this.sourcePoint.x=parseFloat(this.sourcePoint.x)+B;this.sourcePoint.y=parseFloat(this.sourcePoint.y)+C}if(this.targetPoint!=null){this.targetPoint.x=parseFloat(this.targetPoint.x)+B;this.targetPoint.y=parseFloat(this.targetPoint.y)+C}if(this.TRANSLATE_CONTROL_POINTS&&this.points!=null){for(var A=0;A<this.points.length;A++){if(this.points[A]!=null){this.points[A].x=parseFloat(this.points[A].x)+B;this.points[A].y=parseFloat(this.points[A].y)+C}}}};mxGeometry.prototype.scale=function(C,D,B){C=parseFloat(C);D=parseFloat(D);if(this.sourcePoint!=null){this.sourcePoint.x=parseFloat(this.sourcePoint.x)*C;this.sourcePoint.y=parseFloat(this.sourcePoint.y)*D}if(this.targetPoint!=null){this.targetPoint.x=parseFloat(this.targetPoint.x)*C;this.targetPoint.y=parseFloat(this.targetPoint.y)*D}if(this.points!=null){for(var A=0;A<this.points.length;A++){if(this.points[A]!=null){this.points[A].x=parseFloat(this.points[A].x)*C;this.points[A].y=parseFloat(this.points[A].y)*D}}}if(!this.relative){this.x=parseFloat(this.x)*C;this.y=parseFloat(this.y)*D;if(B){D=C=Math.min(C,D)}this.width=parseFloat(this.width)*C;this.height=parseFloat(this.height)*D}};mxGeometry.prototype.equals=function(A){return mxRectangle.prototype.equals.apply(this,arguments)&&this.relative==A.relative&&((this.sourcePoint==null&&A.sourcePoint==null)||(this.sourcePoint!=null&&this.sourcePoint.equals(A.sourcePoint)))&&((this.targetPoint==null&&A.targetPoint==null)||(this.targetPoint!=null&&this.targetPoint.equals(A.targetPoint)))&&((this.points==null&&A.points==null)||(this.points!=null&&mxUtils.equalPoints(this.points,A.points)))&&((this.alternateBounds==null&&A.alternateBounds==null)||(this.alternateBounds!=null&&this.alternateBounds.equals(A.alternateBounds)))&&((this.offset==null&&A.offset==null)||(this.offset!=null&&this.offset.equals(A.offset)))};var mxCellPath={PATH_SEPARATOR:".",create:function(D){var B="";if(D!=null){var E=D.getParent();while(E!=null){var C=E.getIndex(D);B=C+mxCellPath.PATH_SEPARATOR+B;D=E;E=D.getParent()}}var A=B.length;if(A>1){B=B.substring(0,A-1)}return B},getParentPath:function(B){if(B!=null){var A=B.lastIndexOf(mxCellPath.PATH_SEPARATOR);if(A>=0){return B.substring(0,A)}else{if(B.length>0){return""}}}return null},resolve:function(B,E){var D=B;if(E!=null){var C=E.split(mxCellPath.PATH_SEPARATOR);for(var A=0;A<C.length;A++){D=D.getChildAt(parseInt(C[A]))}}return D},compare:function(C,E){var A=Math.min(C.length,E.length);var G=0;for(var B=0;B<A;B++){if(C[B]!=E[B]){if(C[B].length==0||E[B].length==0){G=(C[B]==E[B])?0:((C[B]>E[B])?1:-1)}else{var F=parseInt(C[B]);var D=parseInt(E[B]);G=(F==D)?0:((F>D)?1:-1)}break}}if(G==0){var F=C.length;var D=E.length;if(F!=D){G=(F>D)?1:-1}}return G}};