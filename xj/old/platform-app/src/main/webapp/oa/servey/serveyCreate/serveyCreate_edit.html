<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>问卷创建</title>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <script src="../../../common/common.css.js"></script>
    <link rel="stylesheet" href="css/serveyCreate_edit.css">
</head>
<style>
 .ui-jqgrid, .ui-jqgrid-view{ overflow: hidden; }
.ui-jqgrid .ui-jqgrid-hbox{ padding-left: 0 }
</style>
<body>
<header class="container-fluid  xj-form-header">
    <div class="row clearfix">
        <div class="col-xs-3 col-md-5 xj-index-logo">
            <img src="../../../common/img/logo.png" alt="巨洲云">
        </div>
        <div class="col-xs-3 col-md-2 xj-form-title" id="editTitle"></div>
        <div class="col-xs-6 col-md-5 xj-form-btn">
            <button type="button" class="btn btn-sm btn-adv" id="closeWindowBtn">关闭</button>
            <!-- <button type="button" class="btn btn-sm btn-adv" id="saveAndCreateBtn">保存&新增</button> -->
            <button type="button" class="btn btn-sm btn-adv" id="saveBtn">流程发起</button>
            <button type="button" class="btn btn-sm btn-adv" id="directConclusion">直接审结</button>
             <button type="button" class="btn btn-sm btn-adv" id="zancun">暂存</button>
             
             
        </div>
    </div>
</header>
<div class="container-fluid">
      <div class="row">
        <div class="col-md-10 mt80 inMiddle flow">
            <div class="con-tit setmbottom">  
                <button name="questionnaire" class="approve-btn active">主要内容</button>
                <button name="topic" class="approve-btn">问卷题目</button>
            </div>
            <div class="tabbox">
             <form class="form-inline" id="serveyCreateForm" method="post" validate-type="jQueryValidate" validate-ignore="true" data-validate-success="">
                <div class="addPad clearfix ">
                 <div class="xj-form-content" id="xj-form-content">
                   <input type="hidden" name="id" id="id" />
                <input type="hidden" name="delflag" id="delflag" value="false"/>
                <div class="xj-form-content xj-form-single" id="serveyInfo">
                    <table class="table table-bordered">
                        <tbody>
                        <tr class="form-tr">
                            <td class="form-label1"><label><span>*</span>问卷主题</label></td>
                            <td colspan="3">
                                <input type="text" class="form-control addInputWidth" id="name" name="name"
                                       data-placeholder="问卷主题" data-required="true" data-maxlength="50" data-html="true">
                                <input type="hidden" id="referenceId" name="referenceId"/>
                                <input type="hidden" id="serveyType" name="serveyType" value="1"/>
                            </td>
                        </tr>
                        <tr class="form-tr">
                            <td class="form-label1"><label><span>*</span>调查分类</label></td>
                            <td colspan="3">
                                <div class="input-group form-date">
                                    <input type="hidden" name="parentId" id="parentId">
                                    <input type="text" class="form-control" placeholder="请选择" id="parentName" name="parentName" readonly data-required="true" data-placeholder="调查分类">
                                     <div class="input-group-addon"><a class="glyphicon glyphicon-remove" onclick="emptyDateObject1('parentName','parentId')"></a></div>
                                    <span id="parentSpan" class="input-group-addon w28 " ><a href="#" class="fa fa-ellipsis-h" aria-hidden="true"></a></span>
                                </div>
                            </td>
                        </tr>

                        <tr id="twoCommonTR2" class="form-tr">
                       <td class="form-label1"><label>调查开始时间</label></td>
                       <td >
                          <div class="time_1 pull-left w100">
                              <div class='input-group date w100 form_datetime form-date' data-date=''  data-date-format='dd MM yyyy - HH:ii p' data-link-field='dtp_input1' id='datetimepicker1'>
                                       <input id="fromDate" name="fromDate" readonly type='text' class="form-control" />
                                       <!--<div class="input-group-addon"><a class="glyphicon glyphicon-remove" onclick="emptyDateObject('fromDate')"></a></div>-->
                                       <span class="input-group-addon ">
                                       <span class="glyphicon glyphicon-calendar addLeft"></span></span>
                                    </div>
                              </div>
                            </td>
                            <td class="form-label1"><label>调查结束时间</label></td>
                            <td>
                              <div class="time_1 pull-left w100">
                              <div class='input-group date w100 form_datetime form-date'  data-date=''  data-date-format='dd MM yyyy - HH:ii p' data-link-field='dtp_input1'  id='datetimepicker2'>
                                       <input id="thruDate" name="thruDate" readonly type='text' class="form-control" />
                                       <!--<div class="input-group-addon"><a class="glyphicon glyphicon-remove" onclick="emptyDateObject('thruDate')"></a></div>-->
                                       <span class="input-group-addon ">
                                       <span class="glyphicon glyphicon-calendar addLeft"></span></span>
                                    </div>
                              </div>
             		   </td>
             		   </tr>
                        <tr class="form-tr">
                            <td class="form-label1"><label><span>*</span>调查参与人员</label><!-- <p><a>选择</a></p> --></td>
                            <td colspan="3">
						        <div class="input-group form-date">
						        	<input type="hidden" class="form-control" id="participantId" name="participantId"/>
						            <input type="text"  class="form-control" id="participant" name="participant" data-required="true" data-placeholder="参与人"  readonly="readonly" placeholder="选择人员（多选）">
						            <div class="input-group-addon"><a class="glyphicon glyphicon-remove" onclick="emptyDateObject1('participant','participantId')"></a></div>
						            <span class="input-group-addon multiple-selector" data-selectorType="onlyPerson" data-title="选择人员"
						                  data-treeParam="{userStatus:true}" data-targetname="participant" data-targetid="participantId" data-savecallback="testCallback">...</span>
						        </div>
                            </td>
                        </tr>
                        <tr class="form-tr">
                            <td class="form-label1"><label>调查结果可阅读者</label><!-- <p><a>选择</a></p> --></td>
                            <td colspan="3">
						        <div class="input-group form-date">
						        <input type="hidden" class="form-control" id="readerId" name="readerId"/>
						            <input type="text"  class="form-control" id="reader" name="reader" readonly="readonly" placeholder="选择人员（多选）">
						            <div class="input-group-addon"><a class="glyphicon glyphicon-remove" onclick="emptyDateObject1('reader','readerId')"></a></div>
						            <span class="input-group-addon multiple-selector" data-selectorType="onlyPerson" data-title="选择人员"
                                          data-treeParam="{userStatus:true}" data-targetname="reader" data-targetid="readerId" data-savecallback="testCallback">...</span>
						        </div>
						        
						        
							 </td>
                        </tr>
                        <tr class="form-tr">
                            <td class="form-label1"><label>调查结束通知人员</label><!-- <p><a>选择</a></p> --></td>
                            <td colspan="3">
						        <div class="input-group form-date">
						        <input type="hidden" class="form-control" id="closingNoticeId" name="closingNoticeId"/>
						            <input type="text" class="form-control" id="closingNotice" name="closingNotice" readonly="readonly" placeholder="选择人员（多选）">
						           <div class="input-group-addon"><a class="glyphicon glyphicon-remove" onclick="emptyDateObject1('closingNotice','closingNoticeId')"></a></div>
						            <span class="input-group-addon multiple-selector" data-selectorType="onlyPerson" data-title="选择人员"
                                          data-treeParam="{userStatus:true}" data-targetname="closingNotice" data-targetid="closingNoticeId" data-savecallback="testCallback">...</span>
						        </div>
                            </td>
                        </tr>
                        <tr class="form-tr">
                            <td class="form-label1"><label>问卷说明</label></td>
                            <td colspan="3">
                                <!-- 编辑插件 -->
                               <textarea class="form-control addInputWidth" data-placeholder="问卷说明" data-html="true" data-maxlength="300" id="description" name="description"></textarea>
                            </td>
                        </tr>

                        </tbody>
                    </table>

                    <!-- 更多设置 -->
                    <p class="p_more">更多设置</p>
                    <table class="table table-bordered mb60">
                        <tbody>
                        <tr class="form-tr">
                            <td class="form-label1"><label>调查通知方式</label></td>
                            <td><input type="checkbox" checked="checked" value="1" name="notice" disabled="disabled"><label>待办</label></td>
                            <td class="form-label1"><label>同一用户进行多次调查</label></td>
                            <td>
                                <input type="radio" name="multipleSurveys" value="1"><label>允许</label>
                                <input type="radio" name="multipleSurveys" value="0" checked="checked"><label>不允许</label>
                            </td>
                        </tr>
                       <!--  <tr class="form-tr">
                            <td class="form-label1"><label>调查结束前设置提醒</label></td>
                            <td colspan="3" class="time-ti">
                               <span>在结束前</span><select class="form-control mytimeselect"></select><span>分钟开始提醒，之后每</span>
                                <select class="form-control mytimeselect"></select><span>分钟进行提醒，提醒</span>
                                <select class="form-control mytimeselect"></select>
                                <span>次后结束</span>
                            </td>
                        </tr>
                        <tr class="form-tr">
                            <td class="form-label1"><label>是否记录参与调查人名单</label></td>
                            <td colspan="3">
                                <input type="radio"><label>是</label>
                                <input type="radio"><label>否</label>
                                <span class="tip">注：选择“是”填写调查人控制项，“否”则不显示</span>
                            </td>
                        </tr> -->
                       
                        <tr class="form-tr">
                            <td class="form-label1"><label>附件</label></td>
                            <td colspan="3" >
                                <div id="documentAttachments"></div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                 </div>
                <div class="xj-form-content xj-form-single" id="subjectInfo" style="display: none">
                    <div class="tit-btns clearfix">
                        <div class="pull-left" id="buttonAdd">
                        </div>
                        <div class="pull-right">
                            <span >添加分页符</span>
                            <a class="add-page" onclick="serveyCreateArreModal('SEPERATOR_LINE','分页符')"></a>
                        </div>
                    </div>
                    <div class="user-list" id="userList">
                        <span><span class="org-icons list-icon"></span><span class="tit">题目列表</span></span>
                        <div class="my-btn-group">
                            <button id="" type="button" class="btn btn-primary btn-sm" onclick="chosePage()">选择题目模板</button>
                            <button id="" type="button" class="btn btn-primary btn-sm" onclick="upOrDownApp(0);">上移</button>
                            <button id="" type="button" class="btn btn-primary btn-sm"onclick="upOrDownApp(1);">下移</button>
                            <button id="" type="button" class="btn btn-primary btn-sm" onclick="updateQuestion();">修改</button>
                            <button id="" type="button" class="btn btn-primary btn-sm"onclick="deleteTr()">删除</button>
                        </div>
                    </div>
                 <div class="xj-main-grid grid-container">
                     <div class="thead-box">
                         <table style="width: 100%">
                            <thead>
                                <tr>
                                    <td class="w20"><input type="checkbox" name="checkAll" id="checkAll"></td>
                                    <td class="w20">序号</td>
                                    <td class="w60">题目</td>
                                    <td class="w20 border-r-none">题型</td>
                                </tr>
                            </thead>
                         </table>
                     </div>
                    <div class="tbody-box">
                        <table >
                            <tbody id="serveyCreateAdd">
                                
                            </tbody>
                        </table>
                        <table id="hide_table_id" style="display:none;"><tr id="hide_tr_id"></tr></table>
			        	<table id="delete_table_id" style="display:none;"><tr id="delete_tr_id"></tr></table>
                    </div>
	                <div id="serveySubjectPager"></div>
	            </div>
                 </div>
                </div>
            </div>
            </form>
        </div>
      </div>
    </div>
   </div>
   
   <!--组件属性弹出层-->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title"><span id="titleInfo"></span></span><span class="yulan" id="yulanPage"></span><div class="tip"><img src="image/yl_danxuan.png"/></div></h4>
            </div>
            <div class="modal-body">
                <!--多选 单选 -->
                <div class="dan duo" id="danduo">
                	<div id="xuanDiv">
	                    
                    </div>
                     <div class="thead-box" id="subQuestionInfoDiv" style="display: none">
                        <table style="width: 100%;">
                            <thead>
                                <tr>
                                    <td class="optiontd">选项</td>
                                    <td class="contd w346">选项内容</td>
                                    <td class="deltd"><a onclick="addTr1('problemId');" class="add"></a></td>
                                </tr>
                            </thead>
                        </table>
                    </div>
                    <div class="option-tbody-box">
                        <table id='problemTable'>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="thead-box">
                        <table style="width: 100%;">
                            <thead>
                                <tr>
                                    <td class="optiontd">选项</td>
                                    <td class="contd">选项内容</td>
                                    <td class="valuetd">选项分值</td>
                                    <td class="deltd"><a onclick="addTr('optionId');" class="add"></a></td>
                                </tr>
                            </thead>
                        </table>

                    </div>
                    <div class="option-tbody-box">
                        <table id='optionTable'>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!--问答题-->
                <div class="wenda" id="wenda" style="display: none">
                </div>
                <div class="xj-main-grid grid-container" id="serveyCreatePageDiv" style="display: none">
                      <table class="table table-bordered" id="serveyCreatePageTable">
                          <tbody>
                          </tbody>
                      </table>
                      <div id="serveyCreatePagePager"></div>
                  </div>
                  <div class="xj-main-grid grid-container" id="serveyCreateShowDiv" style="width:560px; overflow:hidden;display: none">
                      <table class="table table-bordered" id="serveyCreateShowTable">
                          <tbody>
                          </tbody>
                      </table>
                      <div id="serveyCreateShowPager"></div>
                  </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="sure" id="saveAttrsBtn">确定</button>
                <button type="button"  data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>
</body>

<script src="../../../common/common.js"></script>
<script type="text/javascript" src="../../../common/My97DatePicker/WdatePicker.js"></script>
<script src="serveyCreate_edit.js?v=1.0.0"></script>
</html>
