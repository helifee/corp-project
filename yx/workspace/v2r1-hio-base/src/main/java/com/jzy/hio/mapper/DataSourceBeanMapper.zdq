package com.jzy.hio.mapper;

import java.util.List;
import java.util.Map;

import org.apache.ibatis.annotations.Select;

/**
 * Created by luoro on 2017/12/24.
 */
public interface DataSourceBeanMapper {
	/**
	 * <pre>
	 *  插入数据源
		insert into sys_tend_database 
		(STATUS,id,server_group_id, name,code,account,password,port,driver_name, url)
		values
		(1,'c1075e07f83a4a93b85692ff69c64448','b085fdc2dbba4462a947641e32182a28',
		'test_test014','test_test014','putest','putest123', 3306, 'com.mysql.jdbc.Driver',
		'jdbc:mysql://192.168.3.81:3306/test_test014?zeroDateTimeBehavior=convertToNull&amp;useUnicode=true&amp;characterEncoding=utf-8&allowMultiQueries=true');
		
		//插入租户、关联上面插入的数据源
		insert into sys_tend_user
		(id, database_id)
		values
		('f1c6c7503d2d49febb977f3da10af123','c1075e07f83a4a93b85692ff69c64448')
	 * </pre>
	 * 
	 * 数据源信息
	 * 
	 * status=1是已使用的
	 * @return
	 */
	@Select("select distinct d.`code` as tendId ,d.code as tendCode,d.id  as databaseId, d.account as userName,d.password as password,d.url as url,d.driver_name as driverName"
			+ "			 from  sys_tend_database d  where d.status = 1 and   " + //
			" (d.password is not null and d.password !='')  and  (d.account is not null and d.account !='') and  (d.driver_name is not null and d.driver_name !='')")
	public List<TendDataSource> getTendDataSourceVoList();

	public static class TendDataSource {
		// 租户id
		private String tendId;
		// 租户编号
		private String tendCode;
		// 数据库Id
		private String databaseId;
		// 取名名称
		private String driverName;
		// 驱动 url
		private String url;
		// 用户名
		private String userName;
		// 密码
		private String password;

		public String getTendId() {
			return tendId;
		}

		public void setTendId(String tendId) {
			this.tendId = tendId;
		}

		public String getTendCode() {
			return tendCode;
		}

		public void setTendCode(String tendCode) {
			this.tendCode = tendCode;
		}

		public String getDatabaseId() {
			return databaseId;
		}

		public void setDatabaseId(String databaseId) {
			this.databaseId = databaseId;
		}

		public String getDriverName() {
			return driverName;
		}

		public void setDriverName(String driverName) {
			this.driverName = driverName;
		}

		public String getUrl() {
			return url;
		}

		public void setUrl(String url) {
			this.url = url;
		}

		public String getUserName() {
			return userName;
		}

		public void setUserName(String userName) {
			this.userName = userName;
		}

		public String getPassword() {
			return password;
		}

		public void setPassword(String password) {
			this.password = password;
		}
	}
}
