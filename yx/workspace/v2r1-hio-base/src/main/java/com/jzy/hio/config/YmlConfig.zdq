package com.jzy.hio.config;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.cloud.context.config.annotation.RefreshScope;
import org.springframework.stereotype.Component;

import lombok.Data;

/**
 * <pre>
 * 配置项目中的变量、@RefreshScope支持动态刷新<br>
 * 1、其中内部类上的@Component、@ConfigurationPropertie不可缺
 * 2、注意Map 必须提供public的getter方法，如果重写为private Map<> getExceptionMap 将无法赋值
 * </pre>
 * 
 * @author wt.coffee
 * @date 2018年5月12日下午3:20:44
 */
@Component
@ConfigurationProperties(prefix = "jzy")
@RefreshScope
@Data
public class YmlConfig {

	/**
	 * 异常提示信息
	 */
	private Map<Integer, String> exceptionMap = new HashMap<>();

	/**
	 * 重写getter方法,置为private
	 */
	// private Map<String, String> getExceptionMap() {
	// return exceptionMap;
	// }

	public String getMessage(Integer code) {
		String result = exceptionMap.get(code);
		return result;
	}

	@Data
	@Component
	@ConfigurationProperties(prefix = "jzy.aop")
	public class Aop {
		/**
		 * 权限是否开启
		 */
		private boolean permission;
		/**
		 * 登录白名单--匿名用户可以访问的接口 --- 优化的时候改名()
		 */
		private List<String> permissionLoginWhiteList = new ArrayList<>();
		/**
		 * 外部联系人白名单
		 */
		private List<String> permissionExternalWhiteList = new ArrayList<>();
		/**
		 * 外部联系人默认的权限
		 */
		private List<String> permissionExternalList = new ArrayList<>();

		/**
		 * 一级权限白名单--离职用户也可以访问
		 */
		private List<String> permissionOfflineWhiteList = new ArrayList<>();
		/**
		 * 权限白名单--url ()
		 */
		private List<String> permissionWhiteList = new ArrayList<>();
		/**
		 * 黑名单 需要进行权限认证
		 */
		private List<String> permissionBlackList = new ArrayList<>();
		/**
		 * http重复请求最大间隔、单位秒
		 */
		private int httpDuplicateSeconds = 1;
		/**
		 * 重复提交--以httpDuplicateUrl开头的请求需要做重复提交的处理
		 */
		private List<String> httpDuplicateUrl = new ArrayList<>();
	}
}
