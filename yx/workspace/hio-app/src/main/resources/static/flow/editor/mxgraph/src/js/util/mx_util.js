var mxLog={consoleName:"Console",TRACE:false,DEBUG:true,WARN:true,buffer:"",init:function(){if(mxLog.window==null&&document.body!=null){var E=mxLog.consoleName+" - mxGraph "+mxClient.VERSION;var I=document.createElement("table");I.setAttribute("width","100%");I.setAttribute("height","100%");var G=document.createElement("tbody");var F=document.createElement("tr");var C=document.createElement("td");C.style.verticalAlign="top";mxLog.textarea=document.createElement("textarea");mxLog.textarea.setAttribute("wrap","off");mxLog.textarea.setAttribute("readOnly","true");mxLog.textarea.style.height="100%";mxLog.textarea.style.resize="none";mxLog.textarea.value=mxLog.buffer;if(mxClient.IS_NS&&document.compatMode!="BackCompat"){mxLog.textarea.style.width="99%"}else{mxLog.textarea.style.width="100%"}C.appendChild(mxLog.textarea);F.appendChild(C);G.appendChild(F);F=document.createElement("tr");mxLog.td=document.createElement("td");mxLog.td.style.verticalAlign="top";mxLog.td.setAttribute("height","30px");F.appendChild(mxLog.td);G.appendChild(F);I.appendChild(G);mxLog.addButton("Info",function(J){mxLog.info()});mxLog.addButton("DOM",function(J){var K=mxUtils.getInnerHtml(document.body);mxLog.debug(K)});mxLog.addButton("Trace",function(J){mxLog.TRACE=!mxLog.TRACE;if(mxLog.TRACE){mxLog.debug("Tracing enabled")}else{mxLog.debug("Tracing disabled")}});mxLog.addButton("Copy",function(J){try{mxUtils.copy(mxLog.textarea.value)}catch(K){mxUtils.alert(K)}});mxLog.addButton("Show",function(J){try{mxUtils.popup(mxLog.textarea.value)}catch(K){mxUtils.alert(K)}});mxLog.addButton("Clear",function(J){mxLog.textarea.value=""});var D=0;var A=0;if(typeof(window.innerWidth)==="number"){D=window.innerHeight;A=window.innerWidth}else{D=(document.documentElement.clientHeight||document.body.clientHeight);A=document.body.clientWidth}mxLog.window=new mxWindow(E,I,Math.max(0,A-320),Math.max(0,D-210),300,160);mxLog.window.setMaximizable(true);mxLog.window.setScrollable(false);mxLog.window.setResizable(true);mxLog.window.setClosable(true);mxLog.window.destroyOnClose=false;if(((mxClient.IS_NS||mxClient.IS_IE)&&!mxClient.IS_GC&&!mxClient.IS_SF&&document.compatMode!="BackCompat")||document.documentMode==11){var B=mxLog.window.getElement();var H=function(J,K){mxLog.textarea.style.height=Math.max(0,B.offsetHeight-70)+"px"};mxLog.window.addListener(mxEvent.RESIZE_END,H);mxLog.window.addListener(mxEvent.MAXIMIZE,H);mxLog.window.addListener(mxEvent.NORMALIZE,H);mxLog.textarea.style.height="92px"}}},info:function(){mxLog.writeln(mxUtils.toString(navigator))},addButton:function(B,C){var A=document.createElement("button");mxUtils.write(A,B);mxEvent.addListener(A,"click",C);mxLog.td.appendChild(A)},isVisible:function(){if(mxLog.window!=null){return mxLog.window.isVisible()}return false},show:function(){mxLog.setVisible(true)},setVisible:function(A){if(mxLog.window==null){mxLog.init()}if(mxLog.window!=null){mxLog.window.setVisible(A)}},enter:function(A){if(mxLog.TRACE){mxLog.writeln("Entering "+A);return new Date().getTime()}},leave:function(B,C){if(mxLog.TRACE){var A=(C!=0)?" ("+(new Date().getTime()-C)+" ms)":"";mxLog.writeln("Leaving "+B+A)}},debug:function(){if(mxLog.DEBUG){mxLog.writeln.apply(this,arguments)}},warn:function(){if(mxLog.WARN){mxLog.writeln.apply(this,arguments)}},write:function(){var B="";for(var A=0;A<arguments.length;A++){B+=arguments[A];if(A<arguments.length-1){B+=" "}}if(mxLog.textarea!=null){mxLog.textarea.value=mxLog.textarea.value+B;if(navigator.userAgent.indexOf("Presto/2.5")>=0){mxLog.textarea.style.visibility="hidden";mxLog.textarea.style.visibility="visible"}mxLog.textarea.scrollTop=mxLog.textarea.scrollHeight}else{mxLog.buffer+=B}},writeln:function(){var B="";for(var A=0;A<arguments.length;A++){B+=arguments[A];if(A<arguments.length-1){B+=" "}}mxLog.write(B+"\n")}};var mxObjectIdentity={FIELD_NAME:"mxObjectId",counter:0,get:function(B){if(B!=null){if(B[mxObjectIdentity.FIELD_NAME]==null){if(typeof B==="object"){var A=mxUtils.getFunctionName(B.constructor);B[mxObjectIdentity.FIELD_NAME]=A+"#"+mxObjectIdentity.counter++}else{if(typeof B==="function"){B[mxObjectIdentity.FIELD_NAME]="Function#"+mxObjectIdentity.counter++}}}return B[mxObjectIdentity.FIELD_NAME]}return null},clear:function(A){if(typeof(A)==="object"||typeof A==="function"){delete A[mxObjectIdentity.FIELD_NAME]}}};function mxDictionary(){this.clear()}mxDictionary.prototype.map=null;mxDictionary.prototype.clear=function(){this.map={}};mxDictionary.prototype.get=function(A){var B=mxObjectIdentity.get(A);return this.map[B]};mxDictionary.prototype.put=function(A,B){var D=mxObjectIdentity.get(A);var C=this.map[D];this.map[D]=B;return C};mxDictionary.prototype.remove=function(A){var C=mxObjectIdentity.get(A);var B=this.map[C];delete this.map[C];return B};mxDictionary.prototype.getKeys=function(){var B=[];for(var A in this.map){B.push(A)}return B};mxDictionary.prototype.getValues=function(){var B=[];for(var A in this.map){B.push(this.map[A])}return B};mxDictionary.prototype.visit=function(B){for(var A in this.map){B(A,this.map[A])}};var mxResources={resources:[],extension:mxResourceExtension,resourcesEncoded:false,loadDefaultBundle:true,loadSpecialBundle:true,isLanguageSupported:function(A){if(mxClient.languages!=null){return mxUtils.indexOf(mxClient.languages,A)>=0}return true},getDefaultBundle:function(A,B){if(mxResources.loadDefaultBundle||!mxResources.isLanguageSupported(B)){return A+mxResources.extension}else{return null}},getSpecialBundle:function(A,B){if(mxClient.languages==null||!this.isLanguageSupported(B)){var C=B.indexOf("-");if(C>0){B=B.substring(0,C)}}if(mxResources.loadSpecialBundle&&mxResources.isLanguageSupported(B)&&B!=mxClient.defaultLanguage){return A+"_"+B+mxResources.extension}else{return null}},add:function(E,A,B){A=(A!=null)?A:((mxClient.language!=null)?mxClient.language.toLowerCase():mxConstants.NONE);if(A!=mxConstants.NONE){var D=mxResources.getDefaultBundle(E,A);var H=mxResources.getSpecialBundle(E,A);var F=function(){if(H!=null){if(B){mxUtils.get(H,function(K){mxResources.parse(K.getText());B()},function(){B()})}else{try{var J=mxUtils.load(H);if(J.isReady()){mxResources.parse(J.getText())}}catch(I){}}}else{if(B!=null){B()}}};if(D!=null){if(B){mxUtils.get(D,function(I){mxResources.parse(I.getText());F()},function(){F()})}else{try{var G=mxUtils.load(D);if(G.isReady()){mxResources.parse(G.getText())}F()}catch(C){}}}else{F()}}},parse:function(E){if(E!=null){var D=E.split("\n");for(var B=0;B<D.length;B++){if(D[B].charAt(0)!="#"){var F=D[B].indexOf("=");if(F>0){var A=D[B].substring(0,F);var C=D[B].length;if(D[B].charCodeAt(C-1)==13){C--}var G=D[B].substring(F+1,C);if(this.resourcesEncoded){G=G.replace(/\\(?=u[a-fA-F\d]{4})/g,"%");mxResources.resources[A]=unescape(G)}else{mxResources.resources[A]=G}}}}}},get:function(B,D,C){var A=mxResources.resources[B];if(A==null){A=C}if(A!=null&&D!=null){A=mxResources.replacePlaceholders(A,D)}return A},replacePlaceholders:function(D,E){var C=[];var F=null;for(var B=0;B<D.length;B++){var A=D.charAt(B);if(A=="{"){F=""}else{if(F!=null&&A=="}"){F=parseInt(F)-1;if(F>=0&&F<E.length){C.push(E[F])}F=null}else{if(F!=null){F+=A}else{C.push(A)}}}}return C.join("")},loadResources:function(A){mxResources.add(mxClient.basePath+"/resources/editor",null,function(){mxResources.add(mxClient.basePath+"/resources/graph",null,A)})}};function mxPoint(A,B){this.x=(A!=null)?A:0;this.y=(B!=null)?B:0}mxPoint.prototype.x=null;mxPoint.prototype.y=null;mxPoint.prototype.equals=function(A){return A!=null&&A.x==this.x&&A.y==this.y};mxPoint.prototype.clone=function(){return mxUtils.clone(this)};function mxRectangle(B,C,D,A){mxPoint.call(this,B,C);this.width=(D!=null)?D:0;this.height=(A!=null)?A:0}mxRectangle.prototype=new mxPoint();mxRectangle.prototype.constructor=mxRectangle;mxRectangle.prototype.width=null;mxRectangle.prototype.height=null;mxRectangle.prototype.setRect=function(B,C,D,A){this.x=B;this.y=C;this.width=D;this.height=A};mxRectangle.prototype.getCenterX=function(){return this.x+this.width/2};mxRectangle.prototype.getCenterY=function(){return this.y+this.height/2};mxRectangle.prototype.add=function(C){if(C!=null){var E=Math.min(this.x,C.x);var D=Math.min(this.y,C.y);var B=Math.max(this.x+this.width,C.x+C.width);var A=Math.max(this.y+this.height,C.y+C.height);this.x=E;this.y=D;this.width=B-E;this.height=A-D}};mxRectangle.prototype.intersect=function(C){if(C!=null){var B=this.x+this.width;var D=C.x+C.width;var E=this.y+this.height;var A=C.y+C.height;this.x=Math.max(this.x,C.x);this.y=Math.max(this.y,C.y);this.width=Math.min(B,D)-this.x;this.height=Math.min(E,A)-this.y}};mxRectangle.prototype.grow=function(A){this.x-=A;this.y-=A;this.width+=2*A;this.height+=2*A};mxRectangle.prototype.getPoint=function(){return new mxPoint(this.x,this.y)};mxRectangle.prototype.rotate90=function(){var B=(this.width-this.height)/2;this.x+=B;this.y-=B;var A=this.width;this.width=this.height;this.height=A};mxRectangle.prototype.equals=function(A){return A!=null&&A.x==this.x&&A.y==this.y&&A.width==this.width&&A.height==this.height};mxRectangle.fromRectangle=function(A){return new mxRectangle(A.x,A.y,A.width,A.height)};var mxEffects={animateChanges:function(D,E,B){var G=10;var A=0;var C=function(){var K=false;for(var M=0;M<E.length;M++){var H=E[M];if(H instanceof mxGeometryChange||H instanceof mxTerminalChange||H instanceof mxValueChange||H instanceof mxChildChange||H instanceof mxStyleChange){var J=D.getView().getState(H.cell||H.child,false);if(J!=null){K=true;if(H.constructor!=mxGeometryChange||D.model.isEdge(H.cell)){mxUtils.setOpacity(J.shape.node,100*A/G)}else{var I=D.getView().scale;var O=(H.geometry.x-H.previous.x)*I;var L=(H.geometry.y-H.previous.y)*I;var P=(H.geometry.width-H.previous.width)*I;var N=(H.geometry.height-H.previous.height)*I;if(A==0){J.x-=O;J.y-=L;J.width-=P;J.height-=N}else{J.x+=O/G;J.y+=L/G;J.width+=P/G;J.height+=N/G}D.cellRenderer.redraw(J);mxEffects.cascadeOpacity(D,H.cell,100*A/G)}}}}if(A<G&&K){A++;window.setTimeout(C,F)}else{if(B!=null){B()}}};var F=30;C()},cascadeOpacity:function(C,I,D){var A=C.model.getChildCount(I);for(var E=0;E<A;E++){var G=C.model.getChildAt(I,E);var F=C.getView().getState(G);if(F!=null){mxUtils.setOpacity(F.shape.node,D);mxEffects.cascadeOpacity(C,G,D)}}var B=C.model.getEdges(I);if(B!=null){for(var E=0;E<B.length;E++){var H=C.getView().getState(B[E]);if(H!=null){mxUtils.setOpacity(H.shape.node,D)}}}},fadeOut:function(E,F,D,B,A,G){B=B||40;A=A||30;var C=F||100;mxUtils.setOpacity(E,C);if(G||G==null){var H=function(){C=Math.max(C-B,0);mxUtils.setOpacity(E,C);if(C>0){window.setTimeout(H,A)}else{E.style.visibility="hidden";if(D&&E.parentNode){E.parentNode.removeChild(E)}}};window.setTimeout(H,A)}else{E.style.visibility="hidden";if(D&&E.parentNode){E.parentNode.removeChild(E)}}}};var mxUtils={errorResource:(mxClient.language!="none")?"error":"",closeResource:(mxClient.language!="none")?"close":"",errorImage:mxClient.imageBasePath+"/error.gif",removeCursors:function(C){if(C.style!=null){C.style.cursor=""}var D=C.childNodes;if(D!=null){var A=D.length;for(var B=0;B<A;B+=1){mxUtils.removeCursors(D[B])}}},getCurrentStyle:function(){if(mxClient.IS_IE){return function(A){return(A!=null)?A.currentStyle:null}}else{return function(A){return(A!=null)?window.getComputedStyle(A,""):null}}}(),parseCssNumber:function(A){if(A=="thin"){A="2"}else{if(A=="medium"){A="4"}else{if(A=="thick"){A="6"}}}A=parseFloat(A);if(isNaN(A)){A=0}return A},setPrefixedStyle:function(){var A=null;if(mxClient.IS_OT){A="O"}else{if(mxClient.IS_SF||mxClient.IS_GC){A="Webkit"}else{if(mxClient.IS_MT){A="Moz"}else{if(mxClient.IS_IE&&document.documentMode>=9&&document.documentMode<10){A="ms"}}}}return function(B,C,D){B[C]=D;if(A!=null&&C.length>0){C=A+C.substring(0,1).toUpperCase()+C.substring(1);B[C]=D}}}(),hasScrollbars:function(A){var B=mxUtils.getCurrentStyle(A);return B!=null&&(B.overflow=="scroll"||B.overflow=="auto")},bind:function(B,A){return function(){return A.apply(B,arguments)}},eval:function(expr){var result=null;if(expr.indexOf("function")>=0){try{eval("var _mxJavaScriptExpression="+expr);result=_mxJavaScriptExpression;_mxJavaScriptExpression=null}catch(e){mxLog.warn(e.message+" while evaluating "+expr)}}else{try{result=eval(expr)}catch(e){mxLog.warn(e.message+" while evaluating "+expr)}}return result},findNode:function(C,E,D){if(C.nodeType==mxConstants.NODETYPE_ELEMENT){var A=C.getAttribute(E);if(A!=null&&A==D){return C}}C=C.firstChild;while(C!=null){var B=mxUtils.findNode(C,E,D);if(B!=null){return B}C=C.nextSibling}return null},getFunctionName:function(C){var B=null;if(C!=null){if(C.name!=null){B=C.name}else{B=mxUtils.trim(C.toString());if(/^function\s/.test(B)){B=mxUtils.ltrim(B.substring(9));var A=B.indexOf("(");if(A>0){B=B.substring(0,A)}}}}return B},indexOf:function(A,B){if(A!=null&&B!=null){for(var C=0;C<A.length;C++){if(A[C]==B){return C}}}return -1},forEach:function(A,C){if(A!=null&&C!=null){for(var B=0;B<A.length;B++){C(A[B])}}return A},remove:function(C,B){var D=null;if(typeof(B)=="object"){var E=mxUtils.indexOf(B,C);while(E>=0){B.splice(E,1);D=C;E=mxUtils.indexOf(B,C)}}for(var A in B){if(B[A]==C){delete B[A];D=C}}return D},isNode:function(C,D,A,B){if(C!=null&&!isNaN(C.nodeType)&&(D==null||C.nodeName.toLowerCase()==D.toLowerCase())){return A==null||C.getAttribute(A)==B}return false},isAncestorNode:function(B,A){var C=A;while(C!=null){if(C==B){return true}C=C.parentNode}return false},getChildNodes:function(C,B){B=B||mxConstants.NODETYPE_ELEMENT;var D=[];var A=C.firstChild;while(A!=null){if(A.nodeType==B){D.push(A)}A=A.nextSibling}return D},importNode:function(E,D,A){if(mxClient.IS_IE&&(document.documentMode==null||document.documentMode<10)){switch(D.nodeType){case 1:var B=E.createElement(D.nodeName);if(D.attributes&&D.attributes.length>0){for(var C=0;C<D.attributes.length;C++){B.setAttribute(D.attributes[C].nodeName,D.getAttribute(D.attributes[C].nodeName))}if(A&&D.childNodes&&D.childNodes.length>0){for(var C=0;C<D.childNodes.length;C++){B.appendChild(mxUtils.importNode(E,D.childNodes[C],A))}}}return B;break;case 3:case 4:case 8:return E.createTextNode(D.value);break}}else{return E.importNode(D,A)}},createXmlDocument:function(){var A=null;if(document.implementation&&document.implementation.createDocument){A=document.implementation.createDocument("","",null)}else{if(window.ActiveXObject){A=new ActiveXObject("Microsoft.XMLDOM")}}return A},parseXml:function(){if(window.DOMParser){return function(A){var B=new DOMParser();return B.parseFromString(A,"text/xml")}}else{return function(B){var A=mxUtils.createXmlDocument();A.async=false;A.validateOnParse=false;A.resolveExternals=false;A.loadXML(B);return A}}}(),clearSelection:function(){if(document.selection){return function(){document.selection.empty()}}else{if(window.getSelection){return function(){window.getSelection().removeAllRanges()}}else{return function(){}}}}(),getPrettyXml:function(F,C,G){var A=[];if(F!=null){C=C||"  ";G=G||"";if(F.nodeType==mxConstants.NODETYPE_TEXT){A.push(F.value)}else{A.push(G+"<"+F.nodeName);var B=F.attributes;if(B!=null){for(var H=0;H<B.length;H++){var E=mxUtils.htmlEntities(B[H].value);A.push(" "+B[H].nodeName+'="'+E+'"')}}var D=F.firstChild;if(D!=null){A.push(">\n");while(D!=null){A.push(mxUtils.getPrettyXml(D,C,G+C));D=D.nextSibling}A.push(G+"</"+F.nodeName+">\n")}else{A.push("/>\n")}}}return A.join("")},removeWhitespace:function(B,D){var A=(D)?B.previousSibling:B.nextSibling;while(A!=null&&A.nodeType==mxConstants.NODETYPE_TEXT){var E=(D)?A.previousSibling:A.nextSibling;var C=mxUtils.getTextContent(A);if(mxUtils.trim(C).length==0){A.parentNode.removeChild(A)}A=E}},htmlEntities:function(A,B){A=String(A||"");A=A.replace(/&/g,"&amp;");A=A.replace(/"/g,"&quot;");A=A.replace(/\'/g,"&#39;");A=A.replace(/</g,"&lt;");A=A.replace(/>/g,"&gt;");if(B==null||B){A=A.replace(/\n/g,"&#xa;")}return A},isVml:function(A){return A!=null&&A.tagUrn=="urn:schemas-microsoft-com:vml"},getXml:function(C,A){var D="";if(window.XMLSerializer!=null){var B=new XMLSerializer();D=B.serializeToString(C)}else{if(C.xml!=null){D=C.xml.replace(/\r\n\t[\t]*/g,"").replace(/>\r\n/g,">").replace(/\r\n/g,"\n")}}A=A||"&#xa;";D=D.replace(/\n/g,A);return D},extractTextWithWhitespace:function(B){var E=false;var D=[];for(var A=0;B[A];A++){var C=B[A];if(C.nodeType===3||C.nodeType===4){if(document.documentMode==11&&A==B.length-1&&C.nodeValue.length==0){break}D.push(C.nodeValue+((C.nextSibling==null||C.nextSibling.nodeType!=3)?"\n":""));E=true}else{if(C.nodeType!==8){if((((mxClient.IS_IE||mxClient.IS_IE11)&&C.nodeName=="P"&&C.innerHTML.length==0))||(!E&&C.nodeName=="BR")||(C.nodeName=="DIV"&&C.innerHTML=="<br>")){D.push("\n")}else{D.push(mxUtils.extractTextWithWhitespace(C.childNodes))}E=false}}}return D.join("")},replaceTrailingNewlines:function(B,C){var A="";while(B.length>0&&B.charAt(B.length-1)=="\n"){B=B.substring(0,B.length-1);A+=C}return B+A},getTextContent:function(A){if(A.innerText!==undefined){return A.innerText}else{return(A!=null)?A[(A.textContent===undefined)?"text":"textContent"]:""}},setTextContent:function(A,B){if(A.innerText!==undefined){A.innerText=B}else{A[(A.textContent===undefined)?"text":"textContent"]=B}},getInnerHtml:function(){if(mxClient.IS_IE){return function(A){if(A!=null){return A.innerHTML}return""}}else{return function(A){if(A!=null){var B=new XMLSerializer();return B.serializeToString(A)}return""}}}(),getOuterHtml:function(){if(mxClient.IS_IE){return function(C){if(C!=null){if(C.outerHTML!=null){return C.outerHTML}else{var A=[];A.push("<"+C.nodeName);var D=C.attributes;if(D!=null){for(var B=0;B<D.length;B++){var E=D[B].value;if(E!=null&&E.length>0){A.push(" ");A.push(D[B].nodeName);A.push('="');A.push(E);A.push('"')}}}if(C.innerHTML.length==0){A.push("/>")}else{A.push(">");A.push(C.innerHTML);A.push("</"+C.nodeName+">")}return A.join("")}}return""}}else{return function(A){if(A!=null){var B=new XMLSerializer();return B.serializeToString(A)}return""}}}(),write:function(C,B){var D=C.ownerDocument;var A=D.createTextNode(B);if(C!=null){C.appendChild(A)}return A},writeln:function(C,B){var D=C.ownerDocument;var A=D.createTextNode(B);if(C!=null){C.appendChild(A);C.appendChild(document.createElement("br"))}return A},br:function(D,B){B=B||1;var C=null;for(var A=0;A<B;A++){if(D!=null){C=D.ownerDocument.createElement("br");D.appendChild(C)}}return C},button:function(A,C,D){D=(D!=null)?D:document;var B=D.createElement("button");mxUtils.write(B,A);mxEvent.addListener(B,"click",function(E){C(E)});return B},para:function(C,B){var A=document.createElement("p");mxUtils.write(A,B);if(C!=null){C.appendChild(A)}return A},addTransparentBackgroundFilter:function(A){A.style.filter+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+mxClient.imageBasePath+"/transparent.gif', sizingMethod='scale')"},linkAction:function(D,B,C,A,E){return mxUtils.link(D,B,function(){C.execute(A)},E)},linkInvoke:function(E,B,D,F,A,C){return mxUtils.link(E,B,function(){D[F](A)},C)},link:function(D,B,C,E){var A=document.createElement("span");A.style.color="blue";A.style.textDecoration="underline";A.style.cursor="pointer";if(E!=null){A.style.paddingLeft=E+"px"}mxEvent.addListener(A,"click",C);mxUtils.write(A,B);if(D!=null){D.appendChild(A)}return A},fit:function(F){var D=parseInt(F.offsetLeft);var G=parseInt(F.offsetWidth);var B=mxUtils.getDocumentScrollOrigin(F.ownerDocument);var E=B.x;var A=B.y;var H=document.body;var L=document.documentElement;var J=(E)+(H.clientWidth||L.clientWidth);if(D+G>J){F.style.left=Math.max(E,J-G)+"px"}var C=parseInt(F.offsetTop);var I=parseInt(F.offsetHeight);var K=A+Math.max(H.clientHeight||0,L.clientHeight);if(C+I>K){F.style.top=Math.max(A,K-I)+"px"}},load:function(A){var B=new mxXmlRequest(A,null,"GET",false);B.send();return B},get:function(C,G,A,E,F,B){var D=new mxXmlRequest(C,null,"GET");if(E!=null){D.setBinary(E)}D.send(G,A,F,B);return D},getAll:function(E,B,A){var C=E.length;var D=[];var H=0;var F=function(){if(H==0&&A!=null){A()}H++};for(var G=0;G<E.length;G++){(function(I,J){mxUtils.get(I,function(K){var L=K.getStatus();if(L<200||L>299){F()}else{D[J]=K;C--;if(C==0){B(D)}}},F)})(E[G],G)}if(C==0){B(D)}},post:function(B,C,D,A){return new mxXmlRequest(B,C).send(D,A)},submit:function(A,C,D,B){return new mxXmlRequest(A,C).simulate(D,B)},loadInto:function(A,C,B){if(mxClient.IS_IE){C.onreadystatechange=function(){if(C.readyState==4){B()}}}else{C.addEventListener("load",B,false)}C.load(A)},getValue:function(B,A,D){var C=(B!=null)?B[A]:null;if(C==null){C=D}return C},getNumber:function(B,A,D){var C=(B!=null)?B[A]:null;if(C==null){C=D||0}return Number(C)},getColor:function(B,A,D){var C=(B!=null)?B[A]:null;if(C==null){C=D}else{if(C==mxConstants.NONE){C=null}}return C},clone:function(C,E,D){D=(D!=null)?D:false;var A=null;if(C!=null&&typeof(C.constructor)=="function"){A=new C.constructor();for(var B in C){if(B!=mxObjectIdentity.FIELD_NAME&&(E==null||mxUtils.indexOf(E,B)<0)){if(!D&&typeof(C[B])=="object"){A[B]=mxUtils.clone(C[B])}else{A[B]=C[B]}}}}return A},equalPoints:function(C,B){if((C==null&&B!=null)||(C!=null&&B==null)||(C!=null&&B!=null&&C.length!=B.length)){return false}else{if(C!=null&&B!=null){for(var A=0;A<C.length;A++){if(C[A]==B[A]||(C[A]!=null&&!C[A].equals(B[A]))){return false}}}}return true},equalEntries:function(D,C){if((D==null&&C!=null)||(D!=null&&C==null)||(D!=null&&C!=null&&D.length!=C.length)){return false}else{if(D!=null&&C!=null){var B=0;for(var A in C){B++}for(var A in D){B--;if((!mxUtils.isNaN(D[A])||!mxUtils.isNaN(C[A]))&&D[A]!=C[A]){return false}}}}return B==0},removeDuplicates:function(D){var A=new mxDictionary();var C=[];for(var B=0;B<D.length;B++){if(!A.get(D[B])){C.push(D[B]);A.put(D[B],true)}}return C},isNaN:function(A){return typeof(A)=="number"&&isNaN(A)},extend:function(A,B){var C=function(){};C.prototype=B.prototype;A.prototype=new C();A.prototype.constructor=A},toString:function(B){var E="";for(var A in B){try{if(B[A]==null){E+=A+" = [null]\n"}else{if(typeof(B[A])=="function"){E+=A+" => [Function]\n"}else{if(typeof(B[A])=="object"){var D=mxUtils.getFunctionName(B[A].constructor);E+=A+" => ["+D+"]\n"}else{E+=A+" = "+B[A]+"\n"}}}}catch(C){E+=A+"="+C.message}}return E},toRadians:function(A){return Math.PI*A/180},toDegree:function(A){return A*180/Math.PI},arcToCurves:function(U,V,b,H,T,Q,a,j,k){j-=U;k-=V;if(b===0||H===0){return v}var O=a;var l=T;b=Math.abs(b);H=Math.abs(H);var K=-j/2;var J=-k/2;var d=Math.cos(l*Math.PI/180);var Ab=Math.sin(l*Math.PI/180);var R=d*K+Ab*J;var h=-1*Ab*K+d*J;var g=R*R;var m=h*h;var M=b*b;var B=H*H;var Y=g/M+m/B;var u;if(Y>1){b=Math.sqrt(Y)*b;H=Math.sqrt(Y)*H;u=0}else{var q=1;if(Q===O){q=-1}u=q*Math.sqrt((M*B-M*m-B*g)/(M*m+B*g))}var P=u*b*h/H;var L=-1*u*H*R/b;var c=d*P-Ab*L+j/2;var W=Ab*P+d*L+k/2;var o=Math.atan2((h-L)/H,(R-P)/b)-Math.atan2(0,1);var S=(o>=0)?o:2*Math.PI+o;o=Math.atan2((-h-L)/H,(-R-P)/b)-Math.atan2((h-L)/H,(R-P)/b);var N=(o>=0)?o:2*Math.PI+o;if(O==0&&N>0){N-=2*Math.PI}else{if(O!=0&&N<0){N+=2*Math.PI}}var X=N*2/Math.PI;var f=Math.ceil(X<0?-1*X:X);var Z=N/f;var p=8/3*Math.sin(Z/4)*Math.sin(Z/4)/Math.sin(Z/2);var I=d*b;var A=d*H;var Aa=Ab*b;var F=Ab*H;var i=Math.cos(S);var G=Math.sin(S);var D=-p*(I*G+F*i);var E=-p*(Aa*G-A*i);var w=0;var z=0;var v=[];for(var s=0;s<f;++s){S+=Z;i=Math.cos(S);G=Math.sin(S);w=I*i-F*G+c;z=Aa*i+A*G+W;var r=-p*(I*G+F*i);var e=-p*(Aa*G-A*i);var C=s*6;v[C]=Number(D+U);v[C+1]=Number(E+V);v[C+2]=Number(w-r+U);v[C+3]=Number(z-e+V);v[C+4]=Number(w+U);v[C+5]=Number(z+V);D=w+r;E=z+e}return v},getBoundingBox:function(B,K,G){var A=null;if(B!=null&&K!=null&&K!=0){var E=mxUtils.toRadians(K);var F=Math.cos(E);var D=Math.sin(E);G=(G!=null)?G:new mxPoint(B.x+B.width/2,B.y+B.height/2);var H=new mxPoint(B.x,B.y);var I=new mxPoint(B.x+B.width,B.y);var J=new mxPoint(I.x,B.y+B.height);var C=new mxPoint(B.x,J.y);H=mxUtils.getRotatedPoint(H,F,D,G);I=mxUtils.getRotatedPoint(I,F,D,G);J=mxUtils.getRotatedPoint(J,F,D,G);C=mxUtils.getRotatedPoint(C,F,D,G);A=new mxRectangle(H.x,H.y,0,0);A.add(new mxRectangle(I.x,I.y,0,0));A.add(new mxRectangle(J.x,J.y,0,0));A.add(new mxRectangle(C.x,C.y,0,0))}return A},getRotatedPoint:function(A,E,D,F){F=(F!=null)?F:new mxPoint();var H=A.x-F.x;var G=A.y-F.y;var B=H*E-G*D;var C=G*E+H*D;return new mxPoint(B+F.x,C+F.y)},getPortConstraints:function(D,F,A,J){var C=mxUtils.getValue(D.style,mxConstants.STYLE_PORT_CONSTRAINT,null);if(C==null){return J}else{var H=C.toString();var E=mxConstants.DIRECTION_MASK_NONE;var B=mxUtils.getValue(D.style,mxConstants.STYLE_PORT_CONSTRAINT_ROTATION,0);var I=0;if(B==1){I=mxUtils.getValue(D.style,mxConstants.STYLE_ROTATION,0)}var G=0;if(I>45){G=1;if(I>=135){G=2}}else{if(I<-45){G=3;if(I<=-135){G=2}}}if(H.indexOf(mxConstants.DIRECTION_NORTH)>=0){switch(G){case 0:E|=mxConstants.DIRECTION_MASK_NORTH;break;case 1:E|=mxConstants.DIRECTION_MASK_EAST;break;case 2:E|=mxConstants.DIRECTION_MASK_SOUTH;break;case 3:E|=mxConstants.DIRECTION_MASK_WEST;break}}if(H.indexOf(mxConstants.DIRECTION_WEST)>=0){switch(G){case 0:E|=mxConstants.DIRECTION_MASK_WEST;break;case 1:E|=mxConstants.DIRECTION_MASK_NORTH;break;case 2:E|=mxConstants.DIRECTION_MASK_EAST;break;case 3:E|=mxConstants.DIRECTION_MASK_SOUTH;break}}if(H.indexOf(mxConstants.DIRECTION_SOUTH)>=0){switch(G){case 0:E|=mxConstants.DIRECTION_MASK_SOUTH;break;case 1:E|=mxConstants.DIRECTION_MASK_WEST;break;case 2:E|=mxConstants.DIRECTION_MASK_NORTH;break;case 3:E|=mxConstants.DIRECTION_MASK_EAST;break}}if(H.indexOf(mxConstants.DIRECTION_EAST)>=0){switch(G){case 0:E|=mxConstants.DIRECTION_MASK_EAST;break;case 1:E|=mxConstants.DIRECTION_MASK_SOUTH;break;case 2:E|=mxConstants.DIRECTION_MASK_WEST;break;case 3:E|=mxConstants.DIRECTION_MASK_NORTH;break}}return E}},reversePortConstraints:function(B){var A=0;A=(B&mxConstants.DIRECTION_MASK_WEST)<<3;A|=(B&mxConstants.DIRECTION_MASK_NORTH)<<1;A|=(B&mxConstants.DIRECTION_MASK_SOUTH)>>1;A|=(B&mxConstants.DIRECTION_MASK_EAST)>>3;return A},findNearestSegment:function(C,G,H){var A=-1;if(C.absolutePoints.length>0){var D=C.absolutePoints[0];var I=null;for(var E=1;E<C.absolutePoints.length;E++){var B=C.absolutePoints[E];var F=mxUtils.ptSegDistSq(D.x,D.y,B.x,B.y,G,H);if(I==null||F<I){I=F;A=E-1}D=B}}return A},rectangleIntersectsSegment:function(C,I,K){var G=C.y;var H=C.x;var L=G+C.height;var B=H+C.width;var J=I.x;var D=K.x;if(I.x>K.x){J=K.x;D=I.x}if(D>B){D=B}if(J<H){J=H}if(J>D){return false}var E=I.y;var M=K.y;var A=K.x-I.x;if(Math.abs(A)>1e-07){var N=(K.y-I.y)/A;var O=I.y-N*I.x;E=N*J+O;M=N*D+O}if(E>M){var F=M;M=E;E=F}if(M>L){M=L}if(E<G){E=G}if(E>M){return false}return true},contains:function(A,B,C){return(A.x<=B&&A.x+A.width>=B&&A.y<=C&&A.y+A.height>=C)},intersects:function(H,F){var C=H.width;var J=H.height;var B=F.width;var D=F.height;if(B<=0||D<=0||C<=0||J<=0){return false}var A=H.x;var I=H.y;var G=F.x;var E=F.y;B+=G;D+=E;C+=A;J+=I;return((B<G||B>A)&&(D<E||D>I)&&(C<A||C>G)&&(J<I||J>E))},intersectsHotspot:function(K,M,N,P,D,E){P=(P!=null)?P:1;D=(D!=null)?D:0;E=(E!=null)?E:0;if(P>0){var H=K.getCenterX();var I=K.getCenterY();var L=K.width;var J=K.height;var C=mxUtils.getValue(K.style,mxConstants.STYLE_STARTSIZE)*K.view.scale;if(C>0){if(mxUtils.getValue(K.style,mxConstants.STYLE_HORIZONTAL,true)){I=K.y+C/2;J=C}else{H=K.x+C/2;L=C}}L=Math.max(D,L*P);J=Math.max(D,J*P);if(E>0){L=Math.min(L,E);J=Math.min(J,E)}var G=new mxRectangle(H-L/2,I-J/2,L,J);var O=mxUtils.toRadians(mxUtils.getValue(K.style,mxConstants.STYLE_ROTATION)||0);if(O!=0){var F=Math.cos(-O);var B=Math.sin(-O);var H=new mxPoint(K.getCenterX(),K.getCenterY());var A=mxUtils.getRotatedPoint(new mxPoint(M,N),F,B,H);M=A.x;N=A.y}return mxUtils.contains(G,M,N)}return true},getOffset:function(C,A){var F=0;var D=0;if(A!=null&&A){var E=mxUtils.getDocumentScrollOrigin(C.ownerDocument);F+=E.x;D+=E.y}var B=C.getBoundingClientRect();if(B!=null){F+=B.left;D+=B.top}return new mxPoint(F,D)},getDocumentScrollOrigin:function(D){if(mxClient.IS_QUIRKS){return new mxPoint(D.body.scrollLeft,D.body.scrollTop)}else{var A=D.defaultView||D.parentWindow;var B=(A!=null&&window.pageXOffset!==undefined)?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft;var C=(A!=null&&window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return new mxPoint(B,C)}},getScrollOrigin:function(C){var D=document.body;var A=document.documentElement;var B=mxUtils.getDocumentScrollOrigin((C!=null)?C.ownerDocument:document);while(C!=null&&C!=D&&C!=A){if(!isNaN(C.scrollLeft)&&!isNaN(C.scrollTop)){B.x+=C.scrollLeft;B.y+=C.scrollTop}C=C.parentNode}return B},convertPoint:function(B,C,D){var E=mxUtils.getScrollOrigin(B);var A=mxUtils.getOffset(B);A.x-=E.x;A.y-=E.y;return new mxPoint(C-A.x,D-A.y)},ltrim:function(A,B){B=B||"\\s";return A.replace(new RegExp("^["+B+"]+","g"),"")},rtrim:function(A,B){B=B||"\\s";return A.replace(new RegExp("["+B+"]+$","g"),"")},trim:function(A,B){return mxUtils.ltrim(mxUtils.rtrim(A,B),B)},isNumeric:function(A){return !isNaN(parseFloat(A))&&isFinite(A)&&(typeof(A)!="string"||A.toLowerCase().indexOf("0x")<0)},isInteger:function(A){return String(parseInt(A))===String(A)},mod:function(A,B){return((A%B)+B)%B},intersection:function(F,G,C,D,K,I,H,M){var A=((M-I)*(C-F))-((H-K)*(D-G));var B=((H-K)*(G-I))-((M-I)*(F-K));var E=((C-F)*(G-I))-((D-G)*(F-K));var J=B/A;var L=E/A;if(J>=0&&J<=1&&L>=0&&L<=1){var O=F+J*(C-F);var N=G+J*(D-G);return new mxPoint(O,N)}return null},ptSegDistSq:function(A,B,C,D,G,E){C-=A;D-=B;G-=A;E-=B;var I=G*C+E*D;var F;if(I<=0){F=0}else{G=C-G;E=D-E;I=G*C+E*D;if(I<=0){F=0}else{F=I*I/(C*C+D*D)}}var H=G*G+E*E-F;if(H<0){H=0}return H},ptLineDist:function(E,F,A,B,D,C){return Math.abs((B-F)*D-(A-E)*C+A*F-B*E)/Math.sqrt((B-F)*(B-F)+(A-E)*(A-E))},relativeCcw:function(E,F,A,B,D,C){A-=E;B-=F;D-=E;C-=F;var G=D*B-C*A;if(G==0){G=D*A+C*B;if(G>0){D-=A;C-=B;G=D*A+C*B;if(G<0){G=0}}}return(G<0)?-1:((G>0)?1:0)},animateChanges:function(A,B){mxEffects.animateChanges.apply(this,arguments)},cascadeOpacity:function(A,C,B){mxEffects.cascadeOpacity.apply(this,arguments)},fadeOut:function(D,B,A,C,F,E){mxEffects.fadeOut.apply(this,arguments)},setOpacity:function(A,B){if(mxUtils.isVml(A)){if(B>=100){A.style.filter=""}else{A.style.filter="alpha(opacity="+(B/5)+")"}}else{if(mxClient.IS_IE&&(typeof(document.documentMode)==="undefined"||document.documentMode<9)){if(B>=100){A.style.filter=""}else{A.style.filter="alpha(opacity="+B+")"}}else{A.style.opacity=(B/100)}}},createImage:function(B){var A=null;if(mxClient.IS_IE6&&document.compatMode!="CSS1Compat"){A=document.createElement(mxClient.VML_PREFIX+":image");A.setAttribute("src",B);A.style.borderStyle="none"}else{A=document.createElement("img");A.setAttribute("src",B);A.setAttribute("border","0")}return A},sortCells:function(C,B){B=(B!=null)?B:true;var A=new mxDictionary();C.sort(function(F,G){var D=A.get(F);if(D==null){D=mxCellPath.create(F).split(mxCellPath.PATH_SEPARATOR);A.put(F,D)}var E=A.get(G);if(E==null){E=mxCellPath.create(G).split(mxCellPath.PATH_SEPARATOR);A.put(G,E)}var H=mxCellPath.compare(D,E);return(H==0)?0:(((H>0)==B)?1:-1)});return C},getStylename:function(B){if(B!=null){var C=B.split(";");var A=C[0];if(A.indexOf("=")<0){return A}}return""},getStylenames:function(C){var B=[];if(C!=null){var D=C.split(";");for(var A=0;A<D.length;A++){if(D[A].indexOf("=")<0){B.push(D[A])}}}return B},indexOfStylename:function(C,B){if(C!=null&&B!=null){var D=C.split(";");var E=0;for(var A=0;A<D.length;A++){if(D[A]==B){return E}E+=D[A].length+1}}return -1},addStylename:function(B,A){if(mxUtils.indexOfStylename(B,A)<0){if(B==null){B=""}else{if(B.length>0&&B.charAt(B.length-1)!=";"){B+=";"}}B+=A}return B},removeStylename:function(D,C){var B=[];if(D!=null){var E=D.split(";");for(var A=0;A<E.length;A++){if(E[A]!=C){B.push(E[A])}}}return B.join(";")},removeAllStylenames:function(C){var B=[];if(C!=null){var D=C.split(";");for(var A=0;A<D.length;A++){if(D[A].indexOf("=")>=0){B.push(D[A])}}}return B.join(";")},setCellStyles:function(F,D,A,E){if(D!=null&&D.length>0){F.beginUpdate();try{for(var B=0;B<D.length;B++){if(D[B]!=null){var C=mxUtils.setStyle(F.getStyle(D[B]),A,E);F.setStyle(D[B],C)}}}finally{F.endUpdate()}}},setStyle:function(D,A,F){var G=F!=null&&(typeof(F.length)=="undefined"||F.length>0);if(D==null||D.length==0){if(G){D=A+"="+F+";"}}else{if(D.substring(0,A.length+1)==A+"="){var C=D.indexOf(";");if(G){D=A+"="+F+((C<0)?";":D.substring(C))}else{D=(C<0||C==D.length-1)?"":D.substring(C+1)}}else{var B=D.indexOf(";"+A+"=");if(B<0){if(G){var E=(D.charAt(D.length-1)==";")?"":";";D=D+E+A+"="+F+";"}}else{var C=D.indexOf(";",B+1);if(G){D=D.substring(0,B+1)+A+"="+F+((C<0)?";":D.substring(C))}else{D=D.substring(0,B)+((C<0)?";":D.substring(C))}}}}return D},setCellStyleFlags:function(F,D,A,G,E){if(D!=null&&D.length>0){F.beginUpdate();try{for(var B=0;B<D.length;B++){if(D[B]!=null){var C=mxUtils.setStyleFlag(F.getStyle(D[B]),A,G,E);F.setStyle(D[B],C)}}}finally{F.endUpdate()}}},setStyleFlag:function(E,F,G,D){if(E==null||E.length==0){if(D||D==null){E=F+"="+G}else{E=F+"=0"}}else{var A=E.indexOf(F+"=");if(A<0){var B=(E.charAt(E.length-1)==";")?"":";";if(D||D==null){E=E+B+F+"="+G}else{E=E+B+F+"=0"}}else{var H=E.indexOf(";",A);var C="";if(H<0){C=E.substring(A+F.length+1)}else{C=E.substring(A+F.length+1,H)}if(D==null){C=parseInt(C)^G}else{if(D){C=parseInt(C)|G}else{C=parseInt(C)&~G}}E=E.substring(0,A)+F+"="+C+((H>=0)?E.substring(H):"")}}return E},getAlignmentAsPoint:function(C,A){var B=0;var D=0;if(C==mxConstants.ALIGN_CENTER){B=-0.5}else{if(C==mxConstants.ALIGN_RIGHT){B=-1}}if(A==mxConstants.ALIGN_MIDDLE){D=-0.5}else{if(A==mxConstants.ALIGN_BOTTOM){D=-1}}return new mxPoint(B,D)},getSizeForString:function(D,F,B,A){F=(F!=null)?F:mxConstants.DEFAULT_FONTSIZE;B=(B!=null)?B:mxConstants.DEFAULT_FONTFAMILY;var E=document.createElement("div");E.style.fontFamily=B;E.style.fontSize=Math.round(F)+"px";E.style.lineHeight=Math.round(F*mxConstants.LINE_HEIGHT)+"px";E.style.position="absolute";E.style.visibility="hidden";E.style.display=(mxClient.IS_QUIRKS)?"inline":"inline-block";E.style.zoom="1";if(A!=null){E.style.width=A+"px";E.style.whiteSpace="normal"}else{E.style.whiteSpace="nowrap"}E.innerHTML=D;document.body.appendChild(E);var C=new mxRectangle(0,0,E.offsetWidth,E.offsetHeight);document.body.removeChild(E);return C},getViewXml:function(C,D,L,E,F){E=(E!=null)?E:0;F=(F!=null)?F:0;D=(D!=null)?D:1;if(L==null){var N=C.getModel();L=[N.getRoot()]}var A=C.getView();var B=null;var M=A.isEventsEnabled();A.setEventsEnabled(false);var G=A.drawPane;var J=A.overlayPane;if(C.dialect==mxConstants.DIALECT_SVG){A.drawPane=document.createElementNS(mxConstants.NS_SVG,"g");A.canvas.appendChild(A.drawPane);A.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g");A.canvas.appendChild(A.overlayPane)}else{A.drawPane=A.drawPane.cloneNode(false);A.canvas.appendChild(A.drawPane);A.overlayPane=A.overlayPane.cloneNode(false);A.canvas.appendChild(A.overlayPane)}var H=A.getTranslate();A.translate=new mxPoint(E,F);var I=new mxTemporaryCellStates(C.getView(),D,L);try{var K=new mxCodec();B=K.encode(C.getView())}finally{I.destroy();A.translate=H;A.canvas.removeChild(A.drawPane);A.canvas.removeChild(A.overlayPane);A.drawPane=G;A.overlayPane=J;A.setEventsEnabled(M)}return B},getScaleForPageCount:function(P,U,H,M){if(P<1){return 1}H=(H!=null)?H:mxConstants.PAGE_FORMAT_A4_PORTRAIT;M=(M!=null)?M:0;var G=H.width-(M*2);var T=H.height-(M*2);var B=U.getGraphBounds().clone();var F=U.getView().getScale();B.width/=F;B.height/=F;var X=B.width;var J=B.height;var O=1;var W=G/T;var K=X/J;var I=K/W;var R=Math.sqrt(P);var V=Math.sqrt(I);var A=R*V;var N=R/V;if(A<1&&N>P){var C=N/P;N=P;A/=C}if(N<1&&A>P){var C=A/P;A=P;N/=C}var D=Math.ceil(A)*Math.ceil(N);var E=0;while(D>P){var L=Math.floor(A)/A;var S=Math.floor(N)/N;if(L==1){L=Math.floor(A-1)/A}if(S==1){S=Math.floor(N-1)/N}var C=1;if(L>S){C=L}else{C=S}A=A*C;N=N*C;D=Math.ceil(A)*Math.ceil(N);E++;if(E>10){break}}var Q=G*A;O=Q/X;return O*0.99999},show:function(T,O,J,K,C,E){J=(J!=null)?J:0;K=(K!=null)?K:0;if(O==null){var A=window.open();O=A.document}else{O.open()}if(document.documentMode==9){O.writeln('<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=9"><![endif]-->')}var D=T.getGraphBounds();var H=Math.ceil(J-D.x);var S=Math.ceil(K-D.y);if(C==null){C=Math.ceil(D.width+J)+Math.ceil(Math.ceil(D.x)-D.x)}if(E==null){E=Math.ceil(D.height+K)+Math.ceil(Math.ceil(D.y)-D.y)}if(mxClient.IS_IE||document.documentMode==11){var N="<html><head>";var G=document.getElementsByTagName("base");for(var F=0;F<G.length;F++){N+=G[F].outerHTML}N+="<style>";for(var F=0;F<document.styleSheets.length;F++){try{N+=document.styleSheets[F].cssText}catch(M){}}N+='</style></head><body style="margin:0px;">';N+='<div style="position:absolute;overflow:hidden;width:'+C+"px;height:"+E+'px;"><div style="position:relative;left:'+H+"px;top:"+S+'px;">';N+=T.container.innerHTML;N+="</div></div></body><html>";O.writeln(N);O.close()}else{O.writeln("<html><head>");var G=document.getElementsByTagName("base");for(var F=0;F<G.length;F++){O.writeln(mxUtils.getOuterHtml(G[F]))}var U=document.getElementsByTagName("link");for(var F=0;F<U.length;F++){O.writeln(mxUtils.getOuterHtml(U[F]))}var Q=document.getElementsByTagName("style");for(var F=0;F<Q.length;F++){O.writeln(mxUtils.getOuterHtml(Q[F]))}O.writeln('</head><body style="margin:0px;"></body></html>');O.close();var B=O.createElement("div");B.position="absolute";B.overflow="hidden";B.style.width=C+"px";B.style.height=E+"px";var P=O.createElement("div");P.style.position="absolute";P.style.left=H+"px";P.style.top=S+"px";var R=T.container.firstChild;var I=null;while(R!=null){var L=R.cloneNode(true);if(R==T.view.drawPane.ownerSVGElement){B.appendChild(L);I=L}else{P.appendChild(L)}R=R.nextSibling}O.body.appendChild(B);if(P.firstChild!=null){O.body.appendChild(P)}if(I!=null){I.style.minWidth="";I.style.minHeight="";I.firstChild.setAttribute("transform","translate("+H+","+S+")")}}mxUtils.removeCursors(O.body);return O},printScreen:function(D){var A=window.open();var C=D.getGraphBounds();mxUtils.show(D,A.document);var B=function(){A.focus();A.print();A.close()};if(mxClient.IS_GC){A.setTimeout(B,500)}else{B()}},popup:function(F,C){if(C){var E=document.createElement("div");E.style.overflow="scroll";E.style.width="636px";E.style.height="460px";var D=document.createElement("pre");D.innerHTML=mxUtils.htmlEntities(F,false).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;");E.appendChild(D);var G=document.body.clientWidth;var A=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight);var B=new mxWindow("Popup Window",E,G/2-320,A/2-240,640,480,false,true);B.setClosable(true);B.setVisible(true)}else{if(mxClient.IS_NS){var B=window.open();B.document.writeln("<pre>"+mxUtils.htmlEntities(F)+"</pre");B.document.close()}else{var B=window.open();var D=B.document.createElement("pre");D.innerHTML=mxUtils.htmlEntities(F,false).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;");B.document.body.appendChild(D)}}},alert:function(A){alert(A)},prompt:function(B,A){return prompt(B,(A!=null)?A:"")},confirm:function(A){return confirm(A)},error:function(K,J,E,I){var B=document.createElement("div");B.style.padding="20px";var A=document.createElement("img");A.setAttribute("src",I||mxUtils.errorImage);A.setAttribute("valign","bottom");A.style.verticalAlign="middle";B.appendChild(A);B.appendChild(document.createTextNode("\u00a0"));B.appendChild(document.createTextNode("\u00a0"));B.appendChild(document.createTextNode("\u00a0"));mxUtils.write(B,K);var C=document.body.clientWidth;var G=(document.body.clientHeight||document.documentElement.clientHeight);var D=new mxWindow(mxResources.get(mxUtils.errorResource)||mxUtils.errorResource,B,(C-J)/2,G/4,J,null,false,true);if(E){mxUtils.br(B);var F=document.createElement("p");var H=document.createElement("button");if(mxClient.IS_IE){H.style.cssText="float:right"}else{H.setAttribute("style","float:right")}mxEvent.addListener(H,"click",function(L){D.destroy()});mxUtils.write(H,mxResources.get(mxUtils.closeResource)||mxUtils.closeResource);F.appendChild(H);B.appendChild(F);mxUtils.br(B);D.setClosable(true)}D.setVisible(true);return D},makeDraggable:function(B,G,J,K,I,F,H,D,C,E){var A=new mxDragSource(B,J);A.dragOffset=new mxPoint((I!=null)?I:0,(F!=null)?F:mxConstants.TOOLTIP_VERTICAL_OFFSET);A.autoscroll=H;A.setGuidesEnabled(false);if(C!=null){A.highlightDropTargets=C}if(E!=null){A.getDropTarget=E}A.getGraphForEvent=function(L){return(typeof(G)=="function")?G(L):G};if(K!=null){A.createDragElement=function(){return K.cloneNode(true)};if(D){A.createPreviewElement=function(M){var N=K.cloneNode(true);var O=parseInt(N.style.width);var L=parseInt(N.style.height);N.style.width=Math.round(O*M.view.scale)+"px";N.style.height=Math.round(L*M.view.scale)+"px";return N}}}return A}};var mxConstants={DEFAULT_HOTSPOT:0.3,MIN_HOTSPOT_SIZE:8,MAX_HOTSPOT_SIZE:0,RENDERING_HINT_EXACT:"exact",RENDERING_HINT_FASTER:"faster",RENDERING_HINT_FASTEST:"fastest",DIALECT_SVG:"svg",DIALECT_VML:"vml",DIALECT_MIXEDHTML:"mixedHtml",DIALECT_PREFERHTML:"preferHtml",DIALECT_STRICTHTML:"strictHtml",NS_SVG:"http://www.w3.org/2000/svg",NS_XHTML:"http://www.w3.org/1999/xhtml",NS_XLINK:"http://www.w3.org/1999/xlink",SHADOWCOLOR:"gray",VML_SHADOWCOLOR:"gray",SHADOW_OFFSET_X:2,SHADOW_OFFSET_Y:3,SHADOW_OPACITY:1,NODETYPE_ELEMENT:1,NODETYPE_ATTRIBUTE:2,NODETYPE_TEXT:3,NODETYPE_CDATA:4,NODETYPE_ENTITY_REFERENCE:5,NODETYPE_ENTITY:6,NODETYPE_PROCESSING_INSTRUCTION:7,NODETYPE_COMMENT:8,NODETYPE_DOCUMENT:9,NODETYPE_DOCUMENTTYPE:10,NODETYPE_DOCUMENT_FRAGMENT:11,NODETYPE_NOTATION:12,TOOLTIP_VERTICAL_OFFSET:16,DEFAULT_VALID_COLOR:"#00FF00",DEFAULT_INVALID_COLOR:"#FF0000",OUTLINE_HIGHLIGHT_COLOR:"#00FF00",OUTLINE_HIGHLIGHT_STROKEWIDTH:5,HIGHLIGHT_STROKEWIDTH:3,HIGHLIGHT_SIZE:2,HIGHLIGHT_OPACITY:100,CURSOR_MOVABLE_VERTEX:"move",CURSOR_MOVABLE_EDGE:"move",CURSOR_LABEL_HANDLE:"default",CURSOR_TERMINAL_HANDLE:"pointer",CURSOR_BEND_HANDLE:"crosshair",CURSOR_VIRTUAL_BEND_HANDLE:"crosshair",CURSOR_CONNECT:"pointer",HIGHLIGHT_COLOR:"#00FF00",CONNECT_TARGET_COLOR:"#0000FF",INVALID_CONNECT_TARGET_COLOR:"#FF0000",DROP_TARGET_COLOR:"#0000FF",VALID_COLOR:"#00FF00",INVALID_COLOR:"#FF0000",EDGE_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_STROKEWIDTH:1,EDGE_SELECTION_STROKEWIDTH:1,VERTEX_SELECTION_DASHED:true,EDGE_SELECTION_DASHED:true,GUIDE_COLOR:"#FF0000",GUIDE_STROKEWIDTH:1,OUTLINE_COLOR:"#0099FF",OUTLINE_STROKEWIDTH:(mxClient.IS_IE)?2:3,HANDLE_SIZE:6,LABEL_HANDLE_SIZE:4,HANDLE_FILLCOLOR:"#00FF00",HANDLE_STROKECOLOR:"black",LABEL_HANDLE_FILLCOLOR:"yellow",CONNECT_HANDLE_FILLCOLOR:"#0000FF",LOCKED_HANDLE_FILLCOLOR:"#FF0000",OUTLINE_HANDLE_FILLCOLOR:"#00FFFF",OUTLINE_HANDLE_STROKECOLOR:"#0033FF",DEFAULT_FONTFAMILY:"Arial,Helvetica",DEFAULT_FONTSIZE:11,DEFAULT_TEXT_DIRECTION:"",LINE_HEIGHT:1.2,WORD_WRAP:"normal",ABSOLUTE_LINE_HEIGHT:false,DEFAULT_FONTSTYLE:0,DEFAULT_STARTSIZE:40,DEFAULT_MARKERSIZE:6,DEFAULT_IMAGESIZE:24,ENTITY_SEGMENT:30,RECTANGLE_ROUNDING_FACTOR:0.15,LINE_ARCSIZE:20,ARROW_SPACING:0,ARROW_WIDTH:30,ARROW_SIZE:30,PAGE_FORMAT_A4_PORTRAIT:new mxRectangle(0,0,826,1169),PAGE_FORMAT_A4_LANDSCAPE:new mxRectangle(0,0,1169,826),PAGE_FORMAT_LETTER_PORTRAIT:new mxRectangle(0,0,850,1100),PAGE_FORMAT_LETTER_LANDSCAPE:new mxRectangle(0,0,1100,850),NONE:"none",STYLE_PERIMETER:"perimeter",STYLE_SOURCE_PORT:"sourcePort",STYLE_TARGET_PORT:"targetPort",STYLE_PORT_CONSTRAINT:"portConstraint",STYLE_PORT_CONSTRAINT_ROTATION:"portConstraintRotation",STYLE_OPACITY:"opacity",STYLE_FILL_OPACITY:"fillOpacity",STYLE_STROKE_OPACITY:"strokeOpacity",STYLE_TEXT_OPACITY:"textOpacity",STYLE_TEXT_DIRECTION:"textDirection",STYLE_OVERFLOW:"overflow",STYLE_ORTHOGONAL:"orthogonal",STYLE_EXIT_X:"exitX",STYLE_EXIT_Y:"exitY",STYLE_EXIT_PERIMETER:"exitPerimeter",STYLE_ENTRY_X:"entryX",STYLE_ENTRY_Y:"entryY",STYLE_ENTRY_PERIMETER:"entryPerimeter",STYLE_WHITE_SPACE:"whiteSpace",STYLE_ROTATION:"rotation",STYLE_FILLCOLOR:"fillColor",STYLE_POINTER_EVENTS:"pointerEvents",STYLE_SWIMLANE_FILLCOLOR:"swimlaneFillColor",STYLE_MARGIN:"margin",STYLE_GRADIENTCOLOR:"gradientColor",STYLE_GRADIENT_DIRECTION:"gradientDirection",STYLE_STROKECOLOR:"strokeColor",STYLE_SEPARATORCOLOR:"separatorColor",STYLE_STROKEWIDTH:"strokeWidth",STYLE_ALIGN:"align",STYLE_VERTICAL_ALIGN:"verticalAlign",STYLE_LABEL_WIDTH:"labelWidth",STYLE_LABEL_POSITION:"labelPosition",STYLE_VERTICAL_LABEL_POSITION:"verticalLabelPosition",STYLE_IMAGE_ASPECT:"imageAspect",STYLE_IMAGE_ALIGN:"imageAlign",STYLE_IMAGE_VERTICAL_ALIGN:"imageVerticalAlign",STYLE_GLASS:"glass",STYLE_IMAGE:"image",STYLE_IMAGE_WIDTH:"imageWidth",STYLE_IMAGE_HEIGHT:"imageHeight",STYLE_IMAGE_BACKGROUND:"imageBackground",STYLE_IMAGE_BORDER:"imageBorder",STYLE_FLIPH:"flipH",STYLE_FLIPV:"flipV",STYLE_NOLABEL:"noLabel",STYLE_NOEDGESTYLE:"noEdgeStyle",STYLE_LABEL_BACKGROUNDCOLOR:"labelBackgroundColor",STYLE_LABEL_BORDERCOLOR:"labelBorderColor",STYLE_LABEL_PADDING:"labelPadding",STYLE_INDICATOR_SHAPE:"indicatorShape",STYLE_INDICATOR_IMAGE:"indicatorImage",STYLE_INDICATOR_COLOR:"indicatorColor",STYLE_INDICATOR_STROKECOLOR:"indicatorStrokeColor",STYLE_INDICATOR_GRADIENTCOLOR:"indicatorGradientColor",STYLE_INDICATOR_SPACING:"indicatorSpacing",STYLE_INDICATOR_WIDTH:"indicatorWidth",STYLE_INDICATOR_HEIGHT:"indicatorHeight",STYLE_INDICATOR_DIRECTION:"indicatorDirection",STYLE_SHADOW:"shadow",STYLE_SEGMENT:"segment",STYLE_ENDARROW:"endArrow",STYLE_STARTARROW:"startArrow",STYLE_ENDSIZE:"endSize",STYLE_STARTSIZE:"startSize",STYLE_SWIMLANE_LINE:"swimlaneLine",STYLE_ENDFILL:"endFill",STYLE_STARTFILL:"startFill",STYLE_DASHED:"dashed",STYLE_DASH_PATTERN:"dashPattern",STYLE_ROUNDED:"rounded",STYLE_CURVED:"curved",STYLE_ARCSIZE:"arcSize",STYLE_SMOOTH:"smooth",STYLE_SOURCE_PERIMETER_SPACING:"sourcePerimeterSpacing",STYLE_TARGET_PERIMETER_SPACING:"targetPerimeterSpacing",STYLE_PERIMETER_SPACING:"perimeterSpacing",STYLE_SPACING:"spacing",STYLE_SPACING_TOP:"spacingTop",STYLE_SPACING_LEFT:"spacingLeft",STYLE_SPACING_BOTTOM:"spacingBottom",STYLE_SPACING_RIGHT:"spacingRight",STYLE_HORIZONTAL:"horizontal",STYLE_DIRECTION:"direction",STYLE_ELBOW:"elbow",STYLE_FONTCOLOR:"fontColor",STYLE_FONTFAMILY:"fontFamily",STYLE_FONTSIZE:"fontSize",STYLE_FONTSTYLE:"fontStyle",STYLE_ASPECT:"aspect",STYLE_AUTOSIZE:"autosize",STYLE_FOLDABLE:"foldable",STYLE_EDITABLE:"editable",STYLE_BENDABLE:"bendable",STYLE_MOVABLE:"movable",STYLE_RESIZABLE:"resizable",STYLE_RESIZE_WIDTH:"resizeWidth",STYLE_RESIZE_HEIGHT:"resizeHeight",STYLE_ROTATABLE:"rotatable",STYLE_CLONEABLE:"cloneable",STYLE_DELETABLE:"deletable",STYLE_SHAPE:"shape",STYLE_EDGE:"edgeStyle",STYLE_JETTY_SIZE:"jettySize",STYLE_SOURCE_JETTY_SIZE:"sourceJettySize",STYLE_TARGET_JETTY_SIZE:"targetJettySize",STYLE_LOOP:"loopStyle",STYLE_ORTHOGONAL_LOOP:"orthogonalLoop",STYLE_ROUTING_CENTER_X:"routingCenterX",STYLE_ROUTING_CENTER_Y:"routingCenterY",FONT_BOLD:1,FONT_ITALIC:2,FONT_UNDERLINE:4,SHAPE_RECTANGLE:"rectangle",SHAPE_ELLIPSE:"ellipse",SHAPE_DOUBLE_ELLIPSE:"doubleEllipse",SHAPE_RHOMBUS:"rhombus",SHAPE_LINE:"line",SHAPE_IMAGE:"image",SHAPE_ARROW:"arrow",SHAPE_ARROW_CONNECTOR:"arrowConnector",SHAPE_LABEL:"label",SHAPE_CYLINDER:"cylinder",SHAPE_SWIMLANE:"swimlane",SHAPE_CONNECTOR:"connector",SHAPE_ACTOR:"actor",SHAPE_CLOUD:"cloud",SHAPE_TRIANGLE:"triangle",SHAPE_HEXAGON:"hexagon",ARROW_CLASSIC:"classic",ARROW_CLASSIC_THIN:"classicThin",ARROW_BLOCK:"block",ARROW_BLOCK_THIN:"blockThin",ARROW_OPEN:"open",ARROW_OPEN_THIN:"openThin",ARROW_OVAL:"oval",ARROW_DIAMOND:"diamond",ARROW_DIAMOND_THIN:"diamondThin",ALIGN_LEFT:"left",ALIGN_CENTER:"center",ALIGN_RIGHT:"right",ALIGN_TOP:"top",ALIGN_MIDDLE:"middle",ALIGN_BOTTOM:"bottom",DIRECTION_NORTH:"north",DIRECTION_SOUTH:"south",DIRECTION_EAST:"east",DIRECTION_WEST:"west",TEXT_DIRECTION_DEFAULT:"",TEXT_DIRECTION_AUTO:"auto",TEXT_DIRECTION_LTR:"ltr",TEXT_DIRECTION_RTL:"rtl",DIRECTION_MASK_NONE:0,DIRECTION_MASK_WEST:1,DIRECTION_MASK_NORTH:2,DIRECTION_MASK_SOUTH:4,DIRECTION_MASK_EAST:8,DIRECTION_MASK_ALL:15,ELBOW_VERTICAL:"vertical",ELBOW_HORIZONTAL:"horizontal",EDGESTYLE_ELBOW:"elbowEdgeStyle",EDGESTYLE_ENTITY_RELATION:"entityRelationEdgeStyle",EDGESTYLE_LOOP:"loopEdgeStyle",EDGESTYLE_SIDETOSIDE:"sideToSideEdgeStyle",EDGESTYLE_TOPTOBOTTOM:"topToBottomEdgeStyle",EDGESTYLE_ORTHOGONAL:"orthogonalEdgeStyle",EDGESTYLE_SEGMENT:"segmentEdgeStyle",PERIMETER_ELLIPSE:"ellipsePerimeter",PERIMETER_RECTANGLE:"rectanglePerimeter",PERIMETER_RHOMBUS:"rhombusPerimeter",PERIMETER_HEXAGON:"hexagonPerimeter",PERIMETER_TRIANGLE:"trianglePerimeter"};function mxEventObject(B){this.name=B;this.properties=[];for(var A=1;A<arguments.length;A+=2){if(arguments[A+1]!=null){this.properties[arguments[A]]=arguments[A+1]}}}mxEventObject.prototype.name=null;mxEventObject.prototype.properties=null;mxEventObject.prototype.consumed=false;mxEventObject.prototype.getName=function(){return this.name};mxEventObject.prototype.getProperties=function(){return this.properties};mxEventObject.prototype.getProperty=function(A){return this.properties[A]};mxEventObject.prototype.isConsumed=function(){return this.consumed};mxEventObject.prototype.consume=function(){this.consumed=true};function mxMouseEvent(A,B){this.evt=A;this.state=B;this.sourceState=B}mxMouseEvent.prototype.consumed=false;mxMouseEvent.prototype.evt=null;mxMouseEvent.prototype.graphX=null;mxMouseEvent.prototype.graphY=null;mxMouseEvent.prototype.state=null;mxMouseEvent.prototype.sourceState=null;mxMouseEvent.prototype.getEvent=function(){return this.evt};mxMouseEvent.prototype.getSource=function(){return mxEvent.getSource(this.evt)};mxMouseEvent.prototype.isSource=function(A){if(A!=null){return mxUtils.isAncestorNode(A.node,this.getSource())}return false};mxMouseEvent.prototype.getX=function(){return mxEvent.getClientX(this.getEvent())};mxMouseEvent.prototype.getY=function(){return mxEvent.getClientY(this.getEvent())};mxMouseEvent.prototype.getGraphX=function(){return this.graphX};mxMouseEvent.prototype.getGraphY=function(){return this.graphY};mxMouseEvent.prototype.getState=function(){return this.state};mxMouseEvent.prototype.getCell=function(){var A=this.getState();if(A!=null){return A.cell}return null};mxMouseEvent.prototype.isPopupTrigger=function(){return mxEvent.isPopupTrigger(this.getEvent())};mxMouseEvent.prototype.isConsumed=function(){return this.consumed};mxMouseEvent.prototype.consume=function(A){A=(A!=null)?A:true;if(A&&this.evt.preventDefault){this.evt.preventDefault()}if(mxClient.IS_IE){this.evt.returnValue=true}this.consumed=true};function mxEventSource(A){this.setEventSource(A)}mxEventSource.prototype.eventListeners=null;mxEventSource.prototype.eventsEnabled=true;mxEventSource.prototype.eventSource=null;mxEventSource.prototype.isEventsEnabled=function(){return this.eventsEnabled};mxEventSource.prototype.setEventsEnabled=function(A){this.eventsEnabled=A};mxEventSource.prototype.getEventSource=function(){return this.eventSource};mxEventSource.prototype.setEventSource=function(A){this.eventSource=A};mxEventSource.prototype.addListener=function(A,B){if(this.eventListeners==null){this.eventListeners=[]}this.eventListeners.push(A);this.eventListeners.push(B)};mxEventSource.prototype.removeListener=function(B){if(this.eventListeners!=null){var A=0;while(A<this.eventListeners.length){if(this.eventListeners[A+1]==B){this.eventListeners.splice(A,2)}else{A+=2}}}};mxEventSource.prototype.fireEvent=function(C,B){if(this.eventListeners!=null&&this.isEventsEnabled()){if(C==null){C=new mxEventObject()}if(B==null){B=this.getEventSource()}if(B==null){B=this}var E=[B,C];for(var A=0;A<this.eventListeners.length;A+=2){var D=this.eventListeners[A];if(D==null||D==C.getName()){this.eventListeners[A+1].apply(this,E)}}}};var mxEvent={objects:[],addListener:function(){var A=function(E,C,D){if(E.mxListenerList==null){E.mxListenerList=[];mxEvent.objects.push(E)}var B={name:C,f:D};E.mxListenerList.push(B)};if(window.addEventListener){return function(D,B,C){D.addEventListener(B,C,false);A(D,B,C)}}else{return function(D,B,C){D.attachEvent("on"+B,C);A(D,B,C)}}}(),removeListener:function(){var A=function(H,F,G){if(H.mxListenerList!=null){var E=H.mxListenerList.length;for(var B=0;B<E;B++){var C=H.mxListenerList[B];if(C.f==G){H.mxListenerList.splice(B,1);break}}if(H.mxListenerList.length==0){H.mxListenerList=null;var D=mxUtils.indexOf(mxEvent.objects,H);if(D>=0){mxEvent.objects.splice(D,1)}}}};if(window.removeEventListener){return function(D,B,C){D.removeEventListener(B,C,false);A(D,B,C)}}else{return function(D,B,C){D.detachEvent("on"+B,C);A(D,B,C)}}}(),removeAllListeners:function(C){var B=C.mxListenerList;if(B!=null){while(B.length>0){var A=B[0];mxEvent.removeListener(C,A.name,A.f)}}},addGestureListeners:function(C,B,D,A){if(B!=null){mxEvent.addListener(C,(mxClient.IS_POINTER)?"pointerdown":"mousedown",B)}if(D!=null){mxEvent.addListener(C,(mxClient.IS_POINTER)?"pointermove":"mousemove",D)}if(A!=null){mxEvent.addListener(C,(mxClient.IS_POINTER)?"pointerup":"mouseup",A)}if(!mxClient.IS_POINTER&&mxClient.IS_TOUCH){if(B!=null){mxEvent.addListener(C,"touchstart",B)}if(D!=null){mxEvent.addListener(C,"touchmove",D)}if(A!=null){mxEvent.addListener(C,"touchend",A)}}},removeGestureListeners:function(C,B,D,A){if(B!=null){mxEvent.removeListener(C,(mxClient.IS_POINTER)?"pointerdown":"mousedown",B)}if(D!=null){mxEvent.removeListener(C,(mxClient.IS_POINTER)?"pointermove":"mousemove",D)}if(A!=null){mxEvent.removeListener(C,(mxClient.IS_POINTER)?"pointerup":"mouseup",A)}if(!mxClient.IS_POINTER&&mxClient.IS_TOUCH){if(B!=null){mxEvent.removeListener(C,"touchstart",B)}if(D!=null){mxEvent.removeListener(C,"touchmove",D)}if(A!=null){mxEvent.removeListener(C,"touchend",A)}}},redirectMouseEvents:function(G,C,E,A,H,F,D){var B=function(I){return(typeof(E)=="function")?E(I):E};mxEvent.addGestureListeners(G,function(I){if(A!=null){A(I)}else{if(!mxEvent.isConsumed(I)){C.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(I,B(I)))}}},function(I){if(H!=null){H(I)}else{if(!mxEvent.isConsumed(I)){C.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(I,B(I)))}}},function(I){if(F!=null){F(I)}else{if(!mxEvent.isConsumed(I)){C.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(I,B(I)))}}});mxEvent.addListener(G,"dblclick",function(J){if(D!=null){D(J)}else{if(!mxEvent.isConsumed(J)){var I=B(J);C.dblClick(J,(I!=null)?I.cell:null)}}})},release:function(C){if(C!=null){mxEvent.removeAllListeners(C);var D=C.childNodes;if(D!=null){var A=D.length;for(var B=0;B<A;B+=1){mxEvent.release(D[B])}}}},addMouseWheelListener:function(C){if(C!=null){var A=function(E){if(E==null){E=window.event}var D=0;if(mxClient.IS_FF){D=-E.detail/2}else{D=E.wheelDelta/120}if(D!=0){C(E,D>0)}};if(mxClient.IS_NS&&document.documentMode==null){var B=(mxClient.IS_SF||mxClient.IS_GC)?"mousewheel":"DOMMouseScroll";mxEvent.addListener(window,B,A)}else{mxEvent.addListener(document,"mousewheel",A)}}},disableContextMenu:function(){if(mxClient.IS_IE&&(typeof(document.documentMode)==="undefined"||document.documentMode<9)){return function(A){mxEvent.addListener(A,"contextmenu",function(){return false})}}else{return function(A){A.setAttribute("oncontextmenu","return false;")}}}(),getSource:function(A){return(A.srcElement!=null)?A.srcElement:A.target},isConsumed:function(A){return A.isConsumed!=null&&A.isConsumed},isTouchEvent:function(A){return(A.pointerType!=null)?(A.pointerType=="touch"||A.pointerType===A.MSPOINTER_TYPE_TOUCH):((A.mozInputSource!=null)?A.mozInputSource==5:A.type.indexOf("touch")==0)},isMultiTouchEvent:function(A){return(A.type!=null&&A.type.indexOf("touch")==0&&A.touches!=null&&A.touches.length>1)},isMouseEvent:function(A){return(A.pointerType!=null)?(A.pointerType=="mouse"||A.pointerType===A.MSPOINTER_TYPE_MOUSE):((A.mozInputSource!=null)?A.mozInputSource==1:A.type.indexOf("mouse")==0)},isLeftMouseButton:function(A){if("buttons" in A&&(A.type=="mousedown"||A.type=="mousemove")){return A.buttons==1}else{if("which" in A){return A.which===1}else{return A.button===1}}},isMiddleMouseButton:function(A){if("which" in A){return A.which===2}else{return A.button===4}},isRightMouseButton:function(A){if("which" in A){return A.which===3}else{return A.button===2}},isPopupTrigger:function(A){return mxEvent.isRightMouseButton(A)||(mxClient.IS_MAC&&mxEvent.isControlDown(A)&&!mxEvent.isShiftDown(A)&&!mxEvent.isMetaDown(A)&&!mxEvent.isAltDown(A))},isShiftDown:function(A){return(A!=null)?A.shiftKey:false},isAltDown:function(A){return(A!=null)?A.altKey:false},isControlDown:function(A){return(A!=null)?A.ctrlKey:false},isMetaDown:function(A){return(A!=null)?A.metaKey:false},getMainEvent:function(A){if((A.type=="touchstart"||A.type=="touchmove")&&A.touches!=null&&A.touches[0]!=null){A=A.touches[0]}else{if(A.type=="touchend"&&A.changedTouches!=null&&A.changedTouches[0]!=null){A=A.changedTouches[0]}}return A},getClientX:function(A){return mxEvent.getMainEvent(A).clientX},getClientY:function(A){return mxEvent.getMainEvent(A).clientY},consume:function(B,C,A){C=(C!=null)?C:true;A=(A!=null)?A:true;if(C){if(B.preventDefault){if(A){B.stopPropagation()}B.preventDefault()}else{if(A){B.cancelBubble=true}}}B.isConsumed=true;if(!B.preventDefault){B.returnValue=false}},LABEL_HANDLE:-1,ROTATION_HANDLE:-2,CUSTOM_HANDLE:-100,VIRTUAL_HANDLE:-100000,MOUSE_DOWN:"mouseDown",MOUSE_MOVE:"mouseMove",MOUSE_UP:"mouseUp",ACTIVATE:"activate",RESIZE_START:"resizeStart",RESIZE:"resize",RESIZE_END:"resizeEnd",MOVE_START:"moveStart",MOVE:"move",MOVE_END:"moveEnd",PAN_START:"panStart",PAN:"pan",PAN_END:"panEnd",MINIMIZE:"minimize",NORMALIZE:"normalize",MAXIMIZE:"maximize",HIDE:"hide",SHOW:"show",CLOSE:"close",DESTROY:"destroy",REFRESH:"refresh",SIZE:"size",SELECT:"select",FIRED:"fired",FIRE_MOUSE_EVENT:"fireMouseEvent",GESTURE:"gesture",TAP_AND_HOLD:"tapAndHold",GET:"get",RECEIVE:"receive",CONNECT:"connect",DISCONNECT:"disconnect",SUSPEND:"suspend",RESUME:"resume",MARK:"mark",ROOT:"root",POST:"post",OPEN:"open",SAVE:"save",BEFORE_ADD_VERTEX:"beforeAddVertex",ADD_VERTEX:"addVertex",AFTER_ADD_VERTEX:"afterAddVertex",DONE:"done",EXECUTE:"execute",EXECUTED:"executed",BEGIN_UPDATE:"beginUpdate",START_EDIT:"startEdit",END_UPDATE:"endUpdate",END_EDIT:"endEdit",BEFORE_UNDO:"beforeUndo",UNDO:"undo",REDO:"redo",CHANGE:"change",NOTIFY:"notify",LAYOUT_CELLS:"layoutCells",CLICK:"click",SCALE:"scale",TRANSLATE:"translate",SCALE_AND_TRANSLATE:"scaleAndTranslate",UP:"up",DOWN:"down",ADD:"add",REMOVE:"remove",CLEAR:"clear",ADD_CELLS:"addCells",CELLS_ADDED:"cellsAdded",MOVE_CELLS:"moveCells",CELLS_MOVED:"cellsMoved",RESIZE_CELLS:"resizeCells",CELLS_RESIZED:"cellsResized",TOGGLE_CELLS:"toggleCells",CELLS_TOGGLED:"cellsToggled",ORDER_CELLS:"orderCells",CELLS_ORDERED:"cellsOrdered",REMOVE_CELLS:"removeCells",CELLS_REMOVED:"cellsRemoved",GROUP_CELLS:"groupCells",UNGROUP_CELLS:"ungroupCells",REMOVE_CELLS_FROM_PARENT:"removeCellsFromParent",FOLD_CELLS:"foldCells",CELLS_FOLDED:"cellsFolded",ALIGN_CELLS:"alignCells",LABEL_CHANGED:"labelChanged",CONNECT_CELL:"connectCell",CELL_CONNECTED:"cellConnected",SPLIT_EDGE:"splitEdge",FLIP_EDGE:"flipEdge",START_EDITING:"startEditing",EDITING_STARTED:"editingStarted",EDITING_STOPPED:"editingStopped",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",UPDATE_CELL_SIZE:"updateCellSize",ESCAPE:"escape",CLICK:"click",DOUBLE_CLICK:"doubleClick",START:"start",RESET:"reset"};function mxXmlRequest(C,F,D,E,B,A){this.url=C;this.params=F;this.method=D||"POST";this.async=(E!=null)?E:true;this.username=B;this.password=A}mxXmlRequest.prototype.url=null;mxXmlRequest.prototype.params=null;mxXmlRequest.prototype.method=null;mxXmlRequest.prototype.async=null;mxXmlRequest.prototype.binary=false;mxXmlRequest.prototype.withCredentials=false;mxXmlRequest.prototype.username=null;mxXmlRequest.prototype.password=null;mxXmlRequest.prototype.request=null;mxXmlRequest.prototype.decodeSimulateValues=false;mxXmlRequest.prototype.isBinary=function(){return this.binary};mxXmlRequest.prototype.setBinary=function(A){this.binary=A};mxXmlRequest.prototype.getText=function(){return this.request.responseText};mxXmlRequest.prototype.isReady=function(){return this.request.readyState==4};mxXmlRequest.prototype.getDocumentElement=function(){var A=this.getXml();if(A!=null){return A.documentElement}return null};mxXmlRequest.prototype.getXml=function(){var A=this.request.responseXML;if(document.documentMode>=9||A==null||A.documentElement==null){A=mxUtils.parseXml(this.request.responseText)}return A};mxXmlRequest.prototype.getText=function(){return this.request.responseText};mxXmlRequest.prototype.getStatus=function(){return this.request.status};mxXmlRequest.prototype.create=function(){if(window.XMLHttpRequest){return function(){var A=new XMLHttpRequest();if(this.isBinary()&&A.overrideMimeType){A.overrideMimeType("text/plain; charset=x-user-defined")}return A}}else{if(typeof(ActiveXObject)!="undefined"){return function(){return new ActiveXObject("Microsoft.XMLHTTP")}}}}();mxXmlRequest.prototype.send=function(D,A,C,B){this.request=this.create();if(this.request!=null){if(D!=null){this.request.onreadystatechange=mxUtils.bind(this,function(){if(this.isReady()){D(this);this.onreadystatechaange=null}})}this.request.open(this.method,this.url,this.async,this.username,this.password);this.setRequestHeaders(this.request,this.params);if(window.XMLHttpRequest&&this.withCredentials){this.request.withCredentials="true"}if(!mxClient.IS_QUIRKS&&(document.documentMode==null||document.documentMode>9)&&window.XMLHttpRequest&&C!=null&&B!=null){this.request.timeout=C;this.request.ontimeout=B}this.request.send(this.params)}};mxXmlRequest.prototype.setRequestHeaders=function(A,B){if(B!=null){A.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}};mxXmlRequest.prototype.simulate=function(H,J){H=H||document;var B=null;if(H==document){B=window.onbeforeunload;window.onbeforeunload=null}var F=H.createElement("form");F.setAttribute("method",this.method);F.setAttribute("action",this.url);if(J!=null){F.setAttribute("target",J)}F.style.display="none";F.style.visibility="hidden";var A=(this.params.indexOf("&")>0)?this.params.split("&"):this.params.split();for(var G=0;G<A.length;G++){var D=A[G].indexOf("=");if(D>0){var C=A[G].substring(0,D);var E=A[G].substring(D+1);if(this.decodeSimulateValues){E=decodeURIComponent(E)}var I=H.createElement("textarea");I.setAttribute("wrap","off");I.setAttribute("name",C);mxUtils.write(I,E);F.appendChild(I)}}H.body.appendChild(F);F.submit();if(F.parentNode!=null){F.parentNode.removeChild(F)}if(B!=null){window.onbeforeunload=B}};var mxClipboard={STEPSIZE:10,insertCount:1,cells:null,setCells:function(A){mxClipboard.cells=A},getCells:function(){return mxClipboard.cells},isEmpty:function(){return mxClipboard.getCells()==null},cut:function(A,B){B=mxClipboard.copy(A,B);mxClipboard.insertCount=0;mxClipboard.removeCells(A,B);return B},removeCells:function(A,B){A.removeCells(B)},copy:function(B,C){C=C||B.getSelectionCells();var A=B.getExportableCells(B.model.getTopmostCells(C));mxClipboard.insertCount=1;mxClipboard.setCells(B.cloneCells(A));return A},paste:function(B){var C=null;if(!mxClipboard.isEmpty()){C=B.getImportableCells(mxClipboard.getCells());var A=mxClipboard.insertCount*mxClipboard.STEPSIZE;var D=B.getDefaultParent();C=B.importCells(C,A,A,D);mxClipboard.insertCount++;B.setSelectionCells(C)}return C}};function mxWindow(E,I,F,G,D,J,A,H,C,B){if(I!=null){A=(A!=null)?A:true;this.content=I;this.init(F,G,D,J,B);this.installMaximizeHandler();this.installMinimizeHandler();this.installCloseHandler();this.setMinimizable(A);this.setTitle(E);if(H==null||H){this.installMoveHandler()}if(C!=null&&C.parentNode!=null){C.parentNode.replaceChild(this.div,C)}else{document.body.appendChild(this.div)}}}mxWindow.prototype=new mxEventSource();mxWindow.prototype.constructor=mxWindow;mxWindow.prototype.closeImage=mxClient.imageBasePath+"/close.gif";mxWindow.prototype.minimizeImage=mxClient.imageBasePath+"/minimize.gif";mxWindow.prototype.normalizeImage=mxClient.imageBasePath+"/normalize.gif";mxWindow.prototype.maximizeImage=mxClient.imageBasePath+"/maximize.gif";mxWindow.prototype.resizeImage=mxClient.imageBasePath+"/resize.gif";mxWindow.prototype.visible=false;mxWindow.prototype.minimumSize=new mxRectangle(0,0,50,40);mxWindow.prototype.destroyOnClose=true;mxWindow.prototype.contentHeightCorrection=(document.documentMode==8||document.documentMode==7)?6:2;mxWindow.prototype.title=null;mxWindow.prototype.content=null;mxWindow.prototype.init=function(F,G,E,A,D){D=(D!=null)?D:"mxWindow";this.div=document.createElement("div");this.div.className=D;this.div.style.left=F+"px";this.div.style.top=G+"px";this.table=document.createElement("table");this.table.className=D;if(mxClient.IS_POINTER){this.div.style.touchAction="none"}if(E!=null){if(!mxClient.IS_QUIRKS){this.div.style.width=E+"px"}this.table.style.width=E+"px"}if(A!=null){if(!mxClient.IS_QUIRKS){this.div.style.height=A+"px"}this.table.style.height=A+"px"}var C=document.createElement("tbody");var B=document.createElement("tr");this.title=document.createElement("td");this.title.className=D+"Title";this.buttons=document.createElement("div");this.buttons.style.position="absolute";this.buttons.style.display="inline-block";this.buttons.style.right="4px";this.buttons.style.top="5px";this.title.appendChild(this.buttons);B.appendChild(this.title);C.appendChild(B);B=document.createElement("tr");this.td=document.createElement("td");this.td.className=D+"Pane";if(document.documentMode==7){this.td.style.height="100%"}this.contentWrapper=document.createElement("div");this.contentWrapper.className=D+"Pane";this.contentWrapper.style.width="100%";this.contentWrapper.appendChild(this.content);if(mxClient.IS_QUIRKS||this.content.nodeName.toUpperCase()!="DIV"){this.contentWrapper.style.height="100%"}this.td.appendChild(this.contentWrapper);B.appendChild(this.td);C.appendChild(B);this.table.appendChild(C);this.div.appendChild(this.table);var H=mxUtils.bind(this,function(I){this.activate()});mxEvent.addGestureListeners(this.title,H);mxEvent.addGestureListeners(this.table,H);this.hide()};mxWindow.prototype.setTitle=function(B){var A=this.title.firstChild;while(A!=null){var C=A.nextSibling;if(A.nodeType==mxConstants.NODETYPE_TEXT){A.parentNode.removeChild(A)}A=C}mxUtils.write(this.title,B||"");this.title.appendChild(this.buttons)};mxWindow.prototype.setScrollable=function(A){if(navigator.userAgent.indexOf("Presto/2.5")<0){if(A){this.contentWrapper.style.overflow="auto"}else{this.contentWrapper.style.overflow="hidden"}}};mxWindow.prototype.activate=function(){if(mxWindow.activeWindow!=this){var B=mxUtils.getCurrentStyle(this.getElement());var D=(B!=null)?B.zIndex:3;if(mxWindow.activeWindow){var C=mxWindow.activeWindow.getElement();if(C!=null&&C.style!=null){C.style.zIndex=D}}var A=mxWindow.activeWindow;this.getElement().style.zIndex=parseInt(D)+1;mxWindow.activeWindow=this;this.fireEvent(new mxEventObject(mxEvent.ACTIVATE,"previousWindow",A))}};mxWindow.prototype.getElement=function(){return this.div};mxWindow.prototype.fit=function(){mxUtils.fit(this.div)};mxWindow.prototype.isResizable=function(){if(this.resize!=null){return this.resize.style.display!="none"}return false};mxWindow.prototype.setResizable=function(C){if(C){if(this.resize==null){this.resize=document.createElement("img");this.resize.style.position="absolute";this.resize.style.bottom="2px";this.resize.style.right="2px";this.resize.setAttribute("src",mxClient.imageBasePath+"/resize.gif");this.resize.style.cursor="nw-resize";var D=null;var E=null;var F=null;var H=null;var A=mxUtils.bind(this,function(I){this.activate();D=mxEvent.getClientX(I);E=mxEvent.getClientY(I);F=this.div.offsetWidth;H=this.div.offsetHeight;mxEvent.addGestureListeners(document,null,B,G);this.fireEvent(new mxEventObject(mxEvent.RESIZE_START,"event",I));mxEvent.consume(I)});var B=mxUtils.bind(this,function(J){if(D!=null&&E!=null){var I=mxEvent.getClientX(J)-D;var K=mxEvent.getClientY(J)-E;this.setSize(F+I,H+K);this.fireEvent(new mxEventObject(mxEvent.RESIZE,"event",J));mxEvent.consume(J)}});var G=mxUtils.bind(this,function(I){if(D!=null&&E!=null){D=null;E=null;mxEvent.removeGestureListeners(document,null,B,G);this.fireEvent(new mxEventObject(mxEvent.RESIZE_END,"event",I));mxEvent.consume(I)}});mxEvent.addGestureListeners(this.resize,A,B,G);this.div.appendChild(this.resize)}else{this.resize.style.display="inline"}}else{if(this.resize!=null){this.resize.style.display="none"}}};mxWindow.prototype.setSize=function(B,A){B=Math.max(this.minimumSize.width,B);A=Math.max(this.minimumSize.height,A);if(!mxClient.IS_QUIRKS){this.div.style.width=B+"px";this.div.style.height=A+"px"}this.table.style.width=B+"px";this.table.style.height=A+"px";if(!mxClient.IS_QUIRKS){this.contentWrapper.style.height=(this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection)+"px"}};mxWindow.prototype.setMinimizable=function(A){this.minimize.style.display=(A)?"":"none"};mxWindow.prototype.getMinimumSize=function(){return new mxRectangle(0,0,0,this.title.offsetHeight)};mxWindow.prototype.installMinimizeHandler=function(){this.minimize=document.createElement("img");this.minimize.setAttribute("src",this.minimizeImage);this.minimize.setAttribute("title","Minimize");this.minimize.style.cursor="pointer";this.minimize.style.marginLeft="2px";this.minimize.style.display="none";this.buttons.appendChild(this.minimize);var A=false;var D=null;var B=null;var C=mxUtils.bind(this,function(E){this.activate();if(!A){A=true;this.minimize.setAttribute("src",this.normalizeImage);this.minimize.setAttribute("title","Normalize");this.contentWrapper.style.display="none";D=this.maximize.style.display;this.maximize.style.display="none";B=this.table.style.height;var F=this.getMinimumSize();if(F.height>0){if(!mxClient.IS_QUIRKS){this.div.style.height=F.height+"px"}this.table.style.height=F.height+"px"}if(F.width>0){if(!mxClient.IS_QUIRKS){this.div.style.width=F.width+"px"}this.table.style.width=F.width+"px"}if(this.resize!=null){this.resize.style.visibility="hidden"}this.fireEvent(new mxEventObject(mxEvent.MINIMIZE,"event",E))}else{A=false;this.minimize.setAttribute("src",this.minimizeImage);this.minimize.setAttribute("title","Minimize");this.contentWrapper.style.display="";this.maximize.style.display=D;if(!mxClient.IS_QUIRKS){this.div.style.height=B}this.table.style.height=B;if(this.resize!=null){this.resize.style.visibility=""}this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",E))}mxEvent.consume(E)});mxEvent.addGestureListeners(this.minimize,C)};mxWindow.prototype.setMaximizable=function(A){this.maximize.style.display=(A)?"":"none"};mxWindow.prototype.installMaximizeHandler=function(){this.maximize=document.createElement("img");this.maximize.setAttribute("src",this.maximizeImage);this.maximize.setAttribute("title","Maximize");this.maximize.style.cursor="default";this.maximize.style.marginLeft="2px";this.maximize.style.cursor="pointer";this.maximize.style.display="none";this.buttons.appendChild(this.maximize);var D=false;var E=null;var F=null;var B=null;var C=null;var G=null;var A=mxUtils.bind(this,function(I){this.activate();if(this.maximize.style.display!="none"){if(!D){D=true;this.maximize.setAttribute("src",this.normalizeImage);this.maximize.setAttribute("title","Normalize");this.contentWrapper.style.display="";G=this.minimize.style.display;this.minimize.style.display="none";E=parseInt(this.div.style.left);F=parseInt(this.div.style.top);B=this.table.style.height;C=this.table.style.width;this.div.style.left="0px";this.div.style.top="0px";var H=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0);if(!mxClient.IS_QUIRKS){this.div.style.width=(document.body.clientWidth-2)+"px";this.div.style.height=(H-2)+"px"}this.table.style.width=(document.body.clientWidth-2)+"px";this.table.style.height=(H-2)+"px";if(this.resize!=null){this.resize.style.visibility="hidden"}if(!mxClient.IS_QUIRKS){var J=mxUtils.getCurrentStyle(this.contentWrapper);if(J.overflow=="auto"||this.resize!=null){this.contentWrapper.style.height=(this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection)+"px"}}this.fireEvent(new mxEventObject(mxEvent.MAXIMIZE,"event",I))}else{D=false;this.maximize.setAttribute("src",this.maximizeImage);this.maximize.setAttribute("title","Maximize");this.contentWrapper.style.display="";this.minimize.style.display=G;this.div.style.left=E+"px";this.div.style.top=F+"px";if(!mxClient.IS_QUIRKS){this.div.style.height=B;this.div.style.width=C;var J=mxUtils.getCurrentStyle(this.contentWrapper);if(J.overflow=="auto"||this.resize!=null){this.contentWrapper.style.height=(this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection)+"px"}}this.table.style.height=B;this.table.style.width=C;if(this.resize!=null){this.resize.style.visibility=""}this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",I))}mxEvent.consume(I)}});mxEvent.addGestureListeners(this.maximize,A);mxEvent.addListener(this.title,"dblclick",A)};mxWindow.prototype.installMoveHandler=function(){this.title.style.cursor="move";mxEvent.addGestureListeners(this.title,mxUtils.bind(this,function(C){var A=mxEvent.getClientX(C);var D=mxEvent.getClientY(C);var E=this.getX();var F=this.getY();var G=mxUtils.bind(this,function(I){var H=mxEvent.getClientX(I)-A;var J=mxEvent.getClientY(I)-D;this.setLocation(E+H,F+J);this.fireEvent(new mxEventObject(mxEvent.MOVE,"event",I));mxEvent.consume(I)});var B=mxUtils.bind(this,function(H){mxEvent.removeGestureListeners(document,null,G,B);this.fireEvent(new mxEventObject(mxEvent.MOVE_END,"event",H));mxEvent.consume(H)});mxEvent.addGestureListeners(document,null,G,B);this.fireEvent(new mxEventObject(mxEvent.MOVE_START,"event",C));mxEvent.consume(C)}));if(mxClient.IS_POINTER){this.title.style.touchAction="none"}};mxWindow.prototype.setLocation=function(A,B){this.div.style.left=A+"px";this.div.style.top=B+"px"};mxWindow.prototype.getX=function(){return parseInt(this.div.style.left)};mxWindow.prototype.getY=function(){return parseInt(this.div.style.top)};mxWindow.prototype.installCloseHandler=function(){this.closeImg=document.createElement("img");this.closeImg.setAttribute("src",this.closeImage);this.closeImg.setAttribute("title","Close");this.closeImg.style.marginLeft="2px";this.closeImg.style.cursor="pointer";this.closeImg.style.display="none";this.buttons.appendChild(this.closeImg);mxEvent.addGestureListeners(this.closeImg,mxUtils.bind(this,function(A){this.fireEvent(new mxEventObject(mxEvent.CLOSE,"event",A));if(this.destroyOnClose){this.destroy()}else{this.setVisible(false)}mxEvent.consume(A)}))};mxWindow.prototype.setImage=function(A){this.image=document.createElement("img");this.image.setAttribute("src",A);this.image.setAttribute("align","left");this.image.style.marginRight="4px";this.image.style.marginLeft="0px";this.image.style.marginTop="-2px";this.title.insertBefore(this.image,this.title.firstChild)};mxWindow.prototype.setClosable=function(A){this.closeImg.style.display=(A)?"":"none"};mxWindow.prototype.isVisible=function(){if(this.div!=null){return this.div.style.display!="none"}return false};mxWindow.prototype.setVisible=function(A){if(this.div!=null&&this.isVisible()!=A){if(A){this.show()}else{this.hide()}}};mxWindow.prototype.show=function(){this.div.style.display="";this.activate();var A=mxUtils.getCurrentStyle(this.contentWrapper);if(!mxClient.IS_QUIRKS&&(A.overflow=="auto"||this.resize!=null)){this.contentWrapper.style.height=(this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection)+"px"}this.fireEvent(new mxEventObject(mxEvent.SHOW))};mxWindow.prototype.hide=function(){this.div.style.display="none";this.fireEvent(new mxEventObject(mxEvent.HIDE))};mxWindow.prototype.destroy=function(){this.fireEvent(new mxEventObject(mxEvent.DESTROY));if(this.div!=null){mxEvent.release(this.div);this.div.parentNode.removeChild(this.div);this.div=null}this.title=null;this.content=null;this.contentWrapper=null};function mxForm(A){this.table=document.createElement("table");this.table.className=A;this.body=document.createElement("tbody");this.table.appendChild(this.body)}mxForm.prototype.table=null;mxForm.prototype.body=false;mxForm.prototype.getTable=function(){return this.table};mxForm.prototype.addButtons=function(E,B){var C=document.createElement("tr");var D=document.createElement("td");C.appendChild(D);D=document.createElement("td");var A=document.createElement("button");mxUtils.write(A,mxResources.get("ok")||"OK");D.appendChild(A);mxEvent.addListener(A,"click",function(){E()});A=document.createElement("button");mxUtils.write(A,mxResources.get("cancel")||"Cancel");D.appendChild(A);mxEvent.addListener(A,"click",function(){B()});C.appendChild(D);this.body.appendChild(C)};mxForm.prototype.addText=function(A,C){var B=document.createElement("input");B.setAttribute("type","text");B.value=C;return this.addField(A,B)};mxForm.prototype.addCheckbox=function(A,C){var B=document.createElement("input");B.setAttribute("type","checkbox");this.addField(A,B);if(C){B.checked=true}return B};mxForm.prototype.addTextarea=function(A,C,D){var B=document.createElement("textarea");if(mxClient.IS_NS){D--}B.setAttribute("rows",D||2);B.value=C;return this.addField(A,B)};mxForm.prototype.addCombo=function(C,B,A){var D=document.createElement("select");if(A!=null){D.setAttribute("size",A)}if(B){D.setAttribute("multiple","true")}return this.addField(C,D)};mxForm.prototype.addOption=function(E,A,D,B){var C=document.createElement("option");mxUtils.writeln(C,A);C.setAttribute("value",D);if(B){C.setAttribute("selected",B)}E.appendChild(C)};mxForm.prototype.addField=function(C,D){var B=document.createElement("tr");var A=document.createElement("td");mxUtils.write(A,C);B.appendChild(A);A=document.createElement("td");A.appendChild(D);B.appendChild(A);this.body.appendChild(B);return D};function mxImage(C,B,A){this.src=C;this.width=B;this.height=A}mxImage.prototype.src=null;mxImage.prototype.width=null;mxImage.prototype.height=null;function mxDivResizer(B,A){if(B.nodeName.toLowerCase()=="div"){if(A==null){A=window}this.div=B;var C=mxUtils.getCurrentStyle(B);if(C!=null){this.resizeWidth=C.width=="auto";this.resizeHeight=C.height=="auto"}mxEvent.addListener(A,"resize",mxUtils.bind(this,function(D){if(!this.handlingResize){this.handlingResize=true;this.resize();this.handlingResize=false}}));this.resize()}}mxDivResizer.prototype.resizeWidth=true;mxDivResizer.prototype.resizeHeight=true;mxDivResizer.prototype.handlingResize=false;mxDivResizer.prototype.resize=function(){var D=this.getDocumentWidth();var A=this.getDocumentHeight();var C=parseInt(this.div.style.left);var B=parseInt(this.div.style.right);var E=parseInt(this.div.style.top);var F=parseInt(this.div.style.bottom);if(this.resizeWidth&&!isNaN(C)&&!isNaN(B)&&C>=0&&B>=0&&D-B-C>0){this.div.style.width=(D-B-C)+"px"}if(this.resizeHeight&&!isNaN(E)&&!isNaN(F)&&E>=0&&F>=0&&A-E-F>0){this.div.style.height=(A-E-F)+"px"}};mxDivResizer.prototype.getDocumentWidth=function(){return document.body.clientWidth};mxDivResizer.prototype.getDocumentHeight=function(){return document.body.clientHeight};function mxDragSource(B,A){this.element=B;this.dropHandler=A;mxEvent.addGestureListeners(B,mxUtils.bind(this,function(C){this.mouseDown(C)}));mxEvent.addListener(B,"dragstart",function(C){mxEvent.consume(C)});this.eventConsumer=function(C,D){var F=D.getProperty("eventName");var E=D.getProperty("event");if(F!=mxEvent.MOUSE_DOWN){E.consume()}}}mxDragSource.prototype.element=null;mxDragSource.prototype.dropHandler=null;mxDragSource.prototype.dragOffset=null;mxDragSource.prototype.dragElement=null;mxDragSource.prototype.previewElement=null;mxDragSource.prototype.enabled=true;mxDragSource.prototype.currentGraph=null;mxDragSource.prototype.currentDropTarget=null;mxDragSource.prototype.currentPoint=null;mxDragSource.prototype.currentGuide=null;mxDragSource.prototype.currentHighlight=null;mxDragSource.prototype.autoscroll=true;mxDragSource.prototype.guidesEnabled=true;mxDragSource.prototype.gridEnabled=true;mxDragSource.prototype.highlightDropTargets=true;mxDragSource.prototype.dragElementZIndex=100;mxDragSource.prototype.dragElementOpacity=70;mxDragSource.prototype.isEnabled=function(){return this.enabled};mxDragSource.prototype.setEnabled=function(A){this.enabled=A};mxDragSource.prototype.isGuidesEnabled=function(){return this.guidesEnabled};mxDragSource.prototype.setGuidesEnabled=function(A){this.guidesEnabled=A};mxDragSource.prototype.isGridEnabled=function(){return this.gridEnabled};mxDragSource.prototype.setGridEnabled=function(A){this.gridEnabled=A};mxDragSource.prototype.getGraphForEvent=function(A){return null};mxDragSource.prototype.getDropTarget=function(A,B,C,D){return A.getCellAt(B,C)};mxDragSource.prototype.createDragElement=function(A){return this.element.cloneNode(true)};mxDragSource.prototype.createPreviewElement=function(A){return null};mxDragSource.prototype.isActive=function(){return this.mouseMoveHandler!=null};mxDragSource.prototype.reset=function(){if(this.currentGraph!=null){this.dragExit(this.currentGraph);this.currentGraph=null}this.removeDragElement();this.removeListeners();this.stopDrag()};mxDragSource.prototype.mouseDown=function(A){if(this.enabled&&!mxEvent.isConsumed(A)&&this.mouseMoveHandler==null){this.startDrag(A);this.mouseMoveHandler=mxUtils.bind(this,this.mouseMove);this.mouseUpHandler=mxUtils.bind(this,this.mouseUp);mxEvent.addGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler);if(mxClient.IS_TOUCH&&!mxEvent.isMouseEvent(A)){this.eventSource=mxEvent.getSource(A);mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler)}}};mxDragSource.prototype.startDrag=function(A){this.dragElement=this.createDragElement(A);this.dragElement.style.position="absolute";this.dragElement.style.zIndex=this.dragElementZIndex;mxUtils.setOpacity(this.dragElement,this.dragElementOpacity)};mxDragSource.prototype.stopDrag=function(){this.removeDragElement()};mxDragSource.prototype.removeDragElement=function(){if(this.dragElement!=null){if(this.dragElement.parentNode!=null){this.dragElement.parentNode.removeChild(this.dragElement)}this.dragElement=null}};mxDragSource.prototype.graphContainsEvent=function(B,F){var D=mxEvent.getClientX(F);var E=mxEvent.getClientY(F);var A=mxUtils.getOffset(B.container);var C=mxUtils.getScrollOrigin();return D>=A.x-C.x&&E>=A.y-C.y&&D<=A.x-C.x+B.container.offsetWidth&&E<=A.y-C.y+B.container.offsetHeight};mxDragSource.prototype.mouseMove=function(B){var C=this.getGraphForEvent(B);if(C!=null&&!this.graphContainsEvent(C,B)){C=null}if(C!=this.currentGraph){if(this.currentGraph!=null){this.dragExit(this.currentGraph,B)}this.currentGraph=C;if(this.currentGraph!=null){this.dragEnter(this.currentGraph,B)}}if(this.currentGraph!=null){this.dragOver(this.currentGraph,B)}if(this.dragElement!=null&&(this.previewElement==null||this.previewElement.style.visibility!="visible")){var D=mxEvent.getClientX(B);var E=mxEvent.getClientY(B);if(this.dragElement.parentNode==null){document.body.appendChild(this.dragElement)}this.dragElement.style.visibility="visible";if(this.dragOffset!=null){D+=this.dragOffset.x;E+=this.dragOffset.y}var A=mxUtils.getDocumentScrollOrigin(document);this.dragElement.style.left=(D+A.x)+"px";this.dragElement.style.top=(E+A.y)+"px"}else{if(this.dragElement!=null){this.dragElement.style.visibility="hidden"}}mxEvent.consume(B)};mxDragSource.prototype.mouseUp=function(A){if(this.currentGraph!=null){if(this.currentPoint!=null&&(this.previewElement==null||this.previewElement.style.visibility!="hidden")){var D=this.currentGraph.view.scale;var B=this.currentGraph.view.translate;var C=this.currentPoint.x/D-B.x;var E=this.currentPoint.y/D-B.y;this.drop(this.currentGraph,A,this.currentDropTarget,C,E)}this.dragExit(this.currentGraph);this.currentGraph=null}this.stopDrag();this.removeListeners();mxEvent.consume(A)};mxDragSource.prototype.removeListeners=function(){if(this.eventSource!=null){mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler);this.eventSource=null}mxEvent.removeGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler);this.mouseMoveHandler=null;this.mouseUpHandler=null};mxDragSource.prototype.dragEnter=function(A,B){A.isMouseDown=true;A.isMouseTrigger=mxEvent.isMouseEvent(B);this.previewElement=this.createPreviewElement(A);if(this.isGuidesEnabled()&&this.previewElement!=null){this.currentGuide=new mxGuide(A,A.graphHandler.getGuideStates())}if(this.highlightDropTargets){this.currentHighlight=new mxCellHighlight(A,mxConstants.DROP_TARGET_COLOR)}A.addListener(mxEvent.FIRE_MOUSE_EVENT,this.eventConsumer)};mxDragSource.prototype.dragExit=function(A,B){this.currentDropTarget=null;this.currentPoint=null;A.isMouseDown=false;A.removeListener(this.eventConsumer);if(this.previewElement!=null){if(this.previewElement.parentNode!=null){this.previewElement.parentNode.removeChild(this.previewElement)}this.previewElement=null}if(this.currentGuide!=null){this.currentGuide.destroy();this.currentGuide=null}if(this.currentHighlight!=null){this.currentHighlight.destroy();this.currentHighlight=null}};mxDragSource.prototype.dragOver=function(E,C){var D=mxUtils.getOffset(E.container);var M=mxUtils.getScrollOrigin(E.container);var N=mxEvent.getClientX(C)-D.x+M.x-E.panDx;var O=mxEvent.getClientY(C)-D.y+M.y-E.panDy;if(E.autoScroll&&(this.autoscroll==null||this.autoscroll)){E.scrollPointToVisible(N,O,E.autoExtend)}if(this.currentHighlight!=null&&E.isDropEnabled()){this.currentDropTarget=this.getDropTarget(E,N,O,C);var L=E.getView().getState(this.currentDropTarget);this.currentHighlight.highlight(L)}if(this.previewElement!=null){if(this.previewElement.parentNode==null){E.container.appendChild(this.previewElement);this.previewElement.style.zIndex="3";this.previewElement.style.position="absolute"}var F=this.isGridEnabled()&&E.isGridEnabledEvent(C);var J=true;if(this.currentGuide!=null&&this.currentGuide.isEnabledForEvent(C)){var I=parseInt(this.previewElement.style.width);var K=parseInt(this.previewElement.style.height);var A=new mxRectangle(0,0,I,K);var H=new mxPoint(N,O);H=this.currentGuide.move(A,H,F);J=false;N=H.x;O=H.y}else{if(F){var B=E.view.scale;var G=E.view.translate;var P=E.gridSize/2;N=(E.snap(N/B-G.x-P)+G.x)*B;O=(E.snap(O/B-G.y-P)+G.y)*B}}if(this.currentGuide!=null&&J){this.currentGuide.hide()}if(this.previewOffset!=null){N+=this.previewOffset.x;O+=this.previewOffset.y}this.previewElement.style.left=Math.round(N)+"px";this.previewElement.style.top=Math.round(O)+"px";this.previewElement.style.visibility="visible"}this.currentPoint=new mxPoint(N,O)};mxDragSource.prototype.drop=function(B,E,A,C,D){this.dropHandler(B,E,A,C,D);if(B.container.style.visibility!="hidden"){B.container.focus()}};function mxToolbar(A){this.container=A}mxToolbar.prototype=new mxEventSource();mxToolbar.prototype.constructor=mxToolbar;mxToolbar.prototype.container=null;mxToolbar.prototype.enabled=true;mxToolbar.prototype.noReset=false;mxToolbar.prototype.updateDefaultMode=true;mxToolbar.prototype.addItem=function(G,F,I,E,D,C){var A=document.createElement((F!=null)?"img":"button");var H=D||((C!=null)?"mxToolbarMode":"mxToolbarItem");A.className=H;A.setAttribute("src",F);if(G!=null){if(F!=null){A.setAttribute("title",G)}else{mxUtils.write(A,G)}}this.container.appendChild(A);if(I!=null){mxEvent.addListener(A,"click",I);if(mxClient.IS_TOUCH){mxEvent.addListener(A,"touchend",I)}}var B=mxUtils.bind(this,function(J){if(E!=null){A.setAttribute("src",F)}else{A.style.backgroundColor=""}});mxEvent.addGestureListeners(A,mxUtils.bind(this,function(K){if(E!=null){A.setAttribute("src",E)}else{A.style.backgroundColor="gray"}if(C!=null){if(this.menu==null){this.menu=new mxPopupMenu();this.menu.init()}var L=this.currentImg;if(this.menu.isMenuShowing()){this.menu.hideMenu()}if(L!=A){this.currentImg=A;this.menu.factoryMethod=C;var J=new mxPoint(A.offsetLeft,A.offsetTop+A.offsetHeight);this.menu.popup(J.x,J.y,null,K);if(this.menu.isMenuShowing()){A.className=H+"Selected";this.menu.hideMenu=function(){mxPopupMenu.prototype.hideMenu.apply(this);A.className=H;this.currentImg=null}}}}}),null,B);mxEvent.addListener(A,"mouseout",B);return A};mxToolbar.prototype.addCombo=function(B){var C=document.createElement("div");C.style.display="inline";C.className="mxToolbarComboContainer";var A=document.createElement("select");A.className=B||"mxToolbarCombo";C.appendChild(A);this.container.appendChild(C);return A};mxToolbar.prototype.addActionCombo=function(B,A){var C=document.createElement("select");C.className=A||"mxToolbarCombo";this.addOption(C,B,null);mxEvent.addListener(C,"change",function(D){var E=C.options[C.selectedIndex];C.selectedIndex=0;if(E.funct!=null){E.funct(D)}});this.container.appendChild(C);return C};mxToolbar.prototype.addOption=function(D,B,C){var A=document.createElement("option");mxUtils.writeln(A,B);if(typeof(C)=="function"){A.funct=C}else{A.setAttribute("value",C)}D.appendChild(A);return A};mxToolbar.prototype.addSwitchMode=function(D,E,A,F,C){var B=document.createElement("img");B.initialClassName=C||"mxToolbarMode";B.className=B.initialClassName;B.setAttribute("src",E);B.altIcon=F;if(D!=null){B.setAttribute("title",D)}mxEvent.addListener(B,"click",mxUtils.bind(this,function(H){var G=this.selectedMode.altIcon;if(G!=null){this.selectedMode.altIcon=this.selectedMode.getAttribute("src");this.selectedMode.setAttribute("src",G)}else{this.selectedMode.className=this.selectedMode.initialClassName}if(this.updateDefaultMode){this.defaultMode=B}this.selectedMode=B;var G=B.altIcon;if(G!=null){B.altIcon=B.getAttribute("src");B.setAttribute("src",G)}else{B.className=B.initialClassName+"Selected"}this.fireEvent(new mxEventObject(mxEvent.SELECT));A()}));this.container.appendChild(B);if(this.defaultMode==null){this.defaultMode=B;this.selectMode(B);A()}return B};mxToolbar.prototype.addMode=function(E,F,A,G,D,B){B=(B!=null)?B:true;var C=document.createElement((F!=null)?"img":"button");C.initialClassName=D||"mxToolbarMode";C.className=C.initialClassName;C.setAttribute("src",F);C.altIcon=G;if(E!=null){C.setAttribute("title",E)}if(this.enabled&&B){mxEvent.addListener(C,"click",mxUtils.bind(this,function(H){this.selectMode(C,A);this.noReset=false}));mxEvent.addListener(C,"dblclick",mxUtils.bind(this,function(H){this.selectMode(C,A);this.noReset=true}));if(this.defaultMode==null){this.defaultMode=C;this.defaultFunction=A;this.selectMode(C,A)}}this.container.appendChild(C);return C};mxToolbar.prototype.selectMode=function(B,C){if(this.selectedMode!=B){if(this.selectedMode!=null){var A=this.selectedMode.altIcon;if(A!=null){this.selectedMode.altIcon=this.selectedMode.getAttribute("src");this.selectedMode.setAttribute("src",A)}else{this.selectedMode.className=this.selectedMode.initialClassName}}this.selectedMode=B;var A=this.selectedMode.altIcon;if(A!=null){this.selectedMode.altIcon=this.selectedMode.getAttribute("src");this.selectedMode.setAttribute("src",A)}else{this.selectedMode.className=this.selectedMode.initialClassName+"Selected"}this.fireEvent(new mxEventObject(mxEvent.SELECT,"function",C))}};mxToolbar.prototype.resetMode=function(A){if((A||!this.noReset)&&this.selectedMode!=this.defaultMode){this.selectMode(this.defaultMode,this.defaultFunction)}};mxToolbar.prototype.addSeparator=function(A){return this.addItem(null,A,null)};mxToolbar.prototype.addBreak=function(){mxUtils.br(this.container)};mxToolbar.prototype.addLine=function(){var A=document.createElement("hr");A.style.marginRight="6px";A.setAttribute("size","1");this.container.appendChild(A)};mxToolbar.prototype.destroy=function(){mxEvent.release(this.container);this.container=null;this.defaultMode=null;this.defaultFunction=null;this.selectedMode=null;if(this.menu!=null){this.menu.destroy()}};function mxUndoableEdit(A,B){this.source=A;this.changes=[];this.significant=(B!=null)?B:true}mxUndoableEdit.prototype.source=null;mxUndoableEdit.prototype.changes=null;mxUndoableEdit.prototype.significant=null;mxUndoableEdit.prototype.undone=false;mxUndoableEdit.prototype.redone=false;mxUndoableEdit.prototype.isEmpty=function(){return this.changes.length==0};mxUndoableEdit.prototype.isSignificant=function(){return this.significant};mxUndoableEdit.prototype.add=function(A){this.changes.push(A)};mxUndoableEdit.prototype.notify=function(){};mxUndoableEdit.prototype.die=function(){};mxUndoableEdit.prototype.undo=function(){if(!this.undone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));var C=this.changes.length;for(var B=C-1;B>=0;B--){var A=this.changes[B];if(A.execute!=null){A.execute()}else{if(A.undo!=null){A.undo()}}this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",A))}this.undone=true;this.redone=false;this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()};mxUndoableEdit.prototype.redo=function(){if(!this.redone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));var C=this.changes.length;for(var B=0;B<C;B++){var A=this.changes[B];if(A.execute!=null){A.execute()}else{if(A.redo!=null){A.redo()}}this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",A))}this.undone=false;this.redone=true;this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()};function mxUndoManager(A){this.size=(A!=null)?A:100;this.clear()}mxUndoManager.prototype=new mxEventSource();mxUndoManager.prototype.constructor=mxUndoManager;mxUndoManager.prototype.size=null;mxUndoManager.prototype.history=null;mxUndoManager.prototype.indexOfNextAdd=0;mxUndoManager.prototype.isEmpty=function(){return this.history.length==0};mxUndoManager.prototype.clear=function(){this.history=[];this.indexOfNextAdd=0;this.fireEvent(new mxEventObject(mxEvent.CLEAR))};mxUndoManager.prototype.canUndo=function(){return this.indexOfNextAdd>0};mxUndoManager.prototype.undo=function(){while(this.indexOfNextAdd>0){var A=this.history[--this.indexOfNextAdd];A.undo();if(A.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",A));break}}};mxUndoManager.prototype.canRedo=function(){return this.indexOfNextAdd<this.history.length};mxUndoManager.prototype.redo=function(){var A=this.history.length;while(this.indexOfNextAdd<A){var B=this.history[this.indexOfNextAdd++];B.redo();if(B.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.REDO,"edit",B));break}}};mxUndoManager.prototype.undoableEditHappened=function(A){this.trim();if(this.size>0&&this.size==this.history.length){this.history.shift()}this.history.push(A);this.indexOfNextAdd=this.history.length;this.fireEvent(new mxEventObject(mxEvent.ADD,"edit",A))};mxUndoManager.prototype.trim=function(){if(this.history.length>this.indexOfNextAdd){var B=this.history.splice(this.indexOfNextAdd,this.history.length-this.indexOfNextAdd);for(var A=0;A<B.length;A++){B[A].die()}}};var mxUrlConverter=function(){};mxUrlConverter.prototype.enabled=true;mxUrlConverter.prototype.baseUrl=null;mxUrlConverter.prototype.baseDomain=null;mxUrlConverter.prototype.updateBaseUrl=function(){this.baseDomain=location.protocol+"//"+location.host;this.baseUrl=this.baseDomain+location.pathname;var A=this.baseUrl.lastIndexOf("/");if(A>0){this.baseUrl=this.baseUrl.substring(0,A+1)}};mxUrlConverter.prototype.isEnabled=function(){return this.enabled};mxUrlConverter.prototype.setEnabled=function(A){this.enabled=A};mxUrlConverter.prototype.getBaseUrl=function(){return this.baseUrl};mxUrlConverter.prototype.setBaseUrl=function(A){this.baseUrl=A};mxUrlConverter.prototype.getBaseDomain=function(){return this.baseDomain},mxUrlConverter.prototype.setBaseDomain=function(A){this.baseDomain=A},mxUrlConverter.prototype.isRelativeUrl=function(A){return A.substring(0,2)!="//"&&A.substring(0,7)!="http://"&&A.substring(0,8)!="https://"&&A.substring(0,10)!="data:image"};mxUrlConverter.prototype.convert=function(A){if(this.isEnabled()&&this.isRelativeUrl(A)){if(this.getBaseUrl()==null){this.updateBaseUrl()}if(A.charAt(0)=="/"){A=this.getBaseDomain()+A}else{A=this.getBaseUrl()+A}}return A};function mxPanningManager(A){this.thread=null;this.active=false;this.tdx=0;this.tdy=0;this.t0x=0;this.t0y=0;this.dx=0;this.dy=0;this.scrollbars=false;this.scrollLeft=0;this.scrollTop=0;this.mouseListener={mouseDown:function(C,D){},mouseMove:function(C,D){},mouseUp:mxUtils.bind(this,function(C,D){if(this.active){this.stop()}})};A.addMouseListener(this.mouseListener);mxEvent.addListener(document,"mouseup",mxUtils.bind(this,function(){if(this.active){this.stop()}}));var B=mxUtils.bind(this,function(){this.scrollbars=mxUtils.hasScrollbars(A.container);this.scrollLeft=A.container.scrollLeft;this.scrollTop=A.container.scrollTop;return window.setInterval(mxUtils.bind(this,function(){this.tdx-=this.dx;this.tdy-=this.dy;if(this.scrollbars){var C=-A.container.scrollLeft-Math.ceil(this.dx);var D=-A.container.scrollTop-Math.ceil(this.dy);A.panGraph(C,D);A.panDx=this.scrollLeft-A.container.scrollLeft;A.panDy=this.scrollTop-A.container.scrollTop;A.fireEvent(new mxEventObject(mxEvent.PAN))}else{A.panGraph(this.getDx(),this.getDy())}}),this.delay)});this.isActive=function(){return active};this.getDx=function(){return Math.round(this.tdx)};this.getDy=function(){return Math.round(this.tdy)};this.start=function(){this.t0x=A.view.translate.x;this.t0y=A.view.translate.y;this.active=true};this.panTo=function(D,E,F,C){if(!this.active){this.start()}this.scrollLeft=A.container.scrollLeft;this.scrollTop=A.container.scrollTop;F=(F!=null)?F:0;C=(C!=null)?C:0;var G=A.container;this.dx=D+F-G.scrollLeft-G.clientWidth;if(this.dx<0&&Math.abs(this.dx)<this.border){this.dx=this.border+this.dx}else{if(this.handleMouseOut){this.dx=Math.max(this.dx,0)}else{this.dx=0}}if(this.dx==0){this.dx=D-G.scrollLeft;if(this.dx>0&&this.dx<this.border){this.dx=this.dx-this.border}else{if(this.handleMouseOut){this.dx=Math.min(0,this.dx)}else{this.dx=0}}}this.dy=E+C-G.scrollTop-G.clientHeight;if(this.dy<0&&Math.abs(this.dy)<this.border){this.dy=this.border+this.dy}else{if(this.handleMouseOut){this.dy=Math.max(this.dy,0)}else{this.dy=0}}if(this.dy==0){this.dy=E-G.scrollTop;if(this.dy>0&&this.dy<this.border){this.dy=this.dy-this.border}else{if(this.handleMouseOut){this.dy=Math.min(0,this.dy)}else{this.dy=0}}}if(this.dx!=0||this.dy!=0){this.dx*=this.damper;this.dy*=this.damper;if(this.thread==null){this.thread=B()}}else{if(this.thread!=null){window.clearInterval(this.thread);this.thread=null}}};this.stop=function(){if(this.active){this.active=false;if(this.thread!=null){window.clearInterval(this.thread);this.thread=null}this.tdx=0;this.tdy=0;if(!this.scrollbars){var C=A.panDx;var D=A.panDy;if(C!=0||D!=0){A.panGraph(0,0);A.view.setTranslate(this.t0x+C/A.view.scale,this.t0y+D/A.view.scale)}}else{A.panDx=0;A.panDy=0;A.fireEvent(new mxEventObject(mxEvent.PAN))}}};this.destroy=function(){A.removeMouseListener(this.mouseListener)}}mxPanningManager.prototype.damper=1/6;mxPanningManager.prototype.delay=10;mxPanningManager.prototype.handleMouseOut=true;mxPanningManager.prototype.border=0;function mxPopupMenu(A){this.factoryMethod=A;if(A!=null){this.init()}}mxPopupMenu.prototype=new mxEventSource();mxPopupMenu.prototype.constructor=mxPopupMenu;mxPopupMenu.prototype.submenuImage=mxClient.imageBasePath+"/submenu.gif";mxPopupMenu.prototype.zIndex=10006;mxPopupMenu.prototype.factoryMethod=null;mxPopupMenu.prototype.useLeftButtonForPopup=false;mxPopupMenu.prototype.enabled=true;mxPopupMenu.prototype.itemCount=0;mxPopupMenu.prototype.autoExpand=false;mxPopupMenu.prototype.smartSeparators=false;mxPopupMenu.prototype.labels=true;mxPopupMenu.prototype.init=function(){this.table=document.createElement("table");this.table.className="mxPopupMenu";this.tbody=document.createElement("tbody");this.table.appendChild(this.tbody);this.div=document.createElement("div");this.div.className="mxPopupMenu";this.div.style.display="inline";this.div.style.zIndex=this.zIndex;this.div.appendChild(this.table);mxEvent.disableContextMenu(this.div)};mxPopupMenu.prototype.isEnabled=function(){return this.enabled};mxPopupMenu.prototype.setEnabled=function(A){this.enabled=A};mxPopupMenu.prototype.isPopupTrigger=function(A){return A.isPopupTrigger()||(this.useLeftButtonForPopup&&mxEvent.isLeftMouseButton(A.getEvent()))};mxPopupMenu.prototype.addItem=function(I,K,M,L,H,B,G){L=L||this;this.itemCount++;if(L.willAddSeparator){if(L.containsItems){this.addSeparator(L,true)}L.willAddSeparator=false}L.containsItems=true;var J=document.createElement("tr");J.className="mxPopupMenuItem";var C=document.createElement("td");C.className="mxPopupMenuIcon";if(K!=null){var D=document.createElement("img");D.src=K;C.appendChild(D)}else{if(H!=null){var N=document.createElement("div");N.className=H;C.appendChild(N)}}J.appendChild(C);if(this.labels){var E=document.createElement("td");E.className="mxPopupMenuItem"+((B!=null&&!B)?" mxDisabled":"");mxUtils.write(E,I);E.align="left";J.appendChild(E);var F=document.createElement("td");F.className="mxPopupMenuItem"+((B!=null&&!B)?" mxDisabled":"");F.style.paddingRight="6px";F.style.textAlign="right";J.appendChild(F);if(L.div==null){this.createSubmenu(L)}}L.tbody.appendChild(J);if(G!=false&&B!=false){var A=null;mxEvent.addGestureListeners(J,mxUtils.bind(this,function(O){this.eventReceiver=J;if(L.activeRow!=J&&L.activeRow!=L){if(L.activeRow!=null&&L.activeRow.div.parentNode!=null){this.hideSubmenu(L)}if(J.div!=null){this.showSubmenu(L,J);L.activeRow=J}}if(mxClient.IS_QUIRKS||document.documentMode==8){A=document.selection.createRange()}mxEvent.consume(O)}),mxUtils.bind(this,function(O){if(L.activeRow!=J&&L.activeRow!=L){if(L.activeRow!=null&&L.activeRow.div.parentNode!=null){this.hideSubmenu(L)}if(this.autoExpand&&J.div!=null){this.showSubmenu(L,J);L.activeRow=J}}J.className="mxPopupMenuItemHover"}),mxUtils.bind(this,function(P){if(this.eventReceiver==J){if(L.activeRow!=J){this.hideMenu()}if(A!=null){try{A.select()}catch(O){}A=null}if(M!=null){M(P)}}this.eventReceiver=null;mxEvent.consume(P)}));mxEvent.addListener(J,"mouseout",mxUtils.bind(this,function(O){J.className="mxPopupMenuItem"}))}return J};mxPopupMenu.prototype.addCheckmark=function(B,C){var A=B.firstChild.nextSibling;A.style.backgroundImage="url('"+C+"')";A.style.backgroundRepeat="no-repeat";A.style.backgroundPosition="2px 50%"};mxPopupMenu.prototype.createSubmenu=function(A){A.table=document.createElement("table");A.table.className="mxPopupMenu";A.tbody=document.createElement("tbody");A.table.appendChild(A.tbody);A.div=document.createElement("div");A.div.className="mxPopupMenu";A.div.style.position="absolute";A.div.style.display="inline";A.div.style.zIndex=this.zIndex;A.div.appendChild(A.table);var B=document.createElement("img");B.setAttribute("src",this.submenuImage);td=A.firstChild.nextSibling.nextSibling;td.appendChild(B)};mxPopupMenu.prototype.showSubmenu=function(G,C){if(C.div!=null){C.div.style.left=(G.div.offsetLeft+C.offsetLeft+C.offsetWidth-1)+"px";C.div.style.top=(G.div.offsetTop+C.offsetTop)+"px";document.body.appendChild(C.div);var B=parseInt(C.div.offsetLeft);var E=parseInt(C.div.offsetWidth);var A=mxUtils.getDocumentScrollOrigin(document);var F=document.body;var H=document.documentElement;var D=A.x+(F.clientWidth||H.clientWidth);if(B+E>D){C.div.style.left=(G.div.offsetLeft-E+((mxClient.IS_IE)?6:-6))+"px"}mxUtils.fit(C.div)}};mxPopupMenu.prototype.addSeparator=function(E,D){E=E||this;if(this.smartSeparators&&!D){E.willAddSeparator=true}else{if(E.tbody!=null){E.willAddSeparator=false;var C=document.createElement("tr");var F=document.createElement("td");F.className="mxPopupMenuIcon";F.style.padding="0 0 0 0px";C.appendChild(F);var B=document.createElement("td");B.style.padding="0 0 0 0px";B.setAttribute("colSpan","2");var A=document.createElement("hr");A.setAttribute("size","1");B.appendChild(A);C.appendChild(B);E.tbody.appendChild(C)}}};mxPopupMenu.prototype.popup=function(B,C,D,A){if(this.div!=null&&this.tbody!=null&&this.factoryMethod!=null){this.div.style.left=B+"px";this.div.style.top=C+"px";while(this.tbody.firstChild!=null){mxEvent.release(this.tbody.firstChild);this.tbody.removeChild(this.tbody.firstChild)}this.itemCount=0;this.factoryMethod(this,D,A);if(this.itemCount>0){this.showMenu();this.fireEvent(new mxEventObject(mxEvent.SHOW))}}};mxPopupMenu.prototype.isMenuShowing=function(){return this.div!=null&&this.div.parentNode==document.body};mxPopupMenu.prototype.showMenu=function(){if(document.documentMode>=9){this.div.style.filter="none"}document.body.appendChild(this.div);mxUtils.fit(this.div)};mxPopupMenu.prototype.hideMenu=function(){if(this.div!=null){if(this.div.parentNode!=null){this.div.parentNode.removeChild(this.div)}this.hideSubmenu(this);this.containsItems=false;this.fireEvent(new mxEventObject(mxEvent.HIDE))}};mxPopupMenu.prototype.hideSubmenu=function(A){if(A.activeRow!=null){this.hideSubmenu(A.activeRow);if(A.activeRow.div.parentNode!=null){A.activeRow.div.parentNode.removeChild(A.activeRow.div)}A.activeRow=null}};mxPopupMenu.prototype.destroy=function(){if(this.div!=null){mxEvent.release(this.div);if(this.div.parentNode!=null){this.div.parentNode.removeChild(this.div)}this.div=null}};function mxAutoSaveManager(A){this.changeHandler=mxUtils.bind(this,function(B,C){if(this.isEnabled()){this.graphModelChanged(C.getProperty("edit").changes)}});this.setGraph(A)}mxAutoSaveManager.prototype=new mxEventSource();mxAutoSaveManager.prototype.constructor=mxAutoSaveManager;mxAutoSaveManager.prototype.graph=null;mxAutoSaveManager.prototype.autoSaveDelay=10;mxAutoSaveManager.prototype.autoSaveThrottle=2;mxAutoSaveManager.prototype.autoSaveThreshold=5;mxAutoSaveManager.prototype.ignoredChanges=0;mxAutoSaveManager.prototype.lastSnapshot=0;mxAutoSaveManager.prototype.enabled=true;mxAutoSaveManager.prototype.changeHandler=null;mxAutoSaveManager.prototype.isEnabled=function(){return this.enabled};mxAutoSaveManager.prototype.setEnabled=function(A){this.enabled=A};mxAutoSaveManager.prototype.setGraph=function(A){if(this.graph!=null){this.graph.getModel().removeListener(this.changeHandler)}this.graph=A;if(this.graph!=null){this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)}};mxAutoSaveManager.prototype.save=function(){};mxAutoSaveManager.prototype.graphModelChanged=function(B){var C=new Date().getTime();var A=(C-this.lastSnapshot)/1000;if(A>this.autoSaveDelay||(this.ignoredChanges>=this.autoSaveThreshold&&A>this.autoSaveThrottle)){this.save();this.reset()}else{this.ignoredChanges++}};mxAutoSaveManager.prototype.reset=function(){this.lastSnapshot=new Date().getTime();this.ignoredChanges=0};mxAutoSaveManager.prototype.destroy=function(){this.setGraph(null)};function mxAnimation(A){this.delay=(A!=null)?A:20}mxAnimation.prototype=new mxEventSource();mxAnimation.prototype.constructor=mxAnimation;mxAnimation.prototype.delay=null;mxAnimation.prototype.thread=null;mxAnimation.prototype.isRunning=function(){return this.thread!=null};mxAnimation.prototype.startAnimation=function(){if(this.thread==null){this.thread=window.setInterval(mxUtils.bind(this,this.updateAnimation),this.delay)}};mxAnimation.prototype.updateAnimation=function(){this.fireEvent(new mxEventObject(mxEvent.EXECUTE))};mxAnimation.prototype.stopAnimation=function(){if(this.thread!=null){window.clearInterval(this.thread);this.thread=null;this.fireEvent(new mxEventObject(mxEvent.DONE))}};function mxMorphing(B,A,C,D){mxAnimation.call(this,D);this.graph=B;this.steps=(A!=null)?A:6;this.ease=(C!=null)?C:1.5}mxMorphing.prototype=new mxAnimation();mxMorphing.prototype.constructor=mxMorphing;mxMorphing.prototype.graph=null;mxMorphing.prototype.steps=null;mxMorphing.prototype.step=0;mxMorphing.prototype.ease=null;mxMorphing.prototype.cells=null;mxMorphing.prototype.updateAnimation=function(){var B=new mxCellStatePreview(this.graph);if(this.cells!=null){for(var A=0;A<this.cells.length;A++){this.animateCell(this.cells[A],B,false)}}else{this.animateCell(this.graph.getModel().getRoot(),B,true)}this.show(B);if(B.isEmpty()||this.step++>=this.steps){this.stopAnimation()}};mxMorphing.prototype.show=function(A){A.show()};mxMorphing.prototype.animateCell=function(I,H,F){var D=this.graph.getView().getState(I);var C=null;if(D!=null){C=this.getDelta(D);if(this.graph.getModel().isVertex(I)&&(C.x!=0||C.y!=0)){var G=this.graph.view.getTranslate();var B=this.graph.view.getScale();C.x+=G.x*B;C.y+=G.y*B;H.moveState(D,-C.x/this.ease,-C.y/this.ease)}}if(F&&!this.stopRecursion(D,C)){var A=this.graph.getModel().getChildCount(I);for(var E=0;E<A;E++){this.animateCell(this.graph.getModel().getChildAt(I,E),H,F)}}};mxMorphing.prototype.stopRecursion=function(B,A){return A!=null&&(A.x!=0||A.y!=0)};mxMorphing.prototype.getDelta=function(F){var D=this.getOriginForCell(F.cell);var A=this.graph.getView().getTranslate();var C=this.graph.getView().getScale();var B=F.x/C-A.x;var E=F.y/C-A.y;return new mxPoint((D.x-B)*C,(D.y-E)*C)};mxMorphing.prototype.getOriginForCell=function(E){var B=null;if(E!=null){var F=this.graph.getModel().getParent(E);var A=this.graph.getCellGeometry(E);B=this.getOriginForCell(F);if(A!=null){if(A.relative){var C=this.graph.getCellGeometry(F);if(C!=null){B.x+=A.x*C.width;B.y+=A.y*C.height}}else{B.x+=A.x;B.y+=A.y}}}if(B==null){var D=this.graph.view.getTranslate();B=new mxPoint(-D.x,-D.y)}return B};function mxImageBundle(A){this.images=[];this.alt=(A!=null)?A:false}mxImageBundle.prototype.images=null;mxImageBundle.prototype.images=null;mxImageBundle.prototype.putImage=function(B,C,A){this.images[B]={value:C,fallback:A}};mxImageBundle.prototype.getImage=function(A){var B=null;if(A!=null){var C=this.images[A];if(C!=null){B=(this.alt)?C.fallback:C.value}}return B};function mxImageExport(){}mxImageExport.prototype.includeOverlays=false;mxImageExport.prototype.drawState=function(B,A){if(B!=null){this.visitStatesRecursive(B,A,mxUtils.bind(this,function(){this.drawCellState.apply(this,arguments)}));if(this.includeOverlays){this.visitStatesRecursive(B,A,mxUtils.bind(this,function(){this.drawOverlays.apply(this,arguments)}))}}};mxImageExport.prototype.visitStatesRecursive=function(G,E,B){if(G!=null){B(G,E);var D=G.view.graph;var A=D.model.getChildCount(G.cell);for(var C=0;C<A;C++){var F=D.view.getState(D.model.getChildAt(G.cell,C));this.visitStatesRecursive(F,E,B)}}};mxImageExport.prototype.getLinkForCellState=function(B,A){return null};mxImageExport.prototype.drawCellState=function(C,B){var A=this.getLinkForCellState(C,B);if(A!=null){B.setLink(A)}this.drawShape(C,B);this.drawText(C,B);if(A!=null){B.setLink(null)}};mxImageExport.prototype.drawShape=function(B,A){if(B.shape instanceof mxShape&&B.shape.checkBounds()){A.save();B.shape.paint(A);A.restore()}};mxImageExport.prototype.drawText=function(B,A){if(B.text!=null&&B.text.checkBounds()){A.save();B.text.paint(A);A.restore()}};mxImageExport.prototype.drawOverlays=function(B,A){if(B.overlays!=null){B.overlays.visit(function(D,C){if(C instanceof mxShape){C.paint(A)}})}};function mxAbstractCanvas2D(){this.converter=this.createUrlConverter();this.reset()}mxAbstractCanvas2D.prototype.state=null;mxAbstractCanvas2D.prototype.states=null;mxAbstractCanvas2D.prototype.path=null;mxAbstractCanvas2D.prototype.rotateHtml=true;mxAbstractCanvas2D.prototype.lastX=0;mxAbstractCanvas2D.prototype.lastY=0;mxAbstractCanvas2D.prototype.moveOp="M";mxAbstractCanvas2D.prototype.lineOp="L";mxAbstractCanvas2D.prototype.quadOp="Q";mxAbstractCanvas2D.prototype.curveOp="C";mxAbstractCanvas2D.prototype.closeOp="Z";mxAbstractCanvas2D.prototype.pointerEvents=false;mxAbstractCanvas2D.prototype.createUrlConverter=function(){return new mxUrlConverter()};mxAbstractCanvas2D.prototype.reset=function(){this.state=this.createState();this.states=[]};mxAbstractCanvas2D.prototype.createState=function(){return{dx:0,dy:0,scale:1,alpha:1,fillAlpha:1,strokeAlpha:1,fillColor:null,gradientFillAlpha:1,gradientColor:null,gradientAlpha:1,gradientDirection:null,strokeColor:null,strokeWidth:1,dashed:false,dashPattern:"3 3",lineCap:"flat",lineJoin:"miter",miterLimit:10,fontColor:"#000000",fontBackgroundColor:null,fontBorderColor:null,fontSize:mxConstants.DEFAULT_FONTSIZE,fontFamily:mxConstants.DEFAULT_FONTFAMILY,fontStyle:0,shadow:false,shadowColor:mxConstants.SHADOWCOLOR,shadowAlpha:mxConstants.SHADOW_OPACITY,shadowDx:mxConstants.SHADOW_OFFSET_X,shadowDy:mxConstants.SHADOW_OFFSET_Y,rotation:0,rotationCx:0,rotationCy:0}};mxAbstractCanvas2D.prototype.format=function(A){return Math.round(parseFloat(A))};mxAbstractCanvas2D.prototype.addOp=function(){if(this.path!=null){this.path.push(arguments[0]);if(arguments.length>2){var B=this.state;for(var A=2;A<arguments.length;A+=2){this.lastX=arguments[A-1];this.lastY=arguments[A];this.path.push(this.format((this.lastX+B.dx)*B.scale));this.path.push(this.format((this.lastY+B.dy)*B.scale))}}}};mxAbstractCanvas2D.prototype.rotatePoint=function(C,D,E,F,A){var B=E*(Math.PI/180);return mxUtils.getRotatedPoint(new mxPoint(C,D),Math.cos(B),Math.sin(B),new mxPoint(F,A))};mxAbstractCanvas2D.prototype.save=function(){this.states.push(this.state);this.state=mxUtils.clone(this.state)};mxAbstractCanvas2D.prototype.restore=function(){if(this.states.length>0){this.state=this.states.pop()}};mxAbstractCanvas2D.prototype.setLink=function(A){};mxAbstractCanvas2D.prototype.scale=function(A){this.state.scale*=A;this.state.strokeWidth*=A};mxAbstractCanvas2D.prototype.translate=function(A,B){this.state.dx+=A;this.state.dy+=B};mxAbstractCanvas2D.prototype.rotate=function(D,A,C,E,B){};mxAbstractCanvas2D.prototype.setAlpha=function(A){this.state.alpha=A};mxAbstractCanvas2D.prototype.setFillAlpha=function(A){this.state.fillAlpha=A};mxAbstractCanvas2D.prototype.setStrokeAlpha=function(A){this.state.strokeAlpha=A};mxAbstractCanvas2D.prototype.setFillColor=function(A){if(A==mxConstants.NONE){A=null}this.state.fillColor=A;this.state.gradientColor=null};mxAbstractCanvas2D.prototype.setGradient=function(H,F,I,J,C,E,A,D,G){var B=this.state;B.fillColor=H;B.gradientFillAlpha=(D!=null)?D:1;B.gradientColor=F;B.gradientAlpha=(G!=null)?G:1;B.gradientDirection=A};mxAbstractCanvas2D.prototype.setStrokeColor=function(A){if(A==mxConstants.NONE){A=null}this.state.strokeColor=A};mxAbstractCanvas2D.prototype.setStrokeWidth=function(A){this.state.strokeWidth=A};mxAbstractCanvas2D.prototype.setDashed=function(A){this.state.dashed=A};mxAbstractCanvas2D.prototype.setDashPattern=function(A){this.state.dashPattern=A};mxAbstractCanvas2D.prototype.setLineCap=function(A){this.state.lineCap=A};mxAbstractCanvas2D.prototype.setLineJoin=function(A){this.state.lineJoin=A};mxAbstractCanvas2D.prototype.setMiterLimit=function(A){this.state.miterLimit=A};mxAbstractCanvas2D.prototype.setFontColor=function(A){if(A==mxConstants.NONE){A=null}this.state.fontColor=A};mxAbstractCanvas2D.prototype.setFontBackgroundColor=function(A){if(A==mxConstants.NONE){A=null}this.state.fontBackgroundColor=A};mxAbstractCanvas2D.prototype.setFontBorderColor=function(A){if(A==mxConstants.NONE){A=null}this.state.fontBorderColor=A};mxAbstractCanvas2D.prototype.setFontSize=function(A){this.state.fontSize=parseFloat(A)};mxAbstractCanvas2D.prototype.setFontFamily=function(A){this.state.fontFamily=A};mxAbstractCanvas2D.prototype.setFontStyle=function(A){if(A==null){A=0}this.state.fontStyle=A};mxAbstractCanvas2D.prototype.setShadow=function(A){this.state.shadow=A};mxAbstractCanvas2D.prototype.setShadowColor=function(A){if(A==mxConstants.NONE){A=null}this.state.shadowColor=A};mxAbstractCanvas2D.prototype.setShadowAlpha=function(A){this.state.shadowAlpha=A};mxAbstractCanvas2D.prototype.setShadowOffset=function(A,B){this.state.shadowDx=A;this.state.shadowDy=B};mxAbstractCanvas2D.prototype.begin=function(){this.lastX=0;this.lastY=0;this.path=[]};mxAbstractCanvas2D.prototype.moveTo=function(A,B){this.addOp(this.moveOp,A,B)};mxAbstractCanvas2D.prototype.lineTo=function(A,B){this.addOp(this.lineOp,A,B)};mxAbstractCanvas2D.prototype.quadTo=function(C,D,A,B){this.addOp(this.quadOp,C,D,A,B)};mxAbstractCanvas2D.prototype.curveTo=function(E,F,A,B,C,D){this.addOp(this.curveOp,E,F,A,B,C,D)};mxAbstractCanvas2D.prototype.arcTo=function(E,F,G,D,A,H,I){var B=mxUtils.arcToCurves(this.lastX,this.lastY,E,F,G,D,A,H,I);if(B!=null){for(var C=0;C<B.length;C+=6){this.curveTo(B[C],B[C+1],B[C+2],B[C+3],B[C+4],B[C+5])}}};mxAbstractCanvas2D.prototype.close=function(E,F,A,B,C,D){this.addOp(this.closeOp)};mxAbstractCanvas2D.prototype.end=function(){};function mxAnimation(A){this.delay=(A!=null)?A:20}mxAnimation.prototype=new mxEventSource();mxAnimation.prototype.constructor=mxAnimation;mxAnimation.prototype.delay=null;mxAnimation.prototype.thread=null;mxAnimation.prototype.isRunning=function(){return this.thread!=null};mxAnimation.prototype.startAnimation=function(){if(this.thread==null){this.thread=window.setInterval(mxUtils.bind(this,this.updateAnimation),this.delay)}};mxAnimation.prototype.updateAnimation=function(){this.fireEvent(new mxEventObject(mxEvent.EXECUTE))};mxAnimation.prototype.stopAnimation=function(){if(this.thread!=null){window.clearInterval(this.thread);this.thread=null;this.fireEvent(new mxEventObject(mxEvent.DONE))}};function mxAutoSaveManager(A){this.changeHandler=mxUtils.bind(this,function(B,C){if(this.isEnabled()){this.graphModelChanged(C.getProperty("edit").changes)}});this.setGraph(A)}mxAutoSaveManager.prototype=new mxEventSource();mxAutoSaveManager.prototype.constructor=mxAutoSaveManager;mxAutoSaveManager.prototype.graph=null;mxAutoSaveManager.prototype.autoSaveDelay=10;mxAutoSaveManager.prototype.autoSaveThrottle=2;mxAutoSaveManager.prototype.autoSaveThreshold=5;mxAutoSaveManager.prototype.ignoredChanges=0;mxAutoSaveManager.prototype.lastSnapshot=0;mxAutoSaveManager.prototype.enabled=true;mxAutoSaveManager.prototype.changeHandler=null;mxAutoSaveManager.prototype.isEnabled=function(){return this.enabled};mxAutoSaveManager.prototype.setEnabled=function(A){this.enabled=A};mxAutoSaveManager.prototype.setGraph=function(A){if(this.graph!=null){this.graph.getModel().removeListener(this.changeHandler)}this.graph=A;if(this.graph!=null){this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)}};mxAutoSaveManager.prototype.save=function(){};mxAutoSaveManager.prototype.graphModelChanged=function(B){var C=new Date().getTime();var A=(C-this.lastSnapshot)/1000;if(A>this.autoSaveDelay||(this.ignoredChanges>=this.autoSaveThreshold&&A>this.autoSaveThrottle)){this.save();this.reset()}else{this.ignoredChanges++}};mxAutoSaveManager.prototype.reset=function(){this.lastSnapshot=new Date().getTime();this.ignoredChanges=0};mxAutoSaveManager.prototype.destroy=function(){this.setGraph(null)};var mxClipboard={STEPSIZE:10,insertCount:1,cells:null,setCells:function(A){mxClipboard.cells=A},getCells:function(){return mxClipboard.cells},isEmpty:function(){return mxClipboard.getCells()==null},cut:function(A,B){B=mxClipboard.copy(A,B);mxClipboard.insertCount=0;mxClipboard.removeCells(A,B);return B},removeCells:function(A,B){A.removeCells(B)},copy:function(B,C){C=C||B.getSelectionCells();var A=B.getExportableCells(B.model.getTopmostCells(C));mxClipboard.insertCount=1;mxClipboard.setCells(B.cloneCells(A));return A},paste:function(B){var C=null;if(!mxClipboard.isEmpty()){C=B.getImportableCells(mxClipboard.getCells());var A=mxClipboard.insertCount*mxClipboard.STEPSIZE;var D=B.getDefaultParent();C=B.importCells(C,A,A,D);mxClipboard.insertCount++;B.setSelectionCells(C)}return C}};var mxConstants={DEFAULT_HOTSPOT:0.3,MIN_HOTSPOT_SIZE:8,MAX_HOTSPOT_SIZE:0,RENDERING_HINT_EXACT:"exact",RENDERING_HINT_FASTER:"faster",RENDERING_HINT_FASTEST:"fastest",DIALECT_SVG:"svg",DIALECT_VML:"vml",DIALECT_MIXEDHTML:"mixedHtml",DIALECT_PREFERHTML:"preferHtml",DIALECT_STRICTHTML:"strictHtml",NS_SVG:"http://www.w3.org/2000/svg",NS_XHTML:"http://www.w3.org/1999/xhtml",NS_XLINK:"http://www.w3.org/1999/xlink",SHADOWCOLOR:"gray",VML_SHADOWCOLOR:"gray",SHADOW_OFFSET_X:2,SHADOW_OFFSET_Y:3,SHADOW_OPACITY:1,NODETYPE_ELEMENT:1,NODETYPE_ATTRIBUTE:2,NODETYPE_TEXT:3,NODETYPE_CDATA:4,NODETYPE_ENTITY_REFERENCE:5,NODETYPE_ENTITY:6,NODETYPE_PROCESSING_INSTRUCTION:7,NODETYPE_COMMENT:8,NODETYPE_DOCUMENT:9,NODETYPE_DOCUMENTTYPE:10,NODETYPE_DOCUMENT_FRAGMENT:11,NODETYPE_NOTATION:12,TOOLTIP_VERTICAL_OFFSET:16,DEFAULT_VALID_COLOR:"#00FF00",DEFAULT_INVALID_COLOR:"#FF0000",OUTLINE_HIGHLIGHT_COLOR:"#00FF00",OUTLINE_HIGHLIGHT_STROKEWIDTH:5,HIGHLIGHT_STROKEWIDTH:3,HIGHLIGHT_SIZE:2,HIGHLIGHT_OPACITY:100,CURSOR_MOVABLE_VERTEX:"move",CURSOR_MOVABLE_EDGE:"move",CURSOR_LABEL_HANDLE:"default",CURSOR_TERMINAL_HANDLE:"pointer",CURSOR_BEND_HANDLE:"crosshair",CURSOR_VIRTUAL_BEND_HANDLE:"crosshair",CURSOR_CONNECT:"pointer",HIGHLIGHT_COLOR:"#00FF00",CONNECT_TARGET_COLOR:"#0000FF",INVALID_CONNECT_TARGET_COLOR:"#FF0000",DROP_TARGET_COLOR:"#0000FF",VALID_COLOR:"#00FF00",INVALID_COLOR:"#FF0000",EDGE_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_STROKEWIDTH:1,EDGE_SELECTION_STROKEWIDTH:1,VERTEX_SELECTION_DASHED:true,EDGE_SELECTION_DASHED:true,GUIDE_COLOR:"#FF0000",GUIDE_STROKEWIDTH:1,OUTLINE_COLOR:"#0099FF",OUTLINE_STROKEWIDTH:(mxClient.IS_IE)?2:3,HANDLE_SIZE:6,LABEL_HANDLE_SIZE:4,HANDLE_FILLCOLOR:"#00FF00",HANDLE_STROKECOLOR:"black",LABEL_HANDLE_FILLCOLOR:"yellow",CONNECT_HANDLE_FILLCOLOR:"#0000FF",LOCKED_HANDLE_FILLCOLOR:"#FF0000",OUTLINE_HANDLE_FILLCOLOR:"#00FFFF",OUTLINE_HANDLE_STROKECOLOR:"#0033FF",DEFAULT_FONTFAMILY:"Arial,Helvetica",DEFAULT_FONTSIZE:11,DEFAULT_TEXT_DIRECTION:"",LINE_HEIGHT:1.2,WORD_WRAP:"normal",ABSOLUTE_LINE_HEIGHT:false,DEFAULT_FONTSTYLE:0,DEFAULT_STARTSIZE:40,DEFAULT_MARKERSIZE:6,DEFAULT_IMAGESIZE:24,ENTITY_SEGMENT:30,RECTANGLE_ROUNDING_FACTOR:0.15,LINE_ARCSIZE:20,ARROW_SPACING:0,ARROW_WIDTH:30,ARROW_SIZE:30,PAGE_FORMAT_A4_PORTRAIT:new mxRectangle(0,0,826,1169),PAGE_FORMAT_A4_LANDSCAPE:new mxRectangle(0,0,1169,826),PAGE_FORMAT_LETTER_PORTRAIT:new mxRectangle(0,0,850,1100),PAGE_FORMAT_LETTER_LANDSCAPE:new mxRectangle(0,0,1100,850),NONE:"none",STYLE_PERIMETER:"perimeter",STYLE_SOURCE_PORT:"sourcePort",STYLE_TARGET_PORT:"targetPort",STYLE_PORT_CONSTRAINT:"portConstraint",STYLE_PORT_CONSTRAINT_ROTATION:"portConstraintRotation",STYLE_OPACITY:"opacity",STYLE_FILL_OPACITY:"fillOpacity",STYLE_STROKE_OPACITY:"strokeOpacity",STYLE_TEXT_OPACITY:"textOpacity",STYLE_TEXT_DIRECTION:"textDirection",STYLE_OVERFLOW:"overflow",STYLE_ORTHOGONAL:"orthogonal",STYLE_EXIT_X:"exitX",STYLE_EXIT_Y:"exitY",STYLE_EXIT_PERIMETER:"exitPerimeter",STYLE_ENTRY_X:"entryX",STYLE_ENTRY_Y:"entryY",STYLE_ENTRY_PERIMETER:"entryPerimeter",STYLE_WHITE_SPACE:"whiteSpace",STYLE_ROTATION:"rotation",STYLE_FILLCOLOR:"fillColor",STYLE_POINTER_EVENTS:"pointerEvents",STYLE_SWIMLANE_FILLCOLOR:"swimlaneFillColor",STYLE_MARGIN:"margin",STYLE_GRADIENTCOLOR:"gradientColor",STYLE_GRADIENT_DIRECTION:"gradientDirection",STYLE_STROKECOLOR:"strokeColor",STYLE_SEPARATORCOLOR:"separatorColor",STYLE_STROKEWIDTH:"strokeWidth",STYLE_ALIGN:"align",STYLE_VERTICAL_ALIGN:"verticalAlign",STYLE_LABEL_WIDTH:"labelWidth",STYLE_LABEL_POSITION:"labelPosition",STYLE_VERTICAL_LABEL_POSITION:"verticalLabelPosition",STYLE_IMAGE_ASPECT:"imageAspect",STYLE_IMAGE_ALIGN:"imageAlign",STYLE_IMAGE_VERTICAL_ALIGN:"imageVerticalAlign",STYLE_GLASS:"glass",STYLE_IMAGE:"image",STYLE_IMAGE_WIDTH:"imageWidth",STYLE_IMAGE_HEIGHT:"imageHeight",STYLE_IMAGE_BACKGROUND:"imageBackground",STYLE_IMAGE_BORDER:"imageBorder",STYLE_FLIPH:"flipH",STYLE_FLIPV:"flipV",STYLE_NOLABEL:"noLabel",STYLE_NOEDGESTYLE:"noEdgeStyle",STYLE_LABEL_BACKGROUNDCOLOR:"labelBackgroundColor",STYLE_LABEL_BORDERCOLOR:"labelBorderColor",STYLE_LABEL_PADDING:"labelPadding",STYLE_INDICATOR_SHAPE:"indicatorShape",STYLE_INDICATOR_IMAGE:"indicatorImage",STYLE_INDICATOR_COLOR:"indicatorColor",STYLE_INDICATOR_STROKECOLOR:"indicatorStrokeColor",STYLE_INDICATOR_GRADIENTCOLOR:"indicatorGradientColor",STYLE_INDICATOR_SPACING:"indicatorSpacing",STYLE_INDICATOR_WIDTH:"indicatorWidth",STYLE_INDICATOR_HEIGHT:"indicatorHeight",STYLE_INDICATOR_DIRECTION:"indicatorDirection",STYLE_SHADOW:"shadow",STYLE_SEGMENT:"segment",STYLE_ENDARROW:"endArrow",STYLE_STARTARROW:"startArrow",STYLE_ENDSIZE:"endSize",STYLE_STARTSIZE:"startSize",STYLE_SWIMLANE_LINE:"swimlaneLine",STYLE_ENDFILL:"endFill",STYLE_STARTFILL:"startFill",STYLE_DASHED:"dashed",STYLE_DASH_PATTERN:"dashPattern",STYLE_ROUNDED:"rounded",STYLE_CURVED:"curved",STYLE_ARCSIZE:"arcSize",STYLE_SMOOTH:"smooth",STYLE_SOURCE_PERIMETER_SPACING:"sourcePerimeterSpacing",STYLE_TARGET_PERIMETER_SPACING:"targetPerimeterSpacing",STYLE_PERIMETER_SPACING:"perimeterSpacing",STYLE_SPACING:"spacing",STYLE_SPACING_TOP:"spacingTop",STYLE_SPACING_LEFT:"spacingLeft",STYLE_SPACING_BOTTOM:"spacingBottom",STYLE_SPACING_RIGHT:"spacingRight",STYLE_HORIZONTAL:"horizontal",STYLE_DIRECTION:"direction",STYLE_ELBOW:"elbow",STYLE_FONTCOLOR:"fontColor",STYLE_FONTFAMILY:"fontFamily",STYLE_FONTSIZE:"fontSize",STYLE_FONTSTYLE:"fontStyle",STYLE_ASPECT:"aspect",STYLE_AUTOSIZE:"autosize",STYLE_FOLDABLE:"foldable",STYLE_EDITABLE:"editable",STYLE_BENDABLE:"bendable",STYLE_MOVABLE:"movable",STYLE_RESIZABLE:"resizable",STYLE_RESIZE_WIDTH:"resizeWidth",STYLE_RESIZE_HEIGHT:"resizeHeight",STYLE_ROTATABLE:"rotatable",STYLE_CLONEABLE:"cloneable",STYLE_DELETABLE:"deletable",STYLE_SHAPE:"shape",STYLE_EDGE:"edgeStyle",STYLE_JETTY_SIZE:"jettySize",STYLE_SOURCE_JETTY_SIZE:"sourceJettySize",STYLE_TARGET_JETTY_SIZE:"targetJettySize",STYLE_LOOP:"loopStyle",STYLE_ORTHOGONAL_LOOP:"orthogonalLoop",STYLE_ROUTING_CENTER_X:"routingCenterX",STYLE_ROUTING_CENTER_Y:"routingCenterY",FONT_BOLD:1,FONT_ITALIC:2,FONT_UNDERLINE:4,SHAPE_RECTANGLE:"rectangle",SHAPE_ELLIPSE:"ellipse",SHAPE_DOUBLE_ELLIPSE:"doubleEllipse",SHAPE_RHOMBUS:"rhombus",SHAPE_LINE:"line",SHAPE_IMAGE:"image",SHAPE_ARROW:"arrow",SHAPE_ARROW_CONNECTOR:"arrowConnector",SHAPE_LABEL:"label",SHAPE_CYLINDER:"cylinder",SHAPE_SWIMLANE:"swimlane",SHAPE_CONNECTOR:"connector",SHAPE_ACTOR:"actor",SHAPE_CLOUD:"cloud",SHAPE_TRIANGLE:"triangle",SHAPE_HEXAGON:"hexagon",ARROW_CLASSIC:"classic",ARROW_CLASSIC_THIN:"classicThin",ARROW_BLOCK:"block",ARROW_BLOCK_THIN:"blockThin",ARROW_OPEN:"open",ARROW_OPEN_THIN:"openThin",ARROW_OVAL:"oval",ARROW_DIAMOND:"diamond",ARROW_DIAMOND_THIN:"diamondThin",ALIGN_LEFT:"left",ALIGN_CENTER:"center",ALIGN_RIGHT:"right",ALIGN_TOP:"top",ALIGN_MIDDLE:"middle",ALIGN_BOTTOM:"bottom",DIRECTION_NORTH:"north",DIRECTION_SOUTH:"south",DIRECTION_EAST:"east",DIRECTION_WEST:"west",TEXT_DIRECTION_DEFAULT:"",TEXT_DIRECTION_AUTO:"auto",TEXT_DIRECTION_LTR:"ltr",TEXT_DIRECTION_RTL:"rtl",DIRECTION_MASK_NONE:0,DIRECTION_MASK_WEST:1,DIRECTION_MASK_NORTH:2,DIRECTION_MASK_SOUTH:4,DIRECTION_MASK_EAST:8,DIRECTION_MASK_ALL:15,ELBOW_VERTICAL:"vertical",ELBOW_HORIZONTAL:"horizontal",EDGESTYLE_ELBOW:"elbowEdgeStyle",EDGESTYLE_ENTITY_RELATION:"entityRelationEdgeStyle",EDGESTYLE_LOOP:"loopEdgeStyle",EDGESTYLE_SIDETOSIDE:"sideToSideEdgeStyle",EDGESTYLE_TOPTOBOTTOM:"topToBottomEdgeStyle",EDGESTYLE_ORTHOGONAL:"orthogonalEdgeStyle",EDGESTYLE_SEGMENT:"segmentEdgeStyle",PERIMETER_ELLIPSE:"ellipsePerimeter",PERIMETER_RECTANGLE:"rectanglePerimeter",PERIMETER_RHOMBUS:"rhombusPerimeter",PERIMETER_HEXAGON:"hexagonPerimeter",PERIMETER_TRIANGLE:"trianglePerimeter"};function mxDictionary(){this.clear()}mxDictionary.prototype.map=null;mxDictionary.prototype.clear=function(){this.map={}};mxDictionary.prototype.get=function(A){var B=mxObjectIdentity.get(A);return this.map[B]};mxDictionary.prototype.put=function(A,B){var D=mxObjectIdentity.get(A);var C=this.map[D];this.map[D]=B;return C};mxDictionary.prototype.remove=function(A){var C=mxObjectIdentity.get(A);var B=this.map[C];delete this.map[C];return B};mxDictionary.prototype.getKeys=function(){var B=[];for(var A in this.map){B.push(A)}return B};mxDictionary.prototype.getValues=function(){var B=[];for(var A in this.map){B.push(this.map[A])}return B};mxDictionary.prototype.visit=function(B){for(var A in this.map){B(A,this.map[A])}};function mxDivResizer(B,A){if(B.nodeName.toLowerCase()=="div"){if(A==null){A=window}this.div=B;var C=mxUtils.getCurrentStyle(B);if(C!=null){this.resizeWidth=C.width=="auto";this.resizeHeight=C.height=="auto"}mxEvent.addListener(A,"resize",mxUtils.bind(this,function(D){if(!this.handlingResize){this.handlingResize=true;this.resize();this.handlingResize=false}}));this.resize()}}mxDivResizer.prototype.resizeWidth=true;mxDivResizer.prototype.resizeHeight=true;mxDivResizer.prototype.handlingResize=false;mxDivResizer.prototype.resize=function(){var D=this.getDocumentWidth();var A=this.getDocumentHeight();var C=parseInt(this.div.style.left);var B=parseInt(this.div.style.right);var E=parseInt(this.div.style.top);var F=parseInt(this.div.style.bottom);if(this.resizeWidth&&!isNaN(C)&&!isNaN(B)&&C>=0&&B>=0&&D-B-C>0){this.div.style.width=(D-B-C)+"px"}if(this.resizeHeight&&!isNaN(E)&&!isNaN(F)&&E>=0&&F>=0&&A-E-F>0){this.div.style.height=(A-E-F)+"px"}};mxDivResizer.prototype.getDocumentWidth=function(){return document.body.clientWidth};mxDivResizer.prototype.getDocumentHeight=function(){return document.body.clientHeight};function mxDragSource(B,A){this.element=B;this.dropHandler=A;mxEvent.addGestureListeners(B,mxUtils.bind(this,function(C){this.mouseDown(C)}));mxEvent.addListener(B,"dragstart",function(C){mxEvent.consume(C)});this.eventConsumer=function(C,D){var F=D.getProperty("eventName");var E=D.getProperty("event");if(F!=mxEvent.MOUSE_DOWN){E.consume()}}}mxDragSource.prototype.element=null;mxDragSource.prototype.dropHandler=null;mxDragSource.prototype.dragOffset=null;mxDragSource.prototype.dragElement=null;mxDragSource.prototype.previewElement=null;mxDragSource.prototype.enabled=true;mxDragSource.prototype.currentGraph=null;mxDragSource.prototype.currentDropTarget=null;mxDragSource.prototype.currentPoint=null;mxDragSource.prototype.currentGuide=null;mxDragSource.prototype.currentHighlight=null;mxDragSource.prototype.autoscroll=true;mxDragSource.prototype.guidesEnabled=true;mxDragSource.prototype.gridEnabled=true;mxDragSource.prototype.highlightDropTargets=true;mxDragSource.prototype.dragElementZIndex=100;mxDragSource.prototype.dragElementOpacity=70;mxDragSource.prototype.isEnabled=function(){return this.enabled};mxDragSource.prototype.setEnabled=function(A){this.enabled=A};mxDragSource.prototype.isGuidesEnabled=function(){return this.guidesEnabled};mxDragSource.prototype.setGuidesEnabled=function(A){this.guidesEnabled=A};mxDragSource.prototype.isGridEnabled=function(){return this.gridEnabled};mxDragSource.prototype.setGridEnabled=function(A){this.gridEnabled=A};mxDragSource.prototype.getGraphForEvent=function(A){return null};mxDragSource.prototype.getDropTarget=function(A,B,C,D){return A.getCellAt(B,C)};mxDragSource.prototype.createDragElement=function(A){return this.element.cloneNode(true)};mxDragSource.prototype.createPreviewElement=function(A){return null};mxDragSource.prototype.isActive=function(){return this.mouseMoveHandler!=null};mxDragSource.prototype.reset=function(){if(this.currentGraph!=null){this.dragExit(this.currentGraph);this.currentGraph=null}this.removeDragElement();this.removeListeners();this.stopDrag()};mxDragSource.prototype.mouseDown=function(A){if(this.enabled&&!mxEvent.isConsumed(A)&&this.mouseMoveHandler==null){this.startDrag(A);this.mouseMoveHandler=mxUtils.bind(this,this.mouseMove);this.mouseUpHandler=mxUtils.bind(this,this.mouseUp);mxEvent.addGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler);if(mxClient.IS_TOUCH&&!mxEvent.isMouseEvent(A)){this.eventSource=mxEvent.getSource(A);mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler)}}};mxDragSource.prototype.startDrag=function(A){this.dragElement=this.createDragElement(A);this.dragElement.style.position="absolute";this.dragElement.style.zIndex=this.dragElementZIndex;mxUtils.setOpacity(this.dragElement,this.dragElementOpacity)};mxDragSource.prototype.stopDrag=function(){this.removeDragElement()};mxDragSource.prototype.removeDragElement=function(){if(this.dragElement!=null){if(this.dragElement.parentNode!=null){this.dragElement.parentNode.removeChild(this.dragElement)}this.dragElement=null}};mxDragSource.prototype.graphContainsEvent=function(B,F){var D=mxEvent.getClientX(F);var E=mxEvent.getClientY(F);var A=mxUtils.getOffset(B.container);var C=mxUtils.getScrollOrigin();return D>=A.x-C.x&&E>=A.y-C.y&&D<=A.x-C.x+B.container.offsetWidth&&E<=A.y-C.y+B.container.offsetHeight};mxDragSource.prototype.mouseMove=function(B){var C=this.getGraphForEvent(B);if(C!=null&&!this.graphContainsEvent(C,B)){C=null}if(C!=this.currentGraph){if(this.currentGraph!=null){this.dragExit(this.currentGraph,B)}this.currentGraph=C;if(this.currentGraph!=null){this.dragEnter(this.currentGraph,B)}}if(this.currentGraph!=null){this.dragOver(this.currentGraph,B)}if(this.dragElement!=null&&(this.previewElement==null||this.previewElement.style.visibility!="visible")){var D=mxEvent.getClientX(B);var E=mxEvent.getClientY(B);if(this.dragElement.parentNode==null){document.body.appendChild(this.dragElement)}this.dragElement.style.visibility="visible";if(this.dragOffset!=null){D+=this.dragOffset.x;E+=this.dragOffset.y}var A=mxUtils.getDocumentScrollOrigin(document);this.dragElement.style.left=(D+A.x)+"px";this.dragElement.style.top=(E+A.y)+"px"}else{if(this.dragElement!=null){this.dragElement.style.visibility="hidden"}}mxEvent.consume(B)};mxDragSource.prototype.mouseUp=function(A){if(this.currentGraph!=null){if(this.currentPoint!=null&&(this.previewElement==null||this.previewElement.style.visibility!="hidden")){var D=this.currentGraph.view.scale;var B=this.currentGraph.view.translate;var C=this.currentPoint.x/D-B.x;var E=this.currentPoint.y/D-B.y;this.drop(this.currentGraph,A,this.currentDropTarget,C,E)}this.dragExit(this.currentGraph);this.currentGraph=null}this.stopDrag();this.removeListeners();mxEvent.consume(A)};mxDragSource.prototype.removeListeners=function(){if(this.eventSource!=null){mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler);this.eventSource=null}mxEvent.removeGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler);this.mouseMoveHandler=null;this.mouseUpHandler=null};mxDragSource.prototype.dragEnter=function(A,B){A.isMouseDown=true;A.isMouseTrigger=mxEvent.isMouseEvent(B);this.previewElement=this.createPreviewElement(A);if(this.isGuidesEnabled()&&this.previewElement!=null){this.currentGuide=new mxGuide(A,A.graphHandler.getGuideStates())}if(this.highlightDropTargets){this.currentHighlight=new mxCellHighlight(A,mxConstants.DROP_TARGET_COLOR)}A.addListener(mxEvent.FIRE_MOUSE_EVENT,this.eventConsumer)};mxDragSource.prototype.dragExit=function(A,B){this.currentDropTarget=null;this.currentPoint=null;A.isMouseDown=false;A.removeListener(this.eventConsumer);if(this.previewElement!=null){if(this.previewElement.parentNode!=null){this.previewElement.parentNode.removeChild(this.previewElement)}this.previewElement=null}if(this.currentGuide!=null){this.currentGuide.destroy();this.currentGuide=null}if(this.currentHighlight!=null){this.currentHighlight.destroy();this.currentHighlight=null}};mxDragSource.prototype.dragOver=function(E,C){var D=mxUtils.getOffset(E.container);var M=mxUtils.getScrollOrigin(E.container);var N=mxEvent.getClientX(C)-D.x+M.x-E.panDx;var O=mxEvent.getClientY(C)-D.y+M.y-E.panDy;if(E.autoScroll&&(this.autoscroll==null||this.autoscroll)){E.scrollPointToVisible(N,O,E.autoExtend)}if(this.currentHighlight!=null&&E.isDropEnabled()){this.currentDropTarget=this.getDropTarget(E,N,O,C);var L=E.getView().getState(this.currentDropTarget);this.currentHighlight.highlight(L)}if(this.previewElement!=null){if(this.previewElement.parentNode==null){E.container.appendChild(this.previewElement);this.previewElement.style.zIndex="3";this.previewElement.style.position="absolute"}var F=this.isGridEnabled()&&E.isGridEnabledEvent(C);var J=true;if(this.currentGuide!=null&&this.currentGuide.isEnabledForEvent(C)){var I=parseInt(this.previewElement.style.width);var K=parseInt(this.previewElement.style.height);var A=new mxRectangle(0,0,I,K);var H=new mxPoint(N,O);H=this.currentGuide.move(A,H,F);J=false;N=H.x;O=H.y}else{if(F){var B=E.view.scale;var G=E.view.translate;var P=E.gridSize/2;N=(E.snap(N/B-G.x-P)+G.x)*B;O=(E.snap(O/B-G.y-P)+G.y)*B}}if(this.currentGuide!=null&&J){this.currentGuide.hide()}if(this.previewOffset!=null){N+=this.previewOffset.x;O+=this.previewOffset.y}this.previewElement.style.left=Math.round(N)+"px";this.previewElement.style.top=Math.round(O)+"px";this.previewElement.style.visibility="visible"}this.currentPoint=new mxPoint(N,O)};mxDragSource.prototype.drop=function(B,E,A,C,D){this.dropHandler(B,E,A,C,D);if(B.container.style.visibility!="hidden"){B.container.focus()}};var mxEffects={animateChanges:function(D,E,B){var G=10;var A=0;var C=function(){var K=false;for(var M=0;M<E.length;M++){var H=E[M];if(H instanceof mxGeometryChange||H instanceof mxTerminalChange||H instanceof mxValueChange||H instanceof mxChildChange||H instanceof mxStyleChange){var J=D.getView().getState(H.cell||H.child,false);if(J!=null){K=true;if(H.constructor!=mxGeometryChange||D.model.isEdge(H.cell)){mxUtils.setOpacity(J.shape.node,100*A/G)}else{var I=D.getView().scale;var O=(H.geometry.x-H.previous.x)*I;var L=(H.geometry.y-H.previous.y)*I;var P=(H.geometry.width-H.previous.width)*I;var N=(H.geometry.height-H.previous.height)*I;if(A==0){J.x-=O;J.y-=L;J.width-=P;J.height-=N}else{J.x+=O/G;J.y+=L/G;J.width+=P/G;J.height+=N/G}D.cellRenderer.redraw(J);mxEffects.cascadeOpacity(D,H.cell,100*A/G)}}}}if(A<G&&K){A++;window.setTimeout(C,F)}else{if(B!=null){B()}}};var F=30;C()},cascadeOpacity:function(C,I,D){var A=C.model.getChildCount(I);for(var E=0;E<A;E++){var G=C.model.getChildAt(I,E);var F=C.getView().getState(G);if(F!=null){mxUtils.setOpacity(F.shape.node,D);mxEffects.cascadeOpacity(C,G,D)}}var B=C.model.getEdges(I);if(B!=null){for(var E=0;E<B.length;E++){var H=C.getView().getState(B[E]);if(H!=null){mxUtils.setOpacity(H.shape.node,D)}}}},fadeOut:function(E,F,D,B,A,G){B=B||40;A=A||30;var C=F||100;mxUtils.setOpacity(E,C);if(G||G==null){var H=function(){C=Math.max(C-B,0);mxUtils.setOpacity(E,C);if(C>0){window.setTimeout(H,A)}else{E.style.visibility="hidden";if(D&&E.parentNode){E.parentNode.removeChild(E)}}};window.setTimeout(H,A)}else{E.style.visibility="hidden";if(D&&E.parentNode){E.parentNode.removeChild(E)}}}};var mxEvent={objects:[],addListener:function(){var A=function(E,C,D){if(E.mxListenerList==null){E.mxListenerList=[];mxEvent.objects.push(E)}var B={name:C,f:D};E.mxListenerList.push(B)};if(window.addEventListener){return function(D,B,C){D.addEventListener(B,C,false);A(D,B,C)}}else{return function(D,B,C){D.attachEvent("on"+B,C);A(D,B,C)}}}(),removeListener:function(){var A=function(H,F,G){if(H.mxListenerList!=null){var E=H.mxListenerList.length;for(var B=0;B<E;B++){var C=H.mxListenerList[B];if(C.f==G){H.mxListenerList.splice(B,1);break}}if(H.mxListenerList.length==0){H.mxListenerList=null;var D=mxUtils.indexOf(mxEvent.objects,H);if(D>=0){mxEvent.objects.splice(D,1)}}}};if(window.removeEventListener){return function(D,B,C){D.removeEventListener(B,C,false);A(D,B,C)}}else{return function(D,B,C){D.detachEvent("on"+B,C);A(D,B,C)}}}(),removeAllListeners:function(C){var B=C.mxListenerList;if(B!=null){while(B.length>0){var A=B[0];mxEvent.removeListener(C,A.name,A.f)}}},addGestureListeners:function(C,B,D,A){if(B!=null){mxEvent.addListener(C,(mxClient.IS_POINTER)?"pointerdown":"mousedown",B)}if(D!=null){mxEvent.addListener(C,(mxClient.IS_POINTER)?"pointermove":"mousemove",D)}if(A!=null){mxEvent.addListener(C,(mxClient.IS_POINTER)?"pointerup":"mouseup",A)}if(!mxClient.IS_POINTER&&mxClient.IS_TOUCH){if(B!=null){mxEvent.addListener(C,"touchstart",B)}if(D!=null){mxEvent.addListener(C,"touchmove",D)}if(A!=null){mxEvent.addListener(C,"touchend",A)}}},removeGestureListeners:function(C,B,D,A){if(B!=null){mxEvent.removeListener(C,(mxClient.IS_POINTER)?"pointerdown":"mousedown",B)}if(D!=null){mxEvent.removeListener(C,(mxClient.IS_POINTER)?"pointermove":"mousemove",D)}if(A!=null){mxEvent.removeListener(C,(mxClient.IS_POINTER)?"pointerup":"mouseup",A)}if(!mxClient.IS_POINTER&&mxClient.IS_TOUCH){if(B!=null){mxEvent.removeListener(C,"touchstart",B)}if(D!=null){mxEvent.removeListener(C,"touchmove",D)}if(A!=null){mxEvent.removeListener(C,"touchend",A)}}},redirectMouseEvents:function(G,C,E,A,H,F,D){var B=function(I){return(typeof(E)=="function")?E(I):E};mxEvent.addGestureListeners(G,function(I){if(A!=null){A(I)}else{if(!mxEvent.isConsumed(I)){C.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(I,B(I)))}}},function(I){if(H!=null){H(I)}else{if(!mxEvent.isConsumed(I)){C.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(I,B(I)))}}},function(I){if(F!=null){F(I)}else{if(!mxEvent.isConsumed(I)){C.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(I,B(I)))}}});mxEvent.addListener(G,"dblclick",function(J){if(D!=null){D(J)}else{if(!mxEvent.isConsumed(J)){var I=B(J);C.dblClick(J,(I!=null)?I.cell:null)}}})},release:function(C){if(C!=null){mxEvent.removeAllListeners(C);var D=C.childNodes;if(D!=null){var A=D.length;for(var B=0;B<A;B+=1){mxEvent.release(D[B])}}}},addMouseWheelListener:function(C){if(C!=null){var A=function(E){if(E==null){E=window.event}var D=0;if(mxClient.IS_FF){D=-E.detail/2}else{D=E.wheelDelta/120}if(D!=0){C(E,D>0)}};if(mxClient.IS_NS&&document.documentMode==null){var B=(mxClient.IS_SF||mxClient.IS_GC)?"mousewheel":"DOMMouseScroll";mxEvent.addListener(window,B,A)}else{mxEvent.addListener(document,"mousewheel",A)}}},disableContextMenu:function(){if(mxClient.IS_IE&&(typeof(document.documentMode)==="undefined"||document.documentMode<9)){return function(A){mxEvent.addListener(A,"contextmenu",function(){return false})}}else{return function(A){A.setAttribute("oncontextmenu","return false;")}}}(),getSource:function(A){return(A.srcElement!=null)?A.srcElement:A.target},isConsumed:function(A){return A.isConsumed!=null&&A.isConsumed},isTouchEvent:function(A){return(A.pointerType!=null)?(A.pointerType=="touch"||A.pointerType===A.MSPOINTER_TYPE_TOUCH):((A.mozInputSource!=null)?A.mozInputSource==5:A.type.indexOf("touch")==0)},isMultiTouchEvent:function(A){return(A.type!=null&&A.type.indexOf("touch")==0&&A.touches!=null&&A.touches.length>1)},isMouseEvent:function(A){return(A.pointerType!=null)?(A.pointerType=="mouse"||A.pointerType===A.MSPOINTER_TYPE_MOUSE):((A.mozInputSource!=null)?A.mozInputSource==1:A.type.indexOf("mouse")==0)},isLeftMouseButton:function(A){if("buttons" in A&&(A.type=="mousedown"||A.type=="mousemove")){return A.buttons==1}else{if("which" in A){return A.which===1}else{return A.button===1}}},isMiddleMouseButton:function(A){if("which" in A){return A.which===2}else{return A.button===4}},isRightMouseButton:function(A){if("which" in A){return A.which===3}else{return A.button===2}},isPopupTrigger:function(A){return mxEvent.isRightMouseButton(A)||(mxClient.IS_MAC&&mxEvent.isControlDown(A)&&!mxEvent.isShiftDown(A)&&!mxEvent.isMetaDown(A)&&!mxEvent.isAltDown(A))},isShiftDown:function(A){return(A!=null)?A.shiftKey:false},isAltDown:function(A){return(A!=null)?A.altKey:false},isControlDown:function(A){return(A!=null)?A.ctrlKey:false},isMetaDown:function(A){return(A!=null)?A.metaKey:false},getMainEvent:function(A){if((A.type=="touchstart"||A.type=="touchmove")&&A.touches!=null&&A.touches[0]!=null){A=A.touches[0]}else{if(A.type=="touchend"&&A.changedTouches!=null&&A.changedTouches[0]!=null){A=A.changedTouches[0]}}return A},getClientX:function(A){return mxEvent.getMainEvent(A).clientX},getClientY:function(A){return mxEvent.getMainEvent(A).clientY},consume:function(B,C,A){C=(C!=null)?C:true;A=(A!=null)?A:true;if(C){if(B.preventDefault){if(A){B.stopPropagation()}B.preventDefault()}else{if(A){B.cancelBubble=true}}}B.isConsumed=true;if(!B.preventDefault){B.returnValue=false}},LABEL_HANDLE:-1,ROTATION_HANDLE:-2,CUSTOM_HANDLE:-100,VIRTUAL_HANDLE:-100000,MOUSE_DOWN:"mouseDown",MOUSE_MOVE:"mouseMove",MOUSE_UP:"mouseUp",ACTIVATE:"activate",RESIZE_START:"resizeStart",RESIZE:"resize",RESIZE_END:"resizeEnd",MOVE_START:"moveStart",MOVE:"move",MOVE_END:"moveEnd",PAN_START:"panStart",PAN:"pan",PAN_END:"panEnd",MINIMIZE:"minimize",NORMALIZE:"normalize",MAXIMIZE:"maximize",HIDE:"hide",SHOW:"show",CLOSE:"close",DESTROY:"destroy",REFRESH:"refresh",SIZE:"size",SELECT:"select",FIRED:"fired",FIRE_MOUSE_EVENT:"fireMouseEvent",GESTURE:"gesture",TAP_AND_HOLD:"tapAndHold",GET:"get",RECEIVE:"receive",CONNECT:"connect",DISCONNECT:"disconnect",SUSPEND:"suspend",RESUME:"resume",MARK:"mark",ROOT:"root",POST:"post",OPEN:"open",SAVE:"save",BEFORE_ADD_VERTEX:"beforeAddVertex",ADD_VERTEX:"addVertex",AFTER_ADD_VERTEX:"afterAddVertex",DONE:"done",EXECUTE:"execute",EXECUTED:"executed",BEGIN_UPDATE:"beginUpdate",START_EDIT:"startEdit",END_UPDATE:"endUpdate",END_EDIT:"endEdit",BEFORE_UNDO:"beforeUndo",UNDO:"undo",REDO:"redo",CHANGE:"change",NOTIFY:"notify",LAYOUT_CELLS:"layoutCells",CLICK:"click",SCALE:"scale",TRANSLATE:"translate",SCALE_AND_TRANSLATE:"scaleAndTranslate",UP:"up",DOWN:"down",ADD:"add",REMOVE:"remove",CLEAR:"clear",ADD_CELLS:"addCells",CELLS_ADDED:"cellsAdded",MOVE_CELLS:"moveCells",CELLS_MOVED:"cellsMoved",RESIZE_CELLS:"resizeCells",CELLS_RESIZED:"cellsResized",TOGGLE_CELLS:"toggleCells",CELLS_TOGGLED:"cellsToggled",ORDER_CELLS:"orderCells",CELLS_ORDERED:"cellsOrdered",REMOVE_CELLS:"removeCells",CELLS_REMOVED:"cellsRemoved",GROUP_CELLS:"groupCells",UNGROUP_CELLS:"ungroupCells",REMOVE_CELLS_FROM_PARENT:"removeCellsFromParent",FOLD_CELLS:"foldCells",CELLS_FOLDED:"cellsFolded",ALIGN_CELLS:"alignCells",LABEL_CHANGED:"labelChanged",CONNECT_CELL:"connectCell",CELL_CONNECTED:"cellConnected",SPLIT_EDGE:"splitEdge",FLIP_EDGE:"flipEdge",START_EDITING:"startEditing",EDITING_STARTED:"editingStarted",EDITING_STOPPED:"editingStopped",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",UPDATE_CELL_SIZE:"updateCellSize",ESCAPE:"escape",CLICK:"click",DOUBLE_CLICK:"doubleClick",START:"start",RESET:"reset"};function mxEventObject(B){this.name=B;this.properties=[];for(var A=1;A<arguments.length;A+=2){if(arguments[A+1]!=null){this.properties[arguments[A]]=arguments[A+1]}}}mxEventObject.prototype.name=null;mxEventObject.prototype.properties=null;mxEventObject.prototype.consumed=false;mxEventObject.prototype.getName=function(){return this.name};mxEventObject.prototype.getProperties=function(){return this.properties};mxEventObject.prototype.getProperty=function(A){return this.properties[A]};mxEventObject.prototype.isConsumed=function(){return this.consumed};mxEventObject.prototype.consume=function(){this.consumed=true};function mxEventSource(A){this.setEventSource(A)}mxEventSource.prototype.eventListeners=null;mxEventSource.prototype.eventsEnabled=true;mxEventSource.prototype.eventSource=null;mxEventSource.prototype.isEventsEnabled=function(){return this.eventsEnabled};mxEventSource.prototype.setEventsEnabled=function(A){this.eventsEnabled=A};mxEventSource.prototype.getEventSource=function(){return this.eventSource};mxEventSource.prototype.setEventSource=function(A){this.eventSource=A};mxEventSource.prototype.addListener=function(A,B){if(this.eventListeners==null){this.eventListeners=[]}this.eventListeners.push(A);this.eventListeners.push(B)};mxEventSource.prototype.removeListener=function(B){if(this.eventListeners!=null){var A=0;while(A<this.eventListeners.length){if(this.eventListeners[A+1]==B){this.eventListeners.splice(A,2)}else{A+=2}}}};mxEventSource.prototype.fireEvent=function(C,B){if(this.eventListeners!=null&&this.isEventsEnabled()){if(C==null){C=new mxEventObject()}if(B==null){B=this.getEventSource()}if(B==null){B=this}var E=[B,C];for(var A=0;A<this.eventListeners.length;A+=2){var D=this.eventListeners[A];if(D==null||D==C.getName()){this.eventListeners[A+1].apply(this,E)}}}};function mxForm(A){this.table=document.createElement("table");this.table.className=A;this.body=document.createElement("tbody");this.table.appendChild(this.body)}mxForm.prototype.table=null;mxForm.prototype.body=false;mxForm.prototype.getTable=function(){return this.table};mxForm.prototype.addButtons=function(E,B){var C=document.createElement("tr");var D=document.createElement("td");C.appendChild(D);D=document.createElement("td");var A=document.createElement("button");mxUtils.write(A,mxResources.get("ok")||"OK");D.appendChild(A);mxEvent.addListener(A,"click",function(){E()});A=document.createElement("button");mxUtils.write(A,mxResources.get("cancel")||"Cancel");D.appendChild(A);mxEvent.addListener(A,"click",function(){B()});C.appendChild(D);this.body.appendChild(C)};mxForm.prototype.addText=function(A,C){var B=document.createElement("input");B.setAttribute("type","text");B.value=C;return this.addField(A,B)};mxForm.prototype.addCheckbox=function(A,C){var B=document.createElement("input");B.setAttribute("type","checkbox");this.addField(A,B);if(C){B.checked=true}return B};mxForm.prototype.addTextarea=function(A,C,D){var B=document.createElement("textarea");if(mxClient.IS_NS){D--}B.setAttribute("rows",D||2);B.value=C;return this.addField(A,B)};mxForm.prototype.addCombo=function(C,B,A){var D=document.createElement("select");if(A!=null){D.setAttribute("size",A)}if(B){D.setAttribute("multiple","true")}return this.addField(C,D)};mxForm.prototype.addOption=function(E,A,D,B){var C=document.createElement("option");mxUtils.writeln(C,A);C.setAttribute("value",D);if(B){C.setAttribute("selected",B)}E.appendChild(C)};mxForm.prototype.addField=function(C,D){var B=document.createElement("tr");var A=document.createElement("td");mxUtils.write(A,C);B.appendChild(A);A=document.createElement("td");A.appendChild(D);B.appendChild(A);this.body.appendChild(B);return D};function mxGuide(B,A){this.graph=B;this.setStates(A)}mxGuide.prototype.graph=null;mxGuide.prototype.states=null;mxGuide.prototype.horizontal=true;mxGuide.prototype.vertical=true;mxGuide.prototype.guideX=null;mxGuide.prototype.guideY=null;mxGuide.prototype.setStates=function(A){this.states=A};mxGuide.prototype.isEnabledForEvent=function(A){return true};mxGuide.prototype.getGuideTolerance=function(){return this.graph.gridSize/2};mxGuide.prototype.createGuideShape=function(B){var A=new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH);A.isDashed=true;return A};mxGuide.prototype.move=function(W,P,R){if(this.states!=null&&(this.horizontal||this.vertical)&&W!=null&&P!=null){var D=this.graph.getView().translate;var S=this.graph.getView().scale;var K=P.x;var a=P.y;var X=false;var L=null;var Q=null;var Y=false;var F=null;var f=null;var d=this.getGuideTolerance();var G=d;var H=d;var M=W.clone();M.x+=P.x;M.y+=P.y;var Z=M.x;var J=M.x+M.width;var e=M.getCenterX();var E=M.y;var V=M.y+M.height;var T=M.getCenterY();function A(c,g){c+=this.graph.panDx;var b=false;if(Math.abs(c-e)<G){K=c-W.getCenterX();G=Math.abs(c-e);b=true}else{if(Math.abs(c-Z)<G){K=c-W.x;G=Math.abs(c-Z);b=true}else{if(Math.abs(c-J)<G){K=c-W.x-W.width;G=Math.abs(c-J);b=true}}}if(b){L=g;Q=Math.round(c-this.graph.panDx);if(this.guideX==null){this.guideX=this.createGuideShape(true);this.guideX.dialect=(this.graph.dialect!=mxConstants.DIALECT_SVG)?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG;this.guideX.pointerEvents=false;this.guideX.init(this.graph.getView().getOverlayPane())}}X=X||b}function B(c){c+=this.graph.panDy;var b=false;if(Math.abs(c-T)<H){a=c-W.getCenterY();H=Math.abs(c-T);b=true}else{if(Math.abs(c-E)<H){a=c-W.y;H=Math.abs(c-E);b=true}else{if(Math.abs(c-V)<H){a=c-W.y-W.height;H=Math.abs(c-V);b=true}}}if(b){F=U;f=Math.round(c-this.graph.panDy);if(this.guideY==null){this.guideY=this.createGuideShape(false);this.guideY.dialect=(this.graph.dialect!=mxConstants.DIALECT_SVG)?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG;this.guideY.pointerEvents=false;this.guideY.init(this.graph.getView().getOverlayPane())}}Y=Y||b}for(var I=0;I<this.states.length;I++){var U=this.states[I];if(U!=null){if(this.horizontal){A.call(this,U.getCenterX(),U);A.call(this,U.x,U);A.call(this,U.x+U.width,U)}if(this.vertical){B.call(this,U.getCenterY(),U);B.call(this,U.y,U);B.call(this,U.y+U.height,U)}}}if(R){if(!X){var C=W.x-(this.graph.snap(W.x/S-D.x)+D.x)*S;K=this.graph.snap(K/S)*S-C}if(!Y){var O=W.y-(this.graph.snap(W.y/S-D.y)+D.y)*S;a=this.graph.snap(a/S)*S-O}}var N=this.graph.container;if(!X&&this.guideX!=null){this.guideX.node.style.visibility="hidden"}else{if(this.guideX!=null){if(L!=null&&W!=null){minY=Math.min(W.y+a-this.graph.panDy,L.y);maxY=Math.max(W.y+W.height+a-this.graph.panDy,L.y+L.height)}if(minY!=null&&maxY!=null){this.guideX.points=[new mxPoint(Q,minY),new mxPoint(Q,maxY)]}else{this.guideX.points=[new mxPoint(Q,-this.graph.panDy),new mxPoint(Q,N.scrollHeight-3-this.graph.panDy)]}this.guideX.stroke=this.getGuideColor(L,true);this.guideX.node.style.visibility="visible";this.guideX.redraw()}}if(!Y&&this.guideY!=null){this.guideY.node.style.visibility="hidden"}else{if(this.guideY!=null){if(F!=null&&W!=null){minX=Math.min(W.x+K-this.graph.panDx,F.x);maxX=Math.max(W.x+W.width+K-this.graph.panDx,F.x+F.width)}if(minX!=null&&maxX!=null){this.guideY.points=[new mxPoint(minX,f),new mxPoint(maxX,f)]}else{this.guideY.points=[new mxPoint(-this.graph.panDx,f),new mxPoint(N.scrollWidth-3-this.graph.panDx,f)]}this.guideY.stroke=this.getGuideColor(F,false);this.guideY.node.style.visibility="visible";this.guideY.redraw()}}P=new mxPoint(K,a)}return P};mxGuide.prototype.getGuideColor=function(B,A){return mxConstants.GUIDE_COLOR};mxGuide.prototype.hide=function(){this.setVisible(false)};mxGuide.prototype.setVisible=function(A){if(this.guideX!=null){this.guideX.node.style.visibility=(A)?"visible":"hidden"}if(this.guideY!=null){this.guideY.node.style.visibility=(A)?"visible":"hidden"}};mxGuide.prototype.destroy=function(){if(this.guideX!=null){this.guideX.destroy();this.guideX=null}if(this.guideY!=null){this.guideY.destroy();this.guideY=null}};function mxImage(C,B,A){this.src=C;this.width=B;this.height=A}mxImage.prototype.src=null;mxImage.prototype.width=null;mxImage.prototype.height=null;function mxImageBundle(A){this.images=[];this.alt=(A!=null)?A:false}mxImageBundle.prototype.images=null;mxImageBundle.prototype.images=null;mxImageBundle.prototype.putImage=function(B,C,A){this.images[B]={value:C,fallback:A}};mxImageBundle.prototype.getImage=function(A){var B=null;if(A!=null){var C=this.images[A];if(C!=null){B=(this.alt)?C.fallback:C.value}}return B};function mxImageExport(){}mxImageExport.prototype.includeOverlays=false;mxImageExport.prototype.drawState=function(B,A){if(B!=null){this.visitStatesRecursive(B,A,mxUtils.bind(this,function(){this.drawCellState.apply(this,arguments)}));if(this.includeOverlays){this.visitStatesRecursive(B,A,mxUtils.bind(this,function(){this.drawOverlays.apply(this,arguments)}))}}};mxImageExport.prototype.visitStatesRecursive=function(G,E,B){if(G!=null){B(G,E);var D=G.view.graph;var A=D.model.getChildCount(G.cell);for(var C=0;C<A;C++){var F=D.view.getState(D.model.getChildAt(G.cell,C));this.visitStatesRecursive(F,E,B)}}};mxImageExport.prototype.getLinkForCellState=function(B,A){return null};mxImageExport.prototype.drawCellState=function(C,B){var A=this.getLinkForCellState(C,B);if(A!=null){B.setLink(A)}this.drawShape(C,B);this.drawText(C,B);if(A!=null){B.setLink(null)}};mxImageExport.prototype.drawShape=function(B,A){if(B.shape instanceof mxShape&&B.shape.checkBounds()){A.save();B.shape.paint(A);A.restore()}};mxImageExport.prototype.drawText=function(B,A){if(B.text!=null&&B.text.checkBounds()){A.save();B.text.paint(A);A.restore()}};mxImageExport.prototype.drawOverlays=function(B,A){if(B.overlays!=null){B.overlays.visit(function(D,C){if(C instanceof mxShape){C.paint(A)}})}};var mxLog={consoleName:"Console",TRACE:false,DEBUG:true,WARN:true,buffer:"",init:function(){if(mxLog.window==null&&document.body!=null){var E=mxLog.consoleName+" - mxGraph "+mxClient.VERSION;var I=document.createElement("table");I.setAttribute("width","100%");I.setAttribute("height","100%");var G=document.createElement("tbody");var F=document.createElement("tr");var C=document.createElement("td");C.style.verticalAlign="top";mxLog.textarea=document.createElement("textarea");mxLog.textarea.setAttribute("wrap","off");mxLog.textarea.setAttribute("readOnly","true");mxLog.textarea.style.height="100%";mxLog.textarea.style.resize="none";mxLog.textarea.value=mxLog.buffer;if(mxClient.IS_NS&&document.compatMode!="BackCompat"){mxLog.textarea.style.width="99%"}else{mxLog.textarea.style.width="100%"}C.appendChild(mxLog.textarea);F.appendChild(C);G.appendChild(F);F=document.createElement("tr");mxLog.td=document.createElement("td");mxLog.td.style.verticalAlign="top";mxLog.td.setAttribute("height","30px");F.appendChild(mxLog.td);G.appendChild(F);I.appendChild(G);mxLog.addButton("Info",function(J){mxLog.info()});mxLog.addButton("DOM",function(J){var K=mxUtils.getInnerHtml(document.body);mxLog.debug(K)});mxLog.addButton("Trace",function(J){mxLog.TRACE=!mxLog.TRACE;if(mxLog.TRACE){mxLog.debug("Tracing enabled")}else{mxLog.debug("Tracing disabled")}});mxLog.addButton("Copy",function(J){try{mxUtils.copy(mxLog.textarea.value)}catch(K){mxUtils.alert(K)}});mxLog.addButton("Show",function(J){try{mxUtils.popup(mxLog.textarea.value)}catch(K){mxUtils.alert(K)}});mxLog.addButton("Clear",function(J){mxLog.textarea.value=""});var D=0;var A=0;if(typeof(window.innerWidth)==="number"){D=window.innerHeight;A=window.innerWidth}else{D=(document.documentElement.clientHeight||document.body.clientHeight);A=document.body.clientWidth}mxLog.window=new mxWindow(E,I,Math.max(0,A-320),Math.max(0,D-210),300,160);mxLog.window.setMaximizable(true);mxLog.window.setScrollable(false);mxLog.window.setResizable(true);mxLog.window.setClosable(true);mxLog.window.destroyOnClose=false;if(((mxClient.IS_NS||mxClient.IS_IE)&&!mxClient.IS_GC&&!mxClient.IS_SF&&document.compatMode!="BackCompat")||document.documentMode==11){var B=mxLog.window.getElement();var H=function(J,K){mxLog.textarea.style.height=Math.max(0,B.offsetHeight-70)+"px"};mxLog.window.addListener(mxEvent.RESIZE_END,H);mxLog.window.addListener(mxEvent.MAXIMIZE,H);mxLog.window.addListener(mxEvent.NORMALIZE,H);mxLog.textarea.style.height="92px"}}},info:function(){mxLog.writeln(mxUtils.toString(navigator))},addButton:function(B,C){var A=document.createElement("button");mxUtils.write(A,B);mxEvent.addListener(A,"click",C);mxLog.td.appendChild(A)},isVisible:function(){if(mxLog.window!=null){return mxLog.window.isVisible()}return false},show:function(){mxLog.setVisible(true)},setVisible:function(A){if(mxLog.window==null){mxLog.init()}if(mxLog.window!=null){mxLog.window.setVisible(A)}},enter:function(A){if(mxLog.TRACE){mxLog.writeln("Entering "+A);return new Date().getTime()}},leave:function(B,C){if(mxLog.TRACE){var A=(C!=0)?" ("+(new Date().getTime()-C)+" ms)":"";mxLog.writeln("Leaving "+B+A)}},debug:function(){if(mxLog.DEBUG){mxLog.writeln.apply(this,arguments)}},warn:function(){if(mxLog.WARN){mxLog.writeln.apply(this,arguments)}},write:function(){var B="";for(var A=0;A<arguments.length;A++){B+=arguments[A];if(A<arguments.length-1){B+=" "}}if(mxLog.textarea!=null){mxLog.textarea.value=mxLog.textarea.value+B;if(navigator.userAgent.indexOf("Presto/2.5")>=0){mxLog.textarea.style.visibility="hidden";mxLog.textarea.style.visibility="visible"}mxLog.textarea.scrollTop=mxLog.textarea.scrollHeight}else{mxLog.buffer+=B}},writeln:function(){var B="";for(var A=0;A<arguments.length;A++){B+=arguments[A];if(A<arguments.length-1){B+=" "}}mxLog.write(B+"\n")}};function mxMorphing(B,A,C,D){mxAnimation.call(this,D);this.graph=B;this.steps=(A!=null)?A:6;this.ease=(C!=null)?C:1.5}mxMorphing.prototype=new mxAnimation();mxMorphing.prototype.constructor=mxMorphing;mxMorphing.prototype.graph=null;mxMorphing.prototype.steps=null;mxMorphing.prototype.step=0;mxMorphing.prototype.ease=null;mxMorphing.prototype.cells=null;mxMorphing.prototype.updateAnimation=function(){var B=new mxCellStatePreview(this.graph);if(this.cells!=null){for(var A=0;A<this.cells.length;A++){this.animateCell(this.cells[A],B,false)}}else{this.animateCell(this.graph.getModel().getRoot(),B,true)}this.show(B);if(B.isEmpty()||this.step++>=this.steps){this.stopAnimation()}};mxMorphing.prototype.show=function(A){A.show()};mxMorphing.prototype.animateCell=function(I,H,F){var D=this.graph.getView().getState(I);var C=null;if(D!=null){C=this.getDelta(D);if(this.graph.getModel().isVertex(I)&&(C.x!=0||C.y!=0)){var G=this.graph.view.getTranslate();var B=this.graph.view.getScale();C.x+=G.x*B;C.y+=G.y*B;H.moveState(D,-C.x/this.ease,-C.y/this.ease)}}if(F&&!this.stopRecursion(D,C)){var A=this.graph.getModel().getChildCount(I);for(var E=0;E<A;E++){this.animateCell(this.graph.getModel().getChildAt(I,E),H,F)}}};mxMorphing.prototype.stopRecursion=function(B,A){return A!=null&&(A.x!=0||A.y!=0)};mxMorphing.prototype.getDelta=function(F){var D=this.getOriginForCell(F.cell);var A=this.graph.getView().getTranslate();var C=this.graph.getView().getScale();var B=F.x/C-A.x;var E=F.y/C-A.y;return new mxPoint((D.x-B)*C,(D.y-E)*C)};mxMorphing.prototype.getOriginForCell=function(E){var B=null;if(E!=null){var F=this.graph.getModel().getParent(E);var A=this.graph.getCellGeometry(E);B=this.getOriginForCell(F);if(A!=null){if(A.relative){var C=this.graph.getCellGeometry(F);if(C!=null){B.x+=A.x*C.width;B.y+=A.y*C.height}}else{B.x+=A.x;B.y+=A.y}}}if(B==null){var D=this.graph.view.getTranslate();B=new mxPoint(-D.x,-D.y)}return B};function mxMouseEvent(A,B){this.evt=A;this.state=B;this.sourceState=B}mxMouseEvent.prototype.consumed=false;mxMouseEvent.prototype.evt=null;mxMouseEvent.prototype.graphX=null;mxMouseEvent.prototype.graphY=null;mxMouseEvent.prototype.state=null;mxMouseEvent.prototype.sourceState=null;mxMouseEvent.prototype.getEvent=function(){return this.evt};mxMouseEvent.prototype.getSource=function(){return mxEvent.getSource(this.evt)};mxMouseEvent.prototype.isSource=function(A){if(A!=null){return mxUtils.isAncestorNode(A.node,this.getSource())}return false};mxMouseEvent.prototype.getX=function(){return mxEvent.getClientX(this.getEvent())};mxMouseEvent.prototype.getY=function(){return mxEvent.getClientY(this.getEvent())};mxMouseEvent.prototype.getGraphX=function(){return this.graphX};mxMouseEvent.prototype.getGraphY=function(){return this.graphY};mxMouseEvent.prototype.getState=function(){return this.state};mxMouseEvent.prototype.getCell=function(){var A=this.getState();if(A!=null){return A.cell}return null};mxMouseEvent.prototype.isPopupTrigger=function(){return mxEvent.isPopupTrigger(this.getEvent())};mxMouseEvent.prototype.isConsumed=function(){return this.consumed};mxMouseEvent.prototype.consume=function(A){A=(A!=null)?A:true;if(A&&this.evt.preventDefault){this.evt.preventDefault()}if(mxClient.IS_IE){this.evt.returnValue=true}this.consumed=true};var mxObjectIdentity={FIELD_NAME:"mxObjectId",counter:0,get:function(B){if(B!=null){if(B[mxObjectIdentity.FIELD_NAME]==null){if(typeof B==="object"){var A=mxUtils.getFunctionName(B.constructor);B[mxObjectIdentity.FIELD_NAME]=A+"#"+mxObjectIdentity.counter++}else{if(typeof B==="function"){B[mxObjectIdentity.FIELD_NAME]="Function#"+mxObjectIdentity.counter++}}}return B[mxObjectIdentity.FIELD_NAME]}return null},clear:function(A){if(typeof(A)==="object"||typeof A==="function"){delete A[mxObjectIdentity.FIELD_NAME]}}};function mxPanningManager(A){this.thread=null;this.active=false;this.tdx=0;this.tdy=0;this.t0x=0;this.t0y=0;this.dx=0;this.dy=0;this.scrollbars=false;this.scrollLeft=0;this.scrollTop=0;this.mouseListener={mouseDown:function(C,D){},mouseMove:function(C,D){},mouseUp:mxUtils.bind(this,function(C,D){if(this.active){this.stop()}})};A.addMouseListener(this.mouseListener);mxEvent.addListener(document,"mouseup",mxUtils.bind(this,function(){if(this.active){this.stop()}}));var B=mxUtils.bind(this,function(){this.scrollbars=mxUtils.hasScrollbars(A.container);this.scrollLeft=A.container.scrollLeft;this.scrollTop=A.container.scrollTop;return window.setInterval(mxUtils.bind(this,function(){this.tdx-=this.dx;this.tdy-=this.dy;if(this.scrollbars){var C=-A.container.scrollLeft-Math.ceil(this.dx);var D=-A.container.scrollTop-Math.ceil(this.dy);A.panGraph(C,D);A.panDx=this.scrollLeft-A.container.scrollLeft;A.panDy=this.scrollTop-A.container.scrollTop;A.fireEvent(new mxEventObject(mxEvent.PAN))}else{A.panGraph(this.getDx(),this.getDy())}}),this.delay)});this.isActive=function(){return active};this.getDx=function(){return Math.round(this.tdx)};this.getDy=function(){return Math.round(this.tdy)};this.start=function(){this.t0x=A.view.translate.x;this.t0y=A.view.translate.y;this.active=true};this.panTo=function(D,E,F,C){if(!this.active){this.start()}this.scrollLeft=A.container.scrollLeft;this.scrollTop=A.container.scrollTop;F=(F!=null)?F:0;C=(C!=null)?C:0;var G=A.container;this.dx=D+F-G.scrollLeft-G.clientWidth;if(this.dx<0&&Math.abs(this.dx)<this.border){this.dx=this.border+this.dx}else{if(this.handleMouseOut){this.dx=Math.max(this.dx,0)}else{this.dx=0}}if(this.dx==0){this.dx=D-G.scrollLeft;if(this.dx>0&&this.dx<this.border){this.dx=this.dx-this.border}else{if(this.handleMouseOut){this.dx=Math.min(0,this.dx)}else{this.dx=0}}}this.dy=E+C-G.scrollTop-G.clientHeight;if(this.dy<0&&Math.abs(this.dy)<this.border){this.dy=this.border+this.dy}else{if(this.handleMouseOut){this.dy=Math.max(this.dy,0)}else{this.dy=0}}if(this.dy==0){this.dy=E-G.scrollTop;if(this.dy>0&&this.dy<this.border){this.dy=this.dy-this.border}else{if(this.handleMouseOut){this.dy=Math.min(0,this.dy)}else{this.dy=0}}}if(this.dx!=0||this.dy!=0){this.dx*=this.damper;this.dy*=this.damper;if(this.thread==null){this.thread=B()}}else{if(this.thread!=null){window.clearInterval(this.thread);this.thread=null}}};this.stop=function(){if(this.active){this.active=false;if(this.thread!=null){window.clearInterval(this.thread);this.thread=null}this.tdx=0;this.tdy=0;if(!this.scrollbars){var C=A.panDx;var D=A.panDy;if(C!=0||D!=0){A.panGraph(0,0);A.view.setTranslate(this.t0x+C/A.view.scale,this.t0y+D/A.view.scale)}}else{A.panDx=0;A.panDy=0;A.fireEvent(new mxEventObject(mxEvent.PAN))}}};this.destroy=function(){A.removeMouseListener(this.mouseListener)}}mxPanningManager.prototype.damper=1/6;mxPanningManager.prototype.delay=10;mxPanningManager.prototype.handleMouseOut=true;mxPanningManager.prototype.border=0;function mxPoint(A,B){this.x=(A!=null)?A:0;this.y=(B!=null)?B:0}mxPoint.prototype.x=null;mxPoint.prototype.y=null;mxPoint.prototype.equals=function(A){return A!=null&&A.x==this.x&&A.y==this.y};mxPoint.prototype.clone=function(){return mxUtils.clone(this)};function mxPopupMenu(A){this.factoryMethod=A;if(A!=null){this.init()}}mxPopupMenu.prototype=new mxEventSource();mxPopupMenu.prototype.constructor=mxPopupMenu;mxPopupMenu.prototype.submenuImage=mxClient.imageBasePath+"/submenu.gif";mxPopupMenu.prototype.zIndex=10006;mxPopupMenu.prototype.factoryMethod=null;mxPopupMenu.prototype.useLeftButtonForPopup=false;mxPopupMenu.prototype.enabled=true;mxPopupMenu.prototype.itemCount=0;mxPopupMenu.prototype.autoExpand=false;mxPopupMenu.prototype.smartSeparators=false;mxPopupMenu.prototype.labels=true;mxPopupMenu.prototype.init=function(){this.table=document.createElement("table");this.table.className="mxPopupMenu";this.tbody=document.createElement("tbody");this.table.appendChild(this.tbody);this.div=document.createElement("div");this.div.className="mxPopupMenu";this.div.style.display="inline";this.div.style.zIndex=this.zIndex;this.div.appendChild(this.table);mxEvent.disableContextMenu(this.div)};mxPopupMenu.prototype.isEnabled=function(){return this.enabled};mxPopupMenu.prototype.setEnabled=function(A){this.enabled=A};mxPopupMenu.prototype.isPopupTrigger=function(A){return A.isPopupTrigger()||(this.useLeftButtonForPopup&&mxEvent.isLeftMouseButton(A.getEvent()))};mxPopupMenu.prototype.addItem=function(I,K,M,L,H,B,G){L=L||this;this.itemCount++;if(L.willAddSeparator){if(L.containsItems){this.addSeparator(L,true)}L.willAddSeparator=false}L.containsItems=true;var J=document.createElement("tr");J.className="mxPopupMenuItem";var C=document.createElement("td");C.className="mxPopupMenuIcon";if(K!=null){var D=document.createElement("img");D.src=K;C.appendChild(D)}else{if(H!=null){var N=document.createElement("div");N.className=H;C.appendChild(N)}}J.appendChild(C);if(this.labels){var E=document.createElement("td");E.className="mxPopupMenuItem"+((B!=null&&!B)?" mxDisabled":"");mxUtils.write(E,I);E.align="left";J.appendChild(E);var F=document.createElement("td");F.className="mxPopupMenuItem"+((B!=null&&!B)?" mxDisabled":"");F.style.paddingRight="6px";F.style.textAlign="right";J.appendChild(F);if(L.div==null){this.createSubmenu(L)}}L.tbody.appendChild(J);if(G!=false&&B!=false){var A=null;mxEvent.addGestureListeners(J,mxUtils.bind(this,function(O){this.eventReceiver=J;if(L.activeRow!=J&&L.activeRow!=L){if(L.activeRow!=null&&L.activeRow.div.parentNode!=null){this.hideSubmenu(L)}if(J.div!=null){this.showSubmenu(L,J);L.activeRow=J}}if(mxClient.IS_QUIRKS||document.documentMode==8){A=document.selection.createRange()}mxEvent.consume(O)}),mxUtils.bind(this,function(O){if(L.activeRow!=J&&L.activeRow!=L){if(L.activeRow!=null&&L.activeRow.div.parentNode!=null){this.hideSubmenu(L)}if(this.autoExpand&&J.div!=null){this.showSubmenu(L,J);L.activeRow=J}}J.className="mxPopupMenuItemHover"}),mxUtils.bind(this,function(P){if(this.eventReceiver==J){if(L.activeRow!=J){this.hideMenu()}if(A!=null){try{A.select()}catch(O){}A=null}if(M!=null){M(P)}}this.eventReceiver=null;mxEvent.consume(P)}));mxEvent.addListener(J,"mouseout",mxUtils.bind(this,function(O){J.className="mxPopupMenuItem"}))}return J};mxPopupMenu.prototype.addCheckmark=function(B,C){var A=B.firstChild.nextSibling;A.style.backgroundImage="url('"+C+"')";A.style.backgroundRepeat="no-repeat";A.style.backgroundPosition="2px 50%"};mxPopupMenu.prototype.createSubmenu=function(A){A.table=document.createElement("table");A.table.className="mxPopupMenu";A.tbody=document.createElement("tbody");A.table.appendChild(A.tbody);A.div=document.createElement("div");A.div.className="mxPopupMenu";A.div.style.position="absolute";A.div.style.display="inline";A.div.style.zIndex=this.zIndex;A.div.appendChild(A.table);var B=document.createElement("img");B.setAttribute("src",this.submenuImage);td=A.firstChild.nextSibling.nextSibling;td.appendChild(B)};mxPopupMenu.prototype.showSubmenu=function(G,C){if(C.div!=null){C.div.style.left=(G.div.offsetLeft+C.offsetLeft+C.offsetWidth-1)+"px";C.div.style.top=(G.div.offsetTop+C.offsetTop)+"px";document.body.appendChild(C.div);var B=parseInt(C.div.offsetLeft);var E=parseInt(C.div.offsetWidth);var A=mxUtils.getDocumentScrollOrigin(document);var F=document.body;var H=document.documentElement;var D=A.x+(F.clientWidth||H.clientWidth);if(B+E>D){C.div.style.left=(G.div.offsetLeft-E+((mxClient.IS_IE)?6:-6))+"px"}mxUtils.fit(C.div)}};mxPopupMenu.prototype.addSeparator=function(E,D){E=E||this;if(this.smartSeparators&&!D){E.willAddSeparator=true}else{if(E.tbody!=null){E.willAddSeparator=false;var C=document.createElement("tr");var F=document.createElement("td");F.className="mxPopupMenuIcon";F.style.padding="0 0 0 0px";C.appendChild(F);var B=document.createElement("td");B.style.padding="0 0 0 0px";B.setAttribute("colSpan","2");var A=document.createElement("hr");A.setAttribute("size","1");B.appendChild(A);C.appendChild(B);E.tbody.appendChild(C)}}};mxPopupMenu.prototype.popup=function(B,C,D,A){if(this.div!=null&&this.tbody!=null&&this.factoryMethod!=null){this.div.style.left=B+"px";this.div.style.top=C+"px";while(this.tbody.firstChild!=null){mxEvent.release(this.tbody.firstChild);this.tbody.removeChild(this.tbody.firstChild)}this.itemCount=0;this.factoryMethod(this,D,A);if(this.itemCount>0){this.showMenu();this.fireEvent(new mxEventObject(mxEvent.SHOW))}}};mxPopupMenu.prototype.isMenuShowing=function(){return this.div!=null&&this.div.parentNode==document.body};mxPopupMenu.prototype.showMenu=function(){if(document.documentMode>=9){this.div.style.filter="none"}document.body.appendChild(this.div);mxUtils.fit(this.div)};mxPopupMenu.prototype.hideMenu=function(){if(this.div!=null){if(this.div.parentNode!=null){this.div.parentNode.removeChild(this.div)}this.hideSubmenu(this);this.containsItems=false;this.fireEvent(new mxEventObject(mxEvent.HIDE))}};mxPopupMenu.prototype.hideSubmenu=function(A){if(A.activeRow!=null){this.hideSubmenu(A.activeRow);if(A.activeRow.div.parentNode!=null){A.activeRow.div.parentNode.removeChild(A.activeRow.div)}A.activeRow=null}};mxPopupMenu.prototype.destroy=function(){if(this.div!=null){mxEvent.release(this.div);if(this.div.parentNode!=null){this.div.parentNode.removeChild(this.div)}this.div=null}};function mxRectangle(B,C,D,A){mxPoint.call(this,B,C);this.width=(D!=null)?D:0;this.height=(A!=null)?A:0}mxRectangle.prototype=new mxPoint();mxRectangle.prototype.constructor=mxRectangle;mxRectangle.prototype.width=null;mxRectangle.prototype.height=null;mxRectangle.prototype.setRect=function(B,C,D,A){this.x=B;this.y=C;this.width=D;this.height=A};mxRectangle.prototype.getCenterX=function(){return this.x+this.width/2};mxRectangle.prototype.getCenterY=function(){return this.y+this.height/2};mxRectangle.prototype.add=function(C){if(C!=null){var E=Math.min(this.x,C.x);var D=Math.min(this.y,C.y);var B=Math.max(this.x+this.width,C.x+C.width);var A=Math.max(this.y+this.height,C.y+C.height);this.x=E;this.y=D;this.width=B-E;this.height=A-D}};mxRectangle.prototype.intersect=function(C){if(C!=null){var B=this.x+this.width;var D=C.x+C.width;var E=this.y+this.height;var A=C.y+C.height;this.x=Math.max(this.x,C.x);this.y=Math.max(this.y,C.y);this.width=Math.min(B,D)-this.x;this.height=Math.min(E,A)-this.y}};mxRectangle.prototype.grow=function(A){this.x-=A;this.y-=A;this.width+=2*A;this.height+=2*A};mxRectangle.prototype.getPoint=function(){return new mxPoint(this.x,this.y)};mxRectangle.prototype.rotate90=function(){var B=(this.width-this.height)/2;this.x+=B;this.y-=B;var A=this.width;this.width=this.height;this.height=A};mxRectangle.prototype.equals=function(A){return A!=null&&A.x==this.x&&A.y==this.y&&A.width==this.width&&A.height==this.height};mxRectangle.fromRectangle=function(A){return new mxRectangle(A.x,A.y,A.width,A.height)};var mxResources={resources:[],extension:mxResourceExtension,resourcesEncoded:false,loadDefaultBundle:true,loadSpecialBundle:true,isLanguageSupported:function(A){if(mxClient.languages!=null){return mxUtils.indexOf(mxClient.languages,A)>=0}return true},getDefaultBundle:function(A,B){if(mxResources.loadDefaultBundle||!mxResources.isLanguageSupported(B)){return A+mxResources.extension}else{return null}},getSpecialBundle:function(A,B){if(mxClient.languages==null||!this.isLanguageSupported(B)){var C=B.indexOf("-");if(C>0){B=B.substring(0,C)}}if(mxResources.loadSpecialBundle&&mxResources.isLanguageSupported(B)&&B!=mxClient.defaultLanguage){return A+"_"+B+mxResources.extension}else{return null}},add:function(E,A,B){A=(A!=null)?A:((mxClient.language!=null)?mxClient.language.toLowerCase():mxConstants.NONE);if(A!=mxConstants.NONE){var D=mxResources.getDefaultBundle(E,A);var H=mxResources.getSpecialBundle(E,A);var F=function(){if(H!=null){if(B){mxUtils.get(H,function(K){mxResources.parse(K.getText());B()},function(){B()})}else{try{var J=mxUtils.load(H);if(J.isReady()){mxResources.parse(J.getText())}}catch(I){}}}else{if(B!=null){B()}}};if(D!=null){if(B){mxUtils.get(D,function(I){mxResources.parse(I.getText());F()},function(){F()})}else{try{var G=mxUtils.load(D);if(G.isReady()){mxResources.parse(G.getText())}F()}catch(C){}}}else{F()}}},parse:function(E){if(E!=null){var D=E.split("\n");for(var B=0;B<D.length;B++){if(D[B].charAt(0)!="#"){var F=D[B].indexOf("=");if(F>0){var A=D[B].substring(0,F);var C=D[B].length;if(D[B].charCodeAt(C-1)==13){C--}var G=D[B].substring(F+1,C);if(this.resourcesEncoded){G=G.replace(/\\(?=u[a-fA-F\d]{4})/g,"%");mxResources.resources[A]=unescape(G)}else{mxResources.resources[A]=G}}}}}},get:function(B,D,C){var A=mxResources.resources[B];if(A==null){A=C}if(A!=null&&D!=null){A=mxResources.replacePlaceholders(A,D)}return A},replacePlaceholders:function(D,E){var C=[];var F=null;for(var B=0;B<D.length;B++){var A=D.charAt(B);if(A=="{"){F=""}else{if(F!=null&&A=="}"){F=parseInt(F)-1;if(F>=0&&F<E.length){C.push(E[F])}F=null}else{if(F!=null){F+=A}else{C.push(A)}}}}return C.join("")},loadResources:function(A){mxResources.add(mxClient.basePath+"/resources/editor",null,function(){mxResources.add(mxClient.basePath+"/resources/graph",null,A)})}};function mxSvgCanvas2D(B,C){mxAbstractCanvas2D.call(this);this.root=B;this.gradients=[];this.defs=null;this.styleEnabled=(C!=null)?C:false;var A=null;if(B.ownerDocument!=document){var E=B;while(E!=null&&E.nodeName!="svg"){E=E.parentNode}A=E}if(A!=null){var D=A.getElementsByTagName("defs");if(D.length>0){this.defs=A.getElementsByTagName("defs")[0]}if(this.defs==null){this.defs=this.createElement("defs");if(A.firstChild!=null){A.insertBefore(this.defs,A.firstChild)}else{A.appendChild(this.defs)}}if(this.styleEnabled){this.defs.appendChild(this.createStyle())}}}mxUtils.extend(mxSvgCanvas2D,mxAbstractCanvas2D);(function(){mxSvgCanvas2D.prototype.useDomParser=!mxClient.IS_IE&&typeof DOMParser==="function"&&typeof XMLSerializer==="function";if(mxSvgCanvas2D.prototype.useDomParser){try{var B=new DOMParser().parseFromString("test text","text/html");mxSvgCanvas2D.prototype.useDomParser=B!=null}catch(A){mxSvgCanvas2D.prototype.useDomParser=false}}})();mxSvgCanvas2D.prototype.node=null;mxSvgCanvas2D.prototype.matchHtmlAlignment=true;mxSvgCanvas2D.prototype.textEnabled=true;mxSvgCanvas2D.prototype.foEnabled=true;mxSvgCanvas2D.prototype.foAltText="[Object]";mxSvgCanvas2D.prototype.foOffset=0;mxSvgCanvas2D.prototype.textOffset=0;mxSvgCanvas2D.prototype.strokeTolerance=0;mxSvgCanvas2D.prototype.refCount=0;mxSvgCanvas2D.prototype.blockImagePointerEvents=false;mxSvgCanvas2D.prototype.lineHeightCorrection=1;mxSvgCanvas2D.prototype.pointerEventsValue="all";mxSvgCanvas2D.prototype.fontMetricsPadding=10;mxSvgCanvas2D.prototype.cacheOffsetSize=true;mxSvgCanvas2D.prototype.format=function(A){return parseFloat(parseFloat(A).toFixed(2))};mxSvgCanvas2D.prototype.getBaseUrl=function(){var A=window.location.href;var B=A.lastIndexOf("#");if(B>0){A=A.substring(0,B)}return A};mxSvgCanvas2D.prototype.reset=function(){mxAbstractCanvas2D.prototype.reset.apply(this,arguments);this.gradients=[]};mxSvgCanvas2D.prototype.createStyle=function(B){var A=this.createElement("style");A.setAttribute("type","text/css");mxUtils.write(A,"svg{font-family:"+mxConstants.DEFAULT_FONTFAMILY+";font-size:"+mxConstants.DEFAULT_FONTSIZE+";fill:none;stroke-miterlimit:10}");return A};mxSvgCanvas2D.prototype.createElement=function(A,B){if(this.root.ownerDocument.createElementNS!=null){return this.root.ownerDocument.createElementNS(B||mxConstants.NS_SVG,A)}else{var C=this.root.ownerDocument.createElement(A);if(B!=null){C.setAttribute("xmlns",B)}return C}};mxSvgCanvas2D.prototype.createAlternateContent=function(G,J,K,C,I,E,F,B,H,L,D,O,M){if(this.foAltText!=null){var A=this.state;var N=this.createElement("text");N.setAttribute("x",Math.round(C/2));N.setAttribute("y",Math.round((I+A.fontSize)/2));N.setAttribute("fill",A.fontColor||"black");N.setAttribute("text-anchor","middle");N.setAttribute("font-size",A.fontSize+"px");N.setAttribute("font-family",A.fontFamily);if((A.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD){N.setAttribute("font-weight","bold")}if((A.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC){N.setAttribute("font-style","italic")}if((A.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE){N.setAttribute("text-decoration","underline")}mxUtils.write(N,this.foAltText);return N}else{return null}};mxSvgCanvas2D.prototype.createGradientId=function(G,F,C,E,B){if(G.charAt(0)=="#"){G=G.substring(1)}if(F.charAt(0)=="#"){F=F.substring(1)}G=G.toLowerCase()+"-"+C;F=F.toLowerCase()+"-"+E;var A=null;if(B==null||B==mxConstants.DIRECTION_SOUTH){A="s"}else{if(B==mxConstants.DIRECTION_EAST){A="e"}else{var D=G;G=F;F=D;if(B==mxConstants.DIRECTION_NORTH){A="s"}else{if(B==mxConstants.DIRECTION_WEST){A="e"}}}}return"mx-gradient-"+G+"-"+F+"-"+A};mxSvgCanvas2D.prototype.getSvgGradient=function(B,D,E,G,A){var I=this.createGradientId(B,D,E,G,A);var H=this.gradients[I];if(H==null){var C=this.root.ownerSVGElement;var F=0;var J=I+"-"+F;if(C!=null){H=C.ownerDocument.getElementById(J);while(H!=null&&H.ownerSVGElement!=C){J=I+"-"+F++;H=C.ownerDocument.getElementById(J)}}else{J="id"+(++this.refCount)}if(H==null){H=this.createSvgGradient(B,D,E,G,A);H.setAttribute("id",J);if(this.defs!=null){this.defs.appendChild(H)}else{C.appendChild(H)}}this.gradients[I]=H}return H.getAttribute("id")};mxSvgCanvas2D.prototype.createSvgGradient=function(C,D,E,F,A){var G=this.createElement("linearGradient");G.setAttribute("x1","0%");G.setAttribute("y1","0%");G.setAttribute("x2","0%");G.setAttribute("y2","0%");if(A==null||A==mxConstants.DIRECTION_SOUTH){G.setAttribute("y2","100%")}else{if(A==mxConstants.DIRECTION_EAST){G.setAttribute("x2","100%")}else{if(A==mxConstants.DIRECTION_NORTH){G.setAttribute("y1","100%")}else{if(A==mxConstants.DIRECTION_WEST){G.setAttribute("x1","100%")}}}}var H=(E<1)?";stop-opacity:"+E:"";var B=this.createElement("stop");B.setAttribute("offset","0%");B.setAttribute("style","stop-color:"+C+H);G.appendChild(B);H=(F<1)?";stop-opacity:"+F:"";B=this.createElement("stop");B.setAttribute("offset","100%");B.setAttribute("style","stop-color:"+D+H);G.appendChild(B);return G};mxSvgCanvas2D.prototype.addNode=function(B,A){var C=this.node;var D=this.state;if(C!=null){if(C.nodeName=="path"){if(this.path!=null&&this.path.length>0){C.setAttribute("d",this.path.join(" "))}else{return}}if(B&&D.fillColor!=null){this.updateFill()}else{if(!this.styleEnabled){if(C.nodeName=="ellipse"&&mxClient.IS_FF){C.setAttribute("fill","transparent")}else{C.setAttribute("fill","none")}B=false}}if(A&&D.strokeColor!=null){this.updateStroke()}else{if(!this.styleEnabled){C.setAttribute("stroke","none")}}if(D.transform!=null&&D.transform.length>0){C.setAttribute("transform",D.transform)}if(D.shadow){this.root.appendChild(this.createShadow(C))}if(this.strokeTolerance>0&&!B){this.root.appendChild(this.createTolerance(C))}if(this.pointerEvents&&(C.nodeName!="path"||this.path[this.path.length-1]==this.closeOp)){C.setAttribute("pointer-events",this.pointerEventsValue)}else{if(!this.pointerEvents&&this.originalRoot==null){C.setAttribute("pointer-events","none")}}if((C.nodeName!="rect"&&C.nodeName!="path"&&C.nodeName!="ellipse")||(C.getAttribute("fill")!="none"&&C.getAttribute("fill")!="transparent")||C.getAttribute("stroke")!="none"||C.getAttribute("pointer-events")!="none"){this.root.appendChild(C)}this.node=null}};mxSvgCanvas2D.prototype.updateFill=function(){var A=this.state;if(A.alpha<1||A.fillAlpha<1){this.node.setAttribute("fill-opacity",A.alpha*A.fillAlpha)}if(A.fillColor!=null){if(A.gradientColor!=null){var C=this.getSvgGradient(A.fillColor,A.gradientColor,A.gradientFillAlpha,A.gradientAlpha,A.gradientDirection);if(!mxClient.IS_CHROME_APP&&!mxClient.IS_IE&&!mxClient.IS_IE11&&!mxClient.IS_EDGE&&this.root.ownerDocument==document){var B=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");this.node.setAttribute("fill","url("+B+"#"+C+")")}else{this.node.setAttribute("fill","url(#"+C+")")}}else{this.node.setAttribute("fill",A.fillColor.toLowerCase())}}};mxSvgCanvas2D.prototype.getCurrentStrokeWidth=function(){return Math.max(1,this.format(this.state.strokeWidth*this.state.scale))};mxSvgCanvas2D.prototype.updateStroke=function(){var B=this.state;this.node.setAttribute("stroke",B.strokeColor.toLowerCase());if(B.alpha<1||B.strokeAlpha<1){this.node.setAttribute("stroke-opacity",B.alpha*B.strokeAlpha)}var A=this.getCurrentStrokeWidth();if(A!=1){this.node.setAttribute("stroke-width",A)}if(this.node.nodeName=="path"){this.updateStrokeAttributes()}if(B.dashed){this.node.setAttribute("stroke-dasharray",this.createDashPattern(B.strokeWidth*B.scale))}};mxSvgCanvas2D.prototype.updateStrokeAttributes=function(){var A=this.state;if(A.lineJoin!=null&&A.lineJoin!="miter"){this.node.setAttribute("stroke-linejoin",A.lineJoin)}if(A.lineCap!=null){var B=A.lineCap;if(B=="flat"){B="butt"}if(B!="butt"){this.node.setAttribute("stroke-linecap",B)}}if(A.miterLimit!=null&&(!this.styleEnabled||A.miterLimit!=10)){this.node.setAttribute("stroke-miterlimit",A.miterLimit)}};mxSvgCanvas2D.prototype.createDashPattern=function(D){var B=[];if(typeof(this.state.dashPattern)==="string"){var C=this.state.dashPattern.split(" ");if(C.length>0){for(var A=0;A<C.length;A++){B[A]=Number(C[A])*D}}}return B.join(" ")};mxSvgCanvas2D.prototype.createTolerance=function(B){var C=B.cloneNode(true);var A=parseFloat(C.getAttribute("stroke-width")||1)+this.strokeTolerance;C.setAttribute("pointer-events","stroke");C.setAttribute("visibility","hidden");C.removeAttribute("stroke-dasharray");C.setAttribute("stroke-width",A);C.setAttribute("fill","none");C.setAttribute("stroke",(mxClient.IS_OT)?"none":"white");return C};mxSvgCanvas2D.prototype.createShadow=function(C){var A=C.cloneNode(true);var B=this.state;if(A.getAttribute("fill")!="none"&&(!mxClient.IS_FF||A.getAttribute("fill")!="transparent")){A.setAttribute("fill",B.shadowColor)}if(A.getAttribute("stroke")!="none"){A.setAttribute("stroke",B.shadowColor)}A.setAttribute("transform","translate("+this.format(B.shadowDx*B.scale)+","+this.format(B.shadowDy*B.scale)+")"+(B.transform||""));A.setAttribute("opacity",B.shadowAlpha);return A};mxSvgCanvas2D.prototype.setLink=function(A){if(A==null){this.root=this.originalRoot}else{this.originalRoot=this.root;var B=this.createElement("a");if(B.setAttributeNS==null||(this.root.ownerDocument!=document&&document.documentMode==null)){B.setAttribute("xlink:href",A)}else{B.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",A)}this.root.appendChild(B);this.root=B}};mxSvgCanvas2D.prototype.rotate=function(H,G,B,E,D){if(H!=0||G||B){var C=this.state;E+=C.dx;D+=C.dy;E*=C.scale;D*=C.scale;C.transform=C.transform||"";if(G&&B){H+=180}else{if(G!=B){var A=(G)?E:0;var I=(G)?-1:1;var J=(B)?D:0;var F=(B)?-1:1;C.transform+="translate("+this.format(A)+","+this.format(J)+")scale("+this.format(I)+","+this.format(F)+")translate("+this.format(-A)+","+this.format(-J)+")"}}if(G?!B:B){H*=-1}if(H!=0){C.transform+="rotate("+this.format(H)+","+this.format(E)+","+this.format(D)+")"}C.rotation=C.rotation+H;C.rotationCx=E;C.rotationCy=D}};mxSvgCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments);this.node=this.createElement("path")};mxSvgCanvas2D.prototype.rect=function(D,E,F,A){var B=this.state;var C=this.createElement("rect");C.setAttribute("x",this.format((D+B.dx)*B.scale));C.setAttribute("y",this.format((E+B.dy)*B.scale));C.setAttribute("width",this.format(F*B.scale));C.setAttribute("height",this.format(A*B.scale));this.node=C};mxSvgCanvas2D.prototype.roundrect=function(D,E,F,A,C,B){this.rect(D,E,F,A);if(C>0){this.node.setAttribute("rx",this.format(C*this.state.scale))}if(B>0){this.node.setAttribute("ry",this.format(B*this.state.scale))}};mxSvgCanvas2D.prototype.ellipse=function(D,E,F,A){var B=this.state;var C=this.createElement("ellipse");C.setAttribute("cx",Math.round((D+F/2+B.dx)*B.scale));C.setAttribute("cy",Math.round((E+A/2+B.dy)*B.scale));C.setAttribute("rx",F/2*B.scale);C.setAttribute("ry",A/2*B.scale);this.node=C};mxSvgCanvas2D.prototype.image=function(M,N,D,H,B,G,C,A){B=this.converter.convert(B);G=(G!=null)?G:true;C=(C!=null)?C:false;A=(A!=null)?A:false;var F=this.state;M+=F.dx;N+=F.dy;var I=this.createElement("image");I.setAttribute("x",this.format(M*F.scale));I.setAttribute("y",this.format(N*F.scale));I.setAttribute("width",this.format(D*F.scale));I.setAttribute("height",this.format(H*F.scale));if(I.setAttributeNS==null){I.setAttribute("xlink:href",B)}else{I.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",B)}if(!G){I.setAttribute("preserveAspectRatio","none")}if(F.alpha<1||F.fillAlpha<1){I.setAttribute("opacity",F.alpha*F.fillAlpha)}var E=this.state.transform||"";if(C||A){var J=1;var K=1;var L=0;var O=0;if(C){J=-1;L=-D-2*M}if(A){K=-1;O=-H-2*N}E+="scale("+J+","+K+")translate("+(L*F.scale)+","+(O*F.scale)+")"}if(E.length>0){I.setAttribute("transform",E)}if(!this.pointerEvents){I.setAttribute("pointer-events","none")}this.root.appendChild(I);if(this.blockImagePointerEvents){I.setAttribute("style","pointer-events:none");I=this.createElement("rect");I.setAttribute("visibility","hidden");I.setAttribute("pointer-events","fill");I.setAttribute("x",this.format(M*F.scale));I.setAttribute("y",this.format(N*F.scale));I.setAttribute("width",this.format(D*F.scale));I.setAttribute("height",this.format(H*F.scale));this.root.appendChild(I)}};mxSvgCanvas2D.prototype.convertHtml=function(C){if(this.useDomParser){var E=new DOMParser().parseFromString(C,"text/html");if(E!=null){C=new XMLSerializer().serializeToString(E.body);if(C.substring(0,5)=="<body"){C=C.substring(C.indexOf(">",5)+1)}if(C.substring(C.length-7,C.length)=="</body>"){C=C.substring(0,C.length-7)}}}else{if(document.implementation!=null&&document.implementation.createDocument!=null){var A=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null);var B=A.createElement("body");A.documentElement.appendChild(B);var H=document.createElement("div");H.innerHTML=C;var F=H.firstChild;while(F!=null){var G=F.nextSibling;B.appendChild(A.adoptNode(F));F=G}return B.innerHTML}else{var D=document.createElement("textarea");D.innerHTML=C.replace(/&amp;/g,"&amp;amp;").replace(/&#60;/g,"&amp;lt;").replace(/&#62;/g,"&amp;gt;").replace(/&lt;/g,"&amp;lt;").replace(/&gt;/g,"&amp;gt;").replace(/</g,"&lt;").replace(/>/g,"&gt;");C=D.value.replace(/&/g,"&amp;").replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;").replace(/&amp;amp;/g,"&amp;").replace(/<br>/g,"<br />").replace(/<hr>/g,"<hr />").replace(/(<img[^>]+)>/gm,"$1 />")}}return C};mxSvgCanvas2D.prototype.createDiv=function(E,F,B,H,C){var A=this.state;var D=(mxConstants.ABSOLUTE_LINE_HEIGHT)?(A.fontSize*mxConstants.LINE_HEIGHT)+"px":(mxConstants.LINE_HEIGHT*this.lineHeightCorrection);H="display:inline-block;font-size:"+A.fontSize+"px;font-family:"+A.fontFamily+";color:"+A.fontColor+";line-height:"+D+";"+H;if((A.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD){H+="font-weight:bold;"}if((A.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC){H+="font-style:italic;"}if((A.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE){H+="text-decoration:underline;"}if(F==mxConstants.ALIGN_CENTER){H+="text-align:center;"}else{if(F==mxConstants.ALIGN_RIGHT){H+="text-align:right;"}}var I="";if(A.fontBackgroundColor!=null){I+="background-color:"+A.fontBackgroundColor+";"}if(A.fontBorderColor!=null){I+="border:1px solid "+A.fontBorderColor+";"}var G=E;if(!mxUtils.isNode(G)){G=this.convertHtml(G);if(C!="fill"&&C!="width"){G='<div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;'+I+'">'+G+"</div>"}else{H+=I}}if(!mxClient.IS_IE&&document.createElementNS){var J=document.createElementNS("http://www.w3.org/1999/xhtml","div");J.setAttribute("style",H);if(mxUtils.isNode(G)){if(this.root.ownerDocument!=document){J.appendChild(G.cloneNode(true))}else{J.appendChild(G)}}else{J.innerHTML=G}return J}else{if(mxUtils.isNode(G)&&this.root.ownerDocument!=document){G=G.outerHTML}return mxUtils.parseXml('<div xmlns="http://www.w3.org/1999/xhtml" style="'+H+'">'+G+"</div>").documentElement}};mxSvgCanvas2D.prototype.invalidateCachedOffsetSize=function(A){delete A.firstChild.mxCachedOffsetWidth;delete A.firstChild.mxCachedFinalOffsetWidth;delete A.firstChild.mxCachedFinalOffsetHeight};mxSvgCanvas2D.prototype.updateText=function(V,W,C,D,E,L,Y,K,U,I,R){if(R!=null&&R.firstChild!=null&&R.firstChild.firstChild!=null&&R.firstChild.firstChild.firstChild!=null){var P=R.firstChild;var H=P.firstChild;var N=H.firstChild;I=(I!=null)?I:0;var B=this.state;V+=B.dx;W+=B.dy;if(U){N.style.maxHeight=Math.round(D)+"px";N.style.maxWidth=Math.round(C)+"px"}else{if(K=="fill"){N.style.width=Math.round(C+1)+"px";N.style.height=Math.round(D+1)+"px"}else{if(K=="width"){N.style.width=Math.round(C+1)+"px";if(D>0){N.style.maxHeight=Math.round(D)+"px"}}}}if(Y&&C>0){N.style.width=Math.round(C+1)+"px"}var M=0;var J=0;var G=2;var X=2;var Q=N;if(Q.firstChild!=null&&Q.firstChild.nodeName=="DIV"){Q=Q.firstChild}var A=(P.mxCachedOffsetWidth!=null)?P.mxCachedOffsetWidth:Q.offsetWidth;M=A+G;if(Y&&K!="fill"){if(U){M=Math.min(M,C)}N.style.width=M+"px"}M=((P.mxCachedFinalOffsetWidth!=null)?P.mxCachedFinalOffsetWidth:Q.offsetWidth)+G;J=((P.mxCachedFinalOffsetHeight!=null)?P.mxCachedFinalOffsetHeight:Q.offsetHeight)-2;if(U){J=Math.min(J,D);M=Math.min(M,C)}if(K=="width"){D=J}else{if(K!="fill"){C=M;D=J}}var F=0;var S=0;if(E==mxConstants.ALIGN_CENTER){F-=C/2}else{if(E==mxConstants.ALIGN_RIGHT){F-=C}}V+=F;if(L==mxConstants.ALIGN_MIDDLE){S-=D/2}else{if(L==mxConstants.ALIGN_BOTTOM){S-=D}}if(K!="fill"&&mxClient.IS_FF&&mxClient.IS_WIN){S-=2}W+=S;var O=(B.scale!=1)?"scale("+B.scale+")":"";if(B.rotation!=0&&this.rotateHtml){O+="rotate("+(B.rotation)+","+(C/2)+","+(D/2)+")";var T=this.rotatePoint((V+C/2)*B.scale,(W+D/2)*B.scale,B.rotation,B.rotationCx,B.rotationCy);V=T.x-C*B.scale/2;W=T.y-D*B.scale/2}else{V*=B.scale;W*=B.scale}if(I!=0){O+="rotate("+(I)+","+(-F)+","+(-S)+")"}P.setAttribute("transform","translate("+Math.round(V)+","+Math.round(W)+")"+O);H.setAttribute("width",Math.round(Math.max(1,C)));H.setAttribute("height",Math.round(Math.max(1,D)))}};mxSvgCanvas2D.prototype.text=function(Y,Z,e,g,V,i,a,S,M,Q,N,R,L){if(this.textEnabled&&V!=null){R=(R!=null)?R:0;var c=this.state;Y+=c.dx;Z+=c.dy;if(this.foEnabled&&M=="html"){var X="vertical-align:top;";if(N){X+="overflow:hidden;max-height:"+Math.round(g)+"px;max-width:"+Math.round(e)+"px;"}else{if(Q=="fill"){X+="width:"+Math.round(e+1)+"px;height:"+Math.round(g+1)+"px;overflow:hidden;"}else{if(Q=="width"){X+="width:"+Math.round(e+1)+"px;";if(g>0){X+="max-height:"+Math.round(g)+"px;overflow:hidden;"}}}}if(S&&e>0){X+="width:"+Math.round(e+1)+"px;white-space:normal;word-wrap:"+mxConstants.WORD_WRAP+";"}else{X+="white-space:nowrap;"}var C=this.createElement("g");if(c.alpha<1){C.setAttribute("opacity",c.alpha)}var T=this.createElement("foreignObject");T.setAttribute("style","overflow:visible;");T.setAttribute("pointer-events","all");var J=this.createDiv(V,i,a,X,Q);if(J==null){return}else{if(L!=null){J.setAttribute("dir",L)}}C.appendChild(T);this.root.appendChild(C);var P=0;var K=0;var E=2;var I=2;if(mxClient.IS_IE&&(document.documentMode==9||!mxClient.IS_SVG)){var D=document.createElement("div");D.style.cssText=J.getAttribute("style");D.style.display=(mxClient.IS_QUIRKS)?"inline":"inline-block";D.style.position="absolute";D.style.visibility="hidden";var B=document.createElement("div");B.style.display=(mxClient.IS_QUIRKS)?"inline":"inline-block";B.style.wordWrap=mxConstants.WORD_WRAP;B.innerHTML=(mxUtils.isNode(V))?V.outerHTML:V;D.appendChild(B);document.body.appendChild(D);if(document.documentMode!=8&&document.documentMode!=9&&c.fontBorderColor!=null){E+=2;I+=2}if(S&&e>0){var d=B.offsetWidth;var f=0;if(!N&&S&&e>0&&this.root.ownerDocument!=document&&Q!="fill"){var H=D.style.whiteSpace;B.style.whiteSpace="nowrap";if(d<B.offsetWidth){D.style.whiteSpace=H}}if(N){d=Math.min(d,e)}D.style.width=d+"px";P=B.offsetWidth+E+f;K=B.offsetHeight+I;D.style.display="inline-block";D.style.position="";D.style.visibility="";D.style.width=P+"px";J.setAttribute("style",D.style.cssText)}else{P=B.offsetWidth+E;K=B.offsetHeight+I}D.parentNode.removeChild(D);T.appendChild(J)}else{if(this.root.ownerDocument!=document){J.style.visibility="hidden";document.body.appendChild(J)}else{T.appendChild(J)}var W=J;if(W.firstChild!=null&&W.firstChild.nodeName=="DIV"){W=W.firstChild;if(S&&J.style.wordWrap=="break-word"){W.style.width="100%"}}var d=W.offsetWidth;if(d==0&&J.parentNode==T){J.style.visibility="hidden";document.body.appendChild(J);d=W.offsetWidth}if(this.cacheOffsetSize){C.mxCachedOffsetWidth=d}if(!N&&S&&e>0&&this.root.ownerDocument!=document&&Q!="fill"&&Q!="width"){var H=J.style.whiteSpace;J.style.whiteSpace="nowrap";if(d<W.offsetWidth){J.style.whiteSpace=H}}P=d+E-1;if(S&&Q!="fill"&&Q!="width"){if(N){P=Math.min(P,e)}J.style.width=P+"px"}P=W.offsetWidth;K=W.offsetHeight;if(this.cacheOffsetSize){C.mxCachedFinalOffsetWidth=P;C.mxCachedFinalOffsetHeight=K}K-=I;if(J.parentNode!=T){T.appendChild(J);J.style.visibility=""}}if(N){K=Math.min(K,g);P=Math.min(P,e)}if(Q=="width"){g=K}else{if(Q!="fill"){e=P;g=K}}if(c.alpha<1){C.setAttribute("opacity",c.alpha)}var b=0;var U=0;if(i==mxConstants.ALIGN_CENTER){b-=e/2}else{if(i==mxConstants.ALIGN_RIGHT){b-=e}}Y+=b;if(a==mxConstants.ALIGN_MIDDLE){U-=g/2}else{if(a==mxConstants.ALIGN_BOTTOM){U-=g}}if(Q!="fill"&&mxClient.IS_FF&&mxClient.IS_WIN){U-=2}Z+=U;var G=(c.scale!=1)?"scale("+c.scale+")":"";if(c.rotation!=0&&this.rotateHtml){G+="rotate("+(c.rotation)+","+(e/2)+","+(g/2)+")";var A=this.rotatePoint((Y+e/2)*c.scale,(Z+g/2)*c.scale,c.rotation,c.rotationCx,c.rotationCy);Y=A.x-e*c.scale/2;Z=A.y-g*c.scale/2}else{Y*=c.scale;Z*=c.scale}if(R!=0){G+="rotate("+(R)+","+(-b)+","+(-U)+")"}C.setAttribute("transform","translate("+(Math.round(Y)+this.foOffset)+","+(Math.round(Z)+this.foOffset)+")"+G);T.setAttribute("width",Math.round(Math.max(1,e)));T.setAttribute("height",Math.round(Math.max(1,g)));if(this.root.ownerDocument!=document){var O=this.createAlternateContent(T,Y,Z,e,g,V,i,a,S,M,Q,N,R);if(O!=null){T.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility");var F=this.createElement("switch");F.appendChild(T);F.appendChild(O);C.appendChild(F)}}}else{this.plainText(Y,Z,e,g,V,i,a,S,Q,N,R,L)}}};mxSvgCanvas2D.prototype.createClip=function(G,H,B,D){G=Math.round(G);H=Math.round(H);B=Math.round(B);D=Math.round(D);var F="mx-clip-"+G+"-"+H+"-"+B+"-"+D;var E=0;var C=F+"-"+E;while(document.getElementById(C)!=null){C=F+"-"+(++E)}clip=this.createElement("clipPath");clip.setAttribute("id",C);var A=this.createElement("rect");A.setAttribute("x",G);A.setAttribute("y",H);A.setAttribute("width",B);A.setAttribute("height",D);clip.appendChild(A);return clip};mxSvgCanvas2D.prototype.plainText=function(Y,Z,D,G,A,H,M,a,P,X,N,K){N=(N!=null)?N:0;var B=this.state;var F=B.fontSize;var V=this.createElement("g");var T=B.transform||"";this.updateFont(V);if(N!=0){T+="rotate("+N+","+this.format(Y*B.scale)+","+this.format(Z*B.scale)+")"}if(K!=null){V.setAttribute("direction",K)}if(X&&D>0&&G>0){var E=Y;var U=Z;if(H==mxConstants.ALIGN_CENTER){E-=D/2}else{if(H==mxConstants.ALIGN_RIGHT){E-=D}}if(P!="fill"){if(M==mxConstants.ALIGN_MIDDLE){U-=G/2}else{if(M==mxConstants.ALIGN_BOTTOM){U-=G}}}var J=this.createClip(E*B.scale-2,U*B.scale-2,D*B.scale+4,G*B.scale+4);if(this.defs!=null){this.defs.appendChild(J)}else{this.root.appendChild(J)}if(!mxClient.IS_CHROME_APP&&!mxClient.IS_IE&&!mxClient.IS_IE11&&!mxClient.IS_EDGE&&this.root.ownerDocument==document){var I=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");V.setAttribute("clip-path","url("+I+"#"+J.getAttribute("id")+")")}else{V.setAttribute("clip-path","url(#"+J.getAttribute("id")+")")}}var C=(H==mxConstants.ALIGN_RIGHT)?"end":(H==mxConstants.ALIGN_CENTER)?"middle":"start";if(C!="start"){V.setAttribute("text-anchor",C)}if(!this.styleEnabled||F!=mxConstants.DEFAULT_FONTSIZE){V.setAttribute("font-size",(F*B.scale)+"px")}if(T.length>0){V.setAttribute("transform",T)}if(B.alpha<1){V.setAttribute("opacity",B.alpha)}var S=A.split("\n");var O=Math.round(F*mxConstants.LINE_HEIGHT);var L=F+(S.length-1)*O;var U=Z+F-1;if(M==mxConstants.ALIGN_MIDDLE){if(P=="fill"){U-=G/2}else{var W=((this.matchHtmlAlignment&&X&&G>0)?Math.min(L,G):L)/2;U-=W+1}}else{if(M==mxConstants.ALIGN_BOTTOM){if(P=="fill"){U-=G}else{var W=(this.matchHtmlAlignment&&X&&G>0)?Math.min(L,G):L;U-=W+2}}}for(var Q=0;Q<S.length;Q++){if(S[Q].length>0&&mxUtils.trim(S[Q]).length>0){var R=this.createElement("text");R.setAttribute("x",this.format(Y*B.scale)+this.textOffset);R.setAttribute("y",this.format(U*B.scale)+this.textOffset);mxUtils.write(R,S[Q]);V.appendChild(R)}U+=O}this.root.appendChild(V);this.addTextBackground(V,A,Y,Z,D,(P=="fill")?G:L,H,M,P)};mxSvgCanvas2D.prototype.updateFont=function(B){var A=this.state;B.setAttribute("fill",A.fontColor);if(!this.styleEnabled||A.fontFamily!=mxConstants.DEFAULT_FONTFAMILY){B.setAttribute("font-family",A.fontFamily)}if((A.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD){B.setAttribute("font-weight","bold")}if((A.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC){B.setAttribute("font-style","italic")}if((A.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE){B.setAttribute("text-decoration","underline")}};mxSvgCanvas2D.prototype.addTextBackground=function(K,G,M,N,E,I,H,C,F){var B=this.state;if(B.fontBackgroundColor!=null||B.fontBorderColor!=null){var O=null;if(F=="fill"||F=="width"){if(H==mxConstants.ALIGN_CENTER){M-=E/2}else{if(H==mxConstants.ALIGN_RIGHT){M-=E}}if(C==mxConstants.ALIGN_MIDDLE){N-=I/2}else{if(C==mxConstants.ALIGN_BOTTOM){N-=I}}O=new mxRectangle((M+1)*B.scale,N*B.scale,(E-2)*B.scale,(I+2)*B.scale)}else{if(K.getBBox!=null&&this.root.ownerDocument==document){try{O=K.getBBox();var J=mxClient.IS_IE&&mxClient.IS_SVG;O=new mxRectangle(O.x,O.y+((J)?0:1),O.width,O.height+((J)?1:0))}catch(A){}}else{var P=document.createElement("div");P.style.lineHeight=(mxConstants.ABSOLUTE_LINE_HEIGHT)?(B.fontSize*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT;P.style.fontSize=B.fontSize+"px";P.style.fontFamily=B.fontFamily;P.style.whiteSpace="nowrap";P.style.position="absolute";P.style.visibility="hidden";P.style.display=(mxClient.IS_QUIRKS)?"inline":"inline-block";P.style.zoom="1";if((B.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD){P.style.fontWeight="bold"}if((B.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC){P.style.fontStyle="italic"}G=mxUtils.htmlEntities(G,false);P.innerHTML=G.replace(/\n/g,"<br/>");document.body.appendChild(P);var E=P.offsetWidth;var I=P.offsetHeight;P.parentNode.removeChild(P);if(H==mxConstants.ALIGN_CENTER){M-=E/2}else{if(H==mxConstants.ALIGN_RIGHT){M-=E}}if(C==mxConstants.ALIGN_MIDDLE){N-=I/2}else{if(C==mxConstants.ALIGN_BOTTOM){N-=I}}O=new mxRectangle((M+1)*B.scale,(N+2)*B.scale,E*B.scale,(I+1)*B.scale)}}if(O!=null){var L=this.createElement("rect");L.setAttribute("fill",B.fontBackgroundColor||"none");L.setAttribute("stroke",B.fontBorderColor||"none");L.setAttribute("x",Math.floor(O.x-1));L.setAttribute("y",Math.floor(O.y-1));L.setAttribute("width",Math.ceil(O.width+2));L.setAttribute("height",Math.ceil(O.height));var D=(B.fontBorderColor!=null)?Math.max(1,this.format(B.scale)):0;L.setAttribute("stroke-width",D);if(this.root.ownerDocument==document&&mxUtils.mod(D,2)==1){L.setAttribute("transform","translate(0.5, 0.5)")}K.insertBefore(L,K.firstChild)}}};mxSvgCanvas2D.prototype.stroke=function(){this.addNode(false,true)};mxSvgCanvas2D.prototype.fill=function(){this.addNode(true,false)};mxSvgCanvas2D.prototype.fillAndStroke=function(){this.addNode(true,true)};function mxToolbar(A){this.container=A}mxToolbar.prototype=new mxEventSource();mxToolbar.prototype.constructor=mxToolbar;mxToolbar.prototype.container=null;mxToolbar.prototype.enabled=true;mxToolbar.prototype.noReset=false;mxToolbar.prototype.updateDefaultMode=true;mxToolbar.prototype.addItem=function(G,F,I,E,D,C){var A=document.createElement((F!=null)?"img":"button");var H=D||((C!=null)?"mxToolbarMode":"mxToolbarItem");A.className=H;A.setAttribute("src",F);if(G!=null){if(F!=null){A.setAttribute("title",G)}else{mxUtils.write(A,G)}}this.container.appendChild(A);if(I!=null){mxEvent.addListener(A,"click",I);if(mxClient.IS_TOUCH){mxEvent.addListener(A,"touchend",I)}}var B=mxUtils.bind(this,function(J){if(E!=null){A.setAttribute("src",F)}else{A.style.backgroundColor=""}});mxEvent.addGestureListeners(A,mxUtils.bind(this,function(K){if(E!=null){A.setAttribute("src",E)}else{A.style.backgroundColor="gray"}if(C!=null){if(this.menu==null){this.menu=new mxPopupMenu();this.menu.init()}var L=this.currentImg;if(this.menu.isMenuShowing()){this.menu.hideMenu()}if(L!=A){this.currentImg=A;this.menu.factoryMethod=C;var J=new mxPoint(A.offsetLeft,A.offsetTop+A.offsetHeight);this.menu.popup(J.x,J.y,null,K);if(this.menu.isMenuShowing()){A.className=H+"Selected";this.menu.hideMenu=function(){mxPopupMenu.prototype.hideMenu.apply(this);A.className=H;this.currentImg=null}}}}}),null,B);mxEvent.addListener(A,"mouseout",B);return A};mxToolbar.prototype.addCombo=function(B){var C=document.createElement("div");C.style.display="inline";C.className="mxToolbarComboContainer";var A=document.createElement("select");A.className=B||"mxToolbarCombo";C.appendChild(A);this.container.appendChild(C);return A};mxToolbar.prototype.addActionCombo=function(B,A){var C=document.createElement("select");C.className=A||"mxToolbarCombo";this.addOption(C,B,null);mxEvent.addListener(C,"change",function(D){var E=C.options[C.selectedIndex];C.selectedIndex=0;if(E.funct!=null){E.funct(D)}});this.container.appendChild(C);return C};mxToolbar.prototype.addOption=function(D,B,C){var A=document.createElement("option");mxUtils.writeln(A,B);if(typeof(C)=="function"){A.funct=C}else{A.setAttribute("value",C)}D.appendChild(A);return A};mxToolbar.prototype.addSwitchMode=function(D,E,A,F,C){var B=document.createElement("img");B.initialClassName=C||"mxToolbarMode";B.className=B.initialClassName;B.setAttribute("src",E);B.altIcon=F;if(D!=null){B.setAttribute("title",D)}mxEvent.addListener(B,"click",mxUtils.bind(this,function(H){var G=this.selectedMode.altIcon;if(G!=null){this.selectedMode.altIcon=this.selectedMode.getAttribute("src");this.selectedMode.setAttribute("src",G)}else{this.selectedMode.className=this.selectedMode.initialClassName}if(this.updateDefaultMode){this.defaultMode=B}this.selectedMode=B;var G=B.altIcon;if(G!=null){B.altIcon=B.getAttribute("src");B.setAttribute("src",G)}else{B.className=B.initialClassName+"Selected"}this.fireEvent(new mxEventObject(mxEvent.SELECT));A()}));this.container.appendChild(B);if(this.defaultMode==null){this.defaultMode=B;this.selectMode(B);A()}return B};mxToolbar.prototype.addMode=function(E,F,A,G,D,B){B=(B!=null)?B:true;var C=document.createElement((F!=null)?"img":"button");C.initialClassName=D||"mxToolbarMode";C.className=C.initialClassName;C.setAttribute("src",F);C.altIcon=G;if(E!=null){C.setAttribute("title",E)}if(this.enabled&&B){mxEvent.addListener(C,"click",mxUtils.bind(this,function(H){this.selectMode(C,A);this.noReset=false}));mxEvent.addListener(C,"dblclick",mxUtils.bind(this,function(H){this.selectMode(C,A);this.noReset=true}));if(this.defaultMode==null){this.defaultMode=C;this.defaultFunction=A;this.selectMode(C,A)}}this.container.appendChild(C);return C};mxToolbar.prototype.selectMode=function(B,C){if(this.selectedMode!=B){if(this.selectedMode!=null){var A=this.selectedMode.altIcon;if(A!=null){this.selectedMode.altIcon=this.selectedMode.getAttribute("src");this.selectedMode.setAttribute("src",A)}else{this.selectedMode.className=this.selectedMode.initialClassName}}this.selectedMode=B;var A=this.selectedMode.altIcon;if(A!=null){this.selectedMode.altIcon=this.selectedMode.getAttribute("src");this.selectedMode.setAttribute("src",A)}else{this.selectedMode.className=this.selectedMode.initialClassName+"Selected"}this.fireEvent(new mxEventObject(mxEvent.SELECT,"function",C))}};mxToolbar.prototype.resetMode=function(A){if((A||!this.noReset)&&this.selectedMode!=this.defaultMode){this.selectMode(this.defaultMode,this.defaultFunction)}};mxToolbar.prototype.addSeparator=function(A){return this.addItem(null,A,null)};mxToolbar.prototype.addBreak=function(){mxUtils.br(this.container)};mxToolbar.prototype.addLine=function(){var A=document.createElement("hr");A.style.marginRight="6px";A.setAttribute("size","1");this.container.appendChild(A)};mxToolbar.prototype.destroy=function(){mxEvent.release(this.container);this.container=null;this.defaultMode=null;this.defaultFunction=null;this.selectedMode=null;if(this.menu!=null){this.menu.destroy()}};function mxUndoManager(A){this.size=(A!=null)?A:100;this.clear()}mxUndoManager.prototype=new mxEventSource();mxUndoManager.prototype.constructor=mxUndoManager;mxUndoManager.prototype.size=null;mxUndoManager.prototype.history=null;mxUndoManager.prototype.indexOfNextAdd=0;mxUndoManager.prototype.isEmpty=function(){return this.history.length==0};mxUndoManager.prototype.clear=function(){this.history=[];this.indexOfNextAdd=0;this.fireEvent(new mxEventObject(mxEvent.CLEAR))};mxUndoManager.prototype.canUndo=function(){return this.indexOfNextAdd>0};mxUndoManager.prototype.undo=function(){while(this.indexOfNextAdd>0){var A=this.history[--this.indexOfNextAdd];A.undo();if(A.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",A));break}}};mxUndoManager.prototype.canRedo=function(){return this.indexOfNextAdd<this.history.length};mxUndoManager.prototype.redo=function(){var A=this.history.length;while(this.indexOfNextAdd<A){var B=this.history[this.indexOfNextAdd++];B.redo();if(B.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.REDO,"edit",B));break}}};mxUndoManager.prototype.undoableEditHappened=function(A){this.trim();if(this.size>0&&this.size==this.history.length){this.history.shift()}this.history.push(A);this.indexOfNextAdd=this.history.length;this.fireEvent(new mxEventObject(mxEvent.ADD,"edit",A))};mxUndoManager.prototype.trim=function(){if(this.history.length>this.indexOfNextAdd){var B=this.history.splice(this.indexOfNextAdd,this.history.length-this.indexOfNextAdd);for(var A=0;A<B.length;A++){B[A].die()}}};var mxUrlConverter=function(){};mxUrlConverter.prototype.enabled=true;mxUrlConverter.prototype.baseUrl=null;mxUrlConverter.prototype.baseDomain=null;mxUrlConverter.prototype.updateBaseUrl=function(){this.baseDomain=location.protocol+"//"+location.host;this.baseUrl=this.baseDomain+location.pathname;var A=this.baseUrl.lastIndexOf("/");if(A>0){this.baseUrl=this.baseUrl.substring(0,A+1)}};mxUrlConverter.prototype.isEnabled=function(){return this.enabled};mxUrlConverter.prototype.setEnabled=function(A){this.enabled=A};mxUrlConverter.prototype.getBaseUrl=function(){return this.baseUrl};mxUrlConverter.prototype.setBaseUrl=function(A){this.baseUrl=A};mxUrlConverter.prototype.getBaseDomain=function(){return this.baseDomain},mxUrlConverter.prototype.setBaseDomain=function(A){this.baseDomain=A},mxUrlConverter.prototype.isRelativeUrl=function(A){return A.substring(0,2)!="//"&&A.substring(0,7)!="http://"&&A.substring(0,8)!="https://"&&A.substring(0,10)!="data:image"};mxUrlConverter.prototype.convert=function(A){if(this.isEnabled()&&this.isRelativeUrl(A)){if(this.getBaseUrl()==null){this.updateBaseUrl()}if(A.charAt(0)=="/"){A=this.getBaseDomain()+A}else{A=this.getBaseUrl()+A}}return A};var mxUtils={errorResource:(mxClient.language!="none")?"error":"",closeResource:(mxClient.language!="none")?"close":"",errorImage:mxClient.imageBasePath+"/error.gif",removeCursors:function(C){if(C.style!=null){C.style.cursor=""}var D=C.childNodes;if(D!=null){var A=D.length;for(var B=0;B<A;B+=1){mxUtils.removeCursors(D[B])}}},getCurrentStyle:function(){if(mxClient.IS_IE){return function(A){return(A!=null)?A.currentStyle:null}}else{return function(A){return(A!=null)?window.getComputedStyle(A,""):null}}}(),parseCssNumber:function(A){if(A=="thin"){A="2"}else{if(A=="medium"){A="4"}else{if(A=="thick"){A="6"}}}A=parseFloat(A);if(isNaN(A)){A=0}return A},setPrefixedStyle:function(){var A=null;if(mxClient.IS_OT){A="O"}else{if(mxClient.IS_SF||mxClient.IS_GC){A="Webkit"}else{if(mxClient.IS_MT){A="Moz"}else{if(mxClient.IS_IE&&document.documentMode>=9&&document.documentMode<10){A="ms"}}}}return function(B,C,D){B[C]=D;if(A!=null&&C.length>0){C=A+C.substring(0,1).toUpperCase()+C.substring(1);B[C]=D}}}(),hasScrollbars:function(A){var B=mxUtils.getCurrentStyle(A);return B!=null&&(B.overflow=="scroll"||B.overflow=="auto")},bind:function(B,A){return function(){return A.apply(B,arguments)}},eval:function(expr){var result=null;if(expr.indexOf("function")>=0){try{eval("var _mxJavaScriptExpression="+expr);result=_mxJavaScriptExpression;_mxJavaScriptExpression=null}catch(e){mxLog.warn(e.message+" while evaluating "+expr)}}else{try{result=eval(expr)}catch(e){mxLog.warn(e.message+" while evaluating "+expr)}}return result},findNode:function(C,E,D){if(C.nodeType==mxConstants.NODETYPE_ELEMENT){var A=C.getAttribute(E);if(A!=null&&A==D){return C}}C=C.firstChild;while(C!=null){var B=mxUtils.findNode(C,E,D);if(B!=null){return B}C=C.nextSibling}return null},getFunctionName:function(C){var B=null;if(C!=null){if(C.name!=null){B=C.name}else{B=mxUtils.trim(C.toString());if(/^function\s/.test(B)){B=mxUtils.ltrim(B.substring(9));var A=B.indexOf("(");if(A>0){B=B.substring(0,A)}}}}return B},indexOf:function(A,B){if(A!=null&&B!=null){for(var C=0;C<A.length;C++){if(A[C]==B){return C}}}return -1},forEach:function(A,C){if(A!=null&&C!=null){for(var B=0;B<A.length;B++){C(A[B])}}return A},remove:function(C,B){var D=null;if(typeof(B)=="object"){var E=mxUtils.indexOf(B,C);while(E>=0){B.splice(E,1);D=C;E=mxUtils.indexOf(B,C)}}for(var A in B){if(B[A]==C){delete B[A];D=C}}return D},isNode:function(C,D,A,B){if(C!=null&&!isNaN(C.nodeType)&&(D==null||C.nodeName.toLowerCase()==D.toLowerCase())){return A==null||C.getAttribute(A)==B}return false},isAncestorNode:function(B,A){var C=A;while(C!=null){if(C==B){return true}C=C.parentNode}return false},getChildNodes:function(C,B){B=B||mxConstants.NODETYPE_ELEMENT;var D=[];var A=C.firstChild;while(A!=null){if(A.nodeType==B){D.push(A)}A=A.nextSibling}return D},importNode:function(E,D,A){if(mxClient.IS_IE&&(document.documentMode==null||document.documentMode<10)){switch(D.nodeType){case 1:var B=E.createElement(D.nodeName);if(D.attributes&&D.attributes.length>0){for(var C=0;C<D.attributes.length;C++){B.setAttribute(D.attributes[C].nodeName,D.getAttribute(D.attributes[C].nodeName))}if(A&&D.childNodes&&D.childNodes.length>0){for(var C=0;C<D.childNodes.length;C++){B.appendChild(mxUtils.importNode(E,D.childNodes[C],A))}}}return B;break;case 3:case 4:case 8:return E.createTextNode(D.value);break}}else{return E.importNode(D,A)}},createXmlDocument:function(){var A=null;if(document.implementation&&document.implementation.createDocument){A=document.implementation.createDocument("","",null)}else{if(window.ActiveXObject){A=new ActiveXObject("Microsoft.XMLDOM")}}return A},parseXml:function(){if(window.DOMParser){return function(A){var B=new DOMParser();return B.parseFromString(A,"text/xml")}}else{return function(B){var A=mxUtils.createXmlDocument();A.async=false;A.validateOnParse=false;A.resolveExternals=false;A.loadXML(B);return A}}}(),clearSelection:function(){if(document.selection){return function(){document.selection.empty()}}else{if(window.getSelection){return function(){window.getSelection().removeAllRanges()}}else{return function(){}}}}(),getPrettyXml:function(F,C,G){var A=[];if(F!=null){C=C||"  ";G=G||"";if(F.nodeType==mxConstants.NODETYPE_TEXT){A.push(F.value)}else{A.push(G+"<"+F.nodeName);var B=F.attributes;if(B!=null){for(var H=0;H<B.length;H++){var E=mxUtils.htmlEntities(B[H].value);A.push(" "+B[H].nodeName+'="'+E+'"')}}var D=F.firstChild;if(D!=null){A.push(">\n");while(D!=null){A.push(mxUtils.getPrettyXml(D,C,G+C));D=D.nextSibling}A.push(G+"</"+F.nodeName+">\n")}else{A.push("/>\n")}}}return A.join("")},removeWhitespace:function(B,D){var A=(D)?B.previousSibling:B.nextSibling;while(A!=null&&A.nodeType==mxConstants.NODETYPE_TEXT){var E=(D)?A.previousSibling:A.nextSibling;var C=mxUtils.getTextContent(A);if(mxUtils.trim(C).length==0){A.parentNode.removeChild(A)}A=E}},htmlEntities:function(A,B){A=String(A||"");A=A.replace(/&/g,"&amp;");A=A.replace(/"/g,"&quot;");A=A.replace(/\'/g,"&#39;");A=A.replace(/</g,"&lt;");A=A.replace(/>/g,"&gt;");if(B==null||B){A=A.replace(/\n/g,"&#xa;")}return A},isVml:function(A){return A!=null&&A.tagUrn=="urn:schemas-microsoft-com:vml"},getXml:function(C,A){var D="";if(window.XMLSerializer!=null){var B=new XMLSerializer();D=B.serializeToString(C)}else{if(C.xml!=null){D=C.xml.replace(/\r\n\t[\t]*/g,"").replace(/>\r\n/g,">").replace(/\r\n/g,"\n")}}A=A||"&#xa;";D=D.replace(/\n/g,A);return D},extractTextWithWhitespace:function(B){var E=false;var D=[];for(var A=0;B[A];A++){var C=B[A];if(C.nodeType===3||C.nodeType===4){if(document.documentMode==11&&A==B.length-1&&C.nodeValue.length==0){break}D.push(C.nodeValue+((C.nextSibling==null||C.nextSibling.nodeType!=3)?"\n":""));E=true}else{if(C.nodeType!==8){if((((mxClient.IS_IE||mxClient.IS_IE11)&&C.nodeName=="P"&&C.innerHTML.length==0))||(!E&&C.nodeName=="BR")||(C.nodeName=="DIV"&&C.innerHTML=="<br>")){D.push("\n")}else{D.push(mxUtils.extractTextWithWhitespace(C.childNodes))}E=false}}}return D.join("")},replaceTrailingNewlines:function(B,C){var A="";while(B.length>0&&B.charAt(B.length-1)=="\n"){B=B.substring(0,B.length-1);A+=C}return B+A},getTextContent:function(A){if(A.innerText!==undefined){return A.innerText}else{return(A!=null)?A[(A.textContent===undefined)?"text":"textContent"]:""}},setTextContent:function(A,B){if(A.innerText!==undefined){A.innerText=B}else{A[(A.textContent===undefined)?"text":"textContent"]=B}},getInnerHtml:function(){if(mxClient.IS_IE){return function(A){if(A!=null){return A.innerHTML}return""}}else{return function(A){if(A!=null){var B=new XMLSerializer();return B.serializeToString(A)}return""}}}(),getOuterHtml:function(){if(mxClient.IS_IE){return function(C){if(C!=null){if(C.outerHTML!=null){return C.outerHTML}else{var A=[];A.push("<"+C.nodeName);var D=C.attributes;if(D!=null){for(var B=0;B<D.length;B++){var E=D[B].value;if(E!=null&&E.length>0){A.push(" ");A.push(D[B].nodeName);A.push('="');A.push(E);A.push('"')}}}if(C.innerHTML.length==0){A.push("/>")}else{A.push(">");A.push(C.innerHTML);A.push("</"+C.nodeName+">")}return A.join("")}}return""}}else{return function(A){if(A!=null){var B=new XMLSerializer();return B.serializeToString(A)}return""}}}(),write:function(C,B){var D=C.ownerDocument;var A=D.createTextNode(B);if(C!=null){C.appendChild(A)}return A},writeln:function(C,B){var D=C.ownerDocument;var A=D.createTextNode(B);if(C!=null){C.appendChild(A);C.appendChild(document.createElement("br"))}return A},br:function(D,B){B=B||1;var C=null;for(var A=0;A<B;A++){if(D!=null){C=D.ownerDocument.createElement("br");D.appendChild(C)}}return C},button:function(A,C,D){D=(D!=null)?D:document;var B=D.createElement("button");mxUtils.write(B,A);mxEvent.addListener(B,"click",function(E){C(E)});return B},para:function(C,B){var A=document.createElement("p");mxUtils.write(A,B);if(C!=null){C.appendChild(A)}return A},addTransparentBackgroundFilter:function(A){A.style.filter+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+mxClient.imageBasePath+"/transparent.gif', sizingMethod='scale')"},linkAction:function(D,B,C,A,E){return mxUtils.link(D,B,function(){C.execute(A)},E)},linkInvoke:function(E,B,D,F,A,C){return mxUtils.link(E,B,function(){D[F](A)},C)},link:function(D,B,C,E){var A=document.createElement("span");A.style.color="blue";A.style.textDecoration="underline";A.style.cursor="pointer";if(E!=null){A.style.paddingLeft=E+"px"}mxEvent.addListener(A,"click",C);mxUtils.write(A,B);if(D!=null){D.appendChild(A)}return A},fit:function(F){var D=parseInt(F.offsetLeft);var G=parseInt(F.offsetWidth);var B=mxUtils.getDocumentScrollOrigin(F.ownerDocument);var E=B.x;var A=B.y;var H=document.body;var L=document.documentElement;var J=(E)+(H.clientWidth||L.clientWidth);if(D+G>J){F.style.left=Math.max(E,J-G)+"px"}var C=parseInt(F.offsetTop);var I=parseInt(F.offsetHeight);var K=A+Math.max(H.clientHeight||0,L.clientHeight);if(C+I>K){F.style.top=Math.max(A,K-I)+"px"}},load:function(A){var B=new mxXmlRequest(A,null,"GET",false);B.send();return B},get:function(C,G,A,E,F,B){var D=new mxXmlRequest(C,null,"GET");if(E!=null){D.setBinary(E)}D.send(G,A,F,B);return D},getAll:function(E,B,A){var C=E.length;var D=[];var H=0;var F=function(){if(H==0&&A!=null){A()}H++};for(var G=0;G<E.length;G++){(function(I,J){mxUtils.get(I,function(K){var L=K.getStatus();if(L<200||L>299){F()}else{D[J]=K;C--;if(C==0){B(D)}}},F)})(E[G],G)}if(C==0){B(D)}},post:function(B,C,D,A){return new mxXmlRequest(B,C).send(D,A)},submit:function(A,C,D,B){return new mxXmlRequest(A,C).simulate(D,B)},loadInto:function(A,C,B){if(mxClient.IS_IE){C.onreadystatechange=function(){if(C.readyState==4){B()}}}else{C.addEventListener("load",B,false)}C.load(A)},getValue:function(B,A,D){var C=(B!=null)?B[A]:null;if(C==null){C=D}return C},getNumber:function(B,A,D){var C=(B!=null)?B[A]:null;if(C==null){C=D||0}return Number(C)},getColor:function(B,A,D){var C=(B!=null)?B[A]:null;if(C==null){C=D}else{if(C==mxConstants.NONE){C=null}}return C},clone:function(C,E,D){D=(D!=null)?D:false;var A=null;if(C!=null&&typeof(C.constructor)=="function"){A=new C.constructor();for(var B in C){if(B!=mxObjectIdentity.FIELD_NAME&&(E==null||mxUtils.indexOf(E,B)<0)){if(!D&&typeof(C[B])=="object"){A[B]=mxUtils.clone(C[B])}else{A[B]=C[B]}}}}return A},equalPoints:function(C,B){if((C==null&&B!=null)||(C!=null&&B==null)||(C!=null&&B!=null&&C.length!=B.length)){return false}else{if(C!=null&&B!=null){for(var A=0;A<C.length;A++){if(C[A]==B[A]||(C[A]!=null&&!C[A].equals(B[A]))){return false}}}}return true},equalEntries:function(D,C){if((D==null&&C!=null)||(D!=null&&C==null)||(D!=null&&C!=null&&D.length!=C.length)){return false}else{if(D!=null&&C!=null){var B=0;for(var A in C){B++}for(var A in D){B--;if((!mxUtils.isNaN(D[A])||!mxUtils.isNaN(C[A]))&&D[A]!=C[A]){return false}}}}return B==0},removeDuplicates:function(D){var A=new mxDictionary();var C=[];for(var B=0;B<D.length;B++){if(!A.get(D[B])){C.push(D[B]);A.put(D[B],true)}}return C},isNaN:function(A){return typeof(A)=="number"&&isNaN(A)},extend:function(A,B){var C=function(){};C.prototype=B.prototype;A.prototype=new C();A.prototype.constructor=A},toString:function(B){var E="";for(var A in B){try{if(B[A]==null){E+=A+" = [null]\n"}else{if(typeof(B[A])=="function"){E+=A+" => [Function]\n"}else{if(typeof(B[A])=="object"){var D=mxUtils.getFunctionName(B[A].constructor);E+=A+" => ["+D+"]\n"}else{E+=A+" = "+B[A]+"\n"}}}}catch(C){E+=A+"="+C.message}}return E},toRadians:function(A){return Math.PI*A/180},toDegree:function(A){return A*180/Math.PI},arcToCurves:function(U,V,b,H,T,Q,a,j,k){j-=U;k-=V;if(b===0||H===0){return v}var O=a;var l=T;b=Math.abs(b);H=Math.abs(H);var K=-j/2;var J=-k/2;var d=Math.cos(l*Math.PI/180);var Ab=Math.sin(l*Math.PI/180);var R=d*K+Ab*J;var h=-1*Ab*K+d*J;var g=R*R;var m=h*h;var M=b*b;var B=H*H;var Y=g/M+m/B;var u;if(Y>1){b=Math.sqrt(Y)*b;H=Math.sqrt(Y)*H;u=0}else{var q=1;if(Q===O){q=-1}u=q*Math.sqrt((M*B-M*m-B*g)/(M*m+B*g))}var P=u*b*h/H;var L=-1*u*H*R/b;var c=d*P-Ab*L+j/2;var W=Ab*P+d*L+k/2;var o=Math.atan2((h-L)/H,(R-P)/b)-Math.atan2(0,1);var S=(o>=0)?o:2*Math.PI+o;o=Math.atan2((-h-L)/H,(-R-P)/b)-Math.atan2((h-L)/H,(R-P)/b);var N=(o>=0)?o:2*Math.PI+o;if(O==0&&N>0){N-=2*Math.PI}else{if(O!=0&&N<0){N+=2*Math.PI}}var X=N*2/Math.PI;var f=Math.ceil(X<0?-1*X:X);var Z=N/f;var p=8/3*Math.sin(Z/4)*Math.sin(Z/4)/Math.sin(Z/2);var I=d*b;var A=d*H;var Aa=Ab*b;var F=Ab*H;var i=Math.cos(S);var G=Math.sin(S);var D=-p*(I*G+F*i);var E=-p*(Aa*G-A*i);var w=0;var z=0;var v=[];for(var s=0;s<f;++s){S+=Z;i=Math.cos(S);G=Math.sin(S);w=I*i-F*G+c;z=Aa*i+A*G+W;var r=-p*(I*G+F*i);var e=-p*(Aa*G-A*i);var C=s*6;v[C]=Number(D+U);v[C+1]=Number(E+V);v[C+2]=Number(w-r+U);v[C+3]=Number(z-e+V);v[C+4]=Number(w+U);v[C+5]=Number(z+V);D=w+r;E=z+e}return v},getBoundingBox:function(B,K,G){var A=null;if(B!=null&&K!=null&&K!=0){var E=mxUtils.toRadians(K);var F=Math.cos(E);var D=Math.sin(E);G=(G!=null)?G:new mxPoint(B.x+B.width/2,B.y+B.height/2);var H=new mxPoint(B.x,B.y);var I=new mxPoint(B.x+B.width,B.y);var J=new mxPoint(I.x,B.y+B.height);var C=new mxPoint(B.x,J.y);H=mxUtils.getRotatedPoint(H,F,D,G);I=mxUtils.getRotatedPoint(I,F,D,G);J=mxUtils.getRotatedPoint(J,F,D,G);C=mxUtils.getRotatedPoint(C,F,D,G);A=new mxRectangle(H.x,H.y,0,0);A.add(new mxRectangle(I.x,I.y,0,0));A.add(new mxRectangle(J.x,J.y,0,0));A.add(new mxRectangle(C.x,C.y,0,0))}return A},getRotatedPoint:function(A,E,D,F){F=(F!=null)?F:new mxPoint();var H=A.x-F.x;var G=A.y-F.y;var B=H*E-G*D;var C=G*E+H*D;return new mxPoint(B+F.x,C+F.y)},getPortConstraints:function(D,F,A,J){var C=mxUtils.getValue(D.style,mxConstants.STYLE_PORT_CONSTRAINT,null);if(C==null){return J}else{var H=C.toString();var E=mxConstants.DIRECTION_MASK_NONE;var B=mxUtils.getValue(D.style,mxConstants.STYLE_PORT_CONSTRAINT_ROTATION,0);var I=0;if(B==1){I=mxUtils.getValue(D.style,mxConstants.STYLE_ROTATION,0)}var G=0;if(I>45){G=1;if(I>=135){G=2}}else{if(I<-45){G=3;if(I<=-135){G=2}}}if(H.indexOf(mxConstants.DIRECTION_NORTH)>=0){switch(G){case 0:E|=mxConstants.DIRECTION_MASK_NORTH;break;case 1:E|=mxConstants.DIRECTION_MASK_EAST;break;case 2:E|=mxConstants.DIRECTION_MASK_SOUTH;break;case 3:E|=mxConstants.DIRECTION_MASK_WEST;break}}if(H.indexOf(mxConstants.DIRECTION_WEST)>=0){switch(G){case 0:E|=mxConstants.DIRECTION_MASK_WEST;break;case 1:E|=mxConstants.DIRECTION_MASK_NORTH;break;case 2:E|=mxConstants.DIRECTION_MASK_EAST;break;case 3:E|=mxConstants.DIRECTION_MASK_SOUTH;break}}if(H.indexOf(mxConstants.DIRECTION_SOUTH)>=0){switch(G){case 0:E|=mxConstants.DIRECTION_MASK_SOUTH;break;case 1:E|=mxConstants.DIRECTION_MASK_WEST;break;case 2:E|=mxConstants.DIRECTION_MASK_NORTH;break;case 3:E|=mxConstants.DIRECTION_MASK_EAST;break}}if(H.indexOf(mxConstants.DIRECTION_EAST)>=0){switch(G){case 0:E|=mxConstants.DIRECTION_MASK_EAST;break;case 1:E|=mxConstants.DIRECTION_MASK_SOUTH;break;case 2:E|=mxConstants.DIRECTION_MASK_WEST;break;case 3:E|=mxConstants.DIRECTION_MASK_NORTH;break}}return E}},reversePortConstraints:function(B){var A=0;A=(B&mxConstants.DIRECTION_MASK_WEST)<<3;A|=(B&mxConstants.DIRECTION_MASK_NORTH)<<1;A|=(B&mxConstants.DIRECTION_MASK_SOUTH)>>1;A|=(B&mxConstants.DIRECTION_MASK_EAST)>>3;return A},findNearestSegment:function(C,G,H){var A=-1;if(C.absolutePoints.length>0){var D=C.absolutePoints[0];var I=null;for(var E=1;E<C.absolutePoints.length;E++){var B=C.absolutePoints[E];var F=mxUtils.ptSegDistSq(D.x,D.y,B.x,B.y,G,H);if(I==null||F<I){I=F;A=E-1}D=B}}return A},rectangleIntersectsSegment:function(C,I,K){var G=C.y;var H=C.x;var L=G+C.height;var B=H+C.width;var J=I.x;var D=K.x;if(I.x>K.x){J=K.x;D=I.x}if(D>B){D=B}if(J<H){J=H}if(J>D){return false}var E=I.y;var M=K.y;var A=K.x-I.x;if(Math.abs(A)>1e-07){var N=(K.y-I.y)/A;var O=I.y-N*I.x;E=N*J+O;M=N*D+O}if(E>M){var F=M;M=E;E=F}if(M>L){M=L}if(E<G){E=G}if(E>M){return false}return true},contains:function(A,B,C){return(A.x<=B&&A.x+A.width>=B&&A.y<=C&&A.y+A.height>=C)},intersects:function(H,F){var C=H.width;var J=H.height;var B=F.width;var D=F.height;if(B<=0||D<=0||C<=0||J<=0){return false}var A=H.x;var I=H.y;var G=F.x;var E=F.y;B+=G;D+=E;C+=A;J+=I;return((B<G||B>A)&&(D<E||D>I)&&(C<A||C>G)&&(J<I||J>E))},intersectsHotspot:function(K,M,N,P,D,E){P=(P!=null)?P:1;D=(D!=null)?D:0;E=(E!=null)?E:0;if(P>0){var H=K.getCenterX();var I=K.getCenterY();var L=K.width;var J=K.height;var C=mxUtils.getValue(K.style,mxConstants.STYLE_STARTSIZE)*K.view.scale;if(C>0){if(mxUtils.getValue(K.style,mxConstants.STYLE_HORIZONTAL,true)){I=K.y+C/2;J=C}else{H=K.x+C/2;L=C}}L=Math.max(D,L*P);J=Math.max(D,J*P);if(E>0){L=Math.min(L,E);J=Math.min(J,E)}var G=new mxRectangle(H-L/2,I-J/2,L,J);var O=mxUtils.toRadians(mxUtils.getValue(K.style,mxConstants.STYLE_ROTATION)||0);if(O!=0){var F=Math.cos(-O);var B=Math.sin(-O);var H=new mxPoint(K.getCenterX(),K.getCenterY());var A=mxUtils.getRotatedPoint(new mxPoint(M,N),F,B,H);M=A.x;N=A.y}return mxUtils.contains(G,M,N)}return true},getOffset:function(C,A){var F=0;var D=0;if(A!=null&&A){var E=mxUtils.getDocumentScrollOrigin(C.ownerDocument);F+=E.x;D+=E.y}var B=C.getBoundingClientRect();if(B!=null){F+=B.left;D+=B.top}return new mxPoint(F,D)},getDocumentScrollOrigin:function(D){if(mxClient.IS_QUIRKS){return new mxPoint(D.body.scrollLeft,D.body.scrollTop)}else{var A=D.defaultView||D.parentWindow;var B=(A!=null&&window.pageXOffset!==undefined)?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft;var C=(A!=null&&window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return new mxPoint(B,C)}},getScrollOrigin:function(C){var D=document.body;var A=document.documentElement;var B=mxUtils.getDocumentScrollOrigin((C!=null)?C.ownerDocument:document);while(C!=null&&C!=D&&C!=A){if(!isNaN(C.scrollLeft)&&!isNaN(C.scrollTop)){B.x+=C.scrollLeft;B.y+=C.scrollTop}C=C.parentNode}return B},convertPoint:function(B,C,D){var E=mxUtils.getScrollOrigin(B);var A=mxUtils.getOffset(B);A.x-=E.x;A.y-=E.y;return new mxPoint(C-A.x,D-A.y)},ltrim:function(A,B){B=B||"\\s";return A.replace(new RegExp("^["+B+"]+","g"),"")},rtrim:function(A,B){B=B||"\\s";return A.replace(new RegExp("["+B+"]+$","g"),"")},trim:function(A,B){return mxUtils.ltrim(mxUtils.rtrim(A,B),B)},isNumeric:function(A){return !isNaN(parseFloat(A))&&isFinite(A)&&(typeof(A)!="string"||A.toLowerCase().indexOf("0x")<0)},isInteger:function(A){return String(parseInt(A))===String(A)},mod:function(A,B){return((A%B)+B)%B},intersection:function(F,G,C,D,K,I,H,M){var A=((M-I)*(C-F))-((H-K)*(D-G));var B=((H-K)*(G-I))-((M-I)*(F-K));var E=((C-F)*(G-I))-((D-G)*(F-K));var J=B/A;var L=E/A;if(J>=0&&J<=1&&L>=0&&L<=1){var O=F+J*(C-F);var N=G+J*(D-G);return new mxPoint(O,N)}return null},ptSegDistSq:function(A,B,C,D,G,E){C-=A;D-=B;G-=A;E-=B;var I=G*C+E*D;var F;if(I<=0){F=0}else{G=C-G;E=D-E;I=G*C+E*D;if(I<=0){F=0}else{F=I*I/(C*C+D*D)}}var H=G*G+E*E-F;if(H<0){H=0}return H},ptLineDist:function(E,F,A,B,D,C){return Math.abs((B-F)*D-(A-E)*C+A*F-B*E)/Math.sqrt((B-F)*(B-F)+(A-E)*(A-E))},relativeCcw:function(E,F,A,B,D,C){A-=E;B-=F;D-=E;C-=F;var G=D*B-C*A;if(G==0){G=D*A+C*B;if(G>0){D-=A;C-=B;G=D*A+C*B;if(G<0){G=0}}}return(G<0)?-1:((G>0)?1:0)},animateChanges:function(A,B){mxEffects.animateChanges.apply(this,arguments)},cascadeOpacity:function(A,C,B){mxEffects.cascadeOpacity.apply(this,arguments)},fadeOut:function(D,B,A,C,F,E){mxEffects.fadeOut.apply(this,arguments)},setOpacity:function(A,B){if(mxUtils.isVml(A)){if(B>=100){A.style.filter=""}else{A.style.filter="alpha(opacity="+(B/5)+")"}}else{if(mxClient.IS_IE&&(typeof(document.documentMode)==="undefined"||document.documentMode<9)){if(B>=100){A.style.filter=""}else{A.style.filter="alpha(opacity="+B+")"}}else{A.style.opacity=(B/100)}}},createImage:function(B){var A=null;if(mxClient.IS_IE6&&document.compatMode!="CSS1Compat"){A=document.createElement(mxClient.VML_PREFIX+":image");A.setAttribute("src",B);A.style.borderStyle="none"}else{A=document.createElement("img");A.setAttribute("src",B);A.setAttribute("border","0")}return A},sortCells:function(C,B){B=(B!=null)?B:true;var A=new mxDictionary();C.sort(function(F,G){var D=A.get(F);if(D==null){D=mxCellPath.create(F).split(mxCellPath.PATH_SEPARATOR);A.put(F,D)}var E=A.get(G);if(E==null){E=mxCellPath.create(G).split(mxCellPath.PATH_SEPARATOR);A.put(G,E)}var H=mxCellPath.compare(D,E);return(H==0)?0:(((H>0)==B)?1:-1)});return C},getStylename:function(B){if(B!=null){var C=B.split(";");var A=C[0];if(A.indexOf("=")<0){return A}}return""},getStylenames:function(C){var B=[];if(C!=null){var D=C.split(";");for(var A=0;A<D.length;A++){if(D[A].indexOf("=")<0){B.push(D[A])}}}return B},indexOfStylename:function(C,B){if(C!=null&&B!=null){var D=C.split(";");var E=0;for(var A=0;A<D.length;A++){if(D[A]==B){return E}E+=D[A].length+1}}return -1},addStylename:function(B,A){if(mxUtils.indexOfStylename(B,A)<0){if(B==null){B=""}else{if(B.length>0&&B.charAt(B.length-1)!=";"){B+=";"}}B+=A}return B},removeStylename:function(D,C){var B=[];if(D!=null){var E=D.split(";");for(var A=0;A<E.length;A++){if(E[A]!=C){B.push(E[A])}}}return B.join(";")},removeAllStylenames:function(C){var B=[];if(C!=null){var D=C.split(";");for(var A=0;A<D.length;A++){if(D[A].indexOf("=")>=0){B.push(D[A])}}}return B.join(";")},setCellStyles:function(F,D,A,E){if(D!=null&&D.length>0){F.beginUpdate();try{for(var B=0;B<D.length;B++){if(D[B]!=null){var C=mxUtils.setStyle(F.getStyle(D[B]),A,E);F.setStyle(D[B],C)}}}finally{F.endUpdate()}}},setStyle:function(D,A,F){var G=F!=null&&(typeof(F.length)=="undefined"||F.length>0);if(D==null||D.length==0){if(G){D=A+"="+F+";"}}else{if(D.substring(0,A.length+1)==A+"="){var C=D.indexOf(";");if(G){D=A+"="+F+((C<0)?";":D.substring(C))}else{D=(C<0||C==D.length-1)?"":D.substring(C+1)}}else{var B=D.indexOf(";"+A+"=");if(B<0){if(G){var E=(D.charAt(D.length-1)==";")?"":";";D=D+E+A+"="+F+";"}}else{var C=D.indexOf(";",B+1);if(G){D=D.substring(0,B+1)+A+"="+F+((C<0)?";":D.substring(C))}else{D=D.substring(0,B)+((C<0)?";":D.substring(C))}}}}return D},setCellStyleFlags:function(F,D,A,G,E){if(D!=null&&D.length>0){F.beginUpdate();try{for(var B=0;B<D.length;B++){if(D[B]!=null){var C=mxUtils.setStyleFlag(F.getStyle(D[B]),A,G,E);F.setStyle(D[B],C)}}}finally{F.endUpdate()}}},setStyleFlag:function(E,F,G,D){if(E==null||E.length==0){if(D||D==null){E=F+"="+G}else{E=F+"=0"}}else{var A=E.indexOf(F+"=");if(A<0){var B=(E.charAt(E.length-1)==";")?"":";";if(D||D==null){E=E+B+F+"="+G}else{E=E+B+F+"=0"}}else{var H=E.indexOf(";",A);var C="";if(H<0){C=E.substring(A+F.length+1)}else{C=E.substring(A+F.length+1,H)}if(D==null){C=parseInt(C)^G}else{if(D){C=parseInt(C)|G}else{C=parseInt(C)&~G}}E=E.substring(0,A)+F+"="+C+((H>=0)?E.substring(H):"")}}return E},getAlignmentAsPoint:function(C,A){var B=0;var D=0;if(C==mxConstants.ALIGN_CENTER){B=-0.5}else{if(C==mxConstants.ALIGN_RIGHT){B=-1}}if(A==mxConstants.ALIGN_MIDDLE){D=-0.5}else{if(A==mxConstants.ALIGN_BOTTOM){D=-1}}return new mxPoint(B,D)},getSizeForString:function(D,F,B,A){F=(F!=null)?F:mxConstants.DEFAULT_FONTSIZE;B=(B!=null)?B:mxConstants.DEFAULT_FONTFAMILY;var E=document.createElement("div");E.style.fontFamily=B;E.style.fontSize=Math.round(F)+"px";E.style.lineHeight=Math.round(F*mxConstants.LINE_HEIGHT)+"px";E.style.position="absolute";E.style.visibility="hidden";E.style.display=(mxClient.IS_QUIRKS)?"inline":"inline-block";E.style.zoom="1";if(A!=null){E.style.width=A+"px";E.style.whiteSpace="normal"}else{E.style.whiteSpace="nowrap"}E.innerHTML=D;document.body.appendChild(E);var C=new mxRectangle(0,0,E.offsetWidth,E.offsetHeight);document.body.removeChild(E);return C},getViewXml:function(C,D,L,E,F){E=(E!=null)?E:0;F=(F!=null)?F:0;D=(D!=null)?D:1;if(L==null){var N=C.getModel();L=[N.getRoot()]}var A=C.getView();var B=null;var M=A.isEventsEnabled();A.setEventsEnabled(false);var G=A.drawPane;var J=A.overlayPane;if(C.dialect==mxConstants.DIALECT_SVG){A.drawPane=document.createElementNS(mxConstants.NS_SVG,"g");A.canvas.appendChild(A.drawPane);A.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g");A.canvas.appendChild(A.overlayPane)}else{A.drawPane=A.drawPane.cloneNode(false);A.canvas.appendChild(A.drawPane);A.overlayPane=A.overlayPane.cloneNode(false);A.canvas.appendChild(A.overlayPane)}var H=A.getTranslate();A.translate=new mxPoint(E,F);var I=new mxTemporaryCellStates(C.getView(),D,L);try{var K=new mxCodec();B=K.encode(C.getView())}finally{I.destroy();A.translate=H;A.canvas.removeChild(A.drawPane);A.canvas.removeChild(A.overlayPane);A.drawPane=G;A.overlayPane=J;A.setEventsEnabled(M)}return B},getScaleForPageCount:function(P,U,H,M){if(P<1){return 1}H=(H!=null)?H:mxConstants.PAGE_FORMAT_A4_PORTRAIT;M=(M!=null)?M:0;var G=H.width-(M*2);var T=H.height-(M*2);var B=U.getGraphBounds().clone();var F=U.getView().getScale();B.width/=F;B.height/=F;var X=B.width;var J=B.height;var O=1;var W=G/T;var K=X/J;var I=K/W;var R=Math.sqrt(P);var V=Math.sqrt(I);var A=R*V;var N=R/V;if(A<1&&N>P){var C=N/P;N=P;A/=C}if(N<1&&A>P){var C=A/P;A=P;N/=C}var D=Math.ceil(A)*Math.ceil(N);var E=0;while(D>P){var L=Math.floor(A)/A;var S=Math.floor(N)/N;if(L==1){L=Math.floor(A-1)/A}if(S==1){S=Math.floor(N-1)/N}var C=1;if(L>S){C=L}else{C=S}A=A*C;N=N*C;D=Math.ceil(A)*Math.ceil(N);E++;if(E>10){break}}var Q=G*A;O=Q/X;return O*0.99999},show:function(T,O,J,K,C,E){J=(J!=null)?J:0;K=(K!=null)?K:0;if(O==null){var A=window.open();O=A.document}else{O.open()}if(document.documentMode==9){O.writeln('<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=9"><![endif]-->')}var D=T.getGraphBounds();var H=Math.ceil(J-D.x);var S=Math.ceil(K-D.y);if(C==null){C=Math.ceil(D.width+J)+Math.ceil(Math.ceil(D.x)-D.x)}if(E==null){E=Math.ceil(D.height+K)+Math.ceil(Math.ceil(D.y)-D.y)}if(mxClient.IS_IE||document.documentMode==11){var N="<html><head>";var G=document.getElementsByTagName("base");for(var F=0;F<G.length;F++){N+=G[F].outerHTML}N+="<style>";for(var F=0;F<document.styleSheets.length;F++){try{N+=document.styleSheets[F].cssText}catch(M){}}N+='</style></head><body style="margin:0px;">';N+='<div style="position:absolute;overflow:hidden;width:'+C+"px;height:"+E+'px;"><div style="position:relative;left:'+H+"px;top:"+S+'px;">';N+=T.container.innerHTML;N+="</div></div></body><html>";O.writeln(N);O.close()}else{O.writeln("<html><head>");var G=document.getElementsByTagName("base");for(var F=0;F<G.length;F++){O.writeln(mxUtils.getOuterHtml(G[F]))}var U=document.getElementsByTagName("link");for(var F=0;F<U.length;F++){O.writeln(mxUtils.getOuterHtml(U[F]))}var Q=document.getElementsByTagName("style");for(var F=0;F<Q.length;F++){O.writeln(mxUtils.getOuterHtml(Q[F]))}O.writeln('</head><body style="margin:0px;"></body></html>');O.close();var B=O.createElement("div");B.position="absolute";B.overflow="hidden";B.style.width=C+"px";B.style.height=E+"px";var P=O.createElement("div");P.style.position="absolute";P.style.left=H+"px";P.style.top=S+"px";var R=T.container.firstChild;var I=null;while(R!=null){var L=R.cloneNode(true);if(R==T.view.drawPane.ownerSVGElement){B.appendChild(L);I=L}else{P.appendChild(L)}R=R.nextSibling}O.body.appendChild(B);if(P.firstChild!=null){O.body.appendChild(P)}if(I!=null){I.style.minWidth="";I.style.minHeight="";I.firstChild.setAttribute("transform","translate("+H+","+S+")")}}mxUtils.removeCursors(O.body);return O},printScreen:function(D){var A=window.open();var C=D.getGraphBounds();mxUtils.show(D,A.document);var B=function(){A.focus();A.print();A.close()};if(mxClient.IS_GC){A.setTimeout(B,500)}else{B()}},popup:function(F,C){if(C){var E=document.createElement("div");E.style.overflow="scroll";E.style.width="636px";E.style.height="460px";var D=document.createElement("pre");D.innerHTML=mxUtils.htmlEntities(F,false).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;");E.appendChild(D);var G=document.body.clientWidth;var A=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight);var B=new mxWindow("Popup Window",E,G/2-320,A/2-240,640,480,false,true);B.setClosable(true);B.setVisible(true)}else{if(mxClient.IS_NS){var B=window.open();B.document.writeln("<pre>"+mxUtils.htmlEntities(F)+"</pre");B.document.close()}else{var B=window.open();var D=B.document.createElement("pre");D.innerHTML=mxUtils.htmlEntities(F,false).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;");B.document.body.appendChild(D)}}},alert:function(A){alert(A)},prompt:function(B,A){return prompt(B,(A!=null)?A:"")},confirm:function(A){return confirm(A)},error:function(K,J,E,I){var B=document.createElement("div");B.style.padding="20px";var A=document.createElement("img");A.setAttribute("src",I||mxUtils.errorImage);A.setAttribute("valign","bottom");A.style.verticalAlign="middle";B.appendChild(A);B.appendChild(document.createTextNode("\u00a0"));B.appendChild(document.createTextNode("\u00a0"));B.appendChild(document.createTextNode("\u00a0"));mxUtils.write(B,K);var C=document.body.clientWidth;var G=(document.body.clientHeight||document.documentElement.clientHeight);var D=new mxWindow(mxResources.get(mxUtils.errorResource)||mxUtils.errorResource,B,(C-J)/2,G/4,J,null,false,true);if(E){mxUtils.br(B);var F=document.createElement("p");var H=document.createElement("button");if(mxClient.IS_IE){H.style.cssText="float:right"}else{H.setAttribute("style","float:right")}mxEvent.addListener(H,"click",function(L){D.destroy()});mxUtils.write(H,mxResources.get(mxUtils.closeResource)||mxUtils.closeResource);F.appendChild(H);B.appendChild(F);mxUtils.br(B);D.setClosable(true)}D.setVisible(true);return D},makeDraggable:function(B,G,J,K,I,F,H,D,C,E){var A=new mxDragSource(B,J);A.dragOffset=new mxPoint((I!=null)?I:0,(F!=null)?F:mxConstants.TOOLTIP_VERTICAL_OFFSET);A.autoscroll=H;A.setGuidesEnabled(false);if(C!=null){A.highlightDropTargets=C}if(E!=null){A.getDropTarget=E}A.getGraphForEvent=function(L){return(typeof(G)=="function")?G(L):G};if(K!=null){A.createDragElement=function(){return K.cloneNode(true)};if(D){A.createPreviewElement=function(M){var N=K.cloneNode(true);var O=parseInt(N.style.width);var L=parseInt(N.style.height);N.style.width=Math.round(O*M.view.scale)+"px";N.style.height=Math.round(L*M.view.scale)+"px";return N}}}return A}};var mxVmlCanvas2D=function(A){mxAbstractCanvas2D.call(this);this.root=A};mxUtils.extend(mxVmlCanvas2D,mxAbstractCanvas2D);mxVmlCanvas2D.prototype.node=null;mxVmlCanvas2D.prototype.textEnabled=true;mxVmlCanvas2D.prototype.moveOp="m";mxVmlCanvas2D.prototype.lineOp="l";mxVmlCanvas2D.prototype.curveOp="c";mxVmlCanvas2D.prototype.closeOp="x";mxVmlCanvas2D.prototype.rotatedHtmlBackground="";mxVmlCanvas2D.prototype.vmlScale=1;mxVmlCanvas2D.prototype.createElement=function(A){return document.createElement(A)};mxVmlCanvas2D.prototype.createVmlElement=function(A){return this.createElement(mxClient.VML_PREFIX+":"+A)};mxVmlCanvas2D.prototype.addNode=function(B,A){var C=this.node;var D=this.state;if(C!=null){if(C.nodeName=="shape"){if(this.path!=null&&this.path.length>0){C.path=this.path.join(" ")+" e";C.style.width=this.root.style.width;C.style.height=this.root.style.height;C.coordsize=parseInt(C.style.width)+" "+parseInt(C.style.height)}else{return}}C.strokeweight=this.format(Math.max(1,D.strokeWidth*D.scale/this.vmlScale))+"px";if(D.shadow){this.root.appendChild(this.createShadow(C,B&&D.fillColor!=null,A&&D.strokeColor!=null))}if(A&&D.strokeColor!=null){C.stroked="true";C.strokecolor=D.strokeColor}else{C.stroked="false"}C.appendChild(this.createStroke());if(B&&D.fillColor!=null){C.appendChild(this.createFill())}else{if(this.pointerEvents&&(C.nodeName!="shape"||this.path[this.path.length-1]==this.closeOp)){C.appendChild(this.createTransparentFill())}else{C.filled="false"}}this.root.appendChild(C)}};mxVmlCanvas2D.prototype.createTransparentFill=function(){var A=this.createVmlElement("fill");A.src=mxClient.imageBasePath+"/transparent.gif";A.type="tile";return A};mxVmlCanvas2D.prototype.createFill=function(){var B=this.state;var A=this.createVmlElement("fill");A.color=B.fillColor;if(B.gradientColor!=null){A.type="gradient";A.method="none";A.color2=B.gradientColor;var C=180-B.rotation;if(B.gradientDirection==mxConstants.DIRECTION_WEST){C-=90+((this.root.style.flip=="x")?180:0)}else{if(B.gradientDirection==mxConstants.DIRECTION_EAST){C+=90+((this.root.style.flip=="x")?180:0)}else{if(B.gradientDirection==mxConstants.DIRECTION_NORTH){C-=180+((this.root.style.flip=="y")?-180:0)}else{C+=((this.root.style.flip=="y")?-180:0)}}}if(this.root.style.flip=="x"||this.root.style.flip=="y"){C*=-1}A.angle=mxUtils.mod(C,360);A.opacity=(B.alpha*B.gradientFillAlpha*100)+"%";A.setAttribute(mxClient.OFFICE_PREFIX+":opacity2",(B.alpha*B.gradientAlpha*100)+"%")}else{if(B.alpha<1||B.fillAlpha<1){A.opacity=(B.alpha*B.fillAlpha*100)+"%"}}return A};mxVmlCanvas2D.prototype.createStroke=function(){var A=this.state;var B=this.createVmlElement("stroke");B.endcap=A.lineCap||"flat";B.joinstyle=A.lineJoin||"miter";B.miterlimit=A.miterLimit||"10";if(A.alpha<1||A.strokeAlpha<1){B.opacity=(A.alpha*A.strokeAlpha*100)+"%"}if(A.dashed){B.dashstyle=this.getVmlDashStyle()}return B};mxVmlCanvas2D.prototype.getVmlDashStyle=function(){var B="dash";if(typeof(this.state.dashPattern)==="string"){var A=this.state.dashPattern.split(" ");if(A.length>0&&A[0]==1){B="0 2"}}return B};mxVmlCanvas2D.prototype.createShadow=function(G,J,A){var B=this.state;var E=-B.rotation*(Math.PI/180);var F=Math.cos(E);var C=Math.sin(E);var I=B.shadowDx*B.scale;var H=B.shadowDy*B.scale;if(this.root.style.flip=="x"){I*=-1}else{if(this.root.style.flip=="y"){H*=-1}}var D=G.cloneNode(true);D.style.marginLeft=Math.round(I*F-H*C)+"px";D.style.marginTop=Math.round(I*C+H*F)+"px";if(document.documentMode==8){D.strokeweight=G.strokeweight;if(G.nodeName=="shape"){D.path=this.path.join(" ")+" e";D.style.width=this.root.style.width;D.style.height=this.root.style.height;D.coordsize=parseInt(G.style.width)+" "+parseInt(G.style.height)}}if(A){D.strokecolor=B.shadowColor;D.appendChild(this.createShadowStroke())}else{D.stroked="false"}if(J){D.appendChild(this.createShadowFill())}else{D.filled="false"}return D};mxVmlCanvas2D.prototype.createShadowFill=function(){var A=this.createVmlElement("fill");A.color=this.state.shadowColor;A.opacity=(this.state.alpha*this.state.shadowAlpha*100)+"%";return A};mxVmlCanvas2D.prototype.createShadowStroke=function(){var A=this.createStroke();A.opacity=(this.state.alpha*this.state.shadowAlpha*100)+"%";return A};mxVmlCanvas2D.prototype.rotate=function(D,A,C,E,B){if(A&&C){D+=180}else{if(A){this.root.style.flip="x"}else{if(C){this.root.style.flip="y"}}}if(A?!C:C){D*=-1}this.root.style.rotation=D;this.state.rotation=this.state.rotation+D;this.state.rotationCx=E;this.state.rotationCy=B};mxVmlCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments);this.node=this.createVmlElement("shape");this.node.style.position="absolute"};mxVmlCanvas2D.prototype.quadTo=function(E,F,G,H){var B=this.state;var N=(this.lastX+B.dx)*B.scale;var M=(this.lastY+B.dy)*B.scale;var J=(E+B.dx)*B.scale;var I=(F+B.dy)*B.scale;var A=(G+B.dx)*B.scale;var O=(H+B.dy)*B.scale;var L=N+2/3*(J-N);var K=M+2/3*(I-M);var D=A+2/3*(J-A);var C=O+2/3*(I-O);this.path.push("c "+this.format(L)+" "+this.format(K)+" "+this.format(D)+" "+this.format(C)+" "+this.format(A)+" "+this.format(O));this.lastX=(A/B.scale)-B.dx;this.lastY=(O/B.scale)-B.dy};mxVmlCanvas2D.prototype.createRect=function(G,D,E,F,A){var B=this.state;var C=this.createVmlElement(G);C.style.position="absolute";C.style.left=this.format((D+B.dx)*B.scale)+"px";C.style.top=this.format((E+B.dy)*B.scale)+"px";C.style.width=this.format(F*B.scale)+"px";C.style.height=this.format(A*B.scale)+"px";return C};mxVmlCanvas2D.prototype.rect=function(B,C,D,A){this.node=this.createRect("rect",B,C,D,A)};mxVmlCanvas2D.prototype.roundrect=function(D,E,F,A,C,B){this.node=this.createRect("roundrect",D,E,F,A);this.node.setAttribute("arcsize",Math.max(C*100/F,B*100/A)+"%")};mxVmlCanvas2D.prototype.ellipse=function(B,C,D,A){this.node=this.createRect("oval",B,C,D,A)};mxVmlCanvas2D.prototype.image=function(H,I,D,F,B,E,C,A){var G=null;if(!E){G=this.createRect("image",H,I,D,F);G.src=B}else{G=this.createRect("rect",H,I,D,F);G.stroked="false";var J=this.createVmlElement("fill");J.aspect=(E)?"atmost":"ignore";J.rotate="true";J.type="frame";J.src=B;G.appendChild(J)}if(C&&A){G.style.rotation="180"}else{if(C){G.style.flip="x"}else{if(A){G.style.flip="y"}}}if(this.state.alpha<1||this.state.fillAlpha<1){G.style.filter+="alpha(opacity="+(this.state.alpha*this.state.fillAlpha*100)+")"}this.root.appendChild(G)};mxVmlCanvas2D.prototype.createDiv=function(C,D,A,H){var I=this.createElement("div");var F=this.state;var B="";if(F.fontBackgroundColor!=null){B+="background-color:"+F.fontBackgroundColor+";"}if(F.fontBorderColor!=null){B+="border:1px solid "+F.fontBorderColor+";"}if(mxUtils.isNode(C)){I.appendChild(C)}else{if(H!="fill"&&H!="width"){var E=this.createElement("div");E.style.cssText=B;E.style.display=(mxClient.IS_QUIRKS)?"inline":"inline-block";E.style.zoom="1";E.style.textDecoration="inherit";E.innerHTML=C;I.appendChild(E)}else{I.style.cssText=B;I.innerHTML=C}}var G=I.style;G.fontSize=(F.fontSize/this.vmlScale)+"px";G.fontFamily=F.fontFamily;G.color=F.fontColor;G.verticalAlign="top";G.textAlign=D||"left";G.lineHeight=(mxConstants.ABSOLUTE_LINE_HEIGHT)?(F.fontSize*mxConstants.LINE_HEIGHT/this.vmlScale)+"px":mxConstants.LINE_HEIGHT;if((F.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD){G.fontWeight="bold"}if((F.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC){G.fontStyle="italic"}if((F.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE){G.textDecoration="underline"}return I};mxVmlCanvas2D.prototype.text=function(W,X,e,g,U,k,Y,R,H,N,J,P,G){if(this.textEnabled&&U!=null){var b=this.state;if(H=="html"){if(b.rotation!=null){var A=this.rotatePoint(W,X,b.rotation,b.rotationCx,b.rotationCy);W=A.x;X=A.y}if(document.documentMode==8&&!mxClient.IS_EM){W+=b.dx;X+=b.dy;if(N!="fill"&&Y==mxConstants.ALIGN_TOP){X-=1}}else{W*=b.scale;X*=b.scale}var a=(document.documentMode==8&&!mxClient.IS_EM)?this.createVmlElement("group"):this.createElement("div");a.style.position="absolute";a.style.display="inline";a.style.left=this.format(W)+"px";a.style.top=this.format(X)+"px";a.style.zoom=b.scale;var j=this.createElement("div");j.style.position="relative";j.style.display="inline";var M=mxUtils.getAlignmentAsPoint(k,Y);var Z=M.x;var S=M.y;var E=this.createDiv(U,k,Y,N);var B=this.createElement("div");if(G!=null){E.setAttribute("dir",G)}if(R&&e>0){if(!J){E.style.width=Math.round(e)+"px"}E.style.wordWrap=mxConstants.WORD_WRAP;E.style.whiteSpace="normal";if(E.style.wordWrap=="break-word"){var d=E;if(d.firstChild!=null&&d.firstChild.nodeName=="DIV"){d.firstChild.style.width="100%"}}}else{E.style.whiteSpace="nowrap"}var K=b.rotation+(P||0);if(this.rotateHtml&&K!=0){B.style.display="inline";B.style.zoom="1";B.appendChild(E);if(document.documentMode==8&&!mxClient.IS_EM&&this.root.nodeName!="DIV"){j.appendChild(B);a.appendChild(j)}else{a.appendChild(B)}}else{if(document.documentMode==8&&!mxClient.IS_EM){j.appendChild(E);a.appendChild(j)}else{E.style.display="inline";a.appendChild(E)}}if(this.root.nodeName!="DIV"){var L=this.createVmlElement("rect");L.stroked="false";L.filled="false";L.appendChild(a);this.root.appendChild(L)}else{this.root.appendChild(a)}if(J){E.style.overflow="hidden";E.style.width=Math.round(e)+"px";if(!mxClient.IS_QUIRKS){E.style.maxHeight=Math.round(g)+"px"}}else{if(N=="fill"){E.style.overflow="hidden";E.style.width=(Math.max(0,e)+1)+"px";E.style.height=(Math.max(0,g)+1)+"px"}else{if(N=="width"){E.style.overflow="hidden";E.style.width=(Math.max(0,e)+1)+"px";E.style.maxHeight=(Math.max(0,g)+1)+"px"}}}if(this.rotateHtml&&K!=0){var c=K*(Math.PI/180);var f=parseFloat(parseFloat(Math.cos(c)).toFixed(8));var l=parseFloat(parseFloat(Math.sin(-c)).toFixed(8));c%=2*Math.PI;if(c<0){c+=2*Math.PI}c%=Math.PI;if(c>Math.PI/2){c=Math.PI-c}var T=Math.cos(c);var C=Math.sin(c);if(document.documentMode==8&&!mxClient.IS_EM){E.style.display="inline-block";B.style.display="inline-block";j.style.display="inline-block"}E.style.visibility="hidden";E.style.position="absolute";document.body.appendChild(E);var V=E;if(V.firstChild!=null&&V.firstChild.nodeName=="DIV"){V=V.firstChild}var d=V.offsetWidth+3;var F=V.offsetHeight;if(J){e=Math.min(e,d);F=Math.min(F,g)}else{e=d}if(R){E.style.width=e+"px"}if(mxClient.IS_QUIRKS&&(J||N=="width")&&F>g){F=g;E.style.height=F+"px"}g=F;var O=(g-g*T+e*-C)/2-l*e*(Z+0.5)+f*g*(S+0.5);var I=(e-e*T+g*-C)/2+f*e*(Z+0.5)+l*g*(S+0.5);if(a.nodeName=="group"&&this.root.nodeName=="DIV"){var D=this.createElement("div");D.style.display="inline-block";D.style.position="absolute";D.style.left=this.format(W+(I-e/2)*b.scale)+"px";D.style.top=this.format(X+(O-g/2)*b.scale)+"px";a.parentNode.appendChild(D);D.appendChild(a)}else{var Q=(document.documentMode==8&&!mxClient.IS_EM)?1:b.scale;a.style.left=this.format(W+(I-e/2)*Q)+"px";a.style.top=this.format(X+(O-g/2)*Q)+"px"}B.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+f+", M12="+l+", M21="+(-l)+", M22="+f+", sizingMethod='auto expand')";B.style.backgroundColor=this.rotatedHtmlBackground;if(this.state.alpha<1){B.style.filter+="alpha(opacity="+(this.state.alpha*100)+")"}B.appendChild(E);E.style.position="";E.style.visibility=""}else{if(document.documentMode!=8||mxClient.IS_EM){E.style.verticalAlign="top";if(this.state.alpha<1){a.style.filter="alpha(opacity="+(this.state.alpha*100)+")"}var i=E.parentNode;E.style.visibility="hidden";document.body.appendChild(E);e=E.offsetWidth;var F=E.offsetHeight;if(mxClient.IS_QUIRKS&&J&&F>g){F=g;E.style.height=F+"px"}g=F;E.style.visibility="";i.appendChild(E);a.style.left=this.format(W+e*Z*this.state.scale)+"px";a.style.top=this.format(X+g*S*this.state.scale)+"px"}else{if(this.state.alpha<1){E.style.filter="alpha(opacity="+(this.state.alpha*100)+")"}j.style.left=(Z*100)+"%";j.style.top=(S*100)+"%"}}}else{this.plainText(W,X,e,g,mxUtils.htmlEntities(U,false),k,Y,R,H,N,J,P,G)}}};mxVmlCanvas2D.prototype.plainText=function(U,V,C,E,A,F,K,W,Q,M,T,L,I){var B=this.state;U=(U+B.dx)*B.scale;V=(V+B.dy)*B.scale;var R=this.createVmlElement("shape");R.style.width="1px";R.style.height="1px";R.stroked="false";var X=this.createVmlElement("fill");X.color=B.fontColor;X.opacity=(B.alpha*100)+"%";R.appendChild(X);var N=this.createVmlElement("path");N.textpathok="true";N.v="m "+this.format(0)+" "+this.format(0)+" l "+this.format(1)+" "+this.format(0);R.appendChild(N);var O=this.createVmlElement("textpath");O.style.cssText="v-text-align:"+F;O.style.align=F;O.style.fontFamily=B.fontFamily;O.string=A;O.on="true";var D=B.fontSize*B.scale/this.vmlScale;O.style.fontSize=D+"px";if((B.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD){O.style.fontWeight="bold"}if((B.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC){O.style.fontStyle="italic"}if((B.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE){O.style.textDecoration="underline"}var P=A.split("\n");var J=D+(P.length-1)*D*mxConstants.LINE_HEIGHT;var H=0;var S=0;if(K==mxConstants.ALIGN_BOTTOM){S=-J/2}else{if(K!=mxConstants.ALIGN_MIDDLE){S=J/2}}if(L!=null){R.style.rotation=L;var G=L*(Math.PI/180);H=Math.sin(G)*S;S=Math.cos(G)*S}R.appendChild(O);R.style.left=this.format(U-H)+"px";R.style.top=this.format(V+S)+"px";this.root.appendChild(R)};mxVmlCanvas2D.prototype.stroke=function(){this.addNode(false,true)};mxVmlCanvas2D.prototype.fill=function(){this.addNode(true,false)};mxVmlCanvas2D.prototype.fillAndStroke=function(){this.addNode(true,true)};function mxWindow(E,I,F,G,D,J,A,H,C,B){if(I!=null){A=(A!=null)?A:true;this.content=I;this.init(F,G,D,J,B);this.installMaximizeHandler();this.installMinimizeHandler();this.installCloseHandler();this.setMinimizable(A);this.setTitle(E);if(H==null||H){this.installMoveHandler()}if(C!=null&&C.parentNode!=null){C.parentNode.replaceChild(this.div,C)}else{document.body.appendChild(this.div)}}}mxWindow.prototype=new mxEventSource();mxWindow.prototype.constructor=mxWindow;mxWindow.prototype.closeImage=mxClient.imageBasePath+"/close.gif";mxWindow.prototype.minimizeImage=mxClient.imageBasePath+"/minimize.gif";mxWindow.prototype.normalizeImage=mxClient.imageBasePath+"/normalize.gif";mxWindow.prototype.maximizeImage=mxClient.imageBasePath+"/maximize.gif";mxWindow.prototype.resizeImage=mxClient.imageBasePath+"/resize.gif";mxWindow.prototype.visible=false;mxWindow.prototype.minimumSize=new mxRectangle(0,0,50,40);mxWindow.prototype.destroyOnClose=true;mxWindow.prototype.contentHeightCorrection=(document.documentMode==8||document.documentMode==7)?6:2;mxWindow.prototype.title=null;mxWindow.prototype.content=null;mxWindow.prototype.init=function(F,G,E,A,D){D=(D!=null)?D:"mxWindow";this.div=document.createElement("div");this.div.className=D;this.div.style.left=F+"px";this.div.style.top=G+"px";this.table=document.createElement("table");this.table.className=D;if(mxClient.IS_POINTER){this.div.style.touchAction="none"}if(E!=null){if(!mxClient.IS_QUIRKS){this.div.style.width=E+"px"}this.table.style.width=E+"px"}if(A!=null){if(!mxClient.IS_QUIRKS){this.div.style.height=A+"px"}this.table.style.height=A+"px"}var C=document.createElement("tbody");var B=document.createElement("tr");this.title=document.createElement("td");this.title.className=D+"Title";this.buttons=document.createElement("div");this.buttons.style.position="absolute";this.buttons.style.display="inline-block";this.buttons.style.right="4px";this.buttons.style.top="5px";this.title.appendChild(this.buttons);B.appendChild(this.title);C.appendChild(B);B=document.createElement("tr");this.td=document.createElement("td");this.td.className=D+"Pane";if(document.documentMode==7){this.td.style.height="100%"}this.contentWrapper=document.createElement("div");this.contentWrapper.className=D+"Pane";this.contentWrapper.style.width="100%";this.contentWrapper.appendChild(this.content);if(mxClient.IS_QUIRKS||this.content.nodeName.toUpperCase()!="DIV"){this.contentWrapper.style.height="100%"}this.td.appendChild(this.contentWrapper);B.appendChild(this.td);C.appendChild(B);this.table.appendChild(C);this.div.appendChild(this.table);var H=mxUtils.bind(this,function(I){this.activate()});mxEvent.addGestureListeners(this.title,H);mxEvent.addGestureListeners(this.table,H);this.hide()};mxWindow.prototype.setTitle=function(B){var A=this.title.firstChild;while(A!=null){var C=A.nextSibling;if(A.nodeType==mxConstants.NODETYPE_TEXT){A.parentNode.removeChild(A)}A=C}mxUtils.write(this.title,B||"");this.title.appendChild(this.buttons)};mxWindow.prototype.setScrollable=function(A){if(navigator.userAgent.indexOf("Presto/2.5")<0){if(A){this.contentWrapper.style.overflow="auto"}else{this.contentWrapper.style.overflow="hidden"}}};mxWindow.prototype.activate=function(){if(mxWindow.activeWindow!=this){var B=mxUtils.getCurrentStyle(this.getElement());var D=(B!=null)?B.zIndex:3;if(mxWindow.activeWindow){var C=mxWindow.activeWindow.getElement();if(C!=null&&C.style!=null){C.style.zIndex=D}}var A=mxWindow.activeWindow;this.getElement().style.zIndex=parseInt(D)+1;mxWindow.activeWindow=this;this.fireEvent(new mxEventObject(mxEvent.ACTIVATE,"previousWindow",A))}};mxWindow.prototype.getElement=function(){return this.div};mxWindow.prototype.fit=function(){mxUtils.fit(this.div)};mxWindow.prototype.isResizable=function(){if(this.resize!=null){return this.resize.style.display!="none"}return false};mxWindow.prototype.setResizable=function(C){if(C){if(this.resize==null){this.resize=document.createElement("img");this.resize.style.position="absolute";this.resize.style.bottom="2px";this.resize.style.right="2px";this.resize.setAttribute("src",mxClient.imageBasePath+"/resize.gif");this.resize.style.cursor="nw-resize";var D=null;var E=null;var F=null;var H=null;var A=mxUtils.bind(this,function(I){this.activate();D=mxEvent.getClientX(I);E=mxEvent.getClientY(I);F=this.div.offsetWidth;H=this.div.offsetHeight;mxEvent.addGestureListeners(document,null,B,G);this.fireEvent(new mxEventObject(mxEvent.RESIZE_START,"event",I));mxEvent.consume(I)});var B=mxUtils.bind(this,function(J){if(D!=null&&E!=null){var I=mxEvent.getClientX(J)-D;var K=mxEvent.getClientY(J)-E;this.setSize(F+I,H+K);this.fireEvent(new mxEventObject(mxEvent.RESIZE,"event",J));mxEvent.consume(J)}});var G=mxUtils.bind(this,function(I){if(D!=null&&E!=null){D=null;E=null;mxEvent.removeGestureListeners(document,null,B,G);this.fireEvent(new mxEventObject(mxEvent.RESIZE_END,"event",I));mxEvent.consume(I)}});mxEvent.addGestureListeners(this.resize,A,B,G);this.div.appendChild(this.resize)}else{this.resize.style.display="inline"}}else{if(this.resize!=null){this.resize.style.display="none"}}};mxWindow.prototype.setSize=function(B,A){B=Math.max(this.minimumSize.width,B);A=Math.max(this.minimumSize.height,A);if(!mxClient.IS_QUIRKS){this.div.style.width=B+"px";this.div.style.height=A+"px"}this.table.style.width=B+"px";this.table.style.height=A+"px";if(!mxClient.IS_QUIRKS){this.contentWrapper.style.height=(this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection)+"px"}};mxWindow.prototype.setMinimizable=function(A){this.minimize.style.display=(A)?"":"none"};mxWindow.prototype.getMinimumSize=function(){return new mxRectangle(0,0,0,this.title.offsetHeight)};mxWindow.prototype.installMinimizeHandler=function(){this.minimize=document.createElement("img");this.minimize.setAttribute("src",this.minimizeImage);this.minimize.setAttribute("title","Minimize");this.minimize.style.cursor="pointer";this.minimize.style.marginLeft="2px";this.minimize.style.display="none";this.buttons.appendChild(this.minimize);var A=false;var D=null;var B=null;var C=mxUtils.bind(this,function(E){this.activate();if(!A){A=true;this.minimize.setAttribute("src",this.normalizeImage);this.minimize.setAttribute("title","Normalize");this.contentWrapper.style.display="none";D=this.maximize.style.display;this.maximize.style.display="none";B=this.table.style.height;var F=this.getMinimumSize();if(F.height>0){if(!mxClient.IS_QUIRKS){this.div.style.height=F.height+"px"}this.table.style.height=F.height+"px"}if(F.width>0){if(!mxClient.IS_QUIRKS){this.div.style.width=F.width+"px"}this.table.style.width=F.width+"px"}if(this.resize!=null){this.resize.style.visibility="hidden"}this.fireEvent(new mxEventObject(mxEvent.MINIMIZE,"event",E))}else{A=false;this.minimize.setAttribute("src",this.minimizeImage);this.minimize.setAttribute("title","Minimize");this.contentWrapper.style.display="";this.maximize.style.display=D;if(!mxClient.IS_QUIRKS){this.div.style.height=B}this.table.style.height=B;if(this.resize!=null){this.resize.style.visibility=""}this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",E))}mxEvent.consume(E)});mxEvent.addGestureListeners(this.minimize,C)};mxWindow.prototype.setMaximizable=function(A){this.maximize.style.display=(A)?"":"none"};mxWindow.prototype.installMaximizeHandler=function(){this.maximize=document.createElement("img");this.maximize.setAttribute("src",this.maximizeImage);this.maximize.setAttribute("title","Maximize");this.maximize.style.cursor="default";this.maximize.style.marginLeft="2px";this.maximize.style.cursor="pointer";this.maximize.style.display="none";this.buttons.appendChild(this.maximize);var D=false;var E=null;var F=null;var B=null;var C=null;var G=null;var A=mxUtils.bind(this,function(I){this.activate();if(this.maximize.style.display!="none"){if(!D){D=true;this.maximize.setAttribute("src",this.normalizeImage);this.maximize.setAttribute("title","Normalize");this.contentWrapper.style.display="";G=this.minimize.style.display;this.minimize.style.display="none";E=parseInt(this.div.style.left);F=parseInt(this.div.style.top);B=this.table.style.height;C=this.table.style.width;this.div.style.left="0px";this.div.style.top="0px";var H=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0);if(!mxClient.IS_QUIRKS){this.div.style.width=(document.body.clientWidth-2)+"px";this.div.style.height=(H-2)+"px"}this.table.style.width=(document.body.clientWidth-2)+"px";this.table.style.height=(H-2)+"px";if(this.resize!=null){this.resize.style.visibility="hidden"}if(!mxClient.IS_QUIRKS){var J=mxUtils.getCurrentStyle(this.contentWrapper);if(J.overflow=="auto"||this.resize!=null){this.contentWrapper.style.height=(this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection)+"px"}}this.fireEvent(new mxEventObject(mxEvent.MAXIMIZE,"event",I))}else{D=false;this.maximize.setAttribute("src",this.maximizeImage);this.maximize.setAttribute("title","Maximize");this.contentWrapper.style.display="";this.minimize.style.display=G;this.div.style.left=E+"px";this.div.style.top=F+"px";if(!mxClient.IS_QUIRKS){this.div.style.height=B;this.div.style.width=C;var J=mxUtils.getCurrentStyle(this.contentWrapper);if(J.overflow=="auto"||this.resize!=null){this.contentWrapper.style.height=(this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection)+"px"}}this.table.style.height=B;this.table.style.width=C;if(this.resize!=null){this.resize.style.visibility=""}this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",I))}mxEvent.consume(I)}});mxEvent.addGestureListeners(this.maximize,A);mxEvent.addListener(this.title,"dblclick",A)};mxWindow.prototype.installMoveHandler=function(){this.title.style.cursor="move";mxEvent.addGestureListeners(this.title,mxUtils.bind(this,function(C){var A=mxEvent.getClientX(C);var D=mxEvent.getClientY(C);var E=this.getX();var F=this.getY();var G=mxUtils.bind(this,function(I){var H=mxEvent.getClientX(I)-A;var J=mxEvent.getClientY(I)-D;this.setLocation(E+H,F+J);this.fireEvent(new mxEventObject(mxEvent.MOVE,"event",I));mxEvent.consume(I)});var B=mxUtils.bind(this,function(H){mxEvent.removeGestureListeners(document,null,G,B);this.fireEvent(new mxEventObject(mxEvent.MOVE_END,"event",H));mxEvent.consume(H)});mxEvent.addGestureListeners(document,null,G,B);this.fireEvent(new mxEventObject(mxEvent.MOVE_START,"event",C));mxEvent.consume(C)}));if(mxClient.IS_POINTER){this.title.style.touchAction="none"}};mxWindow.prototype.setLocation=function(A,B){this.div.style.left=A+"px";this.div.style.top=B+"px"};mxWindow.prototype.getX=function(){return parseInt(this.div.style.left)};mxWindow.prototype.getY=function(){return parseInt(this.div.style.top)};mxWindow.prototype.installCloseHandler=function(){this.closeImg=document.createElement("img");this.closeImg.setAttribute("src",this.closeImage);this.closeImg.setAttribute("title","Close");this.closeImg.style.marginLeft="2px";this.closeImg.style.cursor="pointer";this.closeImg.style.display="none";this.buttons.appendChild(this.closeImg);mxEvent.addGestureListeners(this.closeImg,mxUtils.bind(this,function(A){this.fireEvent(new mxEventObject(mxEvent.CLOSE,"event",A));if(this.destroyOnClose){this.destroy()}else{this.setVisible(false)}mxEvent.consume(A)}))};mxWindow.prototype.setImage=function(A){this.image=document.createElement("img");this.image.setAttribute("src",A);this.image.setAttribute("align","left");this.image.style.marginRight="4px";this.image.style.marginLeft="0px";this.image.style.marginTop="-2px";this.title.insertBefore(this.image,this.title.firstChild)};mxWindow.prototype.setClosable=function(A){this.closeImg.style.display=(A)?"":"none"};mxWindow.prototype.isVisible=function(){if(this.div!=null){return this.div.style.display!="none"}return false};mxWindow.prototype.setVisible=function(A){if(this.div!=null&&this.isVisible()!=A){if(A){this.show()}else{this.hide()}}};mxWindow.prototype.show=function(){this.div.style.display="";this.activate();var A=mxUtils.getCurrentStyle(this.contentWrapper);if(!mxClient.IS_QUIRKS&&(A.overflow=="auto"||this.resize!=null)){this.contentWrapper.style.height=(this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection)+"px"}this.fireEvent(new mxEventObject(mxEvent.SHOW))};mxWindow.prototype.hide=function(){this.div.style.display="none";this.fireEvent(new mxEventObject(mxEvent.HIDE))};mxWindow.prototype.destroy=function(){this.fireEvent(new mxEventObject(mxEvent.DESTROY));if(this.div!=null){mxEvent.release(this.div);this.div.parentNode.removeChild(this.div);this.div=null}this.title=null;this.content=null;this.contentWrapper=null};function mxXmlCanvas2D(A){mxAbstractCanvas2D.call(this);this.root=A;this.writeDefaults()}mxUtils.extend(mxXmlCanvas2D,mxAbstractCanvas2D);mxXmlCanvas2D.prototype.textEnabled=true;mxXmlCanvas2D.prototype.compressed=true;mxXmlCanvas2D.prototype.writeDefaults=function(){var A;A=this.createElement("fontfamily");A.setAttribute("family",mxConstants.DEFAULT_FONTFAMILY);this.root.appendChild(A);A=this.createElement("fontsize");A.setAttribute("size",mxConstants.DEFAULT_FONTSIZE);this.root.appendChild(A);A=this.createElement("shadowcolor");A.setAttribute("color",mxConstants.SHADOWCOLOR);this.root.appendChild(A);A=this.createElement("shadowalpha");A.setAttribute("alpha",mxConstants.SHADOW_OPACITY);this.root.appendChild(A);A=this.createElement("shadowoffset");A.setAttribute("dx",mxConstants.SHADOW_OFFSET_X);A.setAttribute("dy",mxConstants.SHADOW_OFFSET_Y);this.root.appendChild(A)};mxXmlCanvas2D.prototype.format=function(A){return parseFloat(parseFloat(A).toFixed(2))};mxXmlCanvas2D.prototype.createElement=function(A){return this.root.ownerDocument.createElement(A)};mxXmlCanvas2D.prototype.save=function(){if(this.compressed){mxAbstractCanvas2D.prototype.save.apply(this,arguments)}this.root.appendChild(this.createElement("save"))};mxXmlCanvas2D.prototype.restore=function(){if(this.compressed){mxAbstractCanvas2D.prototype.restore.apply(this,arguments)}this.root.appendChild(this.createElement("restore"))};mxXmlCanvas2D.prototype.scale=function(B){var A=this.createElement("scale");A.setAttribute("scale",B);this.root.appendChild(A)};mxXmlCanvas2D.prototype.translate=function(A,C){var B=this.createElement("translate");B.setAttribute("dx",this.format(A));B.setAttribute("dy",this.format(C));this.root.appendChild(B)};mxXmlCanvas2D.prototype.rotate=function(E,A,D,F,B){var C=this.createElement("rotate");if(E!=0||A||D){C.setAttribute("theta",this.format(E));C.setAttribute("flipH",(A)?"1":"0");C.setAttribute("flipV",(D)?"1":"0");C.setAttribute("cx",this.format(F));C.setAttribute("cy",this.format(B));this.root.appendChild(C)}};mxXmlCanvas2D.prototype.setAlpha=function(B){if(this.compressed){if(this.state.alpha==B){return}mxAbstractCanvas2D.prototype.setAlpha.apply(this,arguments)}var A=this.createElement("alpha");A.setAttribute("alpha",this.format(B));this.root.appendChild(A)};mxXmlCanvas2D.prototype.setFillAlpha=function(B){if(this.compressed){if(this.state.fillAlpha==B){return}mxAbstractCanvas2D.prototype.setFillAlpha.apply(this,arguments)}var A=this.createElement("fillalpha");A.setAttribute("alpha",this.format(B));this.root.appendChild(A)};mxXmlCanvas2D.prototype.setStrokeAlpha=function(B){if(this.compressed){if(this.state.strokeAlpha==B){return}mxAbstractCanvas2D.prototype.setStrokeAlpha.apply(this,arguments)}var A=this.createElement("strokealpha");A.setAttribute("alpha",this.format(B));this.root.appendChild(A)};mxXmlCanvas2D.prototype.setFillColor=function(B){if(B==mxConstants.NONE){B=null}if(this.compressed){if(this.state.fillColor==B){return}mxAbstractCanvas2D.prototype.setFillColor.apply(this,arguments)}var A=this.createElement("fillcolor");A.setAttribute("color",(B!=null)?B:mxConstants.NONE);this.root.appendChild(A)};mxXmlCanvas2D.prototype.setGradient=function(H,F,I,J,C,E,A,D,G){if(H!=null&&F!=null){mxAbstractCanvas2D.prototype.setGradient.apply(this,arguments);var B=this.createElement("gradient");B.setAttribute("c1",H);B.setAttribute("c2",F);B.setAttribute("x",this.format(I));B.setAttribute("y",this.format(J));B.setAttribute("w",this.format(C));B.setAttribute("h",this.format(E));if(A!=null){B.setAttribute("direction",A)}if(D!=null){B.setAttribute("alpha1",D)}if(G!=null){B.setAttribute("alpha2",G)}this.root.appendChild(B)}};mxXmlCanvas2D.prototype.setStrokeColor=function(B){if(B==mxConstants.NONE){B=null}if(this.compressed){if(this.state.strokeColor==B){return}mxAbstractCanvas2D.prototype.setStrokeColor.apply(this,arguments)}var A=this.createElement("strokecolor");A.setAttribute("color",(B!=null)?B:mxConstants.NONE);this.root.appendChild(A)};mxXmlCanvas2D.prototype.setStrokeWidth=function(B){if(this.compressed){if(this.state.strokeWidth==B){return}mxAbstractCanvas2D.prototype.setStrokeWidth.apply(this,arguments)}var A=this.createElement("strokewidth");A.setAttribute("width",this.format(B));this.root.appendChild(A)};mxXmlCanvas2D.prototype.setDashed=function(B){if(this.compressed){if(this.state.dashed==B){return}mxAbstractCanvas2D.prototype.setDashed.apply(this,arguments)}var A=this.createElement("dashed");A.setAttribute("dashed",(B)?"1":"0");this.root.appendChild(A)};mxXmlCanvas2D.prototype.setDashPattern=function(B){if(this.compressed){if(this.state.dashPattern==B){return}mxAbstractCanvas2D.prototype.setDashPattern.apply(this,arguments)}var A=this.createElement("dashpattern");A.setAttribute("pattern",B);this.root.appendChild(A)};mxXmlCanvas2D.prototype.setLineCap=function(B){if(this.compressed){if(this.state.lineCap==B){return}mxAbstractCanvas2D.prototype.setLineCap.apply(this,arguments)}var A=this.createElement("linecap");A.setAttribute("cap",B);this.root.appendChild(A)};mxXmlCanvas2D.prototype.setLineJoin=function(B){if(this.compressed){if(this.state.lineJoin==B){return}mxAbstractCanvas2D.prototype.setLineJoin.apply(this,arguments)}var A=this.createElement("linejoin");A.setAttribute("join",B);this.root.appendChild(A)};mxXmlCanvas2D.prototype.setMiterLimit=function(B){if(this.compressed){if(this.state.miterLimit==B){return}mxAbstractCanvas2D.prototype.setMiterLimit.apply(this,arguments)}var A=this.createElement("miterlimit");A.setAttribute("limit",B);this.root.appendChild(A)};mxXmlCanvas2D.prototype.setFontColor=function(B){if(this.textEnabled){if(B==mxConstants.NONE){B=null}if(this.compressed){if(this.state.fontColor==B){return}mxAbstractCanvas2D.prototype.setFontColor.apply(this,arguments)}var A=this.createElement("fontcolor");A.setAttribute("color",(B!=null)?B:mxConstants.NONE);this.root.appendChild(A)}};mxXmlCanvas2D.prototype.setFontBackgroundColor=function(B){if(this.textEnabled){if(B==mxConstants.NONE){B=null}if(this.compressed){if(this.state.fontBackgroundColor==B){return}mxAbstractCanvas2D.prototype.setFontBackgroundColor.apply(this,arguments)}var A=this.createElement("fontbackgroundcolor");A.setAttribute("color",(B!=null)?B:mxConstants.NONE);this.root.appendChild(A)}};mxXmlCanvas2D.prototype.setFontBorderColor=function(B){if(this.textEnabled){if(B==mxConstants.NONE){B=null}if(this.compressed){if(this.state.fontBorderColor==B){return}mxAbstractCanvas2D.prototype.setFontBorderColor.apply(this,arguments)}var A=this.createElement("fontbordercolor");A.setAttribute("color",(B!=null)?B:mxConstants.NONE);this.root.appendChild(A)}};mxXmlCanvas2D.prototype.setFontSize=function(B){if(this.textEnabled){if(this.compressed){if(this.state.fontSize==B){return}mxAbstractCanvas2D.prototype.setFontSize.apply(this,arguments)}var A=this.createElement("fontsize");A.setAttribute("size",B);this.root.appendChild(A)}};mxXmlCanvas2D.prototype.setFontFamily=function(B){if(this.textEnabled){if(this.compressed){if(this.state.fontFamily==B){return}mxAbstractCanvas2D.prototype.setFontFamily.apply(this,arguments)}var A=this.createElement("fontfamily");A.setAttribute("family",B);this.root.appendChild(A)}};mxXmlCanvas2D.prototype.setFontStyle=function(B){if(this.textEnabled){if(B==null){B=0}if(this.compressed){if(this.state.fontStyle==B){return}mxAbstractCanvas2D.prototype.setFontStyle.apply(this,arguments)}var A=this.createElement("fontstyle");A.setAttribute("style",B);this.root.appendChild(A)}};mxXmlCanvas2D.prototype.setShadow=function(B){if(this.compressed){if(this.state.shadow==B){return}mxAbstractCanvas2D.prototype.setShadow.apply(this,arguments)}var A=this.createElement("shadow");A.setAttribute("enabled",(B)?"1":"0");this.root.appendChild(A)};mxXmlCanvas2D.prototype.setShadowColor=function(B){if(this.compressed){if(B==mxConstants.NONE){B=null}if(this.state.shadowColor==B){return}mxAbstractCanvas2D.prototype.setShadowColor.apply(this,arguments)}var A=this.createElement("shadowcolor");A.setAttribute("color",(B!=null)?B:mxConstants.NONE);this.root.appendChild(A)};mxXmlCanvas2D.prototype.setShadowAlpha=function(B){if(this.compressed){if(this.state.shadowAlpha==B){return}mxAbstractCanvas2D.prototype.setShadowAlpha.apply(this,arguments)}var A=this.createElement("shadowalpha");A.setAttribute("alpha",B);this.root.appendChild(A)};mxXmlCanvas2D.prototype.setShadowOffset=function(A,C){if(this.compressed){if(this.state.shadowDx==A&&this.state.shadowDy==C){return}mxAbstractCanvas2D.prototype.setShadowOffset.apply(this,arguments)}var B=this.createElement("shadowoffset");B.setAttribute("dx",A);B.setAttribute("dy",C);this.root.appendChild(B)};mxXmlCanvas2D.prototype.rect=function(C,D,E,A){var B=this.createElement("rect");B.setAttribute("x",this.format(C));B.setAttribute("y",this.format(D));B.setAttribute("w",this.format(E));B.setAttribute("h",this.format(A));this.root.appendChild(B)};mxXmlCanvas2D.prototype.roundrect=function(E,F,G,A,C,B){var D=this.createElement("roundrect");D.setAttribute("x",this.format(E));D.setAttribute("y",this.format(F));D.setAttribute("w",this.format(G));D.setAttribute("h",this.format(A));D.setAttribute("dx",this.format(C));D.setAttribute("dy",this.format(B));this.root.appendChild(D)};mxXmlCanvas2D.prototype.ellipse=function(C,D,E,A){var B=this.createElement("ellipse");B.setAttribute("x",this.format(C));B.setAttribute("y",this.format(D));B.setAttribute("w",this.format(E));B.setAttribute("h",this.format(A));this.root.appendChild(B)};mxXmlCanvas2D.prototype.image=function(H,I,D,F,B,E,C,A){B=this.converter.convert(B);var G=this.createElement("image");G.setAttribute("x",this.format(H));G.setAttribute("y",this.format(I));G.setAttribute("w",this.format(D));G.setAttribute("h",this.format(F));G.setAttribute("src",B);G.setAttribute("aspect",(E)?"1":"0");G.setAttribute("flipH",(C)?"1":"0");G.setAttribute("flipV",(A)?"1":"0");this.root.appendChild(G)};mxXmlCanvas2D.prototype.begin=function(){this.root.appendChild(this.createElement("begin"));this.lastX=0;this.lastY=0};mxXmlCanvas2D.prototype.moveTo=function(B,C){var A=this.createElement("move");A.setAttribute("x",this.format(B));A.setAttribute("y",this.format(C));this.root.appendChild(A);this.lastX=B;this.lastY=C};mxXmlCanvas2D.prototype.lineTo=function(B,C){var A=this.createElement("line");A.setAttribute("x",this.format(B));A.setAttribute("y",this.format(C));this.root.appendChild(A);this.lastX=B;this.lastY=C};mxXmlCanvas2D.prototype.quadTo=function(D,E,A,B){var C=this.createElement("quad");C.setAttribute("x1",this.format(D));C.setAttribute("y1",this.format(E));C.setAttribute("x2",this.format(A));C.setAttribute("y2",this.format(B));this.root.appendChild(C);this.lastX=A;this.lastY=B};mxXmlCanvas2D.prototype.curveTo=function(F,G,A,B,C,D){var E=this.createElement("curve");E.setAttribute("x1",this.format(F));E.setAttribute("y1",this.format(G));E.setAttribute("x2",this.format(A));E.setAttribute("y2",this.format(B));E.setAttribute("x3",this.format(C));E.setAttribute("y3",this.format(D));this.root.appendChild(E);this.lastX=C;this.lastY=D};mxXmlCanvas2D.prototype.close=function(){this.root.appendChild(this.createElement("close"))};mxXmlCanvas2D.prototype.text=function(J,K,C,G,E,F,A,H,L,D,N,M,B){if(this.textEnabled&&E!=null){if(mxUtils.isNode(E)){E=mxUtils.getOuterHtml(E)}var I=this.createElement("text");I.setAttribute("x",this.format(J));I.setAttribute("y",this.format(K));I.setAttribute("w",this.format(C));I.setAttribute("h",this.format(G));I.setAttribute("str",E);if(F!=null){I.setAttribute("align",F)}if(A!=null){I.setAttribute("valign",A)}I.setAttribute("wrap",(H)?"1":"0");if(L==null){L=""}I.setAttribute("format",L);if(D!=null){I.setAttribute("overflow",D)}if(N!=null){I.setAttribute("clip",(N)?"1":"0")}if(M!=null){I.setAttribute("rotation",M)}if(B!=null){I.setAttribute("dir",B)}this.root.appendChild(I)}};mxXmlCanvas2D.prototype.stroke=function(){this.root.appendChild(this.createElement("stroke"))};mxXmlCanvas2D.prototype.fill=function(){this.root.appendChild(this.createElement("fill"))};mxXmlCanvas2D.prototype.fillAndStroke=function(){this.root.appendChild(this.createElement("fillstroke"))};function mxXmlRequest(C,F,D,E,B,A){this.url=C;this.params=F;this.method=D||"POST";this.async=(E!=null)?E:true;this.username=B;this.password=A}mxXmlRequest.prototype.url=null;mxXmlRequest.prototype.params=null;mxXmlRequest.prototype.method=null;mxXmlRequest.prototype.async=null;mxXmlRequest.prototype.binary=false;mxXmlRequest.prototype.withCredentials=false;mxXmlRequest.prototype.username=null;mxXmlRequest.prototype.password=null;mxXmlRequest.prototype.request=null;mxXmlRequest.prototype.decodeSimulateValues=false;mxXmlRequest.prototype.isBinary=function(){return this.binary};mxXmlRequest.prototype.setBinary=function(A){this.binary=A};mxXmlRequest.prototype.getText=function(){return this.request.responseText};mxXmlRequest.prototype.isReady=function(){return this.request.readyState==4};mxXmlRequest.prototype.getDocumentElement=function(){var A=this.getXml();if(A!=null){return A.documentElement}return null};mxXmlRequest.prototype.getXml=function(){var A=this.request.responseXML;if(document.documentMode>=9||A==null||A.documentElement==null){A=mxUtils.parseXml(this.request.responseText)}return A};mxXmlRequest.prototype.getText=function(){return this.request.responseText};mxXmlRequest.prototype.getStatus=function(){return this.request.status};mxXmlRequest.prototype.create=function(){if(window.XMLHttpRequest){return function(){var A=new XMLHttpRequest();if(this.isBinary()&&A.overrideMimeType){A.overrideMimeType("text/plain; charset=x-user-defined")}return A}}else{if(typeof(ActiveXObject)!="undefined"){return function(){return new ActiveXObject("Microsoft.XMLHTTP")}}}}();mxXmlRequest.prototype.send=function(D,A,C,B){this.request=this.create();if(this.request!=null){if(D!=null){this.request.onreadystatechange=mxUtils.bind(this,function(){if(this.isReady()){D(this);this.onreadystatechaange=null}})}this.request.open(this.method,this.url,this.async,this.username,this.password);this.setRequestHeaders(this.request,this.params);if(window.XMLHttpRequest&&this.withCredentials){this.request.withCredentials="true"}if(!mxClient.IS_QUIRKS&&(document.documentMode==null||document.documentMode>9)&&window.XMLHttpRequest&&C!=null&&B!=null){this.request.timeout=C;this.request.ontimeout=B}this.request.send(this.params)}};mxXmlRequest.prototype.setRequestHeaders=function(A,B){if(B!=null){A.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}};mxXmlRequest.prototype.simulate=function(H,J){H=H||document;var B=null;if(H==document){B=window.onbeforeunload;window.onbeforeunload=null}var F=H.createElement("form");F.setAttribute("method",this.method);F.setAttribute("action",this.url);if(J!=null){F.setAttribute("target",J)}F.style.display="none";F.style.visibility="hidden";var A=(this.params.indexOf("&")>0)?this.params.split("&"):this.params.split();for(var G=0;G<A.length;G++){var D=A[G].indexOf("=");if(D>0){var C=A[G].substring(0,D);var E=A[G].substring(D+1);if(this.decodeSimulateValues){E=decodeURIComponent(E)}var I=H.createElement("textarea");I.setAttribute("wrap","off");I.setAttribute("name",C);mxUtils.write(I,E);F.appendChild(I)}}H.body.appendChild(F);F.submit();if(F.parentNode!=null){F.parentNode.removeChild(F)}if(B!=null){window.onbeforeunload=B}};function mxXmlCanvas2D(A){mxAbstractCanvas2D.call(this);this.root=A;this.writeDefaults()}mxUtils.extend(mxXmlCanvas2D,mxAbstractCanvas2D);mxXmlCanvas2D.prototype.textEnabled=true;mxXmlCanvas2D.prototype.compressed=true;mxXmlCanvas2D.prototype.writeDefaults=function(){var A;A=this.createElement("fontfamily");A.setAttribute("family",mxConstants.DEFAULT_FONTFAMILY);this.root.appendChild(A);A=this.createElement("fontsize");A.setAttribute("size",mxConstants.DEFAULT_FONTSIZE);this.root.appendChild(A);A=this.createElement("shadowcolor");A.setAttribute("color",mxConstants.SHADOWCOLOR);this.root.appendChild(A);A=this.createElement("shadowalpha");A.setAttribute("alpha",mxConstants.SHADOW_OPACITY);this.root.appendChild(A);A=this.createElement("shadowoffset");A.setAttribute("dx",mxConstants.SHADOW_OFFSET_X);A.setAttribute("dy",mxConstants.SHADOW_OFFSET_Y);this.root.appendChild(A)};mxXmlCanvas2D.prototype.format=function(A){return parseFloat(parseFloat(A).toFixed(2))};mxXmlCanvas2D.prototype.createElement=function(A){return this.root.ownerDocument.createElement(A)};mxXmlCanvas2D.prototype.save=function(){if(this.compressed){mxAbstractCanvas2D.prototype.save.apply(this,arguments)}this.root.appendChild(this.createElement("save"))};mxXmlCanvas2D.prototype.restore=function(){if(this.compressed){mxAbstractCanvas2D.prototype.restore.apply(this,arguments)}this.root.appendChild(this.createElement("restore"))};mxXmlCanvas2D.prototype.scale=function(B){var A=this.createElement("scale");A.setAttribute("scale",B);this.root.appendChild(A)};mxXmlCanvas2D.prototype.translate=function(A,C){var B=this.createElement("translate");B.setAttribute("dx",this.format(A));B.setAttribute("dy",this.format(C));this.root.appendChild(B)};mxXmlCanvas2D.prototype.rotate=function(E,A,D,F,B){var C=this.createElement("rotate");if(E!=0||A||D){C.setAttribute("theta",this.format(E));C.setAttribute("flipH",(A)?"1":"0");C.setAttribute("flipV",(D)?"1":"0");C.setAttribute("cx",this.format(F));C.setAttribute("cy",this.format(B));this.root.appendChild(C)}};mxXmlCanvas2D.prototype.setAlpha=function(B){if(this.compressed){if(this.state.alpha==B){return}mxAbstractCanvas2D.prototype.setAlpha.apply(this,arguments)}var A=this.createElement("alpha");A.setAttribute("alpha",this.format(B));this.root.appendChild(A)};mxXmlCanvas2D.prototype.setFillAlpha=function(B){if(this.compressed){if(this.state.fillAlpha==B){return}mxAbstractCanvas2D.prototype.setFillAlpha.apply(this,arguments)}var A=this.createElement("fillalpha");A.setAttribute("alpha",this.format(B));this.root.appendChild(A)};mxXmlCanvas2D.prototype.setStrokeAlpha=function(B){if(this.compressed){if(this.state.strokeAlpha==B){return}mxAbstractCanvas2D.prototype.setStrokeAlpha.apply(this,arguments)}var A=this.createElement("strokealpha");A.setAttribute("alpha",this.format(B));this.root.appendChild(A)};mxXmlCanvas2D.prototype.setFillColor=function(B){if(B==mxConstants.NONE){B=null}if(this.compressed){if(this.state.fillColor==B){return}mxAbstractCanvas2D.prototype.setFillColor.apply(this,arguments)}var A=this.createElement("fillcolor");A.setAttribute("color",(B!=null)?B:mxConstants.NONE);this.root.appendChild(A)};mxXmlCanvas2D.prototype.setGradient=function(H,F,I,J,C,E,A,D,G){if(H!=null&&F!=null){mxAbstractCanvas2D.prototype.setGradient.apply(this,arguments);var B=this.createElement("gradient");B.setAttribute("c1",H);B.setAttribute("c2",F);B.setAttribute("x",this.format(I));B.setAttribute("y",this.format(J));B.setAttribute("w",this.format(C));B.setAttribute("h",this.format(E));if(A!=null){B.setAttribute("direction",A)}if(D!=null){B.setAttribute("alpha1",D)}if(G!=null){B.setAttribute("alpha2",G)}this.root.appendChild(B)}};mxXmlCanvas2D.prototype.setStrokeColor=function(B){if(B==mxConstants.NONE){B=null}if(this.compressed){if(this.state.strokeColor==B){return}mxAbstractCanvas2D.prototype.setStrokeColor.apply(this,arguments)}var A=this.createElement("strokecolor");A.setAttribute("color",(B!=null)?B:mxConstants.NONE);this.root.appendChild(A)};mxXmlCanvas2D.prototype.setStrokeWidth=function(B){if(this.compressed){if(this.state.strokeWidth==B){return}mxAbstractCanvas2D.prototype.setStrokeWidth.apply(this,arguments)}var A=this.createElement("strokewidth");A.setAttribute("width",this.format(B));this.root.appendChild(A)};mxXmlCanvas2D.prototype.setDashed=function(B){if(this.compressed){if(this.state.dashed==B){return}mxAbstractCanvas2D.prototype.setDashed.apply(this,arguments)}var A=this.createElement("dashed");A.setAttribute("dashed",(B)?"1":"0");this.root.appendChild(A)};mxXmlCanvas2D.prototype.setDashPattern=function(B){if(this.compressed){if(this.state.dashPattern==B){return}mxAbstractCanvas2D.prototype.setDashPattern.apply(this,arguments)}var A=this.createElement("dashpattern");A.setAttribute("pattern",B);this.root.appendChild(A)};mxXmlCanvas2D.prototype.setLineCap=function(B){if(this.compressed){if(this.state.lineCap==B){return}mxAbstractCanvas2D.prototype.setLineCap.apply(this,arguments)}var A=this.createElement("linecap");A.setAttribute("cap",B);this.root.appendChild(A)};mxXmlCanvas2D.prototype.setLineJoin=function(B){if(this.compressed){if(this.state.lineJoin==B){return}mxAbstractCanvas2D.prototype.setLineJoin.apply(this,arguments)}var A=this.createElement("linejoin");A.setAttribute("join",B);this.root.appendChild(A)};mxXmlCanvas2D.prototype.setMiterLimit=function(B){if(this.compressed){if(this.state.miterLimit==B){return}mxAbstractCanvas2D.prototype.setMiterLimit.apply(this,arguments)}var A=this.createElement("miterlimit");A.setAttribute("limit",B);this.root.appendChild(A)};mxXmlCanvas2D.prototype.setFontColor=function(B){if(this.textEnabled){if(B==mxConstants.NONE){B=null}if(this.compressed){if(this.state.fontColor==B){return}mxAbstractCanvas2D.prototype.setFontColor.apply(this,arguments)}var A=this.createElement("fontcolor");A.setAttribute("color",(B!=null)?B:mxConstants.NONE);this.root.appendChild(A)}};mxXmlCanvas2D.prototype.setFontBackgroundColor=function(B){if(this.textEnabled){if(B==mxConstants.NONE){B=null}if(this.compressed){if(this.state.fontBackgroundColor==B){return}mxAbstractCanvas2D.prototype.setFontBackgroundColor.apply(this,arguments)}var A=this.createElement("fontbackgroundcolor");A.setAttribute("color",(B!=null)?B:mxConstants.NONE);this.root.appendChild(A)}};mxXmlCanvas2D.prototype.setFontBorderColor=function(B){if(this.textEnabled){if(B==mxConstants.NONE){B=null}if(this.compressed){if(this.state.fontBorderColor==B){return}mxAbstractCanvas2D.prototype.setFontBorderColor.apply(this,arguments)}var A=this.createElement("fontbordercolor");A.setAttribute("color",(B!=null)?B:mxConstants.NONE);this.root.appendChild(A)}};mxXmlCanvas2D.prototype.setFontSize=function(B){if(this.textEnabled){if(this.compressed){if(this.state.fontSize==B){return}mxAbstractCanvas2D.prototype.setFontSize.apply(this,arguments)}var A=this.createElement("fontsize");A.setAttribute("size",B);this.root.appendChild(A)}};mxXmlCanvas2D.prototype.setFontFamily=function(B){if(this.textEnabled){if(this.compressed){if(this.state.fontFamily==B){return}mxAbstractCanvas2D.prototype.setFontFamily.apply(this,arguments)}var A=this.createElement("fontfamily");A.setAttribute("family",B);this.root.appendChild(A)}};mxXmlCanvas2D.prototype.setFontStyle=function(B){if(this.textEnabled){if(B==null){B=0}if(this.compressed){if(this.state.fontStyle==B){return}mxAbstractCanvas2D.prototype.setFontStyle.apply(this,arguments)}var A=this.createElement("fontstyle");A.setAttribute("style",B);this.root.appendChild(A)}};mxXmlCanvas2D.prototype.setShadow=function(B){if(this.compressed){if(this.state.shadow==B){return}mxAbstractCanvas2D.prototype.setShadow.apply(this,arguments)}var A=this.createElement("shadow");A.setAttribute("enabled",(B)?"1":"0");this.root.appendChild(A)};mxXmlCanvas2D.prototype.setShadowColor=function(B){if(this.compressed){if(B==mxConstants.NONE){B=null}if(this.state.shadowColor==B){return}mxAbstractCanvas2D.prototype.setShadowColor.apply(this,arguments)}var A=this.createElement("shadowcolor");A.setAttribute("color",(B!=null)?B:mxConstants.NONE);this.root.appendChild(A)};mxXmlCanvas2D.prototype.setShadowAlpha=function(B){if(this.compressed){if(this.state.shadowAlpha==B){return}mxAbstractCanvas2D.prototype.setShadowAlpha.apply(this,arguments)}var A=this.createElement("shadowalpha");A.setAttribute("alpha",B);this.root.appendChild(A)};mxXmlCanvas2D.prototype.setShadowOffset=function(A,C){if(this.compressed){if(this.state.shadowDx==A&&this.state.shadowDy==C){return}mxAbstractCanvas2D.prototype.setShadowOffset.apply(this,arguments)}var B=this.createElement("shadowoffset");B.setAttribute("dx",A);B.setAttribute("dy",C);this.root.appendChild(B)};mxXmlCanvas2D.prototype.rect=function(C,D,E,A){var B=this.createElement("rect");B.setAttribute("x",this.format(C));B.setAttribute("y",this.format(D));B.setAttribute("w",this.format(E));B.setAttribute("h",this.format(A));this.root.appendChild(B)};mxXmlCanvas2D.prototype.roundrect=function(E,F,G,A,C,B){var D=this.createElement("roundrect");D.setAttribute("x",this.format(E));D.setAttribute("y",this.format(F));D.setAttribute("w",this.format(G));D.setAttribute("h",this.format(A));D.setAttribute("dx",this.format(C));D.setAttribute("dy",this.format(B));this.root.appendChild(D)};mxXmlCanvas2D.prototype.ellipse=function(C,D,E,A){var B=this.createElement("ellipse");B.setAttribute("x",this.format(C));B.setAttribute("y",this.format(D));B.setAttribute("w",this.format(E));B.setAttribute("h",this.format(A));this.root.appendChild(B)};mxXmlCanvas2D.prototype.image=function(H,I,D,F,B,E,C,A){B=this.converter.convert(B);var G=this.createElement("image");G.setAttribute("x",this.format(H));G.setAttribute("y",this.format(I));G.setAttribute("w",this.format(D));G.setAttribute("h",this.format(F));G.setAttribute("src",B);G.setAttribute("aspect",(E)?"1":"0");G.setAttribute("flipH",(C)?"1":"0");G.setAttribute("flipV",(A)?"1":"0");this.root.appendChild(G)};mxXmlCanvas2D.prototype.begin=function(){this.root.appendChild(this.createElement("begin"));this.lastX=0;this.lastY=0};mxXmlCanvas2D.prototype.moveTo=function(B,C){var A=this.createElement("move");A.setAttribute("x",this.format(B));A.setAttribute("y",this.format(C));this.root.appendChild(A);this.lastX=B;this.lastY=C};mxXmlCanvas2D.prototype.lineTo=function(B,C){var A=this.createElement("line");A.setAttribute("x",this.format(B));A.setAttribute("y",this.format(C));this.root.appendChild(A);this.lastX=B;this.lastY=C};mxXmlCanvas2D.prototype.quadTo=function(D,E,A,B){var C=this.createElement("quad");C.setAttribute("x1",this.format(D));C.setAttribute("y1",this.format(E));C.setAttribute("x2",this.format(A));C.setAttribute("y2",this.format(B));this.root.appendChild(C);this.lastX=A;this.lastY=B};mxXmlCanvas2D.prototype.curveTo=function(F,G,A,B,C,D){var E=this.createElement("curve");E.setAttribute("x1",this.format(F));E.setAttribute("y1",this.format(G));E.setAttribute("x2",this.format(A));E.setAttribute("y2",this.format(B));E.setAttribute("x3",this.format(C));E.setAttribute("y3",this.format(D));this.root.appendChild(E);this.lastX=C;this.lastY=D};mxXmlCanvas2D.prototype.close=function(){this.root.appendChild(this.createElement("close"))};mxXmlCanvas2D.prototype.text=function(J,K,C,G,E,F,A,H,L,D,N,M,B){if(this.textEnabled&&E!=null){if(mxUtils.isNode(E)){E=mxUtils.getOuterHtml(E)}var I=this.createElement("text");I.setAttribute("x",this.format(J));I.setAttribute("y",this.format(K));I.setAttribute("w",this.format(C));I.setAttribute("h",this.format(G));I.setAttribute("str",E);if(F!=null){I.setAttribute("align",F)}if(A!=null){I.setAttribute("valign",A)}I.setAttribute("wrap",(H)?"1":"0");if(L==null){L=""}I.setAttribute("format",L);if(D!=null){I.setAttribute("overflow",D)}if(N!=null){I.setAttribute("clip",(N)?"1":"0")}if(M!=null){I.setAttribute("rotation",M)}if(B!=null){I.setAttribute("dir",B)}this.root.appendChild(I)}};mxXmlCanvas2D.prototype.stroke=function(){this.root.appendChild(this.createElement("stroke"))};mxXmlCanvas2D.prototype.fill=function(){this.root.appendChild(this.createElement("fill"))};mxXmlCanvas2D.prototype.fillAndStroke=function(){this.root.appendChild(this.createElement("fillstroke"))};function mxSvgCanvas2D(B,C){mxAbstractCanvas2D.call(this);this.root=B;this.gradients=[];this.defs=null;this.styleEnabled=(C!=null)?C:false;var A=null;if(B.ownerDocument!=document){var E=B;while(E!=null&&E.nodeName!="svg"){E=E.parentNode}A=E}if(A!=null){var D=A.getElementsByTagName("defs");if(D.length>0){this.defs=A.getElementsByTagName("defs")[0]}if(this.defs==null){this.defs=this.createElement("defs");if(A.firstChild!=null){A.insertBefore(this.defs,A.firstChild)}else{A.appendChild(this.defs)}}if(this.styleEnabled){this.defs.appendChild(this.createStyle())}}}mxUtils.extend(mxSvgCanvas2D,mxAbstractCanvas2D);(function(){mxSvgCanvas2D.prototype.useDomParser=!mxClient.IS_IE&&typeof DOMParser==="function"&&typeof XMLSerializer==="function";if(mxSvgCanvas2D.prototype.useDomParser){try{var B=new DOMParser().parseFromString("test text","text/html");mxSvgCanvas2D.prototype.useDomParser=B!=null}catch(A){mxSvgCanvas2D.prototype.useDomParser=false}}})();mxSvgCanvas2D.prototype.node=null;mxSvgCanvas2D.prototype.matchHtmlAlignment=true;mxSvgCanvas2D.prototype.textEnabled=true;mxSvgCanvas2D.prototype.foEnabled=true;mxSvgCanvas2D.prototype.foAltText="[Object]";mxSvgCanvas2D.prototype.foOffset=0;mxSvgCanvas2D.prototype.textOffset=0;mxSvgCanvas2D.prototype.strokeTolerance=0;mxSvgCanvas2D.prototype.refCount=0;mxSvgCanvas2D.prototype.blockImagePointerEvents=false;mxSvgCanvas2D.prototype.lineHeightCorrection=1;mxSvgCanvas2D.prototype.pointerEventsValue="all";mxSvgCanvas2D.prototype.fontMetricsPadding=10;mxSvgCanvas2D.prototype.cacheOffsetSize=true;mxSvgCanvas2D.prototype.format=function(A){return parseFloat(parseFloat(A).toFixed(2))};mxSvgCanvas2D.prototype.getBaseUrl=function(){var A=window.location.href;var B=A.lastIndexOf("#");if(B>0){A=A.substring(0,B)}return A};mxSvgCanvas2D.prototype.reset=function(){mxAbstractCanvas2D.prototype.reset.apply(this,arguments);this.gradients=[]};mxSvgCanvas2D.prototype.createStyle=function(B){var A=this.createElement("style");A.setAttribute("type","text/css");mxUtils.write(A,"svg{font-family:"+mxConstants.DEFAULT_FONTFAMILY+";font-size:"+mxConstants.DEFAULT_FONTSIZE+";fill:none;stroke-miterlimit:10}");return A};mxSvgCanvas2D.prototype.createElement=function(A,B){if(this.root.ownerDocument.createElementNS!=null){return this.root.ownerDocument.createElementNS(B||mxConstants.NS_SVG,A)}else{var C=this.root.ownerDocument.createElement(A);if(B!=null){C.setAttribute("xmlns",B)}return C}};mxSvgCanvas2D.prototype.createAlternateContent=function(G,J,K,C,I,E,F,B,H,L,D,O,M){if(this.foAltText!=null){var A=this.state;var N=this.createElement("text");N.setAttribute("x",Math.round(C/2));N.setAttribute("y",Math.round((I+A.fontSize)/2));N.setAttribute("fill",A.fontColor||"black");N.setAttribute("text-anchor","middle");N.setAttribute("font-size",A.fontSize+"px");N.setAttribute("font-family",A.fontFamily);if((A.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD){N.setAttribute("font-weight","bold")}if((A.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC){N.setAttribute("font-style","italic")}if((A.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE){N.setAttribute("text-decoration","underline")}mxUtils.write(N,this.foAltText);return N}else{return null}};mxSvgCanvas2D.prototype.createGradientId=function(G,F,C,E,B){if(G.charAt(0)=="#"){G=G.substring(1)}if(F.charAt(0)=="#"){F=F.substring(1)}G=G.toLowerCase()+"-"+C;F=F.toLowerCase()+"-"+E;var A=null;if(B==null||B==mxConstants.DIRECTION_SOUTH){A="s"}else{if(B==mxConstants.DIRECTION_EAST){A="e"}else{var D=G;G=F;F=D;if(B==mxConstants.DIRECTION_NORTH){A="s"}else{if(B==mxConstants.DIRECTION_WEST){A="e"}}}}return"mx-gradient-"+G+"-"+F+"-"+A};mxSvgCanvas2D.prototype.getSvgGradient=function(B,D,E,G,A){var I=this.createGradientId(B,D,E,G,A);var H=this.gradients[I];if(H==null){var C=this.root.ownerSVGElement;var F=0;var J=I+"-"+F;if(C!=null){H=C.ownerDocument.getElementById(J);while(H!=null&&H.ownerSVGElement!=C){J=I+"-"+F++;H=C.ownerDocument.getElementById(J)}}else{J="id"+(++this.refCount)}if(H==null){H=this.createSvgGradient(B,D,E,G,A);H.setAttribute("id",J);if(this.defs!=null){this.defs.appendChild(H)}else{C.appendChild(H)}}this.gradients[I]=H}return H.getAttribute("id")};mxSvgCanvas2D.prototype.createSvgGradient=function(C,D,E,F,A){var G=this.createElement("linearGradient");G.setAttribute("x1","0%");G.setAttribute("y1","0%");G.setAttribute("x2","0%");G.setAttribute("y2","0%");if(A==null||A==mxConstants.DIRECTION_SOUTH){G.setAttribute("y2","100%")}else{if(A==mxConstants.DIRECTION_EAST){G.setAttribute("x2","100%")}else{if(A==mxConstants.DIRECTION_NORTH){G.setAttribute("y1","100%")}else{if(A==mxConstants.DIRECTION_WEST){G.setAttribute("x1","100%")}}}}var H=(E<1)?";stop-opacity:"+E:"";var B=this.createElement("stop");B.setAttribute("offset","0%");B.setAttribute("style","stop-color:"+C+H);G.appendChild(B);H=(F<1)?";stop-opacity:"+F:"";B=this.createElement("stop");B.setAttribute("offset","100%");B.setAttribute("style","stop-color:"+D+H);G.appendChild(B);return G};mxSvgCanvas2D.prototype.addNode=function(B,A){var C=this.node;var D=this.state;if(C!=null){if(C.nodeName=="path"){if(this.path!=null&&this.path.length>0){C.setAttribute("d",this.path.join(" "))}else{return}}if(B&&D.fillColor!=null){this.updateFill()}else{if(!this.styleEnabled){if(C.nodeName=="ellipse"&&mxClient.IS_FF){C.setAttribute("fill","transparent")}else{C.setAttribute("fill","none")}B=false}}if(A&&D.strokeColor!=null){this.updateStroke()}else{if(!this.styleEnabled){C.setAttribute("stroke","none")}}if(D.transform!=null&&D.transform.length>0){C.setAttribute("transform",D.transform)}if(D.shadow){this.root.appendChild(this.createShadow(C))}if(this.strokeTolerance>0&&!B){this.root.appendChild(this.createTolerance(C))}if(this.pointerEvents&&(C.nodeName!="path"||this.path[this.path.length-1]==this.closeOp)){C.setAttribute("pointer-events",this.pointerEventsValue)}else{if(!this.pointerEvents&&this.originalRoot==null){C.setAttribute("pointer-events","none")}}if((C.nodeName!="rect"&&C.nodeName!="path"&&C.nodeName!="ellipse")||(C.getAttribute("fill")!="none"&&C.getAttribute("fill")!="transparent")||C.getAttribute("stroke")!="none"||C.getAttribute("pointer-events")!="none"){this.root.appendChild(C)}this.node=null}};mxSvgCanvas2D.prototype.updateFill=function(){var A=this.state;if(A.alpha<1||A.fillAlpha<1){this.node.setAttribute("fill-opacity",A.alpha*A.fillAlpha)}if(A.fillColor!=null){if(A.gradientColor!=null){var C=this.getSvgGradient(A.fillColor,A.gradientColor,A.gradientFillAlpha,A.gradientAlpha,A.gradientDirection);if(!mxClient.IS_CHROME_APP&&!mxClient.IS_IE&&!mxClient.IS_IE11&&!mxClient.IS_EDGE&&this.root.ownerDocument==document){var B=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");this.node.setAttribute("fill","url("+B+"#"+C+")")}else{this.node.setAttribute("fill","url(#"+C+")")}}else{this.node.setAttribute("fill",A.fillColor.toLowerCase())}}};mxSvgCanvas2D.prototype.getCurrentStrokeWidth=function(){return Math.max(1,this.format(this.state.strokeWidth*this.state.scale))};mxSvgCanvas2D.prototype.updateStroke=function(){var B=this.state;this.node.setAttribute("stroke",B.strokeColor.toLowerCase());if(B.alpha<1||B.strokeAlpha<1){this.node.setAttribute("stroke-opacity",B.alpha*B.strokeAlpha)}var A=this.getCurrentStrokeWidth();if(A!=1){this.node.setAttribute("stroke-width",A)}if(this.node.nodeName=="path"){this.updateStrokeAttributes()}if(B.dashed){this.node.setAttribute("stroke-dasharray",this.createDashPattern(B.strokeWidth*B.scale))}};mxSvgCanvas2D.prototype.updateStrokeAttributes=function(){var A=this.state;if(A.lineJoin!=null&&A.lineJoin!="miter"){this.node.setAttribute("stroke-linejoin",A.lineJoin)}if(A.lineCap!=null){var B=A.lineCap;if(B=="flat"){B="butt"}if(B!="butt"){this.node.setAttribute("stroke-linecap",B)}}if(A.miterLimit!=null&&(!this.styleEnabled||A.miterLimit!=10)){this.node.setAttribute("stroke-miterlimit",A.miterLimit)}};mxSvgCanvas2D.prototype.createDashPattern=function(D){var B=[];if(typeof(this.state.dashPattern)==="string"){var C=this.state.dashPattern.split(" ");if(C.length>0){for(var A=0;A<C.length;A++){B[A]=Number(C[A])*D}}}return B.join(" ")};mxSvgCanvas2D.prototype.createTolerance=function(B){var C=B.cloneNode(true);var A=parseFloat(C.getAttribute("stroke-width")||1)+this.strokeTolerance;C.setAttribute("pointer-events","stroke");C.setAttribute("visibility","hidden");C.removeAttribute("stroke-dasharray");C.setAttribute("stroke-width",A);C.setAttribute("fill","none");C.setAttribute("stroke",(mxClient.IS_OT)?"none":"white");return C};mxSvgCanvas2D.prototype.createShadow=function(C){var A=C.cloneNode(true);var B=this.state;if(A.getAttribute("fill")!="none"&&(!mxClient.IS_FF||A.getAttribute("fill")!="transparent")){A.setAttribute("fill",B.shadowColor)}if(A.getAttribute("stroke")!="none"){A.setAttribute("stroke",B.shadowColor)}A.setAttribute("transform","translate("+this.format(B.shadowDx*B.scale)+","+this.format(B.shadowDy*B.scale)+")"+(B.transform||""));A.setAttribute("opacity",B.shadowAlpha);return A};mxSvgCanvas2D.prototype.setLink=function(A){if(A==null){this.root=this.originalRoot}else{this.originalRoot=this.root;var B=this.createElement("a");if(B.setAttributeNS==null||(this.root.ownerDocument!=document&&document.documentMode==null)){B.setAttribute("xlink:href",A)}else{B.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",A)}this.root.appendChild(B);this.root=B}};mxSvgCanvas2D.prototype.rotate=function(H,G,B,E,D){if(H!=0||G||B){var C=this.state;E+=C.dx;D+=C.dy;E*=C.scale;D*=C.scale;C.transform=C.transform||"";if(G&&B){H+=180}else{if(G!=B){var A=(G)?E:0;var I=(G)?-1:1;var J=(B)?D:0;var F=(B)?-1:1;C.transform+="translate("+this.format(A)+","+this.format(J)+")scale("+this.format(I)+","+this.format(F)+")translate("+this.format(-A)+","+this.format(-J)+")"}}if(G?!B:B){H*=-1}if(H!=0){C.transform+="rotate("+this.format(H)+","+this.format(E)+","+this.format(D)+")"}C.rotation=C.rotation+H;C.rotationCx=E;C.rotationCy=D}};mxSvgCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments);this.node=this.createElement("path")};mxSvgCanvas2D.prototype.rect=function(D,E,F,A){var B=this.state;var C=this.createElement("rect");C.setAttribute("x",this.format((D+B.dx)*B.scale));C.setAttribute("y",this.format((E+B.dy)*B.scale));C.setAttribute("width",this.format(F*B.scale));C.setAttribute("height",this.format(A*B.scale));this.node=C};mxSvgCanvas2D.prototype.roundrect=function(D,E,F,A,C,B){this.rect(D,E,F,A);if(C>0){this.node.setAttribute("rx",this.format(C*this.state.scale))}if(B>0){this.node.setAttribute("ry",this.format(B*this.state.scale))}};mxSvgCanvas2D.prototype.ellipse=function(D,E,F,A){var B=this.state;var C=this.createElement("ellipse");C.setAttribute("cx",Math.round((D+F/2+B.dx)*B.scale));C.setAttribute("cy",Math.round((E+A/2+B.dy)*B.scale));C.setAttribute("rx",F/2*B.scale);C.setAttribute("ry",A/2*B.scale);this.node=C};mxSvgCanvas2D.prototype.image=function(M,N,D,H,B,G,C,A){B=this.converter.convert(B);G=(G!=null)?G:true;C=(C!=null)?C:false;A=(A!=null)?A:false;var F=this.state;M+=F.dx;N+=F.dy;var I=this.createElement("image");I.setAttribute("x",this.format(M*F.scale));I.setAttribute("y",this.format(N*F.scale));I.setAttribute("width",this.format(D*F.scale));I.setAttribute("height",this.format(H*F.scale));if(I.setAttributeNS==null){I.setAttribute("xlink:href",B)}else{I.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",B)}if(!G){I.setAttribute("preserveAspectRatio","none")}if(F.alpha<1||F.fillAlpha<1){I.setAttribute("opacity",F.alpha*F.fillAlpha)}var E=this.state.transform||"";if(C||A){var J=1;var K=1;var L=0;var O=0;if(C){J=-1;L=-D-2*M}if(A){K=-1;O=-H-2*N}E+="scale("+J+","+K+")translate("+(L*F.scale)+","+(O*F.scale)+")"}if(E.length>0){I.setAttribute("transform",E)}if(!this.pointerEvents){I.setAttribute("pointer-events","none")}this.root.appendChild(I);if(this.blockImagePointerEvents){I.setAttribute("style","pointer-events:none");I=this.createElement("rect");I.setAttribute("visibility","hidden");I.setAttribute("pointer-events","fill");I.setAttribute("x",this.format(M*F.scale));I.setAttribute("y",this.format(N*F.scale));I.setAttribute("width",this.format(D*F.scale));I.setAttribute("height",this.format(H*F.scale));this.root.appendChild(I)}};mxSvgCanvas2D.prototype.convertHtml=function(C){if(this.useDomParser){var E=new DOMParser().parseFromString(C,"text/html");if(E!=null){C=new XMLSerializer().serializeToString(E.body);if(C.substring(0,5)=="<body"){C=C.substring(C.indexOf(">",5)+1)}if(C.substring(C.length-7,C.length)=="</body>"){C=C.substring(0,C.length-7)}}}else{if(document.implementation!=null&&document.implementation.createDocument!=null){var A=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null);var B=A.createElement("body");A.documentElement.appendChild(B);var H=document.createElement("div");H.innerHTML=C;var F=H.firstChild;while(F!=null){var G=F.nextSibling;B.appendChild(A.adoptNode(F));F=G}return B.innerHTML}else{var D=document.createElement("textarea");D.innerHTML=C.replace(/&amp;/g,"&amp;amp;").replace(/&#60;/g,"&amp;lt;").replace(/&#62;/g,"&amp;gt;").replace(/&lt;/g,"&amp;lt;").replace(/&gt;/g,"&amp;gt;").replace(/</g,"&lt;").replace(/>/g,"&gt;");C=D.value.replace(/&/g,"&amp;").replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;").replace(/&amp;amp;/g,"&amp;").replace(/<br>/g,"<br />").replace(/<hr>/g,"<hr />").replace(/(<img[^>]+)>/gm,"$1 />")}}return C};mxSvgCanvas2D.prototype.createDiv=function(E,F,B,H,C){var A=this.state;var D=(mxConstants.ABSOLUTE_LINE_HEIGHT)?(A.fontSize*mxConstants.LINE_HEIGHT)+"px":(mxConstants.LINE_HEIGHT*this.lineHeightCorrection);H="display:inline-block;font-size:"+A.fontSize+"px;font-family:"+A.fontFamily+";color:"+A.fontColor+";line-height:"+D+";"+H;if((A.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD){H+="font-weight:bold;"}if((A.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC){H+="font-style:italic;"}if((A.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE){H+="text-decoration:underline;"}if(F==mxConstants.ALIGN_CENTER){H+="text-align:center;"}else{if(F==mxConstants.ALIGN_RIGHT){H+="text-align:right;"}}var I="";if(A.fontBackgroundColor!=null){I+="background-color:"+A.fontBackgroundColor+";"}if(A.fontBorderColor!=null){I+="border:1px solid "+A.fontBorderColor+";"}var G=E;if(!mxUtils.isNode(G)){G=this.convertHtml(G);if(C!="fill"&&C!="width"){G='<div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;'+I+'">'+G+"</div>"}else{H+=I}}if(!mxClient.IS_IE&&document.createElementNS){var J=document.createElementNS("http://www.w3.org/1999/xhtml","div");J.setAttribute("style",H);if(mxUtils.isNode(G)){if(this.root.ownerDocument!=document){J.appendChild(G.cloneNode(true))}else{J.appendChild(G)}}else{J.innerHTML=G}return J}else{if(mxUtils.isNode(G)&&this.root.ownerDocument!=document){G=G.outerHTML}return mxUtils.parseXml('<div xmlns="http://www.w3.org/1999/xhtml" style="'+H+'">'+G+"</div>").documentElement}};mxSvgCanvas2D.prototype.invalidateCachedOffsetSize=function(A){delete A.firstChild.mxCachedOffsetWidth;delete A.firstChild.mxCachedFinalOffsetWidth;delete A.firstChild.mxCachedFinalOffsetHeight};mxSvgCanvas2D.prototype.updateText=function(V,W,C,D,E,L,Y,K,U,I,R){if(R!=null&&R.firstChild!=null&&R.firstChild.firstChild!=null&&R.firstChild.firstChild.firstChild!=null){var P=R.firstChild;var H=P.firstChild;var N=H.firstChild;I=(I!=null)?I:0;var B=this.state;V+=B.dx;W+=B.dy;if(U){N.style.maxHeight=Math.round(D)+"px";N.style.maxWidth=Math.round(C)+"px"}else{if(K=="fill"){N.style.width=Math.round(C+1)+"px";N.style.height=Math.round(D+1)+"px"}else{if(K=="width"){N.style.width=Math.round(C+1)+"px";if(D>0){N.style.maxHeight=Math.round(D)+"px"}}}}if(Y&&C>0){N.style.width=Math.round(C+1)+"px"}var M=0;var J=0;var G=2;var X=2;var Q=N;if(Q.firstChild!=null&&Q.firstChild.nodeName=="DIV"){Q=Q.firstChild}var A=(P.mxCachedOffsetWidth!=null)?P.mxCachedOffsetWidth:Q.offsetWidth;M=A+G;if(Y&&K!="fill"){if(U){M=Math.min(M,C)}N.style.width=M+"px"}M=((P.mxCachedFinalOffsetWidth!=null)?P.mxCachedFinalOffsetWidth:Q.offsetWidth)+G;J=((P.mxCachedFinalOffsetHeight!=null)?P.mxCachedFinalOffsetHeight:Q.offsetHeight)-2;if(U){J=Math.min(J,D);M=Math.min(M,C)}if(K=="width"){D=J}else{if(K!="fill"){C=M;D=J}}var F=0;var S=0;if(E==mxConstants.ALIGN_CENTER){F-=C/2}else{if(E==mxConstants.ALIGN_RIGHT){F-=C}}V+=F;if(L==mxConstants.ALIGN_MIDDLE){S-=D/2}else{if(L==mxConstants.ALIGN_BOTTOM){S-=D}}if(K!="fill"&&mxClient.IS_FF&&mxClient.IS_WIN){S-=2}W+=S;var O=(B.scale!=1)?"scale("+B.scale+")":"";if(B.rotation!=0&&this.rotateHtml){O+="rotate("+(B.rotation)+","+(C/2)+","+(D/2)+")";var T=this.rotatePoint((V+C/2)*B.scale,(W+D/2)*B.scale,B.rotation,B.rotationCx,B.rotationCy);V=T.x-C*B.scale/2;W=T.y-D*B.scale/2}else{V*=B.scale;W*=B.scale}if(I!=0){O+="rotate("+(I)+","+(-F)+","+(-S)+")"}P.setAttribute("transform","translate("+Math.round(V)+","+Math.round(W)+")"+O);H.setAttribute("width",Math.round(Math.max(1,C)));H.setAttribute("height",Math.round(Math.max(1,D)))}};mxSvgCanvas2D.prototype.text=function(Y,Z,e,g,V,i,a,S,M,Q,N,R,L){if(this.textEnabled&&V!=null){R=(R!=null)?R:0;var c=this.state;Y+=c.dx;Z+=c.dy;if(this.foEnabled&&M=="html"){var X="vertical-align:top;";if(N){X+="overflow:hidden;max-height:"+Math.round(g)+"px;max-width:"+Math.round(e)+"px;"}else{if(Q=="fill"){X+="width:"+Math.round(e+1)+"px;height:"+Math.round(g+1)+"px;overflow:hidden;"}else{if(Q=="width"){X+="width:"+Math.round(e+1)+"px;";if(g>0){X+="max-height:"+Math.round(g)+"px;overflow:hidden;"}}}}if(S&&e>0){X+="width:"+Math.round(e+1)+"px;white-space:normal;word-wrap:"+mxConstants.WORD_WRAP+";"}else{X+="white-space:nowrap;"}var C=this.createElement("g");if(c.alpha<1){C.setAttribute("opacity",c.alpha)}var T=this.createElement("foreignObject");T.setAttribute("style","overflow:visible;");T.setAttribute("pointer-events","all");var J=this.createDiv(V,i,a,X,Q);if(J==null){return}else{if(L!=null){J.setAttribute("dir",L)}}C.appendChild(T);this.root.appendChild(C);var P=0;var K=0;var E=2;var I=2;if(mxClient.IS_IE&&(document.documentMode==9||!mxClient.IS_SVG)){var D=document.createElement("div");D.style.cssText=J.getAttribute("style");D.style.display=(mxClient.IS_QUIRKS)?"inline":"inline-block";D.style.position="absolute";D.style.visibility="hidden";var B=document.createElement("div");B.style.display=(mxClient.IS_QUIRKS)?"inline":"inline-block";B.style.wordWrap=mxConstants.WORD_WRAP;B.innerHTML=(mxUtils.isNode(V))?V.outerHTML:V;D.appendChild(B);document.body.appendChild(D);if(document.documentMode!=8&&document.documentMode!=9&&c.fontBorderColor!=null){E+=2;I+=2}if(S&&e>0){var d=B.offsetWidth;var f=0;if(!N&&S&&e>0&&this.root.ownerDocument!=document&&Q!="fill"){var H=D.style.whiteSpace;B.style.whiteSpace="nowrap";if(d<B.offsetWidth){D.style.whiteSpace=H}}if(N){d=Math.min(d,e)}D.style.width=d+"px";P=B.offsetWidth+E+f;K=B.offsetHeight+I;D.style.display="inline-block";D.style.position="";D.style.visibility="";D.style.width=P+"px";J.setAttribute("style",D.style.cssText)}else{P=B.offsetWidth+E;K=B.offsetHeight+I}D.parentNode.removeChild(D);T.appendChild(J)}else{if(this.root.ownerDocument!=document){J.style.visibility="hidden";document.body.appendChild(J)}else{T.appendChild(J)}var W=J;if(W.firstChild!=null&&W.firstChild.nodeName=="DIV"){W=W.firstChild;if(S&&J.style.wordWrap=="break-word"){W.style.width="100%"}}var d=W.offsetWidth;if(d==0&&J.parentNode==T){J.style.visibility="hidden";document.body.appendChild(J);d=W.offsetWidth}if(this.cacheOffsetSize){C.mxCachedOffsetWidth=d}if(!N&&S&&e>0&&this.root.ownerDocument!=document&&Q!="fill"&&Q!="width"){var H=J.style.whiteSpace;J.style.whiteSpace="nowrap";if(d<W.offsetWidth){J.style.whiteSpace=H}}P=d+E-1;if(S&&Q!="fill"&&Q!="width"){if(N){P=Math.min(P,e)}J.style.width=P+"px"}P=W.offsetWidth;K=W.offsetHeight;if(this.cacheOffsetSize){C.mxCachedFinalOffsetWidth=P;C.mxCachedFinalOffsetHeight=K}K-=I;if(J.parentNode!=T){T.appendChild(J);J.style.visibility=""}}if(N){K=Math.min(K,g);P=Math.min(P,e)}if(Q=="width"){g=K}else{if(Q!="fill"){e=P;g=K}}if(c.alpha<1){C.setAttribute("opacity",c.alpha)}var b=0;var U=0;if(i==mxConstants.ALIGN_CENTER){b-=e/2}else{if(i==mxConstants.ALIGN_RIGHT){b-=e}}Y+=b;if(a==mxConstants.ALIGN_MIDDLE){U-=g/2}else{if(a==mxConstants.ALIGN_BOTTOM){U-=g}}if(Q!="fill"&&mxClient.IS_FF&&mxClient.IS_WIN){U-=2}Z+=U;var G=(c.scale!=1)?"scale("+c.scale+")":"";if(c.rotation!=0&&this.rotateHtml){G+="rotate("+(c.rotation)+","+(e/2)+","+(g/2)+")";var A=this.rotatePoint((Y+e/2)*c.scale,(Z+g/2)*c.scale,c.rotation,c.rotationCx,c.rotationCy);Y=A.x-e*c.scale/2;Z=A.y-g*c.scale/2}else{Y*=c.scale;Z*=c.scale}if(R!=0){G+="rotate("+(R)+","+(-b)+","+(-U)+")"}C.setAttribute("transform","translate("+(Math.round(Y)+this.foOffset)+","+(Math.round(Z)+this.foOffset)+")"+G);T.setAttribute("width",Math.round(Math.max(1,e)));T.setAttribute("height",Math.round(Math.max(1,g)));if(this.root.ownerDocument!=document){var O=this.createAlternateContent(T,Y,Z,e,g,V,i,a,S,M,Q,N,R);if(O!=null){T.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility");var F=this.createElement("switch");F.appendChild(T);F.appendChild(O);C.appendChild(F)}}}else{this.plainText(Y,Z,e,g,V,i,a,S,Q,N,R,L)}}};mxSvgCanvas2D.prototype.createClip=function(G,H,B,D){G=Math.round(G);H=Math.round(H);B=Math.round(B);D=Math.round(D);var F="mx-clip-"+G+"-"+H+"-"+B+"-"+D;var E=0;var C=F+"-"+E;while(document.getElementById(C)!=null){C=F+"-"+(++E)}clip=this.createElement("clipPath");clip.setAttribute("id",C);var A=this.createElement("rect");A.setAttribute("x",G);A.setAttribute("y",H);A.setAttribute("width",B);A.setAttribute("height",D);clip.appendChild(A);return clip};mxSvgCanvas2D.prototype.plainText=function(Y,Z,D,G,A,H,M,a,P,X,N,K){N=(N!=null)?N:0;var B=this.state;var F=B.fontSize;var V=this.createElement("g");var T=B.transform||"";this.updateFont(V);if(N!=0){T+="rotate("+N+","+this.format(Y*B.scale)+","+this.format(Z*B.scale)+")"}if(K!=null){V.setAttribute("direction",K)}if(X&&D>0&&G>0){var E=Y;var U=Z;if(H==mxConstants.ALIGN_CENTER){E-=D/2}else{if(H==mxConstants.ALIGN_RIGHT){E-=D}}if(P!="fill"){if(M==mxConstants.ALIGN_MIDDLE){U-=G/2}else{if(M==mxConstants.ALIGN_BOTTOM){U-=G}}}var J=this.createClip(E*B.scale-2,U*B.scale-2,D*B.scale+4,G*B.scale+4);if(this.defs!=null){this.defs.appendChild(J)}else{this.root.appendChild(J)}if(!mxClient.IS_CHROME_APP&&!mxClient.IS_IE&&!mxClient.IS_IE11&&!mxClient.IS_EDGE&&this.root.ownerDocument==document){var I=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");V.setAttribute("clip-path","url("+I+"#"+J.getAttribute("id")+")")}else{V.setAttribute("clip-path","url(#"+J.getAttribute("id")+")")}}var C=(H==mxConstants.ALIGN_RIGHT)?"end":(H==mxConstants.ALIGN_CENTER)?"middle":"start";if(C!="start"){V.setAttribute("text-anchor",C)}if(!this.styleEnabled||F!=mxConstants.DEFAULT_FONTSIZE){V.setAttribute("font-size",(F*B.scale)+"px")}if(T.length>0){V.setAttribute("transform",T)}if(B.alpha<1){V.setAttribute("opacity",B.alpha)}var S=A.split("\n");var O=Math.round(F*mxConstants.LINE_HEIGHT);var L=F+(S.length-1)*O;var U=Z+F-1;if(M==mxConstants.ALIGN_MIDDLE){if(P=="fill"){U-=G/2}else{var W=((this.matchHtmlAlignment&&X&&G>0)?Math.min(L,G):L)/2;U-=W+1}}else{if(M==mxConstants.ALIGN_BOTTOM){if(P=="fill"){U-=G}else{var W=(this.matchHtmlAlignment&&X&&G>0)?Math.min(L,G):L;U-=W+2}}}for(var Q=0;Q<S.length;Q++){if(S[Q].length>0&&mxUtils.trim(S[Q]).length>0){var R=this.createElement("text");R.setAttribute("x",this.format(Y*B.scale)+this.textOffset);R.setAttribute("y",this.format(U*B.scale)+this.textOffset);mxUtils.write(R,S[Q]);V.appendChild(R)}U+=O}this.root.appendChild(V);this.addTextBackground(V,A,Y,Z,D,(P=="fill")?G:L,H,M,P)};mxSvgCanvas2D.prototype.updateFont=function(B){var A=this.state;B.setAttribute("fill",A.fontColor);if(!this.styleEnabled||A.fontFamily!=mxConstants.DEFAULT_FONTFAMILY){B.setAttribute("font-family",A.fontFamily)}if((A.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD){B.setAttribute("font-weight","bold")}if((A.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC){B.setAttribute("font-style","italic")}if((A.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE){B.setAttribute("text-decoration","underline")}};mxSvgCanvas2D.prototype.addTextBackground=function(K,G,M,N,E,I,H,C,F){var B=this.state;if(B.fontBackgroundColor!=null||B.fontBorderColor!=null){var O=null;if(F=="fill"||F=="width"){if(H==mxConstants.ALIGN_CENTER){M-=E/2}else{if(H==mxConstants.ALIGN_RIGHT){M-=E}}if(C==mxConstants.ALIGN_MIDDLE){N-=I/2}else{if(C==mxConstants.ALIGN_BOTTOM){N-=I}}O=new mxRectangle((M+1)*B.scale,N*B.scale,(E-2)*B.scale,(I+2)*B.scale)}else{if(K.getBBox!=null&&this.root.ownerDocument==document){try{O=K.getBBox();var J=mxClient.IS_IE&&mxClient.IS_SVG;O=new mxRectangle(O.x,O.y+((J)?0:1),O.width,O.height+((J)?1:0))}catch(A){}}else{var P=document.createElement("div");P.style.lineHeight=(mxConstants.ABSOLUTE_LINE_HEIGHT)?(B.fontSize*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT;P.style.fontSize=B.fontSize+"px";P.style.fontFamily=B.fontFamily;P.style.whiteSpace="nowrap";P.style.position="absolute";P.style.visibility="hidden";P.style.display=(mxClient.IS_QUIRKS)?"inline":"inline-block";P.style.zoom="1";if((B.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD){P.style.fontWeight="bold"}if((B.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC){P.style.fontStyle="italic"}G=mxUtils.htmlEntities(G,false);P.innerHTML=G.replace(/\n/g,"<br/>");document.body.appendChild(P);var E=P.offsetWidth;var I=P.offsetHeight;P.parentNode.removeChild(P);if(H==mxConstants.ALIGN_CENTER){M-=E/2}else{if(H==mxConstants.ALIGN_RIGHT){M-=E}}if(C==mxConstants.ALIGN_MIDDLE){N-=I/2}else{if(C==mxConstants.ALIGN_BOTTOM){N-=I}}O=new mxRectangle((M+1)*B.scale,(N+2)*B.scale,E*B.scale,(I+1)*B.scale)}}if(O!=null){var L=this.createElement("rect");L.setAttribute("fill",B.fontBackgroundColor||"none");L.setAttribute("stroke",B.fontBorderColor||"none");L.setAttribute("x",Math.floor(O.x-1));L.setAttribute("y",Math.floor(O.y-1));L.setAttribute("width",Math.ceil(O.width+2));L.setAttribute("height",Math.ceil(O.height));var D=(B.fontBorderColor!=null)?Math.max(1,this.format(B.scale)):0;L.setAttribute("stroke-width",D);if(this.root.ownerDocument==document&&mxUtils.mod(D,2)==1){L.setAttribute("transform","translate(0.5, 0.5)")}K.insertBefore(L,K.firstChild)}}};mxSvgCanvas2D.prototype.stroke=function(){this.addNode(false,true)};mxSvgCanvas2D.prototype.fill=function(){this.addNode(true,false)};mxSvgCanvas2D.prototype.fillAndStroke=function(){this.addNode(true,true)};var mxVmlCanvas2D=function(A){mxAbstractCanvas2D.call(this);this.root=A};mxUtils.extend(mxVmlCanvas2D,mxAbstractCanvas2D);mxVmlCanvas2D.prototype.node=null;mxVmlCanvas2D.prototype.textEnabled=true;mxVmlCanvas2D.prototype.moveOp="m";mxVmlCanvas2D.prototype.lineOp="l";mxVmlCanvas2D.prototype.curveOp="c";mxVmlCanvas2D.prototype.closeOp="x";mxVmlCanvas2D.prototype.rotatedHtmlBackground="";mxVmlCanvas2D.prototype.vmlScale=1;mxVmlCanvas2D.prototype.createElement=function(A){return document.createElement(A)};mxVmlCanvas2D.prototype.createVmlElement=function(A){return this.createElement(mxClient.VML_PREFIX+":"+A)};mxVmlCanvas2D.prototype.addNode=function(B,A){var C=this.node;var D=this.state;if(C!=null){if(C.nodeName=="shape"){if(this.path!=null&&this.path.length>0){C.path=this.path.join(" ")+" e";C.style.width=this.root.style.width;C.style.height=this.root.style.height;C.coordsize=parseInt(C.style.width)+" "+parseInt(C.style.height)}else{return}}C.strokeweight=this.format(Math.max(1,D.strokeWidth*D.scale/this.vmlScale))+"px";if(D.shadow){this.root.appendChild(this.createShadow(C,B&&D.fillColor!=null,A&&D.strokeColor!=null))}if(A&&D.strokeColor!=null){C.stroked="true";C.strokecolor=D.strokeColor}else{C.stroked="false"}C.appendChild(this.createStroke());if(B&&D.fillColor!=null){C.appendChild(this.createFill())}else{if(this.pointerEvents&&(C.nodeName!="shape"||this.path[this.path.length-1]==this.closeOp)){C.appendChild(this.createTransparentFill())}else{C.filled="false"}}this.root.appendChild(C)}};mxVmlCanvas2D.prototype.createTransparentFill=function(){var A=this.createVmlElement("fill");A.src=mxClient.imageBasePath+"/transparent.gif";A.type="tile";return A};mxVmlCanvas2D.prototype.createFill=function(){var B=this.state;var A=this.createVmlElement("fill");A.color=B.fillColor;if(B.gradientColor!=null){A.type="gradient";A.method="none";A.color2=B.gradientColor;var C=180-B.rotation;if(B.gradientDirection==mxConstants.DIRECTION_WEST){C-=90+((this.root.style.flip=="x")?180:0)}else{if(B.gradientDirection==mxConstants.DIRECTION_EAST){C+=90+((this.root.style.flip=="x")?180:0)}else{if(B.gradientDirection==mxConstants.DIRECTION_NORTH){C-=180+((this.root.style.flip=="y")?-180:0)}else{C+=((this.root.style.flip=="y")?-180:0)}}}if(this.root.style.flip=="x"||this.root.style.flip=="y"){C*=-1}A.angle=mxUtils.mod(C,360);A.opacity=(B.alpha*B.gradientFillAlpha*100)+"%";A.setAttribute(mxClient.OFFICE_PREFIX+":opacity2",(B.alpha*B.gradientAlpha*100)+"%")}else{if(B.alpha<1||B.fillAlpha<1){A.opacity=(B.alpha*B.fillAlpha*100)+"%"}}return A};mxVmlCanvas2D.prototype.createStroke=function(){var A=this.state;var B=this.createVmlElement("stroke");B.endcap=A.lineCap||"flat";B.joinstyle=A.lineJoin||"miter";B.miterlimit=A.miterLimit||"10";if(A.alpha<1||A.strokeAlpha<1){B.opacity=(A.alpha*A.strokeAlpha*100)+"%"}if(A.dashed){B.dashstyle=this.getVmlDashStyle()}return B};mxVmlCanvas2D.prototype.getVmlDashStyle=function(){var B="dash";if(typeof(this.state.dashPattern)==="string"){var A=this.state.dashPattern.split(" ");if(A.length>0&&A[0]==1){B="0 2"}}return B};mxVmlCanvas2D.prototype.createShadow=function(G,J,A){var B=this.state;var E=-B.rotation*(Math.PI/180);var F=Math.cos(E);var C=Math.sin(E);var I=B.shadowDx*B.scale;var H=B.shadowDy*B.scale;if(this.root.style.flip=="x"){I*=-1}else{if(this.root.style.flip=="y"){H*=-1}}var D=G.cloneNode(true);D.style.marginLeft=Math.round(I*F-H*C)+"px";D.style.marginTop=Math.round(I*C+H*F)+"px";if(document.documentMode==8){D.strokeweight=G.strokeweight;if(G.nodeName=="shape"){D.path=this.path.join(" ")+" e";D.style.width=this.root.style.width;D.style.height=this.root.style.height;D.coordsize=parseInt(G.style.width)+" "+parseInt(G.style.height)}}if(A){D.strokecolor=B.shadowColor;D.appendChild(this.createShadowStroke())}else{D.stroked="false"}if(J){D.appendChild(this.createShadowFill())}else{D.filled="false"}return D};mxVmlCanvas2D.prototype.createShadowFill=function(){var A=this.createVmlElement("fill");A.color=this.state.shadowColor;A.opacity=(this.state.alpha*this.state.shadowAlpha*100)+"%";return A};mxVmlCanvas2D.prototype.createShadowStroke=function(){var A=this.createStroke();A.opacity=(this.state.alpha*this.state.shadowAlpha*100)+"%";return A};mxVmlCanvas2D.prototype.rotate=function(D,A,C,E,B){if(A&&C){D+=180}else{if(A){this.root.style.flip="x"}else{if(C){this.root.style.flip="y"}}}if(A?!C:C){D*=-1}this.root.style.rotation=D;this.state.rotation=this.state.rotation+D;this.state.rotationCx=E;this.state.rotationCy=B};mxVmlCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments);this.node=this.createVmlElement("shape");this.node.style.position="absolute"};mxVmlCanvas2D.prototype.quadTo=function(E,F,G,H){var B=this.state;var N=(this.lastX+B.dx)*B.scale;var M=(this.lastY+B.dy)*B.scale;var J=(E+B.dx)*B.scale;var I=(F+B.dy)*B.scale;var A=(G+B.dx)*B.scale;var O=(H+B.dy)*B.scale;var L=N+2/3*(J-N);var K=M+2/3*(I-M);var D=A+2/3*(J-A);var C=O+2/3*(I-O);this.path.push("c "+this.format(L)+" "+this.format(K)+" "+this.format(D)+" "+this.format(C)+" "+this.format(A)+" "+this.format(O));this.lastX=(A/B.scale)-B.dx;this.lastY=(O/B.scale)-B.dy};mxVmlCanvas2D.prototype.createRect=function(G,D,E,F,A){var B=this.state;var C=this.createVmlElement(G);C.style.position="absolute";C.style.left=this.format((D+B.dx)*B.scale)+"px";C.style.top=this.format((E+B.dy)*B.scale)+"px";C.style.width=this.format(F*B.scale)+"px";C.style.height=this.format(A*B.scale)+"px";return C};mxVmlCanvas2D.prototype.rect=function(B,C,D,A){this.node=this.createRect("rect",B,C,D,A)};mxVmlCanvas2D.prototype.roundrect=function(D,E,F,A,C,B){this.node=this.createRect("roundrect",D,E,F,A);this.node.setAttribute("arcsize",Math.max(C*100/F,B*100/A)+"%")};mxVmlCanvas2D.prototype.ellipse=function(B,C,D,A){this.node=this.createRect("oval",B,C,D,A)};mxVmlCanvas2D.prototype.image=function(H,I,D,F,B,E,C,A){var G=null;if(!E){G=this.createRect("image",H,I,D,F);G.src=B}else{G=this.createRect("rect",H,I,D,F);G.stroked="false";var J=this.createVmlElement("fill");J.aspect=(E)?"atmost":"ignore";J.rotate="true";J.type="frame";J.src=B;G.appendChild(J)}if(C&&A){G.style.rotation="180"}else{if(C){G.style.flip="x"}else{if(A){G.style.flip="y"}}}if(this.state.alpha<1||this.state.fillAlpha<1){G.style.filter+="alpha(opacity="+(this.state.alpha*this.state.fillAlpha*100)+")"}this.root.appendChild(G)};mxVmlCanvas2D.prototype.createDiv=function(C,D,A,H){var I=this.createElement("div");var F=this.state;var B="";if(F.fontBackgroundColor!=null){B+="background-color:"+F.fontBackgroundColor+";"}if(F.fontBorderColor!=null){B+="border:1px solid "+F.fontBorderColor+";"}if(mxUtils.isNode(C)){I.appendChild(C)}else{if(H!="fill"&&H!="width"){var E=this.createElement("div");E.style.cssText=B;E.style.display=(mxClient.IS_QUIRKS)?"inline":"inline-block";E.style.zoom="1";E.style.textDecoration="inherit";E.innerHTML=C;I.appendChild(E)}else{I.style.cssText=B;I.innerHTML=C}}var G=I.style;G.fontSize=(F.fontSize/this.vmlScale)+"px";G.fontFamily=F.fontFamily;G.color=F.fontColor;G.verticalAlign="top";G.textAlign=D||"left";G.lineHeight=(mxConstants.ABSOLUTE_LINE_HEIGHT)?(F.fontSize*mxConstants.LINE_HEIGHT/this.vmlScale)+"px":mxConstants.LINE_HEIGHT;if((F.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD){G.fontWeight="bold"}if((F.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC){G.fontStyle="italic"}if((F.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE){G.textDecoration="underline"}return I};mxVmlCanvas2D.prototype.text=function(W,X,e,g,U,k,Y,R,H,N,J,P,G){if(this.textEnabled&&U!=null){var b=this.state;if(H=="html"){if(b.rotation!=null){var A=this.rotatePoint(W,X,b.rotation,b.rotationCx,b.rotationCy);W=A.x;X=A.y}if(document.documentMode==8&&!mxClient.IS_EM){W+=b.dx;X+=b.dy;if(N!="fill"&&Y==mxConstants.ALIGN_TOP){X-=1}}else{W*=b.scale;X*=b.scale}var a=(document.documentMode==8&&!mxClient.IS_EM)?this.createVmlElement("group"):this.createElement("div");a.style.position="absolute";a.style.display="inline";a.style.left=this.format(W)+"px";a.style.top=this.format(X)+"px";a.style.zoom=b.scale;var j=this.createElement("div");j.style.position="relative";j.style.display="inline";var M=mxUtils.getAlignmentAsPoint(k,Y);var Z=M.x;var S=M.y;var E=this.createDiv(U,k,Y,N);var B=this.createElement("div");if(G!=null){E.setAttribute("dir",G)}if(R&&e>0){if(!J){E.style.width=Math.round(e)+"px"}E.style.wordWrap=mxConstants.WORD_WRAP;E.style.whiteSpace="normal";if(E.style.wordWrap=="break-word"){var d=E;if(d.firstChild!=null&&d.firstChild.nodeName=="DIV"){d.firstChild.style.width="100%"}}}else{E.style.whiteSpace="nowrap"}var K=b.rotation+(P||0);if(this.rotateHtml&&K!=0){B.style.display="inline";B.style.zoom="1";B.appendChild(E);if(document.documentMode==8&&!mxClient.IS_EM&&this.root.nodeName!="DIV"){j.appendChild(B);a.appendChild(j)}else{a.appendChild(B)}}else{if(document.documentMode==8&&!mxClient.IS_EM){j.appendChild(E);a.appendChild(j)}else{E.style.display="inline";a.appendChild(E)}}if(this.root.nodeName!="DIV"){var L=this.createVmlElement("rect");L.stroked="false";L.filled="false";L.appendChild(a);this.root.appendChild(L)}else{this.root.appendChild(a)}if(J){E.style.overflow="hidden";E.style.width=Math.round(e)+"px";if(!mxClient.IS_QUIRKS){E.style.maxHeight=Math.round(g)+"px"}}else{if(N=="fill"){E.style.overflow="hidden";E.style.width=(Math.max(0,e)+1)+"px";E.style.height=(Math.max(0,g)+1)+"px"}else{if(N=="width"){E.style.overflow="hidden";E.style.width=(Math.max(0,e)+1)+"px";E.style.maxHeight=(Math.max(0,g)+1)+"px"}}}if(this.rotateHtml&&K!=0){var c=K*(Math.PI/180);var f=parseFloat(parseFloat(Math.cos(c)).toFixed(8));var l=parseFloat(parseFloat(Math.sin(-c)).toFixed(8));c%=2*Math.PI;if(c<0){c+=2*Math.PI}c%=Math.PI;if(c>Math.PI/2){c=Math.PI-c}var T=Math.cos(c);var C=Math.sin(c);if(document.documentMode==8&&!mxClient.IS_EM){E.style.display="inline-block";B.style.display="inline-block";j.style.display="inline-block"}E.style.visibility="hidden";E.style.position="absolute";document.body.appendChild(E);var V=E;if(V.firstChild!=null&&V.firstChild.nodeName=="DIV"){V=V.firstChild}var d=V.offsetWidth+3;var F=V.offsetHeight;if(J){e=Math.min(e,d);F=Math.min(F,g)}else{e=d}if(R){E.style.width=e+"px"}if(mxClient.IS_QUIRKS&&(J||N=="width")&&F>g){F=g;E.style.height=F+"px"}g=F;var O=(g-g*T+e*-C)/2-l*e*(Z+0.5)+f*g*(S+0.5);var I=(e-e*T+g*-C)/2+f*e*(Z+0.5)+l*g*(S+0.5);if(a.nodeName=="group"&&this.root.nodeName=="DIV"){var D=this.createElement("div");D.style.display="inline-block";D.style.position="absolute";D.style.left=this.format(W+(I-e/2)*b.scale)+"px";D.style.top=this.format(X+(O-g/2)*b.scale)+"px";a.parentNode.appendChild(D);D.appendChild(a)}else{var Q=(document.documentMode==8&&!mxClient.IS_EM)?1:b.scale;a.style.left=this.format(W+(I-e/2)*Q)+"px";a.style.top=this.format(X+(O-g/2)*Q)+"px"}B.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+f+", M12="+l+", M21="+(-l)+", M22="+f+", sizingMethod='auto expand')";B.style.backgroundColor=this.rotatedHtmlBackground;if(this.state.alpha<1){B.style.filter+="alpha(opacity="+(this.state.alpha*100)+")"}B.appendChild(E);E.style.position="";E.style.visibility=""}else{if(document.documentMode!=8||mxClient.IS_EM){E.style.verticalAlign="top";if(this.state.alpha<1){a.style.filter="alpha(opacity="+(this.state.alpha*100)+")"}var i=E.parentNode;E.style.visibility="hidden";document.body.appendChild(E);e=E.offsetWidth;var F=E.offsetHeight;if(mxClient.IS_QUIRKS&&J&&F>g){F=g;E.style.height=F+"px"}g=F;E.style.visibility="";i.appendChild(E);a.style.left=this.format(W+e*Z*this.state.scale)+"px";a.style.top=this.format(X+g*S*this.state.scale)+"px"}else{if(this.state.alpha<1){E.style.filter="alpha(opacity="+(this.state.alpha*100)+")"}j.style.left=(Z*100)+"%";j.style.top=(S*100)+"%"}}}else{this.plainText(W,X,e,g,mxUtils.htmlEntities(U,false),k,Y,R,H,N,J,P,G)}}};mxVmlCanvas2D.prototype.plainText=function(U,V,C,E,A,F,K,W,Q,M,T,L,I){var B=this.state;U=(U+B.dx)*B.scale;V=(V+B.dy)*B.scale;var R=this.createVmlElement("shape");R.style.width="1px";R.style.height="1px";R.stroked="false";var X=this.createVmlElement("fill");X.color=B.fontColor;X.opacity=(B.alpha*100)+"%";R.appendChild(X);var N=this.createVmlElement("path");N.textpathok="true";N.v="m "+this.format(0)+" "+this.format(0)+" l "+this.format(1)+" "+this.format(0);R.appendChild(N);var O=this.createVmlElement("textpath");O.style.cssText="v-text-align:"+F;O.style.align=F;O.style.fontFamily=B.fontFamily;O.string=A;O.on="true";var D=B.fontSize*B.scale/this.vmlScale;O.style.fontSize=D+"px";if((B.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD){O.style.fontWeight="bold"}if((B.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC){O.style.fontStyle="italic"}if((B.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE){O.style.textDecoration="underline"}var P=A.split("\n");var J=D+(P.length-1)*D*mxConstants.LINE_HEIGHT;var H=0;var S=0;if(K==mxConstants.ALIGN_BOTTOM){S=-J/2}else{if(K!=mxConstants.ALIGN_MIDDLE){S=J/2}}if(L!=null){R.style.rotation=L;var G=L*(Math.PI/180);H=Math.sin(G)*S;S=Math.cos(G)*S}R.appendChild(O);R.style.left=this.format(U-H)+"px";R.style.top=this.format(V+S)+"px";this.root.appendChild(R)};mxVmlCanvas2D.prototype.stroke=function(){this.addNode(false,true)};mxVmlCanvas2D.prototype.fill=function(){this.addNode(true,false)};mxVmlCanvas2D.prototype.fillAndStroke=function(){this.addNode(true,true)};function mxGuide(B,A){this.graph=B;this.setStates(A)}mxGuide.prototype.graph=null;mxGuide.prototype.states=null;mxGuide.prototype.horizontal=true;mxGuide.prototype.vertical=true;mxGuide.prototype.guideX=null;mxGuide.prototype.guideY=null;mxGuide.prototype.setStates=function(A){this.states=A};mxGuide.prototype.isEnabledForEvent=function(A){return true};mxGuide.prototype.getGuideTolerance=function(){return this.graph.gridSize/2};mxGuide.prototype.createGuideShape=function(B){var A=new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH);A.isDashed=true;return A};mxGuide.prototype.move=function(W,P,R){if(this.states!=null&&(this.horizontal||this.vertical)&&W!=null&&P!=null){var D=this.graph.getView().translate;var S=this.graph.getView().scale;var K=P.x;var a=P.y;var X=false;var L=null;var Q=null;var Y=false;var F=null;var f=null;var d=this.getGuideTolerance();var G=d;var H=d;var M=W.clone();M.x+=P.x;M.y+=P.y;var Z=M.x;var J=M.x+M.width;var e=M.getCenterX();var E=M.y;var V=M.y+M.height;var T=M.getCenterY();function A(c,g){c+=this.graph.panDx;var b=false;if(Math.abs(c-e)<G){K=c-W.getCenterX();G=Math.abs(c-e);b=true}else{if(Math.abs(c-Z)<G){K=c-W.x;G=Math.abs(c-Z);b=true}else{if(Math.abs(c-J)<G){K=c-W.x-W.width;G=Math.abs(c-J);b=true}}}if(b){L=g;Q=Math.round(c-this.graph.panDx);if(this.guideX==null){this.guideX=this.createGuideShape(true);this.guideX.dialect=(this.graph.dialect!=mxConstants.DIALECT_SVG)?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG;this.guideX.pointerEvents=false;this.guideX.init(this.graph.getView().getOverlayPane())}}X=X||b}function B(c){c+=this.graph.panDy;var b=false;if(Math.abs(c-T)<H){a=c-W.getCenterY();H=Math.abs(c-T);b=true}else{if(Math.abs(c-E)<H){a=c-W.y;H=Math.abs(c-E);b=true}else{if(Math.abs(c-V)<H){a=c-W.y-W.height;H=Math.abs(c-V);b=true}}}if(b){F=U;f=Math.round(c-this.graph.panDy);if(this.guideY==null){this.guideY=this.createGuideShape(false);this.guideY.dialect=(this.graph.dialect!=mxConstants.DIALECT_SVG)?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG;this.guideY.pointerEvents=false;this.guideY.init(this.graph.getView().getOverlayPane())}}Y=Y||b}for(var I=0;I<this.states.length;I++){var U=this.states[I];if(U!=null){if(this.horizontal){A.call(this,U.getCenterX(),U);A.call(this,U.x,U);A.call(this,U.x+U.width,U)}if(this.vertical){B.call(this,U.getCenterY(),U);B.call(this,U.y,U);B.call(this,U.y+U.height,U)}}}if(R){if(!X){var C=W.x-(this.graph.snap(W.x/S-D.x)+D.x)*S;K=this.graph.snap(K/S)*S-C}if(!Y){var O=W.y-(this.graph.snap(W.y/S-D.y)+D.y)*S;a=this.graph.snap(a/S)*S-O}}var N=this.graph.container;if(!X&&this.guideX!=null){this.guideX.node.style.visibility="hidden"}else{if(this.guideX!=null){if(L!=null&&W!=null){minY=Math.min(W.y+a-this.graph.panDy,L.y);maxY=Math.max(W.y+W.height+a-this.graph.panDy,L.y+L.height)}if(minY!=null&&maxY!=null){this.guideX.points=[new mxPoint(Q,minY),new mxPoint(Q,maxY)]}else{this.guideX.points=[new mxPoint(Q,-this.graph.panDy),new mxPoint(Q,N.scrollHeight-3-this.graph.panDy)]}this.guideX.stroke=this.getGuideColor(L,true);this.guideX.node.style.visibility="visible";this.guideX.redraw()}}if(!Y&&this.guideY!=null){this.guideY.node.style.visibility="hidden"}else{if(this.guideY!=null){if(F!=null&&W!=null){minX=Math.min(W.x+K-this.graph.panDx,F.x);maxX=Math.max(W.x+W.width+K-this.graph.panDx,F.x+F.width)}if(minX!=null&&maxX!=null){this.guideY.points=[new mxPoint(minX,f),new mxPoint(maxX,f)]}else{this.guideY.points=[new mxPoint(-this.graph.panDx,f),new mxPoint(N.scrollWidth-3-this.graph.panDx,f)]}this.guideY.stroke=this.getGuideColor(F,false);this.guideY.node.style.visibility="visible";this.guideY.redraw()}}P=new mxPoint(K,a)}return P};mxGuide.prototype.getGuideColor=function(B,A){return mxConstants.GUIDE_COLOR};mxGuide.prototype.hide=function(){this.setVisible(false)};mxGuide.prototype.setVisible=function(A){if(this.guideX!=null){this.guideX.node.style.visibility=(A)?"visible":"hidden"}if(this.guideY!=null){this.guideY.node.style.visibility=(A)?"visible":"hidden"}};mxGuide.prototype.destroy=function(){if(this.guideX!=null){this.guideX.destroy();this.guideX=null}if(this.guideY!=null){this.guideY.destroy();this.guideY=null}};