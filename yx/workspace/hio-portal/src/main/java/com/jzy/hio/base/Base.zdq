package com.jzy.hio.base;

import java.util.Collection;
import java.util.HashMap;
import java.util.Map;

import com.jzy.tools.data.JacksonUtils;

/**
 * 该类的设计初衷：提供项目基础功能的封装<br/>
 * 集中管理对第三方类的依赖、最大化的减少业务相关的类直接import第三方class
 * 
 * @author coffee<br/>
 *         2018年2月1日上午10:27:24
 */
@SuppressWarnings("unchecked")
public final class Base {

	/**
	 * 把Object转化为String、主要处理Null <br/>
	 * 
	 * @param obj
	 *            <br/>
	 * @return 2018年2月1日上午10:35:26
	 */
	public static String getStr(Object obj) {
		String str = null;
		if (obj != null) {
			str = String.valueOf(obj);
		}
		return str;
	}

	public static Map<String, Object> json2map(String json) {
		Map<String, Object> map = JacksonUtils.fromJson(json, Map.class);
		if (map == null) {
			map = new HashMap<String, Object>();
		}
		return map;
	}

	/**
	 * 考虑到null值, 不能用 com.alibaba.fastjson 相关的类 <br/>
	 * 
	 * @author coffee 2018年2月2日下午6:16:43<br/>
	 * 
	 * @param obj
	 * @return
	 */
	public static Map<String, Object> obj2map(Object obj) {
		String json = JacksonUtils.toJson(obj, true);
		Map<String, Object> map = JacksonUtils.fromJson(json, Map.class);
		// return JSON.parseObject(JSON.toJSONString(obj), Map.class);
		return map;
	}

	public static <T> T map2obj(Map<String, Object> map, Class<T> clazz) {
		String json = JacksonUtils.toJson(map, true);
		return JacksonUtils.fromJson(json, clazz);
	}

	public static String obj2json(Object obj) {
		String json = JacksonUtils.toJson(obj, true);
		return json;
	}

	/**
	 * 判断对象是否为空、适用于集合、自定义Object、String <br/>
	 * 
	 * @param obj
	 *            <br/>
	 * @return 2018年1月31日上午11:14:34
	 */
	public static boolean isNotEmpty(Object obj) {
		if (obj == null) {
			return false;
		}
		if (obj instanceof Collection<?>) {
			Collection<?> coll = (Collection<?>) obj;
			return coll.size() > 0;
		}
		if (obj instanceof Map<?, ?>) {
			Map<?, ?> map = (Map<?, ?>) obj;
			return map.size() > 0;
		}
		return String.valueOf(obj + "").trim().length() > 0;
	}

	/**
	 * 判断对象是否为空、适用于集合、自定义Object、String <br/>
	 * 
	 * @param obj
	 *            <br/>
	 * @return 2018年1月31日上午11:14:34
	 */
	public static boolean isEmpty(Object obj) {
		return isNotEmpty(obj) == false;
	}

}
