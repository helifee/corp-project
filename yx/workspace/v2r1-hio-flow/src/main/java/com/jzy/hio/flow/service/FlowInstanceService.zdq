package com.jzy.hio.flow.service;

import java.util.List;

import com.jzy.hio.flow.entity.dto.ApprovalCountDto;
import com.jzy.hio.flow.entity.dto.ApprovalDto;
import com.jzy.hio.flow.entity.dto.InstanceDetailsDto;
import com.jzy.hio.flow.entity.dto.UserDto;
import com.jzy.hio.flow.entity.param.AddLabelParam;
import com.jzy.hio.flow.entity.param.ApprovalParam;
import com.jzy.hio.flow.entity.param.CopyParam;
import com.jzy.hio.flow.entity.param.FlowApprovalParam;
import com.jzy.hio.flow.entity.param.FlowRejectParam;
import com.jzy.hio.flow.entity.param.FlowSimulationParam;
import com.jzy.hio.flow.entity.param.FlowSubmitParam;
import com.jzy.hio.flow.entity.param.InstanceDetailsParam;
import com.jzy.hio.flow.entity.param.UpdateApproverParam;
import com.jzy.hio.flow.param.FlowByProjectParam;
import com.jzy.hio.utils.Page;

/**
 * 流程实例
 * 
 * @author zhangchaoyang
 *
 */
public interface FlowInstanceService {

	/**
	 * 我发起的列表
	 * 
	 * @param approvalParam
	 * @return
	 */
	Page getInstanceList(ApprovalParam approvalParam);

	/**
	 * 开启流程
	 * 
	 * @param flowStartParam
	 * @return
	 * @throws Exception
	 */
	String startFlow(FlowSubmitParam flowStartParam) throws Exception;

	/**
	 * 流程草稿保存
	 * 
	 * @param instanceParam
	 * @return
	 * @throws Exception 
	 */
	String saveDraft(FlowSubmitParam params) throws Exception;

	/**
	 * 流程实例详情
	 * 
	 * @param params
	 * @return
	 */
	InstanceDetailsDto flowView(InstanceDetailsParam params);

	/**
	 * 流程审批同意
	 * 
	 * @param flowApprovalParam
	 * @return
	 */
	int approve(FlowApprovalParam flowApprovalParam);

	/**
	 * 前加签
	 * 
	 * @param addLabelParam
	 * @return
	 */

	int frontAddLabel(AddLabelParam addLabelParam);

	/**
	 * 后加签
	 * 
	 * @param addLabelParam
	 * @return
	 */
	int afterAddLabel(AddLabelParam addLabelParam);

	/**
	 * 驳回- 退回 逻辑
	 * 
	 * @param flowRejectParam
	 * @return
	 */
	int reject(FlowRejectParam flowRejectParam);

	/**
	 * 修改审批人
	 * 
	 * @param updateApproverParam
	 * @return
	 */
	int updateApprover(UpdateApproverParam updateApproverParam);

	/**
	 * 流程撤回
	 * 
	 * @param instanceId
	 * @return
	 */
	int withdraw(String instanceId);

	/**
	 * 流程抄送
	 * 
	 * @param copyParam
	 * @return
	 */
	int flowCopy(CopyParam copyParam);

	/**
	 * 审批跳过
	 * 
	 * @param instanceId
	 * @return
	 */
	int approvalSkip(String instanceId);

	List<ApprovalDto> approvalList(int state);
	/**
	 * 流程模拟
	 * 
	 * @param formValueParam
	 * @return
	 */
	Object flowSimulate(FlowSimulationParam flowSimulationParam);

	/**
	 *  根据项目Id 查询创建流程实例信息
	 * @param flowByProjectParam
	 * @return
	 */
	Page<ApprovalDto> getInstanceListByProjectId(FlowByProjectParam flowByProjectParam);

	/**
	 * 移动端：查询当前人的待审、待阅总数
	 * @author yangning
	 * @param tendList
	 * @return
	 */
	List<ApprovalCountDto> mobileQueryCount(List<String> tendList);

	/**
	 * @author yangning
	 * 查询首页工作信息审批数量
	 * @
	 * @param state
	 * @return
	 */
	public int approvalListCount(int state) ;
	
	/**
	 * 移动端审批--同意
	 * @param tendId
	 * @param flowApprovalParam
	 * @return
	 */
	int mobileApproval(String tendId, FlowApprovalParam flowApprovalParam);
	
	/**
	 * 移动端审批-- 驳回
	 * @param tendId
	 * @param flowRejectParam
	 * @return
	 */
	int mobileReject(String tendId, FlowRejectParam flowRejectParam);

	/**
	 * 移动端 view
	 * @param tendId
	 * @param instanceDetailsParam
	 * @return
	 */
	InstanceDetailsDto mobileFlowView(String tendId, InstanceDetailsParam instanceDetailsParam);

	/**
	 * 查出已发送的抄送人
	 * @param instanceId
	 * @return
	 */
	List<String> alreadyCopy(String instanceId);
 
}
