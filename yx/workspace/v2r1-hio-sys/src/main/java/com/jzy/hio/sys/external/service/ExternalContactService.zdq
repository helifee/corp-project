package com.jzy.hio.sys.external.service;

import com.jzy.hio.base.service.BaseSysService;
import com.jzy.hio.entity.OaSysExternalContact;
import com.jzy.hio.entity.OaSysExternalShare;
import com.jzy.hio.sys.external.dto.ExternalContactDto;
import com.jzy.hio.sys.external.dto.ExternalManagerDto;
import com.jzy.hio.sys.user.dto.FlowUserAndExternalDto;
import com.jzy.hio.sys.user.dto.ImUserDto;
import com.jzy.hio.sys.user.dto.UserDto;
import com.jzy.hio.sys.user.dto.UserStatusDto;

import java.util.Date;
import java.util.HashSet;
import java.util.List;
import java.util.Map;

/**
 * @author kimchou
 * @create 2018-03-23 16:52
 * @desc
 **/
public interface ExternalContactService extends BaseSysService<OaSysExternalContact> {

	int save(String tendId, OaSysExternalContact oaSysExternalContact);

	void updateBatchUpdateTime(String tendId, HashSet<String> externalSet, Date nowDate);

	/**
	 * 查询所有的外部联系人
	 * 
	 * @param tendId
	 * @return
	 */
	List<ExternalContactDto> queryExternalContactList(String tendId);

	/**
	 * 查询具备权限的外部联系人
	 * 
	 * @param tendId
	 * @param userId
	 * @return
	 */
	List<ExternalContactDto> queryListByUserWithRole(String tendId, String userId);

	OaSysExternalShare queryExternalShare(String tendId, String currentUserId, String externalUserId);

	/**
	 * 查询用户Ids
	 * 
	 * @param ids
	 *            oa_sys_external_contact 主键
	 * @return
	 */
	List<ExternalContactDto> queryExternalUsersByIds(String tendId,List<String> ids,int status);

	List<ExternalContactDto> queryExternalUsersByIdsWithRole(List<String> ids, String userId);

	
	/**
	 * 查询 有关的人员
	 *
	 * @param tendId
	 * @param id
	 * @return
	 */
	List<ImUserDto> queryExternalShareOaUserListByIMUserId(String tendId, String imUserId);

	/**
	 *
	 * @param tendId
	 * @param imUserIds
	 * @return
	 */
    List<FlowUserAndExternalDto> queryExternalUsersByImUserIds(String tendId, List<String> imUserIds);

	/**
	 * 查询外部联系人负责人信息
	 * @param tendId
	 * @param id
	 * @return
	 */
    ExternalManagerDto queryExternalManager(String tendId, String id);

	/**
	 *
	 * @param tendId
	 * @param ids
	 * @return
	 */
    Map<String,UserStatusDto> queryUserStatusByIds(String tendId, List<String> ids);

	/**
	 *
	 * @param tendId
	 * @param imUserId
	 * @param userId
	 * @return
	 */
    Boolean queryExternalIsHaveRelation(String tendId, String imUserId, String userId);

	/**
	 *
	 * @param tendId
	 * @param sysUserIds
	 * @return
	 */
    String queryUserIsNormal(String tendId,List<String> sysUserIds);

    List<UserDto> queryList(Integer workStatus,String imUserId,boolean isSuper);
}
