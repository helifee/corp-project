package com.jzy.hio.redis.service;

import java.util.List;

import com.jzy.hio.base.entity.BaseEntity;
import com.jzy.hio.entity.OaSysApp;
import com.jzy.hio.entity.OaSysButton;
import com.jzy.hio.entity.OaSysMenu;
import com.jzy.hio.entity.OaSysRolePermission;
import com.jzy.hio.entity.OaSysRoleUser;
import com.jzy.hio.entity.OaSysUser;
import com.jzy.hio.entity.OaSysUserPosition;
import com.jzy.hio.redis.entity.RoleMenuButtonRds;
import com.jzy.hio.redis.entity.UserRds;
import com.jzy.hio.sys.role.param.RoleParam;

/**
 * <p>
 * 统一入口、新增数据到redis
 * </p>
 * <p>
 * 
 * <pre>
 * 命名规则： set更新、add追加、del删除、get取值
 * </pre>
 *
 * @author wt.coffee<br />
 *         2018年3月21日上午9:25:47
 */
public interface RedisSetService {
	// 以下是通用方法
	public int addEntity(String tendId, BaseEntity entity);

	public int addEntityList(String tendId, List<? extends BaseEntity> list);

	public int deleteEntity(Class<?> entityClass, String... ids);

	// 用户详情
	public int setUserDetails(String tendId, UserRds userRds);

	public int deleteUserDetails(String tendId, String userId);

	public int setRoleMenuButton(String tendId, RoleMenuButtonRds roleUrlRds);

	/**
	 * 设置app不可用
	 *
	 * @param appId
	 * @return 1-成功、0失败
	 */
	public int setAppDisable(String tendId, OaSysApp app, List<OaSysMenu> menus);

	/**
	 * 新增-修改
	 *
	 * @param roleId
	 * @param oldUsers
	 *            如果是更新role、则需要带上老的用户、删除用户相关的权限
	 * @return
	 */
	public int setRoleAll(String tendId, RoleParam role, List<OaSysRoleUser> oldUsers);

	public int addRoleUser(String tendId, List<OaSysRoleUser> users);

	public int deleteRoleAll(String tendId, String roleId, List<OaSysRoleUser> oldUsers);

	/**
	 * 删除角色下的用户
	 *
	 * @param userId
	 * @return
	 */
	public int deleteRoleUser(String tendId, String roleId, String userId);

	/**
	 * 同步mysql数据到redis
	 *
	 * @param users
	 * @param permissions
	 * @param roleButtons
	 */
	public void syncRole(String tendId, List<OaSysRoleUser> users, List<OaSysRolePermission> permissions, //
			List<OaSysMenu> roleMenus, List<OaSysButton> roleButtons);

	/**
	 * 删除用户--所有角色都删除
	 * 
	 * @param delUserId
	 *            要删除的用户的userId
	 */
	public void deleteRoleUserAll(String tendId, String delUserId);

	public void syncOrg(String tendId, List<OaSysUserPosition> ups);

	/**
	 * 更新组织、用户、岗位\外部联系人
	 */
	public void syncOrgAndUserAndPositions(String tendCode, List<String> orgIds, List<String> userIds, List<String> positionIds, List<String> externalIds);

	/**
	 * 同步 tendId 和 imUserId 对应的关系
	 * 
	 * @param tendId
	 * @param imUserId
	 * @param id
	 * @param redisOpt
	 */
	void syncTendIdAndUser(String tendId, String imUserId, String id, int redisOpt);

	void syncUserAndImUserId(String currentTend, List<OaSysUser> userList);
}
