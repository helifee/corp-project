package com.jzy.hio.sys.role.dto;

import com.fasterxml.jackson.annotation.JsonIgnore;
import com.jzy.hio.base.dto.BaseTreeDto;

/**
 * 菜单权限--树
 * 
 * @author wt.coffee<br/>
 *         2018年3月12日下午4:57:48
 */
public class RolePermissionTreeDto extends BaseTreeDto<RolePermissionTreeDto> {

	private String appId; // app id
	private String menuId;// 菜单id
	private String permissionId;// 权限id--对应表oa_role_permission_id

	private String name;// 应用名、孩子则为菜单名
	private String remark;// 菜单描述
	/**
	 * 返回NULL 代表不具备对应的
	 */
	private Boolean permissionLook;// 查看
	private Boolean permissionEdit;// 编辑
	private Boolean permissionFile;// 归档

	// 以下字段不返回给前端
	/**
	 * 查看、编辑、归档-的值分别代表1、2、4-- 三个值任意组合代表该菜单的权限类型<br>
	 *  1 (只具备查询的类型)
	 *  3 (具备查看、编辑--即在前端显示查看、编辑2个复选框)
	 *  7 (具备查看、编辑、归档--即在前端显示查看、编辑、归档3个复选框)
	 *  5 (具备查看、归档--即在前端显示查看、归档3个复选框)
	 */
	@JsonIgnore
	private int permissionType; 
	@JsonIgnore
	private int permissionValue; // 权限值
	@JsonIgnore
	private String appName;

	public String getMenuId() {
		menuId = getId();
		return menuId;
	}

	public Boolean getPremissionLook() {
		if (getParentId() == null) {
			return null;
		}
		if ((permissionValue >> 0 & 1) == 1) {
			permissionLook = true;
		} else {
			permissionLook = false;
		}
		return permissionLook;
	}

	public Boolean getPermissionEdit() {
		if (getParentId() == null) {
			return null;
		}
		if (permissionType == 3 || permissionType == 7) {
			if ((permissionValue >> 1 & 1) == 1) {
				permissionEdit = true;
			} else {
				permissionEdit = false;
			}
		}
		return permissionEdit;
	}

	// 只有hr系统才返回给前端
	public Boolean getPermissionFile() {
		if (getParentId() == null) {
			return null;
		}
		if (permissionType == 7) {
			if ((permissionValue >> 2 & 1) == 1) {
				permissionFile = true;
			} else {
				permissionFile = false;
			}
			return permissionFile;
		} else {
			return null;
		}
	}

	public String getAppId() {
		return appId;
	}

	public void setAppId(String appId) {
		this.appId = appId;
	}

	public String getAppName() {
		return appName;
	}

	public void setAppName(String appName) {
		this.appName = appName;
	}

	public void setMenuId(String menuId) {
		this.menuId = menuId;
	}

	public String getPermissionId() {
		return permissionId;
	}

	public void setPermissionId(String permissionId) {
		this.permissionId = permissionId;
	}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public String getRemark() {
		return remark;
	}

	public void setRemark(String remark) {
		this.remark = remark;
	}

	public void setPermissionLook(boolean permissionLook) {
		this.permissionLook = permissionLook;
	}

	public int getPermissionType() {
		return permissionType;
	}

	public void setPermissionType(int permissionType) {
		this.permissionType = permissionType;
	}

	public void setPermissionEdit(boolean permissionEdit) {
		this.permissionEdit = permissionEdit;
	}

	public void setPermissionFile(boolean permissionFile) {
		this.permissionFile = permissionFile;
	}
}
