package com.jzy.hio.sys.role.controller;

import java.util.List;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.jzy.hio.base.controller.BaseSysController;
import com.jzy.hio.sys.role.dto.RolePermissionDto;
import com.jzy.hio.sys.role.dto.RolePermissionTreeDto;
import com.jzy.hio.sys.role.service.RolePermissionService;

/**
 * 角色具备的权限
 * 
 * @author wt.coffee<br/>
 *         2018年3月12日上午9:14:38
 */
@RestController
@RequestMapping("rolePermission")
public class RolePermissionController extends BaseSysController {

	@Autowired
	private RolePermissionService rolePermissionService;

	/**
	 * 查询所有的角色菜单、以及指定角色是否具备对应的权限
	 */
	@RequestMapping("queryRolePermissions")
	public Object queryRolePermission(@RequestBody Map<String, Object> paramMap) {
		String roleId = getStr(paramMap, "roleId");
		List<RolePermissionTreeDto> list = rolePermissionService.queryMenuAndRolePermission(roleId);
		return list;
	}

	/**
	 * 查询指定角色的权限
	 */
	@RequestMapping("queryByUser")
	public List<RolePermissionDto> queryByUser(@RequestBody Map<String, Object> paramMap) {
		String roleId = getStr(paramMap, "roleId");
		return rolePermissionService.queryRolePermission(roleId);
	}

	/**
	 * 查询当前用户具备的hr权限 ???? 好像没有被调用
	 * 
	 * @return
	 */
	public List<RolePermissionDto> queryHrRole(@RequestBody Map<String, Object> paramMap) {
		String userIdOA = getUserIdOA();
		String tendId = getTendId();
		return rolePermissionService.queryHrRolePermission(tendId, userIdOA);
	}

}
