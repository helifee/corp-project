package com.jzy.hio.base.cloud.core;

import feign.RequestInterceptor;
import feign.RequestTemplate;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.util.StringUtils;

/**
 * Feign请求方式将信息向下传递
 * Created by wf on 2018/1/22.
 */
public class CoreFeignRequestInterceptor  implements  RequestInterceptor{
    private static final Logger logger = LoggerFactory.getLogger(CoreFeignRequestInterceptor.class);

    @Override
    public void apply(RequestTemplate requestTemplate) {
      String header = StringUtils.collectionToDelimitedString(CoreHeaderInterceptor.label.get(), CoreHeaderInterceptor.HEADER_LABEL_SPLIT);
      requestTemplate.header(CoreHeaderInterceptor.HEADER_LABEL, header);
        logger.info("Feign请求方式传递 header "+header);

    }
}
