package com.jzy.hio.base.datasource;

import java.util.List;
import java.util.Map;

import org.apache.ibatis.annotations.Select;

import com.jzy.hio.base.vo.TendDataSourceVo;

/**
 * Created by luoro on 2017/12/24.
 */
public interface DataSourceBeanMapper {
    /**
     *
     * 数据源信息
     * @return
     */
    @Select("select t.id  as tendId ,d.code as tendCode,d.id  as databaseId, d.account as userName,d.password as password,d.url as url,d.driver_name as driverName from sys_tend_database d  left join sys_tend_user t on t.database_id=d.id " +
            "    where (d.url is not null and d.url !='') and   (d.password is not null and d.password !='') and  (d.account is not null and d.account !='') and  (d.driver_name is not null and d.driver_name !='')")
    public List<TendDataSourceVo> getTendDataSourceVoList();


    /**
     *
     * 获取租户信息
     * @param map
     * @return
     */
    @Select("select t.id  as tendId ,d.code as tendCode,t.due_time dueTime,t.state status  from sys_tend_user t,sys_tend_database  d where t.database_id=d.id and t.delflag!=1 and t.state=1 and t.second_level_domain=#{domain,jdbcType=VARCHAR} and 1=1  limit 1")
    public Map<String,Object> queryTendDemainInfo(Map map);
}
