package com.jzy.hio.sys.sys.org.controller;

import io.swagger.annotations.Api;
import io.swagger.annotations.ApiImplicitParam;
import io.swagger.annotations.ApiImplicitParams;
import io.swagger.annotations.ApiOperation;

import java.util.Arrays;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import com.jzy.hio.base.utils.MessageInfo;
import com.jzy.hio.base.utils.MessageResult;
import com.jzy.hio.base.utils.OpeLogInfo;
import com.jzy.hio.base.utils.Page;
import com.jzy.hio.base.utils.ResponseModel;
import com.jzy.hio.sys.sys.org.dto.RoleAndCataDto;
import com.jzy.hio.sys.sys.org.dto.RoleNodeDto;
import com.jzy.hio.sys.sys.org.entity.RoleCatalog;
import com.jzy.hio.sys.sys.org.service.RoleCatalogService;
import com.jzy.tools.data.JacksonUtils;


/**
 * 标准角色目录控制层
 *
 * @author admin
 */
@Controller
@RequestMapping("/sys/org/roleCatalog")
@Api(tags = "标准角色目录控制层", description = "")
public class RoleCatalogController {

    private static org.slf4j.Logger log = LoggerFactory.getLogger(RoleCatalogController.class);
    @Autowired
    private RoleCatalogService roleCatalogService;

    /**
     * 根据Id获取业务对象
     *
     * @param id 业务对象主键
     * @return 业务对象
     */
    @ApiOperation(value = "根据Id获取业务对象", notes = "根据Id获取业务对象")
    @ApiImplicitParams(@ApiImplicitParam(name = "id", value = "业务对象主键", required = true, dataType = "String", paramType = "path"))
    @RequestMapping(value = "/get/{id}", method = RequestMethod.GET)
    public @ResponseBody
    MessageResult get(@PathVariable("id") String id) {
        try {
            RoleCatalog data = roleCatalogService.getObjectById(id);
            return ResponseModel.getResult(MessageInfo.GETSUCCESS, data);
        } catch (Exception e) {
            log.error("调用get方法:  【参数" + id + "】======" + "【" + e.getMessage() + "】");
            return ResponseModel.getErrorResult();
        }
    }


    /**
     * 返回分页对象
     *
     * @param map
     * @return
     */
    @ApiOperation(value = "返回分页对象", notes = "返回分页对象")
    @ApiImplicitParams({@ApiImplicitParam(paramType = "body", name = "map", value = "limit query", required = true, dataType = "Map")})
    @RequestMapping(value = "/page", method = {RequestMethod.POST}, consumes = "application/json")
    public @ResponseBody
    MessageResult page(@RequestBody Map<String, Object> map) {
        try {
            Page beanPage = roleCatalogService.getPage(map);
            return ResponseModel.getResult(MessageInfo.GETSUCCESS, beanPage);
        } catch (Exception e) {
            log.error("调用page方法:  【参数" + map + "】======" + "【" + e.getMessage() + "】");
            return ResponseModel.getErrorResult();
        }
    }

    /**
     * 返回符合条件的列表
     *
     * @param roleCatalog
     * @return
     */
    @ApiOperation(value = "返回符合条件的列表", notes = "返回符合条件的列表")
    @ApiImplicitParams({@ApiImplicitParam(paramType = "body", name = "roleCatalog", dataType = "String", value = "condition query", required = true)})
    @RequestMapping(value = "/queryList", method = {RequestMethod.POST}, consumes = "application/json")
    public @ResponseBody
    MessageResult queryList(@RequestBody RoleCatalog roleCatalog) {
        try {
            List<RoleCatalog> results = roleCatalogService.queryList(roleCatalog);
            return ResponseModel.getResult(MessageInfo.GETSUCCESS, results);
        } catch (Exception e) {
            e.printStackTrace();
            return ResponseModel.getErrorResult();
        }
    }


    /**
     * 保存实体对象
     *
     * @param roleCatalog
     * @return
     */
    @ApiOperation(value = "保存实体对象", notes = "保存实体对象")
    @ApiImplicitParams({@ApiImplicitParam(paramType = "body", name = "roleCatalog", dataType = "String", value = "condition query", required = true)})
    @RequestMapping(value = "/save", method = RequestMethod.POST, consumes = "application/json")
    public @ResponseBody
    MessageResult save(@RequestBody RoleCatalog roleCatalog) {
        try {
            int save = roleCatalogService.save(roleCatalog);
            return ResponseModel.getResult(MessageInfo.SAVESUCCESS, save);
        } catch (Exception e) {
            return ResponseModel.getErrorResult();
        }
    }

    /**
     * 删除实体对象
     *
     * @param id
     * @return
     */
    @ApiOperation(value = "删除实体对象", notes = "删除实体对象")
    @ApiImplicitParams({@ApiImplicitParam(paramType = "path", name = "id", value = " id", required = true, dataType = "String")})
    @RequestMapping(value = "/delete/{id}", method = RequestMethod.DELETE)
    public @ResponseBody
    MessageResult delete(@PathVariable("id") String id) {
        try {
            int save = roleCatalogService.deleteObjectById(id);
            return ResponseModel.getResult(MessageInfo.DELETESUCCESS, save);
        } catch (Exception e) {
            log.error("调用delete方法:  【参数" + id + "】======" + "【" + e.getMessage() + "】");
            return ResponseModel.getErrorResult();
        }
    }


    /**
     * 删除实体对象
     *
     * @param ids
     * @return
     */
    @ApiOperation(value = "删除实体对象", notes = "删除实体对象")
    @ApiImplicitParams({@ApiImplicitParam(paramType = "path", name = "ids", value = " ids", required = true, dataType = "String")})
    @RequestMapping(value = "/deleteBatch/{ids}", method = RequestMethod.DELETE)
    public @ResponseBody
    MessageResult deleteBatch(@PathVariable("ids") String ids) {
        try {
            int save = roleCatalogService.deletePseudoAllObjectByIds(Arrays.asList(ids));
            return ResponseModel.getResult(MessageInfo.DELETESUCCESS, save);
        } catch (Exception e) {
            return ResponseModel.getErrorResult();
        }
    }

    /**
     * 修改修改实体对象
     *
     * @param map {"name":"TEST_CCCCC"}  修改什么参数传递什么参数 实体对应的字段名  {"status":0}
     * @param id
     * @return
     */
    @ApiOperation(value = "修改修改实体对象", notes = "修改修改实体对象")
    @ApiImplicitParams({@ApiImplicitParam(name = "id", value = "id", required = true, dataType = "Integer", paramType = "path"), @ApiImplicitParam(name = "map", value = "thi is map", dataType = "JSON")})
    @RequestMapping(value = "/update/{id}", method = RequestMethod.PUT, consumes = "application/json")
    @OpeLogInfo(node = "角色或者标准岗位目录修改")
    public @ResponseBody
    MessageResult update(@PathVariable("id") String id, @RequestBody Map<String, Object> map) {
        try {
            RoleCatalog data = roleCatalogService.getObjectById(id);
            String json = JacksonUtils.toJson(data);
            Map<String, Object> oldMap = JacksonUtils.fromJson(json, HashMap.class);
            oldMap.putAll(map);
            String updateJson = JacksonUtils.toJson(oldMap);
            RoleCatalog fromJson = JacksonUtils.fromJson(updateJson, RoleCatalog.class);
            int updateCount = roleCatalogService.update(fromJson);
            return ResponseModel.getResult(MessageInfo.UPDATESUCCESS, updateCount);
        } catch (Exception e) {
            return ResponseModel.getErrorResult();
        }
    }

    /**
     * 获取符合条件的根目录下树列表
     *
     * @param map {"type":1}  1表示获取标准岗位；0表示获取角色
     * @return {"msg":"查询成功！","result":[{"id":"000fbb2eef694532a1rolecatalog01","code":"0001","name":"标准岗位","type":"1","sort":1,"parentId":"","status":"1","mold":"cata","children":[{"id":"028af48170e94430929a88faf48ab8c9","code":"1","name":"公司级岗位","type":"1","sort":3,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[{"id":"1c85a00774654e7ca54bf603e994ce47","code":"ddd","name":"ddd","type":"1","sort":13,"parentId":"028af48170e94430929a88faf48ab8c9","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/028af48170e94430929a88faf48ab8c9/1c85a00774654e7ca54bf603e994ce47","prefixSort":"A00001-A00003-A00013","prefixName":"标准角色/公司级岗位/ddd"},{"id":"2dabcfde70764a448db73a9150e00ea9","code":"13","name":"财务管理部","type":"1","sort":9,"parentId":"028af48170e94430929a88faf48ab8c9","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/028af48170e94430929a88faf48ab8c9/2dabcfde70764a448db73a9150e00ea9","prefixSort":"A00001-A00003-A00009","prefixName":"标准角色/公司级岗位/财务管理部"},{"id":"39393dbe8bc84878a95f0096111a19ba","code":"11","name":"总经办","type":"1","sort":8,"parentId":"028af48170e94430929a88faf48ab8c9","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/028af48170e94430929a88faf48ab8c9/39393dbe8bc84878a95f0096111a19ba","prefixSort":"A00001-A00003-A00008","prefixName":"标准角色/公司级岗位/总经办"},{"id":"3bab1004559642d7aef5c63cb632951a","code":"16","name":"工程管理部","type":"1","sort":12,"parentId":"028af48170e94430929a88faf48ab8c9","status":"1","mold":"cata","children":[{"id":"60546233f7cc47ec84dd1de4cbb1799a","code":"165","name":"配套职能","type":"1","sort":30,"parentId":"3bab1004559642d7aef5c63cb632951a","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/028af48170e94430929a88faf48ab8c9/3bab1004559642d7aef5c63cb632951a/60546233f7cc47ec84dd1de4cbb1799a","prefixSort":"A00001-A00003-A00012-A00030","prefixName":"标准角色/公司级岗位/工程管理部/配套职能"},{"id":"b8a985d3b3024f0897017aefac33daa2","code":"164","name":"工程计划职能","type":"1","sort":29,"parentId":"3bab1004559642d7aef5c63cb632951a","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/028af48170e94430929a88faf48ab8c9/3bab1004559642d7aef5c63cb632951a/b8a985d3b3024f0897017aefac33daa2","prefixSort":"A00001-A00003-A00012-A00029","prefixName":"标准角色/公司级岗位/工程管理部/工程计划职能"}],"prefixId":"000fbb2eef694532a1rolecatalog01/028af48170e94430929a88faf48ab8c9/3bab1004559642d7aef5c63cb632951a","prefixSort":"A00001-A00003-A00012","prefixName":"标准角色/公司级岗位/工程管理部"},{"id":"50f61dfccfc944d8bc1ac314246c90df","code":"17","name":"设计管理部","type":"1","sort":78,"parentId":"028af48170e94430929a88faf48ab8c9","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/028af48170e94430929a88faf48ab8c9/50f61dfccfc944d8bc1ac314246c90df","prefixSort":"A00001-A00003-A00078","prefixName":"标准角色/公司级岗位/设计管理部"},{"id":"8c07dcf1b30e4554943b396f0184280f","code":"14","name":"成本管理部","type":"1","sort":10,"parentId":"028af48170e94430929a88faf48ab8c9","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/028af48170e94430929a88faf48ab8c9/8c07dcf1b30e4554943b396f0184280f","prefixSort":"A00001-A00003-A00010","prefixName":"标准角色/公司级岗位/成本管理部"},{"id":"9aa89719e4af4483be7d8a48e381c067","code":"15","name":"营销管理部","type":"1","sort":11,"parentId":"028af48170e94430929a88faf48ab8c9","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/028af48170e94430929a88faf48ab8c9/9aa89719e4af4483be7d8a48e381c067","prefixSort":"A00001-A00003-A00011","prefixName":"标准角色/公司级岗位/营销管理部"},{"id":"b75c998fae604c528e3d52a25b62d221","code":"12","name":"行政与人力资源部","type":"1","sort":7,"parentId":"028af48170e94430929a88faf48ab8c9","status":"1","mold":"cata","children":[{"id":"437db4bf991746c0830736cb7f32c96f","code":"124","name":"人事职能","type":"1","sort":28,"parentId":"b75c998fae604c528e3d52a25b62d221","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/028af48170e94430929a88faf48ab8c9/b75c998fae604c528e3d52a25b62d221/437db4bf991746c0830736cb7f32c96f","prefixSort":"A00001-A00003-A00007-A00028","prefixName":"标准角色/公司级岗位/行政与人力资源部/人事职能"},{"id":"88a252fce5dd4386ab1078a7493e1ef6","code":"123","name":"行政职能","type":"1","sort":27,"parentId":"b75c998fae604c528e3d52a25b62d221","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/028af48170e94430929a88faf48ab8c9/b75c998fae604c528e3d52a25b62d221/88a252fce5dd4386ab1078a7493e1ef6","prefixSort":"A00001-A00003-A00007-A00027","prefixName":"标准角色/公司级岗位/行政与人力资源部/行政职能"}],"prefixId":"000fbb2eef694532a1rolecatalog01/028af48170e94430929a88faf48ab8c9/b75c998fae604c528e3d52a25b62d221","prefixSort":"A00001-A00003-A00007","prefixName":"标准角色/公司级岗位/行政与人力资源部"}],"prefixId":"000fbb2eef694532a1rolecatalog01/028af48170e94430929a88faf48ab8c9","prefixSort":"A00001-A00003","prefixName":"标准角色/公司级岗位"},{"id":"0ca0745a491b40e4bfc1f1c475db58be","code":"4","name":"商管公司目前树不出横向滚动条了，只显示···，但是会有问题，主数据组织和角色都有编辑图标，显示···就看不到图标了，请修改","type":"1","sort":75,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[{"id":"003acfa68d4c4874a779c270befcda10","code":"46","name":"招商营运部","type":"1","sort":26,"parentId":"0ca0745a491b40e4bfc1f1c475db58be","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/0ca0745a491b40e4bfc1f1c475db58be/003acfa68d4c4874a779c270befcda10","prefixSort":"A00001-A00075-A00026","prefixName":"标准角色/商管公司目前树不出横向滚动条了，只显示···，但是会有问题，主数据组织和角色都有编辑图标，显示···就看不到图标了，请修改/招商营运部"},{"id":"05a64c749b9f415b9b97c63210bcad1c","code":"44","name":"工程物业部","type":"1","sort":24,"parentId":"0ca0745a491b40e4bfc1f1c475db58be","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/0ca0745a491b40e4bfc1f1c475db58be/05a64c749b9f415b9b97c63210bcad1c","prefixSort":"A00001-A00075-A00024","prefixName":"标准角色/商管公司目前树不出横向滚动条了，只显示···，但是会有问题，主数据组织和角色都有编辑图标，显示···就看不到图标了，请修改/工程物业部"},{"id":"471c8d12af144283bb1a03acdb656e9b","code":"45","name":"企划部","type":"1","sort":25,"parentId":"0ca0745a491b40e4bfc1f1c475db58be","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/0ca0745a491b40e4bfc1f1c475db58be/471c8d12af144283bb1a03acdb656e9b","prefixSort":"A00001-A00075-A00025","prefixName":"标准角色/商管公司目前树不出横向滚动条了，只显示···，但是会有问题，主数据组织和角色都有编辑图标，显示···就看不到图标了，请修改/企划部"},{"id":"a67ce58553f04386b7e072b22fae3858","code":"43","name":"人事行政部","type":"1","sort":23,"parentId":"0ca0745a491b40e4bfc1f1c475db58be","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/0ca0745a491b40e4bfc1f1c475db58be/a67ce58553f04386b7e072b22fae3858","prefixSort":"A00001-A00075-A00023","prefixName":"标准角色/商管公司目前树不出横向滚动条了，只显示···，但是会有问题，主数据组织和角色都有编辑图标，显示···就看不到图标了，请修改/人事行政部"},{"id":"dfd43dac750041488408d030af5fba74","code":"42","name":"财务部","type":"1","sort":22,"parentId":"0ca0745a491b40e4bfc1f1c475db58be","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/0ca0745a491b40e4bfc1f1c475db58be/dfd43dac750041488408d030af5fba74","prefixSort":"A00001-A00075-A00022","prefixName":"标准角色/商管公司目前树不出横向滚动条了，只显示···，但是会有问题，主数据组织和角色都有编辑图标，显示···就看不到图标了，请修改/财务部"},{"id":"e2e3d0bda8054d17bb240a895f347c90","code":"41","name":"总经办","type":"1","sort":21,"parentId":"0ca0745a491b40e4bfc1f1c475db58be","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/0ca0745a491b40e4bfc1f1c475db58be/e2e3d0bda8054d17bb240a895f347c90","prefixSort":"A00001-A00075-A00021","prefixName":"标准角色/商管公司目前树不出横向滚动条了，只显示···，但是会有问题，主数据组织和角色都有编辑图标，显示···就看不到图标了，请修改/总经办"}],"prefixId":"000fbb2eef694532a1rolecatalog01/0ca0745a491b40e4bfc1f1c475db58be","prefixSort":"A00001-A00075","prefixName":"标准角色/商管公司目前树不出横向滚动条了，只显示···，但是会有问题，主数据组织和角色都有编辑图标，显示···就看不到图标了，请修改"},{"id":"119df1f0e9194d34b2aa73c2ad5b8676","code":"3","name":"集团级岗位","type":"1","sort":5,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[{"id":"33cb13c6c65441f584860aaae63f0c81","code":"37","name":"总裁办","type":"1","sort":19,"parentId":"119df1f0e9194d34b2aa73c2ad5b8676","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/33cb13c6c65441f584860aaae63f0c81","prefixSort":"A00001-A00005-A00019","prefixName":"标准角色/集团级岗位/总裁办"},{"id":"37b5760b492b4fd197fd63ccb8498b7d","code":"jtcw","name":"集团财务","type":"1","sort":59,"parentId":"119df1f0e9194d34b2aa73c2ad5b8676","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/37b5760b492b4fd197fd63ccb8498b7d","prefixSort":"A00001-A00005-A00059","prefixName":"标准角色/集团级岗位/集团财务"},{"id":"3ba0e01cb9594803a81b69d380cf2ceb","code":"31","name":"品质监管部","type":"1","sort":14,"parentId":"119df1f0e9194d34b2aa73c2ad5b8676","status":"1","mold":"cata","children":[{"id":"0c1a08ad836b41c8b4432b9b2b59b37f","code":"135","name":"服务品质监管职能","type":"1","sort":33,"parentId":"3ba0e01cb9594803a81b69d380cf2ceb","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/3ba0e01cb9594803a81b69d380cf2ceb/0c1a08ad836b41c8b4432b9b2b59b37f","prefixSort":"A00001-A00005-A00014-A00033","prefixName":"标准角色/集团级岗位/品质监管部/服务品质监管职能"},{"id":"0cb005eb4adf4f869f93af55264235d4","code":"313","name":"产品品质（南区）","type":"1","sort":31,"parentId":"3ba0e01cb9594803a81b69d380cf2ceb","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/3ba0e01cb9594803a81b69d380cf2ceb/0cb005eb4adf4f869f93af55264235d4","prefixSort":"A00001-A00005-A00014-A00031","prefixName":"标准角色/集团级岗位/品质监管部/产品品质（南区）"},{"id":"5fa333c9624b46eb946027bdfb37ff25","code":"314","name":"产品品质（北区）","type":"1","sort":32,"parentId":"3ba0e01cb9594803a81b69d380cf2ceb","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/3ba0e01cb9594803a81b69d380cf2ceb/5fa333c9624b46eb946027bdfb37ff25","prefixSort":"A00001-A00005-A00014-A00032","prefixName":"标准角色/集团级岗位/品质监管部/产品品质（北区）"}],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/3ba0e01cb9594803a81b69d380cf2ceb","prefixSort":"A00001-A00005-A00014","prefixName":"标准角色/集团级岗位/品质监管部"},{"id":"43bed35b5d29479195e9adf69070f733","code":"39","name":"审计监察部","type":"1","sort":56,"parentId":"119df1f0e9194d34b2aa73c2ad5b8676","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/43bed35b5d29479195e9adf69070f733","prefixSort":"A00001-A00005-A00056","prefixName":"标准角色/集团级岗位/审计监察部"},{"id":"63e62ba97cd0427a8d8f0474a3061070","code":"34","name":"人力行政部","type":"1","sort":17,"parentId":"119df1f0e9194d34b2aa73c2ad5b8676","status":"1","mold":"cata","children":[{"id":"27f2bb3f7e6642eb8ce7304d04317727","code":"343","name":"考核职能","type":"1","sort":41,"parentId":"63e62ba97cd0427a8d8f0474a3061070","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/63e62ba97cd0427a8d8f0474a3061070/27f2bb3f7e6642eb8ce7304d04317727","prefixSort":"A00001-A00005-A00017-A00041","prefixName":"标准角色/集团级岗位/人力行政部/考核职能"},{"id":"f99a0c308b194149b66ceb8e538f1ea0","code":"342","name":"人力资源职能","type":"1","sort":40,"parentId":"63e62ba97cd0427a8d8f0474a3061070","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/63e62ba97cd0427a8d8f0474a3061070/f99a0c308b194149b66ceb8e538f1ea0","prefixSort":"A00001-A00005-A00017-A00040","prefixName":"标准角色/集团级岗位/人力行政部/人力资源职能"}],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/63e62ba97cd0427a8d8f0474a3061070","prefixSort":"A00001-A00005-A00017","prefixName":"标准角色/集团级岗位/人力行政部"},{"id":"71ddf0d5f27a4111be609d54990d4dab","code":"jtcb","name":"集团成本","type":"1","sort":57,"parentId":"119df1f0e9194d34b2aa73c2ad5b8676","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/71ddf0d5f27a4111be609d54990d4dab","prefixSort":"A00001-A00005-A00057","prefixName":"标准角色/集团级岗位/集团成本"},{"id":"8381aa7670ab4ac582104b2cf831d118","code":"33","name":"品牌文化部","type":"1","sort":16,"parentId":"119df1f0e9194d34b2aa73c2ad5b8676","status":"1","mold":"cata","children":[{"id":"93a2a242f37f4ee3a23cf14c26643e8a","code":"333","name":"行政后勤管理职能","type":"1","sort":37,"parentId":"8381aa7670ab4ac582104b2cf831d118","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/8381aa7670ab4ac582104b2cf831d118/93a2a242f37f4ee3a23cf14c26643e8a","prefixSort":"A00001-A00005-A00016-A00037","prefixName":"标准角色/集团级岗位/品牌文化部/行政后勤管理职能"},{"id":"b355409618b647fcb21decddee2a1c15","code":"334","name":"企业文化职能","type":"1","sort":38,"parentId":"8381aa7670ab4ac582104b2cf831d118","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/8381aa7670ab4ac582104b2cf831d118/b355409618b647fcb21decddee2a1c15","prefixSort":"A00001-A00005-A00016-A00038","prefixName":"标准角色/集团级岗位/品牌文化部/企业文化职能"},{"id":"c74de8c03ee24ddb99d19380cce83551","code":"335","name":"品牌管理职能","type":"1","sort":39,"parentId":"8381aa7670ab4ac582104b2cf831d118","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/8381aa7670ab4ac582104b2cf831d118/c74de8c03ee24ddb99d19380cce83551","prefixSort":"A00001-A00005-A00016-A00039","prefixName":"标准角色/集团级岗位/品牌文化部/品牌管理职能"}],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/8381aa7670ab4ac582104b2cf831d118","prefixSort":"A00001-A00005-A00016","prefixName":"标准角色/集团级岗位/品牌文化部"},{"id":"8862b3ff555745dfa8fb2b1968a364aa","code":"36","name":"信息管理部","type":"1","sort":18,"parentId":"119df1f0e9194d34b2aa73c2ad5b8676","status":"1","mold":"cata","children":[{"id":"29412d9f260e4c83929e1148aaaecfc7","code":"352","name":"业务管理职能","type":"1","sort":42,"parentId":"8862b3ff555745dfa8fb2b1968a364aa","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/8862b3ff555745dfa8fb2b1968a364aa/29412d9f260e4c83929e1148aaaecfc7","prefixSort":"A00001-A00005-A00018-A00042","prefixName":"标准角色/集团级岗位/信息管理部/业务管理职能"},{"id":"4c4f8fd140914d7e9fac62efd246c9ad","code":"353","name":"网络管理职能","type":"1","sort":43,"parentId":"8862b3ff555745dfa8fb2b1968a364aa","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/8862b3ff555745dfa8fb2b1968a364aa/4c4f8fd140914d7e9fac62efd246c9ad","prefixSort":"A00001-A00005-A00018-A00043","prefixName":"标准角色/集团级岗位/信息管理部/网络管理职能"},{"id":"dfe12041f168470fbe69522261e90f71","code":"354","name":"流程及数据分析职能","type":"1","sort":44,"parentId":"8862b3ff555745dfa8fb2b1968a364aa","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/8862b3ff555745dfa8fb2b1968a364aa/dfe12041f168470fbe69522261e90f71","prefixSort":"A00001-A00005-A00018-A00044","prefixName":"标准角色/集团级岗位/信息管理部/流程及数据分析职能"}],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/8862b3ff555745dfa8fb2b1968a364aa","prefixSort":"A00001-A00005-A00018","prefixName":"标准角色/集团级岗位/信息管理部"},{"id":"98db85d7ca2c44538b29ef54ff22f2f7","code":"37","name":"董事会","type":"1","sort":51,"parentId":"119df1f0e9194d34b2aa73c2ad5b8676","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/98db85d7ca2c44538b29ef54ff22f2f7","prefixSort":"A00001-A00005-A00051","prefixName":"标准角色/集团级岗位/董事会"},{"id":"b6e73f13d5d64ceca59f92e33a88bb6f","code":"18","name":"设计管理部","type":"1","sort":52,"parentId":"119df1f0e9194d34b2aa73c2ad5b8676","status":"1","mold":"cata","children":[{"id":"d494ffe4a8344da083abec089b8d55bb","code":"187","name":"标准化及机电设计职能","type":"1","sort":55,"parentId":"b6e73f13d5d64ceca59f92e33a88bb6f","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/b6e73f13d5d64ceca59f92e33a88bb6f/d494ffe4a8344da083abec089b8d55bb","prefixSort":"A00001-A00005-A00052-A00055","prefixName":"标准角色/集团级岗位/设计管理部/标准化及机电设计职能"},{"id":"e7f6036558484ab8a06d18d5b127e1c7","code":"186","name":"装饰景观设计职能","type":"1","sort":54,"parentId":"b6e73f13d5d64ceca59f92e33a88bb6f","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/b6e73f13d5d64ceca59f92e33a88bb6f/e7f6036558484ab8a06d18d5b127e1c7","prefixSort":"A00001-A00005-A00052-A00054","prefixName":"标准角色/集团级岗位/设计管理部/装饰景观设计职能"},{"id":"f17a1efc6efb441b9b181a9d7e65722a","code":"185","name":"建筑设计职能","type":"1","sort":53,"parentId":"b6e73f13d5d64ceca59f92e33a88bb6f","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/b6e73f13d5d64ceca59f92e33a88bb6f/f17a1efc6efb441b9b181a9d7e65722a","prefixSort":"A00001-A00005-A00052-A00053","prefixName":"标准角色/集团级岗位/设计管理部/建筑设计职能"}],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/b6e73f13d5d64ceca59f92e33a88bb6f","prefixSort":"A00001-A00005-A00052","prefixName":"标准角色/集团级岗位/设计管理部"},{"id":"decf13de8b6a4803b6db7ae80ee16145","code":"32","name":"法律事务部","type":"1","sort":15,"parentId":"119df1f0e9194d34b2aa73c2ad5b8676","status":"1","mold":"cata","children":[{"id":"3bf5b03c1794409ea03a52d0bd07f2b5","code":"323","name":"集团运营法务职能","type":"1","sort":36,"parentId":"decf13de8b6a4803b6db7ae80ee16145","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/decf13de8b6a4803b6db7ae80ee16145/3bf5b03c1794409ea03a52d0bd07f2b5","prefixSort":"A00001-A00005-A00015-A00036","prefixName":"标准角色/集团级岗位/法律事务部/集团运营法务职能"},{"id":"6b9eb923b44146da9cc82309f53dbdcc","code":"322","name":"集团诉讼法务职能","type":"1","sort":35,"parentId":"decf13de8b6a4803b6db7ae80ee16145","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/decf13de8b6a4803b6db7ae80ee16145/6b9eb923b44146da9cc82309f53dbdcc","prefixSort":"A00001-A00005-A00015-A00035","prefixName":"标准角色/集团级岗位/法律事务部/集团诉讼法务职能"},{"id":"759943e968ce42ddac67193d6c7a42cc","code":"321","name":"集团综合法务职能","type":"1","sort":34,"parentId":"decf13de8b6a4803b6db7ae80ee16145","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/decf13de8b6a4803b6db7ae80ee16145/759943e968ce42ddac67193d6c7a42cc","prefixSort":"A00001-A00005-A00015-A00034","prefixName":"标准角色/集团级岗位/法律事务部/集团综合法务职能"}],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676/decf13de8b6a4803b6db7ae80ee16145","prefixSort":"A00001-A00005-A00015","prefixName":"标准角色/集团级岗位/法律事务部"}],"prefixId":"000fbb2eef694532a1rolecatalog01/119df1f0e9194d34b2aa73c2ad5b8676","prefixSort":"A00001-A00005","prefixName":"标准角色/集团级岗位"},{"id":"1245c1e3fb6f4a33b04d5f66c4b69efe","code":"ccdd","name":"ccdd","type":"1","sort":84,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/1245c1e3fb6f4a33b04d5f66c4b69efe","prefixSort":"A00001-A00084","prefixName":"标准角色/ccdd"},{"id":"229ab827f2054c5ba3b63bafb24d2a60","code":"aaa","name":"aaa","type":"1","sort":92,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/229ab827f2054c5ba3b63bafb24d2a60","prefixSort":"A00001-A00092","prefixName":"标准角色/aaa"},{"id":"34ec04ee048547ddbce0d06ccd53d2a4","code":"www1","name":"www","type":"1","sort":80,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[{"id":"0709e8943cf54bdaa7859ddfc6df1e68","code":"fdghgd","name":"第三方公司的风格","type":"1","sort":91,"parentId":"34ec04ee048547ddbce0d06ccd53d2a4","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/34ec04ee048547ddbce0d06ccd53d2a4/0709e8943cf54bdaa7859ddfc6df1e68","prefixSort":"A00001-A00080-A00091","prefixName":"标准角色/www/第三方公司的风格"},{"id":"327399308a3e43e5bf4b317e70beca11","code":"stkkk","name":"stkkk","type":"1","sort":81,"parentId":"34ec04ee048547ddbce0d06ccd53d2a4","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/34ec04ee048547ddbce0d06ccd53d2a4/327399308a3e43e5bf4b317e70beca11","prefixSort":"A00001-A00080-A00081","prefixName":"标准角色/www/stkkk"},{"id":"73ec13efc522493c97145f7d4fc3a702","code":"fdvcvxcv","name":"cxcvxcvcvv","type":"1","sort":88,"parentId":"34ec04ee048547ddbce0d06ccd53d2a4","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/34ec04ee048547ddbce0d06ccd53d2a4/73ec13efc522493c97145f7d4fc3a702","prefixSort":"A00001-A00080-A00088","prefixName":"标准角色/www/cxcvxcvcvv"},{"id":"7815bfa592244178bd24c2a5c0c56375","code":"dsfdsfsd","name":"gsdfgsg","type":"1","sort":86,"parentId":"34ec04ee048547ddbce0d06ccd53d2a4","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/34ec04ee048547ddbce0d06ccd53d2a4/7815bfa592244178bd24c2a5c0c56375","prefixSort":"A00001-A00080-A00086","prefixName":"标准角色/www/gsdfgsg"},{"id":"8155c88c812e4e5ca9ed552107b10345","code":"sdfsds","name":"sdfgsdfgfg","type":"1","sort":90,"parentId":"34ec04ee048547ddbce0d06ccd53d2a4","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/34ec04ee048547ddbce0d06ccd53d2a4/8155c88c812e4e5ca9ed552107b10345","prefixSort":"A00001-A00080-A00090","prefixName":"标准角色/www/sdfgsdfgfg"},{"id":"b74116e975de44148d929060b3a8b369","code":"dvcvxcv","name":"xcvcvbxcv","type":"1","sort":87,"parentId":"34ec04ee048547ddbce0d06ccd53d2a4","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/34ec04ee048547ddbce0d06ccd53d2a4/b74116e975de44148d929060b3a8b369","prefixSort":"A00001-A00080-A00087","prefixName":"标准角色/www/xcvcvbxcv"},{"id":"ca32e39b4ab344c294d048c99a0cd24b","code":"fdvcvxcv1","name":"cxcvxcvcvv1","type":"1","sort":89,"parentId":"34ec04ee048547ddbce0d06ccd53d2a4","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/34ec04ee048547ddbce0d06ccd53d2a4/ca32e39b4ab344c294d048c99a0cd24b","prefixSort":"A00001-A00080-A00089","prefixName":"标准角色/www/cxcvxcvcvv1"}],"prefixId":"000fbb2eef694532a1rolecatalog01/34ec04ee048547ddbce0d06ccd53d2a4","prefixSort":"A00001-A00080","prefixName":"标准角色/www"},{"id":"487e3eebce8441abac1f774e24367e5d","code":"2","name":"项目级岗位","type":"1","sort":4,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/487e3eebce8441abac1f774e24367e5d","prefixSort":"A00001-A00004","prefixName":"标准角色/项目级岗位"},{"id":"676992566def4144a539c991bd9c7a64","code":"hbqy","name":"华北区域","type":"1","sort":93,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/676992566def4144a539c991bd9c7a64","prefixSort":"A00001-A00093","prefixName":"标准角色/华北区域"},{"id":"699cb47c0fcf428eb630d7e70e392acf","code":"aaa","name":"pl的标准测试","type":"1","sort":96,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/699cb47c0fcf428eb630d7e70e392acf","prefixSort":"A00001-A00096","prefixName":"标准角色/pl的标准测试"},{"id":"708810ede0334a13b6b76624958cd0dd","code":"ggg","name":"sdsdsdsd","type":"1","sort":76,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/708810ede0334a13b6b76624958cd0dd","prefixSort":"A00001-A00076","prefixName":"标准角色/sdsdsdsd"},{"id":"90837ca45a7e4212b6e312d1bb7f4baf","code":"mmdd","name":"mmdd","type":"1","sort":82,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/90837ca45a7e4212b6e312d1bb7f4baf","prefixSort":"A00001-A00082","prefixName":"标准角色/mmdd"},{"id":"91456bc0860346e79b24124557fcca4e","code":"www1","name":"www1","type":"1","sort":65,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/91456bc0860346e79b24124557fcca4e","prefixSort":"A00001-A00065","prefixName":"标准角色/www1"},{"id":"b26e56bb5b594b35949a1c7dc342135f","code":"aa","name":"pp的标准岗位测试","type":"1","sort":95,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/b26e56bb5b594b35949a1c7dc342135f","prefixSort":"A00001-A00095","prefixName":"标准角色/pp的标准岗位测试"},{"id":"baf2e05200a9403fb524208e449c9ef7","code":"eeff","name":"eeff","type":"1","sort":85,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/baf2e05200a9403fb524208e449c9ef7","prefixSort":"A00001-A00085","prefixName":"标准角色/eeff"},{"id":"cca1d41fd0de429995327802a661c862","code":"zzz","name":"zzz","type":"1","sort":6,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/cca1d41fd0de429995327802a661c862","prefixSort":"A00001-A00006","prefixName":"标准角色/zzz"},{"id":"d9a5f223a11a464d81dfb2f7ac0c5aa1","code":"测试目录","name":"测试目录","type":"1","sort":79,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/d9a5f223a11a464d81dfb2f7ac0c5aa1","prefixSort":"A00001-A00079","prefixName":"标准角色/测试目录"},{"id":"ebe856052bdf4505bbc4303d4a015aa4","code":"aabb","name":"aabb","type":"1","sort":83,"parentId":"000fbb2eef694532a1rolecatalog01","status":"1","mold":"cata","children":[],"prefixId":"000fbb2eef694532a1rolecatalog01/ebe856052bdf4505bbc4303d4a015aa4","prefixSort":"A00001-A00083","prefixName":"标准角色/aabb"}],"prefixId":"000fbb2eef694532a1rolecatalog01","prefixSort":"A00001","prefixName":"标准角色"}],"success":true}
     */
    @ApiOperation(value = "获取符合条件的根目录下树列表", notes = "获取符合条件的根目录下树列表")
    @ApiImplicitParams({@ApiImplicitParam(paramType = "body", name = "map", value = "limit query", required = true, dataType = "Map")})
    @RequestMapping(value = "/getRoleTree", method = {RequestMethod.POST}, consumes = "application/json")
    public @ResponseBody
    MessageResult getRoleTree(@RequestBody Map<String, Object> map) {
        try {
            List<RoleNodeDto> save = roleCatalogService.getRoleTree(map);
            return ResponseModel.getResult(MessageInfo.QUERYSUCCESS, save);
        } catch (Exception e) {
            return ResponseModel.getErrorResult();
        }
    }

    /**
     * 保存角色目录或者角色实体对象
     *
     * @param t {"id":"4f6c17a6e717475c9a8e13a7afed180f","code":"kimchou测试标准岗位新增","name":"kimchou测试标准岗位001","type":"true","catalogId":"028af48170e94430929a88faf48ab8c9","mold":"role","status":"1","remark":"TEST","delflag":false}
     * @return {"msg":"保存成功！","result":1,"success":true}
     */
    @ApiOperation(value = "保存角色目录或者角色实体对象", notes = "保存角色目录或者角色实体对象")
    @ApiImplicitParams({@ApiImplicitParam(paramType = "body", name = "t", dataType = "String", value = "condition query", required = true)})
    @RequestMapping(value = "/saveByMold", method = RequestMethod.POST, consumes = "application/json")
    @OpeLogInfo(node = "角色、角色目录或者标准岗位、标准岗位目录新增", sysCode = "PT")
    public @ResponseBody
    MessageResult saveByMold(@RequestBody RoleAndCataDto t) {
        try {
            int save = roleCatalogService.saveRoleOrCata(t);
            return ResponseModel.getResult(MessageInfo.SAVESUCCESS, save);
        } catch (Exception e) {
            return ResponseModel.getErrorResult();
        }
    }

    /**
     * 伪删除实体对象
     *
     * @param id
     * @return
     */
    @ApiOperation(value = "伪删除实体对象", notes = "伪删除实体对象")
    @ApiImplicitParams({@ApiImplicitParam(paramType = "path", name = "id", value = " id", required = true, dataType = "String")})
    @RequestMapping(value = "/deletePseudo/{id}", method = RequestMethod.DELETE)
    @OpeLogInfo(node = "角色目录删除")
    public @ResponseBody
    MessageResult deletePseudo(@PathVariable("id") String id) {
        try {
            int save = roleCatalogService.deleteObjectById(id);
            return ResponseModel.getResult(MessageInfo.DELETESUCCESS, save);
        } catch (Exception e) {
            return ResponseModel.getErrorResult();
        }
    }

}
