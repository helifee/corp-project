package com.jzy.hio.crm.service;

import java.util.List;

import com.jzy.hio.base.service.BaseService;
import com.jzy.hio.crm.dto.CrmCustomerOpportunitiesDto;
import com.jzy.hio.crm.dto.CrmOpportunityProductDto;
import com.jzy.hio.crm.dto.CrmStatisticalCountDto;
import com.jzy.hio.crm.param.CrmCustomerOpportunitiesParam;
import com.jzy.hio.crm.dto.CrmStatusCountDto;
import com.jzy.hio.crm.param.CrmOpportunitySearchParam;
import com.jzy.hio.crm.utils.PageResult;
import com.jzy.hio.entity.CrmCustomerOpportunities;

/**
 * 商机
 * @author 
 *
 */
public interface CrmCustomerOpportunitiesService extends BaseService<CrmCustomerOpportunities> {

	/**
	 * 保存和修改商机及商机产品
	 * @param opportunityProductDto
	 * @return
	 */
	boolean saveCustomerOpportunities(CrmCustomerOpportunitiesDto customerOpportunitiesDto);
	
	/**
	 * 查询商机及商机产品
	 * @param id
	 * @return
	 */
	CrmCustomerOpportunitiesDto selectCustomerOpportunities(String id);
	
	/**
	 * 删除 商机及商机产品
	 * @param id
	 * @return
	 */
	int deleteCustomerOpportunities(String id);
	
	/**
	 * 根据商机id 查询 商机下产品
	 * @param opportunityId
	 * @return
	 */
	List<CrmOpportunityProductDto> selectProductByOpportunityId(String opportunityId);

	/**
	 * 商机分页
	 * @param opportunitySearchParam
	 * @return
	 */
	PageResult getPageOpportunities(CrmOpportunitySearchParam opportunitySearchParam);


    /**
     * 查询商机各个阶段数量
     * @param uid
     * @param customerId
     */
    List<CrmStatusCountDto> queryCountGoupByStage(String uid, String customerId);


    List<CrmCustomerOpportunitiesDto> queryOpportunities(String userId);

	PageResult queryAll(CrmCustomerOpportunitiesParam crmCustomerOpportunitiesParam);

	/**
	 * 商机详情数量查询
	 * @param customerId
	 * @param opportunityId
	 * @return
	 */
	CrmStatisticalCountDto queryStatistical(String customerId, String opportunityId);

	/**
	 * 同一客户下商机名称不能重复
	 * @param id 可为空，新增的时候传空
	 * @param customerId 客户id
	 * @param name
	 * @return
	 */
	boolean queryOpportunityNameCanUse(String id, String customerId, String name);
	
}
