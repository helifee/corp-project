<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>查询条件</title>
<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
<link rel="stylesheet" href="/static/hr/common/multiselect/multiple-select.css" />
<link rel="stylesheet" href="/static/hr/common/querycondition/query-condition.css" />
	<style>
		.ms-parent .form-control .multiple-select .addInputWidth1{
			height:auto!important;
		}
	</style>
</head>

<body>
	<div class="query-condition clearfix">
		<div class="common-condition">
			<table class="condition-table">
				<tr>
					<th><label>姓名/拼音/手机号</label></th>
					<td><input id="personInfo" type="text" class="form-control addInputWidth1" name="personInfo"
						placeholder="姓名/拼音/手机号"></td>
					<th><label>所属机构</label></th>
					<td>
						<div class="input-group form-date">
							<input id="orgId" type="hidden" class="form-control" name="orgId"> 
							<input id="orgName" type="text" class="form-control addInputWidth" name="orgName" placeholder="所属机构">
							<div class="input-group-addon">
								<a class="glyphicon glyphicon-remove" onclick="javascript:$(this).parent().siblings('input').val('');"></a>
							</div>
							<span class="input-group-addon w28 " data-title="选择机构" id="selectOrg">
								<a class="fa fa-ellipsis-h" aria-hidden="true"></a>
							</span>
						</div>
					</td>
					<th style="display: none;" class="hiddenTd"><label></label></th>
					<td style="display: none;position:relative;z-index:3" class="hiddenTd input-group"></td>
				</tr>
				<tr>
					<th style="display: none;" class="hiddenTd"><label class="mt10"></label></th>
					<td style="display: none;" class="hiddenTd input-group mt10"></td>
					<th style="display: none;" class="hiddenTd"><label class="mt10"></label></th>
					<td style="display: none;" class="hiddenTd input-group mt10"></td>
					<th style="display: none;" class="hiddenTd"><label class="mt10"></label></th>
					<td style="display: none;" class="hiddenTd input-group mt10"></td>
				</tr>
			</table>

			<div id="queryToolBar" class="query-right">
				<button id="collapseSearchBtn" class="btn btn-sm span-senior pull-right" style="width: 60px">
					<span id="collapseSearchSpan" style="text-align: center; color: #0080ff; font-weight: bold;">展开</span> <i
						class="fa fa-angle-down" aria-hidden="true"></i>
				</button>
				<button id="resetConditionBtn" class="btn-sm btn-senior pull-right">
					<i class="fa fa-refresh" aria-hidden="true"></i> <span style="text-align: center;">重置</span>
				</button>
				<button id="searchFormBtn" class="btn-sm btn-senior pull-right">
					<i class="fa fa-search" aria-hidden="true"></i> <span style="text-align: center;">查询</span>
				</button>
				<div class="dropdown pull-right">
					<button id="seniorSearchFormBtn" style="display: none;" class="btn-sm btn-senior dropdown-toggle hiddenTd"
						data-toggle="dropdown">
						高级查询 <span class="caret"></span>
					</button>
					<ul class="dropdown-menu" role="menu" aria-labelledby="seniorSearchFormBtn" style="width:170px">
					</ul>
				</div>

			</div>
		</div>

	</div>
</body>

<link rel="stylesheet" type="text/css" media="all" href="/static/hr/common/daterangepicker/daterangepicker.css" />
<link href="/static/common/utils/autocomplete.css" rel="stylesheet">
<script type="text/javascript" src="/static/common/utils/autocomplete.js"></script>
<script type="text/javascript" src="/static/hr/common/daterangepicker/moment.js"></script>
<script type="text/javascript" src="/static/hr/common/daterangepicker/daterangepicker.js"></script>
<script type="text/javascript" src="/static/hr/common/multiselect/multiple-select.js"></script>
<script>
	//查询输入框增加自动完成功能
	/* $("#orgName").erpListAutoComplete({
		searchUrl : {
			url : "/paltform-app/org/orgRoot/getTree?random="+ Date.now(),
			type : "POST",
			contentType: "application/json",
			dataType:"JSON",
			data:'{}'
		}
	}); */
    $(function(){
        $('#selectOrg').hrxljMultipleSelectorReset({
            title: '选择机构',//选择器标题，默认是'选择组织机构'
            // selectorPersonType: 'org',
            selectorType: 'org',//选择器类型，默认是组织机构选择器
            immediatelyShow: false,//是否立即显示选择器，用于js调用判断,默认false,使用click触发
            gridTitle: '',//列表标题，默认是'组织列表'
            treeUrl: null,
            treeParam: null,//生成zTree树的参数
            targetId: 'orgId',//选择的数据的ID存储input域ID
            targetName: 'orgName',//选择的数据的Name存储input域ID
            targetPrefixId: null,//选择的数据的PrefixId存储input域ID
            targetPrefixName: null,//选择的数据的PrefixName存储input域ID
            targetCode: null,//选择数据的编码存储input域ID
            noSelectedDataTip: null,
            selectNodeType: {},//JSON格式,可选节点,其中msg为固定key，显示选择错误提示之用
            // 例：{
            //      msg:'请选择分期',
            //      type:'branch',//指定分期可选
            //      type:'dept',//指定部门可选
            //      type:'company',//指定公司可选
            //      type:'group',//指定项目可选
            //      type:'person',//指定人员可选
            //      type:'post',//指定岗位可选
            //      mold:'role'//指定角色可选
            // }
            /**
             * 保存回调函数
             * @param selectedData 已选择的数据json对象
             * @param ele 绑定选择器的对象
             */
            saveCallback: orgCallback,
            treeSettings: {}
        });
    });
    function orgCallback(data) {
    	console.info("角色机构树---------------------"+data);
        var orgId="";
        var orgName="";
        for(var i=0;i<data.length;i++){
            orgId+=data[i].id+",";
            orgName+=data[i].name+",";
        }
        orgId = orgId.substring(0, orgId.length - 1);
        orgName = orgName.substring(0, orgName.length - 1);
        $('#orgId').val(orgId);
        $('#orgName').val(orgName);
    }
	$(window).resize(function () {
		var rWinWidth = $(".common-condition").width();
		var rWinHeight = $(".condition-table").height();
		if(rWinWidth <= 1125 || rWinHeight <= 50) {
			$("#queryToolBar").css({
				'margin-top':'0px'
			});
		} else {
			$("#queryToolBar").css({
				'margin-top':'40px'
			});
		}
    });
</script>
</html>
