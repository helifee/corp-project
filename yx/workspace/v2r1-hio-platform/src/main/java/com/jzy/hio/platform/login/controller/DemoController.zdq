package com.jzy.hio.platform.login.controller;

import java.security.Principal;
import java.util.List;

import javax.servlet.http.HttpServletRequest;

import com.jzy.hio.platform.dto.userinfo.ImUserInfoDto;
import com.jzy.hio.platform.login.service.UserService;
import com.jzy.hio.platform.userinfo.service.UserInfoService;
import org.apache.log4j.LogManager;
import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

/**
 * Created by cuipeng on 2018/1/23.
 */
@RestController
public class DemoController {
    private static Logger log = LogManager.getLogger(DemoController.class);

    @Autowired
    UserService userService;
    @Autowired
    UserInfoService userInfoService;
    @GetMapping("/helloOauth")
    public Principal home(Principal user,HttpServletRequest request) {


        return user;
    }

    @PostMapping("/demo3")
    public int demo3(@RequestParam String tendIds){

//        ImUserInfoDto userInfoBean = userInfoService.getUserInfoById("004d86dbc6f8484890440961e3441019");

        List list= userService.queryDemo(tendIds.split(","));

        return list.size();
    }

    @PostMapping("/demo")
    public String demo(){

//        ImUserInfoDto userInfoBean = userInfoService.getUserInfoById("004d86dbc6f8484890440961e3441019");


        return "hello";
    }

    @PostMapping("/hello")
    public String hellodemo(Principal user){

//        ImUserInfoDto userInfoBean = userInfoService.getUserInfoById("004d86dbc6f8484890440961e3441019");

      log.info(user.getName());
        return "world";
    }
}
