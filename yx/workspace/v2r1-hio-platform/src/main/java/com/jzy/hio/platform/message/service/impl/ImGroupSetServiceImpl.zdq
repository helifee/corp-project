package com.jzy.hio.platform.message.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.jzy.hio.annotation.DataSource;
import com.jzy.hio.base.service.impl.BaseServiceImpl;
import com.jzy.hio.entity.ImGroupSet;
import com.jzy.hio.platform.message.comm.MessageConstant;
import com.jzy.hio.platform.message.mapper.ImGroupSetMapper;
import com.jzy.hio.platform.message.param.ImGroupSaveParam;
import com.jzy.hio.platform.message.service.ImGroupSetService;

@Service
public class ImGroupSetServiceImpl  extends BaseServiceImpl<ImGroupSet> implements ImGroupSetService {

    @Autowired
    ImGroupSetMapper imGroupSetMapper;
    @Override
    public ImGroupSet isValidateGroup(String groupId) {
       return imGroupSetMapper.isValidateGroup(groupId);
    }

    @Override
    public String getHeadUrl(String groupId) {
        return imGroupSetMapper.getHeadUrl(groupId);
    }

    @Override
    public void saveOrUpdate(ImGroupSaveParam imGroupSaveParam) {

        //如果存在则更新 否则新增
        ImGroupSet imGroupSet1 =  isValidateGroup(imGroupSaveParam.getGroupId());
         if(imGroupSet1 != null){
             imGroupSet1.setGroupHeadUrl(imGroupSaveParam.getHeadUrl());
             update(imGroupSet1);
        }else{
             ImGroupSet imGroupSet = new  ImGroupSet();
             imGroupSet.setGroupId(imGroupSaveParam.getGroupId());
             imGroupSet.setGroupHeadUrl(imGroupSaveParam.getHeadUrl());
            imGroupSet.setId(generatePk());
            save(imGroupSet);
        }
    }

}
