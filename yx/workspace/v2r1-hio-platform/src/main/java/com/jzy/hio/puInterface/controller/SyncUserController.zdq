package com.jzy.hio.puInterface.controller;

import java.util.Map;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.jzy.hio.base.Base;
import com.jzy.hio.exception.HioMybatisInsertException;
import com.jzy.hio.puInterface.param.SyncUserParam;
import com.jzy.hio.puInterface.service.SyncUserService;
import com.jzy.hio.springmvc.ApiResponse;

/**
 * 同步招采供方人员
 *
 * @author chc<br       />
 * 2018年6月6日
 */

@RestController
@RequestMapping("/pu")
public class SyncUserController {
	protected Logger logger = LoggerFactory.getLogger(SyncUserController.class);
	@Autowired
	private SyncUserService syncUserService;
	
    @PostMapping(value = "syncUser")
    public ApiResponse<Map<String,Object>> syncUser(@RequestBody SyncUserParam userParam) {
        ApiResponse<Map<String,Object>> ares = new ApiResponse<Map<String,Object>>();
        try {
        	if(Base.isNotEmpty(userParam)) {
        		ares = syncUserService.syncUser(userParam);
        	}
        	ares.setStatus(200);
            ares.setMessage("同步成功！");
        } catch (Exception e) {
            ares.setStatus(400);
            ares.setMessage("同步失败！");
            e.printStackTrace();
            logger.error("同步用户失败{}",e.getMessage());
            throw new HioMybatisInsertException("同步失败！");
        }
        return ares;
    }

}
