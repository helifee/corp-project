package com.jzy.hio.platform.message.service.impl;

import org.springframework.stereotype.Service;

import com.jzy.hio.annotation.DataSource;
import com.jzy.hio.platform.message.comm.EasemobAPI;
import com.jzy.hio.platform.message.comm.OrgInfo;
import com.jzy.hio.platform.message.comm.ResponseHandler;
import com.jzy.hio.platform.message.comm.TokenUtil;
import com.jzy.hio.platform.message.service.ImChatGroupAPI;

import io.swagger.client.ApiException;
import io.swagger.client.api.GroupsApi;
import io.swagger.client.model.Group;

/**
 * 环信im聊天群管理
 * @author wufei
 * @create 2018-04-16 9:59
 **/
@Service
public class ImChatGroupAPIImpl implements ImChatGroupAPI{
    private ResponseHandler responseHandler = new ResponseHandler();
    private GroupsApi api = new GroupsApi();

    @Override
    public Object createChatGroup(Object payload) {
        return responseHandler.handle(new EasemobAPI() {
            @Override
            public Object invokeEasemobAPI() throws ApiException {
                return api.orgNameAppNameChatgroupsPost(OrgInfo.ORG_NAME,OrgInfo.APP_NAME, TokenUtil.getAccessToken(), (Group) payload);
            }
        });
    }
}
