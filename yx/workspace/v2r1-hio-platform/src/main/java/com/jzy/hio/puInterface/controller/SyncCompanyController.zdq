package com.jzy.hio.puInterface.controller;

import java.util.HashMap;
import java.util.Map;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.client.RestTemplate;

import com.jzy.hio.base.Base;
import com.jzy.hio.base.controller.BaseController;
import com.jzy.hio.exception.HioMybatisInsertException;
import com.jzy.hio.puInterface.param.SyncCompanyParam;
import com.jzy.hio.puInterface.service.SyncCompanyService;
import com.jzy.hio.springmvc.ApiResponse;

import net.sf.json.JSON;
import net.sf.json.JSONObject;

/**
 * 同步招采供方公司
 *
 * @author chc<br       />
 * 2018年6月5日
 */

@RestController
@RequestMapping("/pu")
public class SyncCompanyController extends BaseController{
	protected Logger logger = LoggerFactory.getLogger(SyncCompanyController.class);
    @Autowired
    private SyncCompanyService syncCompanyService;

    @PostMapping(value = "syncCompany")
    public ApiResponse<Map<String,Object>> syncCompany(@RequestBody SyncCompanyParam companyParam) {
        ApiResponse<Map<String,Object>> ares = new ApiResponse<Map<String,Object>>();
        
        try {
        	ares = syncCompanyService.syncCompany(companyParam);
        } catch (Exception e) {
            ares.setStatus(400);
            ares.setMessage("同步失败！");
            e.printStackTrace();
            logger.error("同步公司失败corpid：{}",e.getMessage());
            throw new HioMybatisInsertException("同步失败！");
        }
        return ares;
    }
    
}
