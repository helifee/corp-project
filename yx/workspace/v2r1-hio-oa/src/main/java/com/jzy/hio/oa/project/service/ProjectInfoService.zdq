
package com.jzy.hio.oa.project.service;

import com.jzy.hio.annotation.DataSource;
import com.jzy.hio.base.service.BaseService;
import com.jzy.hio.entity.ProjectInfo;
import com.jzy.hio.exception.HioMybatisDeleteException;
import com.jzy.hio.exception.HioMybatisInsertException;
import com.jzy.hio.exception.HioMybatisQueryException;
import com.jzy.hio.exception.HioMybatisUpdateException;
import com.jzy.hio.oa.project.dto.ProjectIdDto;
import com.jzy.hio.oa.project.dto.ProjectInfoDto;
import com.jzy.hio.oa.project.dto.ProjectInfoPageParam;
import com.jzy.hio.oa.project.dto.ProjectInfoStautsParam;
import com.jzy.hio.utils.LoginUser;
import com.jzy.hio.utils.Page;

import java.util.List;
import java.util.Map;

/**
 * 项目信息
 * @author  yangning
 */
public interface ProjectInfoService extends BaseService<ProjectInfo> {



	/**
	 * 查询项目ID
	 *
	 * @param id
	 * @return
	 * @throws HioMybatisQueryException
	 */
	public ProjectIdDto queryProjectId() throws HioMybatisQueryException;

	/**
	 * 根据项目id查询项目信息
	 * @param id
	 * @return
	 * @throws HioMybatisQueryException
	 */
	public ProjectInfoDto queryWhitelistProject(String id) throws HioMybatisQueryException;

	/**
	 * 根据项目id查询项目信息
	 * @param tendId
	 * @param id
	 * @return
	 * @throws HioMybatisQueryException
	 */
	public ProjectInfoDto getProjectInfoById(@DataSource String tendId, String id) throws HioMybatisQueryException;

	/**
	 * 保存项目信息
	 * 
	 * @param projectInfoDto
	 * @param loginUser
	 * @return
	 * @throws HioMybatisInsertException
	 */
	public int saveProjectInfo(ProjectInfoDto projectInfoDto, LoginUser loginUser) throws HioMybatisInsertException;

	/**
	 * 更新项目信息
	 * 
	 * @param projectInfoDto
	 * @param loginUser
	 * @return
	 * @throws HioMybatisUpdateException
	 */
	public int updateProjectInfo(ProjectInfoDto projectInfoDto, LoginUser loginUser) throws HioMybatisUpdateException;

	/**
	 * 更新项目状态
	 * 
	 * @param projectInfoStautsParam
	 * @param loginUser
	 * @return
	 * @throws HioMybatisUpdateException
	 */
	public int updateProjectStauts(ProjectInfoStautsParam projectInfoStautsParam, LoginUser loginUser) throws HioMybatisUpdateException;

	/**
	 * 删除项目信息
	 * 
	 * @param id
	 * @param loginUser
	 * @return
	 * @throws HioMybatisDeleteException
	 */
	public int deleteProjectInfoById(String id, LoginUser loginUser) throws HioMybatisDeleteException;

	/**
	 * 查询项目信息，分页
	 * 
	 * @param param
	 * @param loginUser
	 * @param type  查询类型  全部="0",我创建的="1",我负责的="2",我参与的="3",我分享的="4",我关注的="5"
	 * @return
	 * @throws HioMybatisQueryException
	 */
	public Page queryProjectInfoPage(ProjectInfoPageParam param, LoginUser loginUser, String type) throws HioMybatisQueryException;

	/**
	 * 查询项目信息列表
	 * 
	 * @return
	 * @throws HioMybatisQueryException
	 */
	public List<ProjectInfoDto> queryAllProjectInfo() throws HioMybatisQueryException;

	/**
	 * 根据负责人ID查询项目信息
	 *
	 * @param id
	 * @return
	 * @throws HioMybatisQueryException
	 */
	public List<ProjectInfo> queryProjectInfoByTeamPerson(String id) throws HioMybatisQueryException;

	/**
	 * 根据项目id查询项目信息 带权限
	 * 
	 * @param id
	 * @param loginUser
	 * @return
	 * @throws HioMybatisQueryException
	 */
	public ProjectInfoDto queryProjectInfoById(String id, LoginUser loginUser) throws HioMybatisQueryException;


	/**
	 * 移动端 根据项目id查询项目信息 带权限
	 * @param isOut  0 非外部联系人 1外部联系人
	 * @param id
	 * @param loginUser
	 * @return
	 * @throws HioMybatisQueryException
	 */
	public ProjectInfoDto queryMobileProjectInfoById(String id, String isOut, LoginUser loginUser) throws HioMybatisQueryException;


	/**
	 * 定时任务调用 项目超期计算状态
	 * 
	 * @param tendId
	 *            租户ID
	 * @return
	 * @throws HioMybatisUpdateException
	 */
	public int updateProjectOverdue(@DataSource String tendId) throws HioMybatisUpdateException;

	/**
	 * 查询当前登录用户指定项目的权限
	 * 
	 * @param projectId
	 * @param isOut 是否是外部联系人 0否 1是
	 * @param loginUser
	 * @return
	 * @throws HioMybatisQueryException
	 */
	public String queryProjectPermission(String projectId,String isOut, LoginUser loginUser) throws HioMybatisQueryException;

}
