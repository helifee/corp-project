
package com.jzy.hio.oa.project.service;

import java.util.List;
import java.util.Map;
import java.util.Set;

import com.jzy.hio.annotation.DataSource;
import com.jzy.hio.base.service.BaseService;
import com.jzy.hio.entity.ProjectTeamPerson;
import com.jzy.hio.exception.HioMybatisQueryException;
import com.jzy.hio.exception.HioMybatisUpdateException;
import com.jzy.hio.oa.project.dto.ProjectPermissionParam;
import com.jzy.hio.oa.project.dto.ProjectTeamPersonPageParam;
import com.jzy.hio.oa.project.dto.ProjectTeamQueryParamDto;
import com.jzy.hio.sys.organization.dto.OrganizationDto;
import com.jzy.hio.sys.user.dto.OrganizationUsersDto;
import com.jzy.hio.utils.LoginUser;
import com.jzy.hio.utils.Page;

/**
 * 项目团队
 * @author yangning
 */
public interface ProjectTeamPersonService extends BaseService<ProjectTeamPerson> {

	/**
	 * 查询项目参与人信息
	 * 
	 * @param projectTeamQueryParamDto
	 * @return
	 * @throws HioMybatisQueryException
	 */
	public List<ProjectTeamPerson> queryProjectTeamPersonByTeamQueryParam(ProjectTeamQueryParamDto projectTeamQueryParamDto) throws HioMybatisQueryException;

	/**
	 * 移动端 查询项目参与人信息
	 *
	 * @param tendId
	 * @param projectTeamQueryParamDto
	 * @return
	 * @throws HioMybatisQueryException
	 */
	public List<ProjectTeamPerson> queryMobileProjectTeamPersonByTeamQueryParam(@DataSource String tendId, ProjectTeamQueryParamDto projectTeamQueryParamDto) throws HioMybatisQueryException;

	/**
	 * 根据项目id 查询项目团队人员数
	 * 
	 * @param id
	 * @return
	 * @throws HioMybatisQueryException
	 */
	public int queryProjectTeamPersonCountByProjectId(String id) throws HioMybatisQueryException;



	/**
	 * 更新项目参与人信息
	 * 
	 * @param projectTeamQueryParamDto
	 * @param projectTeamPersonList
	 * @param sendMessageList 发送非外部联系人消息用
	 * @param sendOutMessageList  发送外部联系人消息用
	 * @param loginUser
	 * @return
	 * @throws HioMybatisUpdateException
	 */
	public int updateProjectTeamPerson(List<ProjectTeamPerson> projectTeamPersonList, ProjectTeamQueryParamDto projectTeamQueryParamDto, LoginUser loginUser,Set<String> sendMessageList,Set<String> sendOutMessageList)
			throws HioMybatisUpdateException;

	/**
	 * 更新项目共享人信息
	 * 
	 * @param projectTeamPersonList
	 * @param projectTeamQueryParamDto
	 * @param sendMessageList 发送非外部联系人消息用
	 * @param sendOutMessageList  发送外部联系人消息用
	 * @param loginUser
	 * @return
	 * @throws HioMybatisUpdateException
	 */
	public int updateProjectTeamSharePerson(List<ProjectTeamPerson> projectTeamPersonList, ProjectTeamQueryParamDto projectTeamQueryParamDto, LoginUser loginUser,Set<String> sendMessageList,Set<String> sendOutMessageList)
			throws HioMybatisUpdateException;

	/**
	 * 查询团队信息，分页
	 * 
	 * @param param
	 * @param loginUser
	 * @return
	 * @throws HioMybatisQueryException
	 */
	public Page queryTeamPersonPage(ProjectTeamPersonPageParam param,LoginUser loginUser) throws HioMybatisQueryException;

	/**
	 * 根据项目 登录人 查询权限
	 * 
	 * @param param
	 * @return
	 * @throws HioMybatisQueryException
	 */
	public String queryProjectPermission(ProjectPermissionParam param) throws HioMybatisQueryException;





	/**
	 * 获取项目团队人员树
	 * 
	 * @param loginUser
	 * @param projectId
	 * @return
	 * @throws HioMybatisQueryException
	 */
	public OrganizationUsersDto queryProjectTeamPersonTree(String projectId, LoginUser loginUser) throws HioMybatisQueryException;

	/**
	 * 获取项目团队人员树
	 *
	 * @param loginUser
	 * @param projectId
	 * @return
	 * @throws HioMybatisQueryException
	 */
	public OrganizationDto queryProjectTeamPersonTreeBak20180628(String projectId, LoginUser loginUser) throws HioMybatisQueryException;

}
